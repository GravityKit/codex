<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>GravityView: date.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom-doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GravityView
   &#160;<span id="projectnumber">1.16.1</span>
   </div>
   <div id="projectbrief">Beautifully display your Gravity Forms data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_f202f45fd139109afdc6cee542e9540d.html">tmp</a></li><li class="navelem"><a class="el" href="dir_bab4839c1ebfd97cab4362c92e1efb01.html">wordpress</a></li><li class="navelem"><a class="el" href="dir_0c5b427b534187271510e552c629993b.html">wp-includes</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">tmp/wordpress/wp-includes/date.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="tmp_2wordpress_2wp-includes_2date_8php.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a><span class="comment"></span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Class for generating SQL clauses that filter a primary query according to date.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * `WP_Date_Query` is a helper that allows primary query classes, such as {@see WP_Query},</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * to filter their results by date columns, by generating `WHERE` subclauses to be attached</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * to the primary SQL query string.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * Attempting to filter by an invalid date value (eg month=13) will generate SQL that will</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * return no results. In these cases, a _doing_it_wrong() error notice is also thrown.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * See {@link WP_Date_Query::validate_date_values()}.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * @link https://codex.wordpress.org/Function_Reference/WP_Query Codex page.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * @since 3.7.0</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html">   17</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_w_p___date___query.html">WP_Date_Query</a> {<span class="comment"></span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">     * Array of date queries.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">     * See {@see WP_Date_Query::__construct()} for information on date query arguments.</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">     * @since 3.7.0</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">     * @access public</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">     * @var array</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#a576b05de2f452e4cce4e3de12667ba0f">   27</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="class_w_p___date___query.html#a576b05de2f452e4cce4e3de12667ba0f">$queries</a> = array();</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">     * The default relation between top-level queries. Can be either &#39;AND&#39; or &#39;OR&#39;.</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">     * @since 3.7.0</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">     * @access public</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">     * @var string</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#a6b8f9d1b57d35bdd7a2caf31a72c69f0">   36</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="class_w_p___date___query.html#a6b8f9d1b57d35bdd7a2caf31a72c69f0">$relation</a> = <span class="stringliteral">&#39;AND&#39;</span>;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">     * The column to query against. Can be changed via the query arguments.</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">     * @since 3.7.0</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">     * @access public</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">     * @var string</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">   45</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">$column</a> = <span class="stringliteral">&#39;post_date&#39;</span>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">     * The value comparison operator. Can be changed via the query arguments.</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">     * @since 3.7.0</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">     * @access public</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">     * @var array</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">   54</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a> = <span class="charliteral">&#39;=&#39;</span>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">     * Supported time-related parameter keys.</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">     * @since 4.1.0</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">     * @access public</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">     * @var array</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#a383ce86ffdebe8e2c7d1cfc52324198e">   63</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="class_w_p___date___query.html#a383ce86ffdebe8e2c7d1cfc52324198e">$time_keys</a> = array( <span class="stringliteral">&#39;after&#39;</span>, <span class="stringliteral">&#39;before&#39;</span>, <span class="stringliteral">&#39;year&#39;</span>, <span class="stringliteral">&#39;month&#39;</span>, <span class="stringliteral">&#39;monthnum&#39;</span>, <span class="stringliteral">&#39;week&#39;</span>, <span class="charliteral">&#39;w&#39;</span>, <span class="stringliteral">&#39;dayofyear&#39;</span>, <span class="stringliteral">&#39;day&#39;</span>, <span class="stringliteral">&#39;dayofweek&#39;</span>, <span class="stringliteral">&#39;dayofweek_iso&#39;</span>, <span class="stringliteral">&#39;hour&#39;</span>, <span class="stringliteral">&#39;minute&#39;</span>, <span class="stringliteral">&#39;second&#39;</span> );</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">     * Constructor.</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">     * Time-related parameters that normally require integer values (&#39;year&#39;, &#39;month&#39;, &#39;week&#39;, &#39;dayofyear&#39;, &#39;day&#39;,</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">     * &#39;dayofweek&#39;, &#39;dayofweek_iso&#39;, &#39;hour&#39;, &#39;minute&#39;, &#39;second&#39;) accept arrays of integers for some values of</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">     * &#39;compare&#39;. When &#39;compare&#39; is &#39;IN&#39; or &#39;NOT IN&#39;, arrays are accepted; when &#39;compare&#39; is &#39;BETWEEN&#39; or &#39;NOT</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">     * BETWEEN&#39;, arrays of two valid values are required. See individual argument descriptions for accepted values.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">     * @since 3.7.0</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">     * @since 4.0.0 The $inclusive logic was updated to include all times within the date range.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">     * @since 4.1.0 Introduced &#39;dayofweek_iso&#39; time type parameter.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">     * @access public</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">     * @param array $date_query {</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">     *     Array of date query clauses.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">     *     @type array {</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">     *         @type string $column   Optional. The column to query against. If undefined, inherits the value of</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">     *                                the `$default_column` parameter. Accepts &#39;post_date&#39;, &#39;post_date_gmt&#39;,</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">     *                                &#39;post_modified&#39;,&#39;post_modified_gmt&#39;, &#39;comment_date&#39;, &#39;comment_date_gmt&#39;.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">     *                                Default &#39;post_date&#39;.</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">     *         @type string $compare  Optional. The comparison operator. Accepts &#39;=&#39;, &#39;!=&#39;, &#39;&gt;&#39;, &#39;&gt;=&#39;, &#39;&lt;&#39;, &#39;&lt;=&#39;,</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">     *                                &#39;IN&#39;, &#39;NOT IN&#39;, &#39;BETWEEN&#39;, &#39;NOT BETWEEN&#39;. Default &#39;=&#39;.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">     *         @type string $relation Optional. The boolean relationship between the date queries. Accepts &#39;OR&#39; or &#39;AND&#39;.</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">     *                                Default &#39;OR&#39;.</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">     *         @type array {</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">     *             Optional. An array of first-order clause parameters, or another fully-formed date query.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">     *             @type string|array $before {</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">     *                 Optional. Date to retrieve posts before. Accepts `strtotime()`-compatible string,</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">     *                 or array of &#39;year&#39;, &#39;month&#39;, &#39;day&#39; values.</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">     *                 @type string $year  The four-digit year. Default empty. Accepts any four-digit year.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">     *                 @type string $month Optional when passing array.The month of the year.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">     *                                     Default (string:empty)|(array:1). Accepts numbers 1-12.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">     *                 @type string $day   Optional when passing array.The day of the month.</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">     *                                     Default (string:empty)|(array:1). Accepts numbers 1-31.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">     *             }</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">     *             @type string|array $after {</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">     *                 Optional. Date to retrieve posts after. Accepts `strtotime()`-compatible string,</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">     *                 or array of &#39;year&#39;, &#39;month&#39;, &#39;day&#39; values.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">     *                 @type string $year  The four-digit year. Accepts any four-digit year. Default empty.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">     *                 @type string $month Optional when passing array. The month of the year. Accepts numbers 1-12.</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">     *                                     Default (string:empty)|(array:12).</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">     *                 @type string $day   Optional when passing array.The day of the month. Accepts numbers 1-31.</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">     *                                     Default (string:empty)|(array:last day of month).</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">     *             }</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">     *             @type string       $column        Optional. Used to add a clause comparing a column other than the</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">     *                                               column specified in the top-level `$column` parameter. Accepts</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">     *                                               &#39;post_date&#39;, &#39;post_date_gmt&#39;, &#39;post_modified&#39;, &#39;post_modified_gmt&#39;,</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">     *                                               &#39;comment_date&#39;, &#39;comment_date_gmt&#39;. Default is the value of</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">     *                                               top-level `$column`.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">     *             @type string       $compare       Optional. The comparison operator. Accepts &#39;=&#39;, &#39;!=&#39;, &#39;&gt;&#39;, &#39;&gt;=&#39;,</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">     *                                               &#39;&lt;&#39;, &#39;&lt;=&#39;, &#39;IN&#39;, &#39;NOT IN&#39;, &#39;BETWEEN&#39;, &#39;NOT BETWEEN&#39;. &#39;IN&#39;,</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">     *                                               &#39;NOT IN&#39;, &#39;BETWEEN&#39;, and &#39;NOT BETWEEN&#39;. Comparisons support</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">     *                                               arrays in some time-related parameters. Default &#39;=&#39;.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">     *             @type bool         $inclusive     Optional. Include results from dates specified in &#39;before&#39; or</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">     *                                               &#39;after&#39;. Default false.</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">     *             @type int|array    $year          Optional. The four-digit year number. Accepts any four-digit year</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">     *                                               or an array of years if `$compare` supports it. Default empty.</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">     *             @type int|array    $month         Optional. The two-digit month number. Accepts numbers 1-12 or an</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">     *                                               array of valid numbers if `$compare` supports it. Default empty.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">     *             @type int|array    $week          Optional. The week number of the year. Accepts numbers 0-53 or an</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">     *                                               array of valid numbers if `$compare` supports it. Default empty.</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">     *             @type int|array    $dayofyear     Optional. The day number of the year. Accepts numbers 1-366 or an</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">     *                                               array of valid numbers if `$compare` supports it.</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">     *             @type int|array    $day           Optional. The day of the month. Accepts numbers 1-31 or an array</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">     *                                               of valid numbers if `$compare` supports it. Default empty.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">     *             @type int|array    $dayofweek     Optional. The day number of the week. Accepts numbers 1-7 (1 is</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">     *                                               Sunday) or an array of valid numbers if `$compare` supports it.</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">     *                                               Default empty.</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">     *             @type int|array    $dayofweek_iso Optional. The day number of the week (ISO). Accepts numbers 1-7</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">     *                                               (1 is Monday) or an array of valid numbers if `$compare` supports it.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">     *                                               Default empty.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">     *             @type int|array    $hour          Optional. The hour of the day. Accepts numbers 0-23 or an array</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">     *                                               of valid numbers if `$compare` supports it. Default empty.</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">     *             @type int|array    $minute        Optional. The minute of the hour. Accepts numbers 0-60 or an array</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">     *                                               of valid numbers if `$compare` supports it. Default empty.</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">     *             @type int|array    $second        Optional. The second of the minute. Accepts numbers 0-60 or an</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">     *                                               array of valid numbers if `$compare` supports it. Default empty.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">     *         }</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">     *     }</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">     * }</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">     * @param array $default_column Optional. Default column to query against. Default &#39;post_date&#39;.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">     *                              Accepts &#39;post_date&#39;, &#39;post_date_gmt&#39;, &#39;post_modified&#39;, &#39;post_modified_gmt&#39;,</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">     *                              &#39;comment_date&#39;, &#39;comment_date_gmt&#39;.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#a52696f134cb3c968bfaca2a8120f7414">  153</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_w_p___date___query.html#a52696f134cb3c968bfaca2a8120f7414">__construct</a>( $date_query, $default_column = <span class="stringliteral">&#39;post_date&#39;</span> ) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">if</span> ( isset( $date_query[<span class="stringliteral">&#39;relation&#39;</span>] ) &amp;&amp; <span class="stringliteral">&#39;OR&#39;</span> === strtoupper( $date_query[<span class="stringliteral">&#39;relation&#39;</span>] ) ) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            $this-&gt;relation = <span class="stringliteral">&#39;OR&#39;</span>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            $this-&gt;relation = <span class="stringliteral">&#39;AND&#39;</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">if</span> ( ! is_array( $date_query ) ) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="comment">// Support for passing time-based keys in the top level of the $date_query array.</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordflow">if</span> ( ! isset( $date_query[0] ) &amp;&amp; ! empty( $date_query ) ) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            $date_query = array( $date_query );</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">if</span> ( empty( $date_query ) ) {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $date_query[<span class="stringliteral">&#39;column&#39;</span>] ) ) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            $date_query[<span class="stringliteral">&#39;column&#39;</span>] = <a class="code" href="formatting_8php.html#a504d7c0a95e0e63a5d6133117749470b">esc_sql</a>( $date_query[<span class="stringliteral">&#39;column&#39;</span>] );</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            $date_query[<span class="stringliteral">&#39;column&#39;</span>] = <a class="code" href="formatting_8php.html#a504d7c0a95e0e63a5d6133117749470b">esc_sql</a>( $default_column );</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        $this-&gt;<a class="code" href="edit-comments_8php.html#a3153c8d633c784d612d8d3cba1bccc1e">column</a> = $this-&gt;<a class="code" href="class_w_p___date___query.html#a63379d41de8f9108e8b9a2f65976f4f5">validate_column</a>( $this-&gt;<a class="code" href="edit-comments_8php.html#a3153c8d633c784d612d8d3cba1bccc1e">column</a> );</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        $this-&gt;compare = $this-&gt;<a class="code" href="class_w_p___date___query.html#ac1488c7d47b5522fa3ff30fbec175be7">get_compare</a>( $date_query );</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        $this-&gt;queries = $this-&gt;<a class="code" href="class_w_p___date___query.html#af35bfe752fe4204de44f37edfb42756e">sanitize_query</a>( $date_query );</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">     * Recursive-friendly query sanitizer.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">     * Ensures that each query-level clause has a &#39;relation&#39; key, and that</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">     * each first-order clause contains all the necessary keys from</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">     * `$defaults`.</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">     * @since 4.1.0</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">     * @access public</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">     * @param array $queries</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">     * @param array $parent_query</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">     * @return array Sanitized queries.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#af35bfe752fe4204de44f37edfb42756e">  202</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_w_p___date___query.html#af35bfe752fe4204de44f37edfb42756e">sanitize_query</a>( <a class="code" href="class_w_p___date___query.html#a576b05de2f452e4cce4e3de12667ba0f">$queries</a>, $parent_query = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        $cleaned_query = array();</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        $defaults = array(</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <span class="stringliteral">&#39;column&#39;</span>   =&gt; <span class="stringliteral">&#39;post_date&#39;</span>,</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="stringliteral">&#39;compare&#39;</span>  =&gt; <span class="charliteral">&#39;=&#39;</span>,</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="stringliteral">&#39;relation&#39;</span> =&gt; <span class="stringliteral">&#39;AND&#39;</span>,</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        );</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="comment">// Numeric keys should always have array values.</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">foreach</span> ( <a class="code" href="class_w_p___date___query.html#a576b05de2f452e4cce4e3de12667ba0f">$queries</a> as $qkey =&gt; $qvalue ) {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">if</span> ( is_numeric( $qkey ) &amp;&amp; ! is_array( $qvalue ) ) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                unset( <a class="code" href="class_w_p___date___query.html#a576b05de2f452e4cce4e3de12667ba0f">$queries</a>[ $qkey ] );</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="comment">// Each query should have a value for each default key. Inherit from the parent when possible.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordflow">foreach</span> ( $defaults as $dkey =&gt; $dvalue ) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">if</span> ( isset( <a class="code" href="class_w_p___date___query.html#a576b05de2f452e4cce4e3de12667ba0f">$queries</a>[ $dkey ] ) ) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="keywordflow">if</span> ( isset( $parent_query[ $dkey ] ) ) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                <a class="code" href="class_w_p___date___query.html#a576b05de2f452e4cce4e3de12667ba0f">$queries</a>[ $dkey ] = $parent_query[ $dkey ];</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                <a class="code" href="class_w_p___date___query.html#a576b05de2f452e4cce4e3de12667ba0f">$queries</a>[ $dkey ] = $dvalue;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="comment">// Validate the dates passed in the query.</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">if</span> ( $this-&gt;<a class="code" href="class_w_p___date___query.html#a5b9c5acc114c045255e09b5e19691b9e">is_first_order_clause</a>( <a class="code" href="class_w_p___date___query.html#a576b05de2f452e4cce4e3de12667ba0f">$queries</a> ) ) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            $this-&gt;<a class="code" href="class_w_p___date___query.html#af3aaa6c650fcd3a5c08c4ab2b82191cc">validate_date_values</a>( <a class="code" href="class_w_p___date___query.html#a576b05de2f452e4cce4e3de12667ba0f">$queries</a> );</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">foreach</span> ( <a class="code" href="class_w_p___date___query.html#a576b05de2f452e4cce4e3de12667ba0f">$queries</a> as $key =&gt; $q ) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="keywordflow">if</span> ( ! is_array( $q ) || in_array( $key, $this-&gt;time_keys, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                <span class="comment">// This is a first-order query. Trust the values and sanitize when building SQL.</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                $cleaned_query[ $key ] = $q;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                <span class="comment">// Any array without a time key is another query, so we recurse.</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                $cleaned_query[] = $this-&gt;<a class="code" href="class_w_p___date___query.html#af35bfe752fe4204de44f37edfb42756e">sanitize_query</a>( $q, <a class="code" href="class_w_p___date___query.html#a576b05de2f452e4cce4e3de12667ba0f">$queries</a> );</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">return</span> $cleaned_query;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">     * Determine whether this is a first-order clause.</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">     * Checks to see if the current clause has any time-related keys.</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">     * If so, it&#39;s first-order.</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">     * @param  array $query Query clause.</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">     * @return bool True if this is a first-order clause.</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#a5b9c5acc114c045255e09b5e19691b9e">  258</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code" href="class_w_p___date___query.html#a5b9c5acc114c045255e09b5e19691b9e">is_first_order_clause</a>( $query ) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <a class="code" href="class_w_p___date___query.html#a383ce86ffdebe8e2c7d1cfc52324198e">$time_keys</a> = array_intersect( $this-&gt;time_keys, array_keys( $query ) );</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">return</span> ! empty( <a class="code" href="class_w_p___date___query.html#a383ce86ffdebe8e2c7d1cfc52324198e">$time_keys</a> );</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">     * Determines and validates what comparison operator to use.</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">     * @since 3.7.0</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">     * @access public</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">     * @param array $query A date query or a date subquery.</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">     * @return string The comparison operator.</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#ac1488c7d47b5522fa3ff30fbec175be7">  272</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_w_p___date___query.html#ac1488c7d47b5522fa3ff30fbec175be7">get_compare</a>( $query ) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $query[<span class="stringliteral">&#39;compare&#39;</span>] ) &amp;&amp; in_array( $query[<span class="stringliteral">&#39;compare&#39;</span>], array( <span class="charliteral">&#39;=&#39;</span>, <span class="stringliteral">&#39;!=&#39;</span>, <span class="charliteral">&#39;&gt;&#39;</span>, <span class="stringliteral">&#39;&gt;=&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, <span class="stringliteral">&#39;IN&#39;</span>, <span class="stringliteral">&#39;NOT IN&#39;</span>, <span class="stringliteral">&#39;BETWEEN&#39;</span>, <span class="stringliteral">&#39;NOT BETWEEN&#39;</span> ) ) )</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <span class="keywordflow">return</span> strtoupper( $query[<span class="stringliteral">&#39;compare&#39;</span>] );</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$this-&gt;compare</a>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">     * Validates the given date_query values and triggers errors if something is not valid.</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">     * Note that date queries with invalid date ranges are allowed to</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">     * continue (though of course no items will be found for impossible dates).</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">     * This method only generates debug notices for these cases.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">     * @since  4.1.0</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">     * @access public</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">     * @param  array $date_query The date_query array.</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">     * @return bool  True if all values in the query are valid, false if one or more fail.</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#af3aaa6c650fcd3a5c08c4ab2b82191cc">  292</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_w_p___date___query.html#af3aaa6c650fcd3a5c08c4ab2b82191cc">validate_date_values</a>( $date_query = array() ) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">if</span> ( empty( $date_query ) ) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        $valid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">         * Validate &#39;before&#39; and &#39;after&#39; up front, then let the</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">         * validation routine continue to be sure that all invalid</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">         * values generate errors too.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">if</span> ( array_key_exists( <span class="stringliteral">&#39;before&#39;</span>, $date_query ) &amp;&amp; is_array( $date_query[<span class="stringliteral">&#39;before&#39;</span>] ) ){</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            $valid = $this-&gt;<a class="code" href="class_w_p___date___query.html#af3aaa6c650fcd3a5c08c4ab2b82191cc">validate_date_values</a>( $date_query[<span class="stringliteral">&#39;before&#39;</span>] );</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">if</span> ( array_key_exists( <span class="stringliteral">&#39;after&#39;</span>, $date_query ) &amp;&amp; is_array( $date_query[<span class="stringliteral">&#39;after&#39;</span>] ) ){</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            $valid = $this-&gt;<a class="code" href="class_w_p___date___query.html#af3aaa6c650fcd3a5c08c4ab2b82191cc">validate_date_values</a>( $date_query[<span class="stringliteral">&#39;after&#39;</span>] );</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="comment">// Array containing all min-max checks.</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        $min_max_checks = array();</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="comment">// Days per year.</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">if</span> ( array_key_exists( <span class="stringliteral">&#39;year&#39;</span>, $date_query ) ) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">             * If a year exists in the date query, we can use it to get the days.</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">             * If multiple years are provided (as in a BETWEEN), use the first one.</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="keywordflow">if</span> ( is_array( $date_query[<span class="stringliteral">&#39;year&#39;</span>] ) ) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                $_year = reset( $date_query[<span class="stringliteral">&#39;year&#39;</span>] );</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                $_year = $date_query[<span class="stringliteral">&#39;year&#39;</span>];</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            $max_days_of_year = <a class="code" href="options-permalink_8php.html#a642d4aa9cec81e63ddf673048f68132d">date</a>( <span class="charliteral">&#39;z&#39;</span>, mktime( 0, 0, 0, 12, 31, $_year ) ) + 1;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="comment">// otherwise we use the max of 366 (leap-year)</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            $max_days_of_year = 366;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        $min_max_checks[<span class="stringliteral">&#39;dayofyear&#39;</span>] = array(</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="stringliteral">&#39;min&#39;</span> =&gt; 1,</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <span class="stringliteral">&#39;max&#39;</span> =&gt; $max_days_of_year</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        );</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="comment">// Days per week.</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        $min_max_checks[<span class="stringliteral">&#39;dayofweek&#39;</span>] = array(</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <span class="stringliteral">&#39;min&#39;</span> =&gt; 1,</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <span class="stringliteral">&#39;max&#39;</span> =&gt; 7</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        );</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="comment">// Days per week.</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        $min_max_checks[<span class="stringliteral">&#39;dayofweek_iso&#39;</span>] = array(</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <span class="stringliteral">&#39;min&#39;</span> =&gt; 1,</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            <span class="stringliteral">&#39;max&#39;</span> =&gt; 7</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        );</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="comment">// Months per year.</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        $min_max_checks[<span class="stringliteral">&#39;month&#39;</span>] = array(</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <span class="stringliteral">&#39;min&#39;</span> =&gt; 1,</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="stringliteral">&#39;max&#39;</span> =&gt; 12</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        );</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="comment">// Weeks per year.</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordflow">if</span> ( isset( $_year ) ) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">             * If we have a specific year, use it to calculate number of weeks.</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">             * Note: the number of weeks in a year is the date in which Dec 28 appears.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            $week_count = <a class="code" href="options-permalink_8php.html#a642d4aa9cec81e63ddf673048f68132d">date</a>( <span class="charliteral">&#39;W&#39;</span>, mktime( 0, 0, 0, 12, 28, $_year ) );</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <span class="comment">// Otherwise set the week-count to a maximum of 53.</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            $week_count = 53;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        $min_max_checks[<span class="stringliteral">&#39;week&#39;</span>] = array(</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <span class="stringliteral">&#39;min&#39;</span> =&gt; 1,</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <span class="stringliteral">&#39;max&#39;</span> =&gt; $week_count</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        );</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="comment">// Days per month.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        $min_max_checks[<span class="stringliteral">&#39;day&#39;</span>] = array(</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="stringliteral">&#39;min&#39;</span> =&gt; 1,</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="stringliteral">&#39;max&#39;</span> =&gt; 31</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        );</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="comment">// Hours per day.</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        $min_max_checks[<span class="stringliteral">&#39;hour&#39;</span>] = array(</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            <span class="stringliteral">&#39;min&#39;</span> =&gt; 0,</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="stringliteral">&#39;max&#39;</span> =&gt; 23</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        );</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="comment">// Minutes per hour.</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        $min_max_checks[<span class="stringliteral">&#39;minute&#39;</span>] = array(</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="stringliteral">&#39;min&#39;</span> =&gt; 0,</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="stringliteral">&#39;max&#39;</span> =&gt; 59</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        );</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="comment">// Seconds per minute.</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        $min_max_checks[<span class="stringliteral">&#39;second&#39;</span>] = array(</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="stringliteral">&#39;min&#39;</span> =&gt; 0,</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="stringliteral">&#39;max&#39;</span> =&gt; 59</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        );</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="comment">// Concatenate and throw a notice for each invalid value.</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="keywordflow">foreach</span> ( $min_max_checks as $key =&gt; $check ) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keywordflow">if</span> ( ! array_key_exists( $key, $date_query ) ) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <span class="comment">// Throw a notice for each failing value.</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <span class="keywordflow">foreach</span> ( (array) $date_query[ $key ] as $_value ) {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                $is_between = $_value &gt;= $check[<span class="stringliteral">&#39;min&#39;</span>] &amp;&amp; $_value &lt;= $check[<span class="stringliteral">&#39;max&#39;</span>];</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                <span class="keywordflow">if</span> ( ! is_numeric( $_value ) || ! $is_between ) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                    $error = sprintf(</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                        <span class="comment">/* translators: Date query invalid date message: 1: invalid value, 2: type of value, 3: minimum valid value, 4: maximum valid value */</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                        <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Invalid value %1$s for %2$s. Expected value should be between %3$s and %4$s.&#39;</span> ),</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                        <span class="stringliteral">&#39;&lt;code&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $_value ) . <span class="stringliteral">&#39;&lt;/code&gt;&#39;</span>,</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                        <span class="stringliteral">&#39;&lt;code&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $key ) . <span class="stringliteral">&#39;&lt;/code&gt;&#39;</span>,</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                        <span class="stringliteral">&#39;&lt;code&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $check[<span class="stringliteral">&#39;min&#39;</span>] ) . <span class="stringliteral">&#39;&lt;/code&gt;&#39;</span>,</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                        <span class="stringliteral">&#39;&lt;code&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $check[<span class="stringliteral">&#39;max&#39;</span>] ) . <span class="stringliteral">&#39;&lt;/code&gt;&#39;</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                    );</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a049c0406648c2a00fce310c517b09cbb">_doing_it_wrong</a>( __CLASS__, $error, <span class="stringliteral">&#39;4.1.0&#39;</span> );</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                    $valid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="comment">// If we already have invalid date messages, don&#39;t bother running through checkdate().</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordflow">if</span> ( ! $valid ) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            <span class="keywordflow">return</span> $valid;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        $day_month_year_error_msg = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        $day_exists   = array_key_exists( <span class="stringliteral">&#39;day&#39;</span>, $date_query ) &amp;&amp; is_numeric( $date_query[<span class="stringliteral">&#39;day&#39;</span>] );</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        $month_exists = array_key_exists( <span class="stringliteral">&#39;month&#39;</span>, $date_query ) &amp;&amp; is_numeric( $date_query[<span class="stringliteral">&#39;month&#39;</span>] );</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        $year_exists  = array_key_exists( <span class="stringliteral">&#39;year&#39;</span>, $date_query ) &amp;&amp; is_numeric( $date_query[<span class="stringliteral">&#39;year&#39;</span>] );</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">if</span> ( $day_exists &amp;&amp; $month_exists &amp;&amp; $year_exists ) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="comment">// 1. Checking day, month, year combination.</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <span class="keywordflow">if</span> ( ! <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a2c2f7f39b8329a7a9eb6287d73c84a08">wp_checkdate</a>( $date_query[<span class="stringliteral">&#39;month&#39;</span>], $date_query[<span class="stringliteral">&#39;day&#39;</span>], $date_query[<span class="stringliteral">&#39;year&#39;</span>], sprintf( <span class="stringliteral">&#39;%s-%s-%s&#39;</span>, $date_query[<span class="stringliteral">&#39;year&#39;</span>], $date_query[<span class="stringliteral">&#39;month&#39;</span>], $date_query[<span class="stringliteral">&#39;day&#39;</span>] ) ) ) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                <span class="comment">/* translators: 1: year, 2: month, 3: day of month */</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                $day_month_year_error_msg = sprintf(</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                    <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;The following values do not describe a valid date: year %1$s, month %2$s, day %3$s.&#39;</span> ),</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                    <span class="stringliteral">&#39;&lt;code&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $date_query[<span class="stringliteral">&#39;year&#39;</span>] ) . <span class="stringliteral">&#39;&lt;/code&gt;&#39;</span>,</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    <span class="stringliteral">&#39;&lt;code&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $date_query[<span class="stringliteral">&#39;month&#39;</span>] ) . <span class="stringliteral">&#39;&lt;/code&gt;&#39;</span>,</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                    <span class="stringliteral">&#39;&lt;code&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $date_query[<span class="stringliteral">&#39;day&#39;</span>] ) . <span class="stringliteral">&#39;&lt;/code&gt;&#39;</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                );</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                $valid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( $day_exists &amp;&amp; $month_exists ) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">             * 2. checking day, month combination</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">             * We use 2012 because, as a leap year, it&#39;s the most permissive.</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <span class="keywordflow">if</span> ( ! <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a2c2f7f39b8329a7a9eb6287d73c84a08">wp_checkdate</a>( $date_query[<span class="stringliteral">&#39;month&#39;</span>], $date_query[<span class="stringliteral">&#39;day&#39;</span>], 2012, sprintf( <span class="stringliteral">&#39;2012-%s-%s&#39;</span>, $date_query[<span class="stringliteral">&#39;month&#39;</span>], $date_query[<span class="stringliteral">&#39;day&#39;</span>] ) ) ) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                <span class="comment">/* translators: 1: month, 2: day of month */</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                $day_month_year_error_msg = sprintf(</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                    <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;The following values do not describe a valid date: month %1$s, day %2$s.&#39;</span> ),</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                    <span class="stringliteral">&#39;&lt;code&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $date_query[<span class="stringliteral">&#39;month&#39;</span>] ) . <span class="stringliteral">&#39;&lt;/code&gt;&#39;</span>,</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                    <span class="stringliteral">&#39;&lt;code&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $date_query[<span class="stringliteral">&#39;day&#39;</span>] ) . <span class="stringliteral">&#39;&lt;/code&gt;&#39;</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                );</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                $valid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $day_month_year_error_msg ) ) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a049c0406648c2a00fce310c517b09cbb">_doing_it_wrong</a>( __CLASS__, $day_month_year_error_msg, <span class="stringliteral">&#39;4.1.0&#39;</span> );</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">return</span> $valid;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">     * Validates a column name parameter.</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">     * Column names without a table prefix (like &#39;post_date&#39;) are checked against a whitelist of</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">     * known tables, and then, if found, have a table prefix (such as &#39;wp_posts.&#39;) prepended.</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">     * Prefixed column names (such as &#39;wp_posts.post_date&#39;) bypass this whitelist check,</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">     * and are only sanitized to remove illegal characters.</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">     * @since 3.7.0</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">     * @access public</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">     * @param string $column The user-supplied column name.</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">     * @return string A validated column name value.</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00488"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#a63379d41de8f9108e8b9a2f65976f4f5">  488</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_w_p___date___query.html#a63379d41de8f9108e8b9a2f65976f4f5">validate_column</a>( <a class="code" href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">$column</a> ) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        global <a class="code" href="schema_8php.html#aaac3ddf81d405fac59e1dceeca05b0a7">$wpdb</a>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        $valid_columns = array(</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <span class="stringliteral">&#39;post_date&#39;</span>, <span class="stringliteral">&#39;post_date_gmt&#39;</span>, <span class="stringliteral">&#39;post_modified&#39;</span>,</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            <span class="stringliteral">&#39;post_modified_gmt&#39;</span>, <span class="stringliteral">&#39;comment_date&#39;</span>, <span class="stringliteral">&#39;comment_date_gmt&#39;</span>,</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <span class="stringliteral">&#39;user_registered&#39;</span>,</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        );</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="comment">// Attempt to detect a table prefix.</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="keywordflow">if</span> ( <span class="keyword">false</span> === strpos( <a class="code" href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">$column</a>, <span class="charliteral">&#39;.&#39;</span> ) ) {<span class="comment"></span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">            /**</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">             * Filter the list of valid date query columns.</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">             *</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">             * @since 3.7.0</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">             * @since 4.1.0 Added &#39;user_registered&#39; to the default recognized columns.</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">             *</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">             * @param array $valid_columns An array of valid date query columns. Defaults</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">             *                             are &#39;post_date&#39;, &#39;post_date_gmt&#39;, &#39;post_modified&#39;,</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">             *                             &#39;post_modified_gmt&#39;, &#39;comment_date&#39;, &#39;comment_date_gmt&#39;,</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">             *                             &#39;user_registered&#39;</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            <span class="keywordflow">if</span> ( ! in_array( <a class="code" href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">$column</a>, <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;date_query_valid_columns&#39;</span>, $valid_columns ) ) ) {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                <a class="code" href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">$column</a> = <span class="stringliteral">&#39;post_date&#39;</span>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            $known_columns = array(</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                $wpdb-&gt;posts =&gt; array(</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                    <span class="stringliteral">&#39;post_date&#39;</span>,</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                    <span class="stringliteral">&#39;post_date_gmt&#39;</span>,</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                    <span class="stringliteral">&#39;post_modified&#39;</span>,</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                    <span class="stringliteral">&#39;post_modified_gmt&#39;</span>,</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                ),</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                $wpdb-&gt;comments =&gt; array(</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                    <span class="stringliteral">&#39;comment_date&#39;</span>,</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                    <span class="stringliteral">&#39;comment_date_gmt&#39;</span>,</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                ),</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                $wpdb-&gt;users =&gt; array(</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                    <span class="stringliteral">&#39;user_registered&#39;</span>,</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                ),</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            );</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <span class="comment">// If it&#39;s a known column name, add the appropriate table prefix.</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            <span class="keywordflow">foreach</span> ( $known_columns as $table_name =&gt; $table_columns ) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                <span class="keywordflow">if</span> ( in_array( <a class="code" href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">$column</a>, $table_columns ) ) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                    <a class="code" href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">$column</a> = $table_name . <span class="charliteral">&#39;.&#39;</span> . <a class="code" href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">$column</a>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                }</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            }</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="comment">// Remove unsafe characters.</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="keywordflow">return</span> preg_replace( <span class="stringliteral">&#39;/[^a-zA-Z0-9_$\.]/&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, <a class="code" href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">$column</a> );</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">     * Generate WHERE clause to be appended to a main query.</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">     * @since 3.7.0</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">     * @access public</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">     * @return string MySQL WHERE clause.</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00552"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#a61e9d3467f10fb7d0d24e5f19e18ccba">  552</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_w_p___date___query.html#a61e9d3467f10fb7d0d24e5f19e18ccba">get_sql</a>() {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        $sql = $this-&gt;<a class="code" href="class_w_p___date___query.html#a9cef34da35af7b0bcf88e50456e3c035">get_sql_clauses</a>();</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        $where = $sql[<span class="stringliteral">&#39;where&#39;</span>];</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">        /**</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">         * Filter the date query WHERE clause.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">         * @since 3.7.0</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">         * @param string        $where WHERE clause of the date query.</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">         * @param WP_Date_Query $this  The WP_Date_Query instance.</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;get_date_sql&#39;</span>, $where, $this );</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">     * Generate SQL clauses to be appended to a main query.</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">     * Called by the public {@see WP_Date_Query::get_sql()}, this method</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">     * is abstracted out to maintain parity with the other Query classes.</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">     * @since 4.1.0</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">     * @access protected</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">     * @return array {</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">     *     Array containing JOIN and WHERE SQL clauses to append to the main query.</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">     *     @type string $join  SQL fragment to append to the main JOIN clause.</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">     *     @type string $where SQL fragment to append to the main WHERE clause.</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">     * }</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00584"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#a9cef34da35af7b0bcf88e50456e3c035">  584</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code" href="class_w_p___date___query.html#a9cef34da35af7b0bcf88e50456e3c035">get_sql_clauses</a>() {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        $sql = $this-&gt;<a class="code" href="class_w_p___date___query.html#aedfaff7f1d9dbd65f318efde036929e6">get_sql_for_query</a>( $this-&gt;queries );</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $sql[<span class="stringliteral">&#39;where&#39;</span>] ) ) {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            $sql[<span class="stringliteral">&#39;where&#39;</span>] = <span class="stringliteral">&#39; AND &#39;</span> . $sql[<span class="stringliteral">&#39;where&#39;</span>];</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        }</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">return</span> $sql;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">     * Generate SQL clauses for a single query array.</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">     * If nested subqueries are found, this method recurses the tree to</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">     * produce the properly nested SQL.</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">     * @since 4.1.0</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">     * @access protected</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment">     * @param array $query Query to parse.</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">     * @param int   $depth Optional. Number of tree levels deep we currently are.</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">     *                     Used to calculate indentation. Default 0.</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">     * @return array {</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">     *     Array containing JOIN and WHERE SQL clauses to append to a single query array.</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">     *     @type string $join  SQL fragment to append to the main JOIN clause.</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">     *     @type string $where SQL fragment to append to the main WHERE clause.</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">     * }</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00613"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#aedfaff7f1d9dbd65f318efde036929e6">  613</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code" href="class_w_p___date___query.html#aedfaff7f1d9dbd65f318efde036929e6">get_sql_for_query</a>( $query, $depth = 0 ) {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        $sql_chunks = array(</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <span class="stringliteral">&#39;join&#39;</span>  =&gt; array(),</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            <span class="stringliteral">&#39;where&#39;</span> =&gt; array(),</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        );</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        $sql = array(</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            <span class="stringliteral">&#39;join&#39;</span>  =&gt; <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            <span class="stringliteral">&#39;where&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        );</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        $indent = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="keywordflow">for</span> ( <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> = 0; <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> &lt; $depth; <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a>++ ) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            $indent .= <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <span class="keywordflow">foreach</span> ( $query as $key =&gt; $clause ) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;relation&#39;</span> === $key ) {</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                <a class="code" href="class_w_p___date___query.html#a6b8f9d1b57d35bdd7a2caf31a72c69f0">$relation</a> = $query[<span class="stringliteral">&#39;relation&#39;</span>];</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( is_array( $clause ) ) {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                <span class="comment">// This is a first-order clause.</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                <span class="keywordflow">if</span> ( $this-&gt;<a class="code" href="class_w_p___date___query.html#a5b9c5acc114c045255e09b5e19691b9e">is_first_order_clause</a>( $clause ) ) {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                    $clause_sql = $this-&gt;<a class="code" href="class_w_p___date___query.html#a56bf80e08c3a11583781258953ba8305">get_sql_for_clause</a>( $clause, $query );</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                    $where_count = count( $clause_sql[<span class="stringliteral">&#39;where&#39;</span>] );</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                    <span class="keywordflow">if</span> ( ! $where_count ) {</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                        $sql_chunks[<span class="stringliteral">&#39;where&#39;</span>][] = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                    } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( 1 === $where_count ) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                        $sql_chunks[<span class="stringliteral">&#39;where&#39;</span>][] = $clause_sql[<span class="stringliteral">&#39;where&#39;</span>][0];</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                        $sql_chunks[<span class="stringliteral">&#39;where&#39;</span>][] = <span class="stringliteral">&#39;( &#39;</span> . implode( <span class="stringliteral">&#39; AND &#39;</span>, $clause_sql[<span class="stringliteral">&#39;where&#39;</span>] ) . <span class="stringliteral">&#39; )&#39;</span>;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                    }</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                    $sql_chunks[<span class="stringliteral">&#39;join&#39;</span>] = array_merge( $sql_chunks[<span class="stringliteral">&#39;join&#39;</span>], $clause_sql[<span class="stringliteral">&#39;join&#39;</span>] );</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                <span class="comment">// This is a subquery, so we recurse.</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                    $clause_sql = $this-&gt;<a class="code" href="class_w_p___date___query.html#aedfaff7f1d9dbd65f318efde036929e6">get_sql_for_query</a>( $clause, $depth + 1 );</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                    $sql_chunks[<span class="stringliteral">&#39;where&#39;</span>][] = $clause_sql[<span class="stringliteral">&#39;where&#39;</span>];</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                    $sql_chunks[<span class="stringliteral">&#39;join&#39;</span>][]  = $clause_sql[<span class="stringliteral">&#39;join&#39;</span>];</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <span class="comment">// Filter to remove empties.</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        $sql_chunks[<span class="stringliteral">&#39;join&#39;</span>]  = array_filter( $sql_chunks[<span class="stringliteral">&#39;join&#39;</span>] );</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        $sql_chunks[<span class="stringliteral">&#39;where&#39;</span>] = array_filter( $sql_chunks[<span class="stringliteral">&#39;where&#39;</span>] );</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <span class="keywordflow">if</span> ( empty( <a class="code" href="class_w_p___date___query.html#a6b8f9d1b57d35bdd7a2caf31a72c69f0">$relation</a> ) ) {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            <a class="code" href="class_w_p___date___query.html#a6b8f9d1b57d35bdd7a2caf31a72c69f0">$relation</a> = <span class="stringliteral">&#39;AND&#39;</span>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="comment">// Filter duplicate JOIN clauses and combine into a single string.</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $sql_chunks[<span class="stringliteral">&#39;join&#39;</span>] ) ) {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            $sql[<span class="stringliteral">&#39;join&#39;</span>] = implode( <span class="charliteral">&#39; &#39;</span>, array_unique( $sql_chunks[<span class="stringliteral">&#39;join&#39;</span>] ) );</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="comment">// Generate a single WHERE clause with proper brackets and indentation.</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $sql_chunks[<span class="stringliteral">&#39;where&#39;</span>] ) ) {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            $sql[<span class="stringliteral">&#39;where&#39;</span>] = <span class="stringliteral">&#39;( &#39;</span> . <span class="stringliteral">&quot;\n  &quot;</span> . $indent . implode( <span class="charliteral">&#39; &#39;</span> . <span class="stringliteral">&quot;\n  &quot;</span> . $indent . <a class="code" href="class_w_p___date___query.html#a6b8f9d1b57d35bdd7a2caf31a72c69f0">$relation</a> . <span class="charliteral">&#39; &#39;</span> . <span class="stringliteral">&quot;\n  &quot;</span> . $indent, $sql_chunks[<span class="stringliteral">&#39;where&#39;</span>] ) . <span class="stringliteral">&quot;\n&quot;</span> . $indent . <span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <span class="keywordflow">return</span> $sql;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    }</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">     * Turns a single date clause into pieces for a WHERE clause.</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment">     * A wrapper for get_sql_for_clause(), included here for backward</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">     * compatibility while retaining the naming convention across Query classes.</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">     * @since  3.7.0</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">     * @access protected</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">     * @param  array $query Date query arguments.</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">     * @return array {</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">     *     Array containing JOIN and WHERE SQL clauses to append to the main query.</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">     *     @type string $join  SQL fragment to append to the main JOIN clause.</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">     *     @type string $where SQL fragment to append to the main WHERE clause.</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment">     * }</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00696"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#a8413cb82a85405c549f363a739fce89b">  696</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code" href="class_w_p___date___query.html#a8413cb82a85405c549f363a739fce89b">get_sql_for_subquery</a>( $query ) {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_w_p___date___query.html#a56bf80e08c3a11583781258953ba8305">get_sql_for_clause</a>( $query, <span class="stringliteral">&#39;&#39;</span> );</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">     * Turns a first-order date query into SQL for a WHERE clause.</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">     * @since  4.1.0</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment">     * @access protected</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">     * @param  array $query        Date query clause.</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">     * @param  array $parent_query Parent query of the current date query.</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment">     * @return array {</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">     *     Array containing JOIN and WHERE SQL clauses to append to the main query.</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment">     *     @type string $join  SQL fragment to append to the main JOIN clause.</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment">     *     @type string $where SQL fragment to append to the main WHERE clause.</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">     * }</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00715"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#a56bf80e08c3a11583781258953ba8305">  715</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code" href="class_w_p___date___query.html#a56bf80e08c3a11583781258953ba8305">get_sql_for_clause</a>( $query, $parent_query ) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        global <a class="code" href="schema_8php.html#aaac3ddf81d405fac59e1dceeca05b0a7">$wpdb</a>;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="comment">// The sub-parts of a $where part.</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        $where_parts = array();</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <a class="code" href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">$column</a> = ( ! empty( $query[<span class="stringliteral">&#39;column&#39;</span>] ) ) ? <a class="code" href="formatting_8php.html#a504d7c0a95e0e63a5d6133117749470b">esc_sql</a>( $query[<span class="stringliteral">&#39;column&#39;</span>] ) : <a class="code" href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">$this-&gt;column</a>;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <a class="code" href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">$column</a> = $this-&gt;<a class="code" href="class_w_p___date___query.html#a63379d41de8f9108e8b9a2f65976f4f5">validate_column</a>( <a class="code" href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">$column</a> );</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a> = $this-&gt;<a class="code" href="class_w_p___date___query.html#ac1488c7d47b5522fa3ff30fbec175be7">get_compare</a>( $query );</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        $inclusive = ! empty( $query[<span class="stringliteral">&#39;inclusive&#39;</span>] );</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="comment">// Assign greater- and less-than values.</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        $lt = <span class="charliteral">&#39;&lt;&#39;</span>;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        $gt = <span class="charliteral">&#39;&gt;&#39;</span>;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="keywordflow">if</span> ( $inclusive ) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            $lt .= <span class="charliteral">&#39;=&#39;</span>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            $gt .= <span class="charliteral">&#39;=&#39;</span>;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="comment">// Range queries.</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $query[<span class="stringliteral">&#39;after&#39;</span>] ) )</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            $where_parts[] = $wpdb-&gt;prepare( <span class="stringliteral">&quot;$column $gt %s&quot;</span>, $this-&gt;<a class="code" href="class_w_p___date___query.html#a0e2910193182c483bd8f158377bb1784">build_mysql_datetime</a>( $query[<span class="stringliteral">&#39;after&#39;</span>], ! $inclusive ) );</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $query[<span class="stringliteral">&#39;before&#39;</span>] ) )</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            $where_parts[] = $wpdb-&gt;prepare( <span class="stringliteral">&quot;$column $lt %s&quot;</span>, $this-&gt;<a class="code" href="class_w_p___date___query.html#a0e2910193182c483bd8f158377bb1784">build_mysql_datetime</a>( $query[<span class="stringliteral">&#39;before&#39;</span>], $inclusive ) );</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <span class="comment">// Specific value queries.</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="keywordflow">if</span> ( isset( $query[<span class="stringliteral">&#39;year&#39;</span>] ) &amp;&amp; <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = $this-&gt;<a class="code" href="class_w_p___date___query.html#ac04080c4243a3015bb3037d082128eff">build_value</a>( <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, $query[<span class="stringliteral">&#39;year&#39;</span>] ) )</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            $where_parts[] = <span class="stringliteral">&quot;YEAR( $column ) $compare $value&quot;</span>;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        <span class="keywordflow">if</span> ( isset( $query[<span class="stringliteral">&#39;month&#39;</span>] ) &amp;&amp; <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = $this-&gt;<a class="code" href="class_w_p___date___query.html#ac04080c4243a3015bb3037d082128eff">build_value</a>( <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, $query[<span class="stringliteral">&#39;month&#39;</span>] ) ) {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            $where_parts[] = <span class="stringliteral">&quot;MONTH( $column ) $compare $value&quot;</span>;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( isset( $query[<span class="stringliteral">&#39;monthnum&#39;</span>] ) &amp;&amp; <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = $this-&gt;<a class="code" href="class_w_p___date___query.html#ac04080c4243a3015bb3037d082128eff">build_value</a>( <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, $query[<span class="stringliteral">&#39;monthnum&#39;</span>] ) ) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            $where_parts[] = <span class="stringliteral">&quot;MONTH( $column ) $compare $value&quot;</span>;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        }</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keywordflow">if</span> ( isset( $query[<span class="stringliteral">&#39;week&#39;</span>] ) &amp;&amp; <span class="keyword">false</span> !== ( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = $this-&gt;<a class="code" href="class_w_p___date___query.html#ac04080c4243a3015bb3037d082128eff">build_value</a>( <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, $query[<span class="stringliteral">&#39;week&#39;</span>] ) ) ) {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            $where_parts[] = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a1d378f62122cd71a7bc4640d7f3f736f">_wp_mysql_week</a>( <a class="code" href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">$column</a> ) . <span class="stringliteral">&quot; $compare $value&quot;</span>;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( isset( $query[<span class="charliteral">&#39;w&#39;</span>] ) &amp;&amp; <span class="keyword">false</span> !== ( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = $this-&gt;<a class="code" href="class_w_p___date___query.html#ac04080c4243a3015bb3037d082128eff">build_value</a>( <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, $query[<span class="charliteral">&#39;w&#39;</span>] ) ) ) {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            $where_parts[] = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a1d378f62122cd71a7bc4640d7f3f736f">_wp_mysql_week</a>( <a class="code" href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">$column</a> ) . <span class="stringliteral">&quot; $compare $value&quot;</span>;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="keywordflow">if</span> ( isset( $query[<span class="stringliteral">&#39;dayofyear&#39;</span>] ) &amp;&amp; <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = $this-&gt;<a class="code" href="class_w_p___date___query.html#ac04080c4243a3015bb3037d082128eff">build_value</a>( <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, $query[<span class="stringliteral">&#39;dayofyear&#39;</span>] ) )</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            $where_parts[] = <span class="stringliteral">&quot;DAYOFYEAR( $column ) $compare $value&quot;</span>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="keywordflow">if</span> ( isset( $query[<span class="stringliteral">&#39;day&#39;</span>] ) &amp;&amp; <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = $this-&gt;<a class="code" href="class_w_p___date___query.html#ac04080c4243a3015bb3037d082128eff">build_value</a>( <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, $query[<span class="stringliteral">&#39;day&#39;</span>] ) )</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            $where_parts[] = <span class="stringliteral">&quot;DAYOFMONTH( $column ) $compare $value&quot;</span>;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="keywordflow">if</span> ( isset( $query[<span class="stringliteral">&#39;dayofweek&#39;</span>] ) &amp;&amp; <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = $this-&gt;<a class="code" href="class_w_p___date___query.html#ac04080c4243a3015bb3037d082128eff">build_value</a>( <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, $query[<span class="stringliteral">&#39;dayofweek&#39;</span>] ) )</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            $where_parts[] = <span class="stringliteral">&quot;DAYOFWEEK( $column ) $compare $value&quot;</span>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="keywordflow">if</span> ( isset( $query[<span class="stringliteral">&#39;dayofweek_iso&#39;</span>] ) &amp;&amp; <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = $this-&gt;<a class="code" href="class_w_p___date___query.html#ac04080c4243a3015bb3037d082128eff">build_value</a>( <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, $query[<span class="stringliteral">&#39;dayofweek_iso&#39;</span>] ) )</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            $where_parts[] = <span class="stringliteral">&quot;WEEKDAY( $column ) + 1 $compare $value&quot;</span>;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="keywordflow">if</span> ( isset( $query[<span class="stringliteral">&#39;hour&#39;</span>] ) || isset( $query[<span class="stringliteral">&#39;minute&#39;</span>] ) || isset( $query[<span class="stringliteral">&#39;second&#39;</span>] ) ) {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            <span class="comment">// Avoid notices.</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            <span class="keywordflow">foreach</span> ( array( <span class="stringliteral">&#39;hour&#39;</span>, <span class="stringliteral">&#39;minute&#39;</span>, <span class="stringliteral">&#39;second&#39;</span> ) as $unit ) {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                <span class="keywordflow">if</span> ( ! isset( $query[ $unit ] ) ) {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                    $query[ $unit ] = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                }</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            <span class="keywordflow">if</span> ( $time_query = $this-&gt;<a class="code" href="class_w_p___date___query.html#ac7b66eaa0aa677bdb4f8a60538df7bad">build_time_query</a>( <a class="code" href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">$column</a>, <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, $query[<span class="stringliteral">&#39;hour&#39;</span>], $query[<span class="stringliteral">&#39;minute&#39;</span>], $query[<span class="stringliteral">&#39;second&#39;</span>] ) ) {</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                $where_parts[] = $time_query;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            }</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        }</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment">         * Return an array of &#39;join&#39; and &#39;where&#39; for compatibility</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="comment">         * with other query classes.</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        <span class="keywordflow">return</span> array(</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            <span class="stringliteral">&#39;where&#39;</span> =&gt; $where_parts,</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <span class="stringliteral">&#39;join&#39;</span>  =&gt; array(),</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        );</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">     * Builds and validates a value string based on the comparison operator.</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment">     * @since 3.7.0</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment">     * @access public</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">     * @param string $compare The compare operator to use</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment">     * @param string|array $value The value</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">     * @return string|false|int The value to be used in SQL or false on error.</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00805"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#ac04080c4243a3015bb3037d082128eff">  805</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_w_p___date___query.html#ac04080c4243a3015bb3037d082128eff">build_value</a>( <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <span class="keywordflow">if</span> ( ! isset( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) )</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <span class="keywordflow">switch</span> ( <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a> ) {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;IN&#39;</span>:</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;NOT IN&#39;</span>:</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = (array) <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                <span class="comment">// Remove non-numeric values.</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = array_filter( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, <span class="stringliteral">&#39;is_numeric&#39;</span> );</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                <span class="keywordflow">if</span> ( empty( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) ) {</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                }</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                <span class="keywordflow">return</span> <span class="charliteral">&#39;(&#39;</span> . implode( <span class="charliteral">&#39;,&#39;</span>, array_map( <span class="stringliteral">&#39;intval&#39;</span>, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) ) . <span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;BETWEEN&#39;</span>:</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;NOT BETWEEN&#39;</span>:</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                <span class="keywordflow">if</span> ( ! is_array( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) || 2 != count( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) ) {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                    <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = array( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                    <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = array_values( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                }</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                <span class="comment">// If either value is non-numeric, bail.</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                <span class="keywordflow">foreach</span> ( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> as $v ) {</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                    <span class="keywordflow">if</span> ( ! is_numeric( $v ) ) {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                    }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = array_map( <span class="stringliteral">&#39;intval&#39;</span>, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>[0] . <span class="stringliteral">&#39; AND &#39;</span> . <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>[1];</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                <span class="keywordflow">if</span> ( ! is_numeric( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) ) {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        }</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment">     * Builds a MySQL format date/time based on some query parameters.</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment">     * You can pass an array of values (year, month, etc.) with missing parameter values being defaulted to</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment">     * either the maximum or minimum values (controlled by the $default_to parameter). Alternatively you can</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">     * pass a string that will be run through strtotime().</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">     * @since 3.7.0</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment">     * @access public</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment">     * @param string|array $datetime       An array of parameters or a strotime() string</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">     * @param bool         $default_to_max Whether to round up incomplete dates. Supported by values</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">     *                                     of $datetime that are arrays, or string values that are a</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">     *                                     subset of MySQL date format (&#39;Y&#39;, &#39;Y-m&#39;, &#39;Y-m-d&#39;, &#39;Y-m-d H:i&#39;).</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">     *                                     Default: false.</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment">     * @return string|false A MySQL format date/time or false on failure</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00868"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#a0e2910193182c483bd8f158377bb1784">  868</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_w_p___date___query.html#a0e2910193182c483bd8f158377bb1784">build_mysql_datetime</a>( $datetime, $default_to_max = <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        <a class="code" href="options-general_8php.html#af1d5ccdee975b8f4d20aaffc5b28557c">$now</a> = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a4dacfef72ebe1c7276f7d94fdbe93554">current_time</a>( <span class="stringliteral">&#39;timestamp&#39;</span> );</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        <span class="keywordflow">if</span> ( ! is_array( $datetime ) ) {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">             * Try to parse some common date formats, so we can detect</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">             * the level of precision and support the &#39;inclusive&#39; parameter.</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            <span class="keywordflow">if</span> ( preg_match( <span class="stringliteral">&#39;/^(\d{4})$/&#39;</span>, $datetime, $matches ) ) {</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                <span class="comment">// Y</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                $datetime = array(</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                    <span class="stringliteral">&#39;year&#39;</span> =&gt; intval( $matches[1] ),</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                );</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( preg_match( <span class="stringliteral">&#39;/^(\d{4})\-(\d{2})$/&#39;</span>, $datetime, $matches ) ) {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                <span class="comment">// Y-m</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                $datetime = array(</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                    <span class="stringliteral">&#39;year&#39;</span>  =&gt; intval( $matches[1] ),</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                    <span class="stringliteral">&#39;month&#39;</span> =&gt; intval( $matches[2] ),</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                );</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( preg_match( <span class="stringliteral">&#39;/^(\d{4})\-(\d{2})\-(\d{2})$/&#39;</span>, $datetime, $matches ) ) {</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                <span class="comment">// Y-m-d</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                $datetime = array(</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                    <span class="stringliteral">&#39;year&#39;</span>  =&gt; intval( $matches[1] ),</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                    <span class="stringliteral">&#39;month&#39;</span> =&gt; intval( $matches[2] ),</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                    <span class="stringliteral">&#39;day&#39;</span>   =&gt; intval( $matches[3] ),</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                );</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( preg_match( <span class="stringliteral">&#39;/^(\d{4})\-(\d{2})\-(\d{2}) (\d{2}):(\d{2})$/&#39;</span>, $datetime, $matches ) ) {</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                <span class="comment">// Y-m-d H:i</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                $datetime = array(</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                    <span class="stringliteral">&#39;year&#39;</span>   =&gt; intval( $matches[1] ),</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                    <span class="stringliteral">&#39;month&#39;</span>  =&gt; intval( $matches[2] ),</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                    <span class="stringliteral">&#39;day&#39;</span>    =&gt; intval( $matches[3] ),</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                    <span class="stringliteral">&#39;hour&#39;</span>   =&gt; intval( $matches[4] ),</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                    <span class="stringliteral">&#39;minute&#39;</span> =&gt; intval( $matches[5] ),</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                );</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            }</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            <span class="comment">// If no match is found, we don&#39;t support default_to_max.</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            <span class="keywordflow">if</span> ( ! is_array( $datetime ) ) {</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                <span class="comment">// @todo Timezone issues here possibly</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                <span class="keywordflow">return</span> gmdate( <span class="stringliteral">&#39;Y-m-d H:i:s&#39;</span>, strtotime( $datetime, <a class="code" href="options-general_8php.html#af1d5ccdee975b8f4d20aaffc5b28557c">$now</a> ) );</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            }</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        }</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        $datetime = array_map( <span class="stringliteral">&#39;absint&#39;</span>, $datetime );</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        <span class="keywordflow">if</span> ( ! isset( $datetime[<span class="stringliteral">&#39;year&#39;</span>] ) )</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            $datetime[<span class="stringliteral">&#39;year&#39;</span>] = gmdate( <span class="charliteral">&#39;Y&#39;</span>, <a class="code" href="options-general_8php.html#af1d5ccdee975b8f4d20aaffc5b28557c">$now</a> );</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <span class="keywordflow">if</span> ( ! isset( $datetime[<span class="stringliteral">&#39;month&#39;</span>] ) )</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            $datetime[<span class="stringliteral">&#39;month&#39;</span>] = ( $default_to_max ) ? 12 : 1;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <span class="keywordflow">if</span> ( ! isset( $datetime[<span class="stringliteral">&#39;day&#39;</span>] ) )</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            $datetime[<span class="stringliteral">&#39;day&#39;</span>] = ( $default_to_max ) ? (int) <a class="code" href="options-permalink_8php.html#a642d4aa9cec81e63ddf673048f68132d">date</a>( <span class="charliteral">&#39;t&#39;</span>, mktime( 0, 0, 0, $datetime[<span class="stringliteral">&#39;month&#39;</span>], 1, $datetime[<span class="stringliteral">&#39;year&#39;</span>] ) ) : 1;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        <span class="keywordflow">if</span> ( ! isset( $datetime[<span class="stringliteral">&#39;hour&#39;</span>] ) )</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            $datetime[<span class="stringliteral">&#39;hour&#39;</span>] = ( $default_to_max ) ? 23 : 0;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        <span class="keywordflow">if</span> ( ! isset( $datetime[<span class="stringliteral">&#39;minute&#39;</span>] ) )</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            $datetime[<span class="stringliteral">&#39;minute&#39;</span>] = ( $default_to_max ) ? 59 : 0;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        <span class="keywordflow">if</span> ( ! isset( $datetime[<span class="stringliteral">&#39;second&#39;</span>] ) )</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            $datetime[<span class="stringliteral">&#39;second&#39;</span>] = ( $default_to_max ) ? 59 : 0;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <span class="keywordflow">return</span> sprintf( <span class="stringliteral">&#39;%04d-%02d-%02d %02d:%02d:%02d&#39;</span>, $datetime[<span class="stringliteral">&#39;year&#39;</span>], $datetime[<span class="stringliteral">&#39;month&#39;</span>], $datetime[<span class="stringliteral">&#39;day&#39;</span>], $datetime[<span class="stringliteral">&#39;hour&#39;</span>], $datetime[<span class="stringliteral">&#39;minute&#39;</span>], $datetime[<span class="stringliteral">&#39;second&#39;</span>] );</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    }</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment">     * Builds a query string for comparing time values (hour, minute, second).</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment">     * If just hour, minute, or second is set than a normal comparison will be done.</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">     * However if multiple values are passed, a pseudo-decimal time will be created</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="comment">     * in order to be able to accurately compare against.</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="comment">     * @since 3.7.0</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment">     * @access public</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment">     * @param string $column The column to query against. Needs to be pre-validated!</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment">     * @param string $compare The comparison operator. Needs to be pre-validated!</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">     * @param int|null $hour Optional. An hour value (0-23).</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">     * @param int|null $minute Optional. A minute value (0-59).</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment">     * @param int|null $second Optional. A second value (0-59).</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment">     * @return string|false A query part or false on failure.</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00956"></a><span class="lineno"><a class="line" href="class_w_p___date___query.html#ac7b66eaa0aa677bdb4f8a60538df7bad">  956</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_w_p___date___query.html#ac7b66eaa0aa677bdb4f8a60538df7bad">build_time_query</a>( <a class="code" href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">$column</a>, <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, $hour = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>, $minute = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>, $second = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        global <a class="code" href="schema_8php.html#aaac3ddf81d405fac59e1dceeca05b0a7">$wpdb</a>;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        <span class="comment">// Have to have at least one</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <span class="keywordflow">if</span> ( ! isset( $hour ) &amp;&amp; ! isset( $minute ) &amp;&amp; ! isset( $second ) )</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        <span class="comment">// Complex combined queries aren&#39;t supported for multi-value queries</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <span class="keywordflow">if</span> ( in_array( <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, array( <span class="stringliteral">&#39;IN&#39;</span>, <span class="stringliteral">&#39;NOT IN&#39;</span>, <span class="stringliteral">&#39;BETWEEN&#39;</span>, <span class="stringliteral">&#39;NOT BETWEEN&#39;</span> ) ) ) {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            $return = array();</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;            <span class="keywordflow">if</span> ( isset( $hour ) &amp;&amp; <span class="keyword">false</span> !== ( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = $this-&gt;<a class="code" href="class_w_p___date___query.html#ac04080c4243a3015bb3037d082128eff">build_value</a>( <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, $hour ) ) )</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                $return[] = <span class="stringliteral">&quot;HOUR( $column ) $compare $value&quot;</span>;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            <span class="keywordflow">if</span> ( isset( $minute ) &amp;&amp; <span class="keyword">false</span> !== ( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = $this-&gt;<a class="code" href="class_w_p___date___query.html#ac04080c4243a3015bb3037d082128eff">build_value</a>( <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, $minute ) ) )</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                $return[] = <span class="stringliteral">&quot;MINUTE( $column ) $compare $value&quot;</span>;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            <span class="keywordflow">if</span> ( isset( $second ) &amp;&amp; <span class="keyword">false</span> !== ( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = $this-&gt;<a class="code" href="class_w_p___date___query.html#ac04080c4243a3015bb3037d082128eff">build_value</a>( <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, $second ) ) )</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                $return[] = <span class="stringliteral">&quot;SECOND( $column ) $compare $value&quot;</span>;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            <span class="keywordflow">return</span> implode( <span class="stringliteral">&#39; AND &#39;</span>, $return );</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        }</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <span class="comment">// Cases where just one unit is set</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <span class="keywordflow">if</span> ( isset( $hour ) &amp;&amp; ! isset( $minute ) &amp;&amp; ! isset( $second ) &amp;&amp; <span class="keyword">false</span> !== ( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = $this-&gt;<a class="code" href="class_w_p___date___query.html#ac04080c4243a3015bb3037d082128eff">build_value</a>( <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, $hour ) ) ) {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;HOUR( $column ) $compare $value&quot;</span>;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( ! isset( $hour ) &amp;&amp; isset( $minute ) &amp;&amp; ! isset( $second ) &amp;&amp; <span class="keyword">false</span> !== ( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = $this-&gt;<a class="code" href="class_w_p___date___query.html#ac04080c4243a3015bb3037d082128eff">build_value</a>( <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, $minute ) ) ) {</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;MINUTE( $column ) $compare $value&quot;</span>;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( ! isset( $hour ) &amp;&amp; ! isset( $minute ) &amp;&amp; isset( $second ) &amp;&amp; <span class="keyword">false</span> !== ( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = $this-&gt;<a class="code" href="class_w_p___date___query.html#ac04080c4243a3015bb3037d082128eff">build_value</a>( <a class="code" href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">$compare</a>, $second ) ) ) {</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;SECOND( $column ) $compare $value&quot;</span>;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        }</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <span class="comment">// Single units were already handled. Since hour &amp; second isn&#39;t allowed, minute must to be set.</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <span class="keywordflow">if</span> ( ! isset( $minute ) )</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> = $time = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="comment">// Hour</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> !== $hour ) {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> .= <span class="stringliteral">&#39;%H.&#39;</span>;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            $time   .= sprintf( <span class="stringliteral">&#39;%02d&#39;</span>, $hour ) . <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;            <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> .= <span class="stringliteral">&#39;0.&#39;</span>;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;            $time   .= <span class="stringliteral">&#39;0.&#39;</span>;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        }</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        <span class="comment">// Minute</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> .= <span class="stringliteral">&#39;%i&#39;</span>;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        $time   .= sprintf( <span class="stringliteral">&#39;%02d&#39;</span>, $minute );</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        <span class="keywordflow">if</span> ( isset( $second ) ) {</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> .= <span class="stringliteral">&#39;%s&#39;</span>;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            $time   .= sprintf( <span class="stringliteral">&#39;%02d&#39;</span>, $second );</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        }</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">return</span> $wpdb-&gt;prepare( <span class="stringliteral">&quot;DATE_FORMAT( $column, %s ) $compare %f&quot;</span>, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a>, $time );</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    }</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;}</div>
<div class="ttc" id="class_w_p___date___query_html_a5b9c5acc114c045255e09b5e19691b9e"><div class="ttname"><a href="class_w_p___date___query.html#a5b9c5acc114c045255e09b5e19691b9e">WP_Date_Query\is_first_order_clause</a></div><div class="ttdeci">is_first_order_clause($query)</div><div class="ttdoc">Determine whether this is a first-order clause. </div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00258">tmp/wordpress/wp-includes/date.php:258</a></div></div>
<div class="ttc" id="class_w_p___date___query_html_a60e9ae05178c483ab3d9ff5c2399a463"><div class="ttname"><a href="class_w_p___date___query.html#a60e9ae05178c483ab3d9ff5c2399a463">WP_Date_Query\$column</a></div><div class="ttdeci">$column</div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00045">tmp/wordpress/wp-includes/date.php:45</a></div></div>
<div class="ttc" id="class_w_p___date___query_html_a52696f134cb3c968bfaca2a8120f7414"><div class="ttname"><a href="class_w_p___date___query.html#a52696f134cb3c968bfaca2a8120f7414">WP_Date_Query\__construct</a></div><div class="ttdeci">__construct($date_query, $default_column= 'post_date')</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00153">tmp/wordpress/wp-includes/date.php:153</a></div></div>
<div class="ttc" id="menu_8php_html_a83018d9153d17d91fbcf3bc10158d34f"><div class="ttname"><a href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a></div><div class="ttdeci">$i</div><div class="ttdef"><b>Definition:</b> <a href="menu_8php_source.html#l00053">menu.php:53</a></div></div>
<div class="ttc" id="class_w_p___date___query_html_ac04080c4243a3015bb3037d082128eff"><div class="ttname"><a href="class_w_p___date___query.html#ac04080c4243a3015bb3037d082128eff">WP_Date_Query\build_value</a></div><div class="ttdeci">build_value($compare, $value)</div><div class="ttdoc">Builds and validates a value string based on the comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00805">tmp/wordpress/wp-includes/date.php:805</a></div></div>
<div class="ttc" id="class_w_p___date___query_html_a0e2910193182c483bd8f158377bb1784"><div class="ttname"><a href="class_w_p___date___query.html#a0e2910193182c483bd8f158377bb1784">WP_Date_Query\build_mysql_datetime</a></div><div class="ttdeci">build_mysql_datetime($datetime, $default_to_max=false)</div><div class="ttdoc">Builds a MySQL format date/time based on some query parameters. </div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00868">tmp/wordpress/wp-includes/date.php:868</a></div></div>
<div class="ttc" id="class_w_p___date___query_html_aedfaff7f1d9dbd65f318efde036929e6"><div class="ttname"><a href="class_w_p___date___query.html#aedfaff7f1d9dbd65f318efde036929e6">WP_Date_Query\get_sql_for_query</a></div><div class="ttdeci">get_sql_for_query($query, $depth=0)</div><div class="ttdoc">Generate SQL clauses for a single query array. </div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00613">tmp/wordpress/wp-includes/date.php:613</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a4dacfef72ebe1c7276f7d94fdbe93554"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a4dacfef72ebe1c7276f7d94fdbe93554">current_time</a></div><div class="ttdeci">current_time($type, $gmt=0)</div><div class="ttdoc">Retrieve the current time based on specified type. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l00061">wordpress/wp-includes/functions.php:61</a></div></div>
<div class="ttc" id="admin_8php_html_af1c9ecf26c0cfd247c0760dd4b594a6d"><div class="ttname"><a href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a></div><div class="ttdeci">if(get_option('db_upgraded')) elseif(get_option('db_version')!=$wp_db_version &amp;&amp;empty($_POST))</div><div class="ttdef"><b>Definition:</b> <a href="admin_8php_source.html#l00045">admin.php:45</a></div></div>
<div class="ttc" id="edit-comments_8php_html_a3153c8d633c784d612d8d3cba1bccc1e"><div class="ttname"><a href="edit-comments_8php.html#a3153c8d633c784d612d8d3cba1bccc1e">column</a></div><div class="ttdeci">s email and blog the commenter &amp;__( 'In the&lt; strong &gt;Comment&lt;/strong &gt; column, hovering over any comment gives you options to approve, reply(and approve), quick edit, edit, spam mark, or trash that comment.'). '&lt;/p &gt;'. '&lt; p &gt;'.__( 'In the&lt; strong &gt;In Response To&lt;/strong &gt; column there are three elements The text is the name of the post that inspired the and links to the post editor for that entry The View Post link leads to that post on your live site The small bubble with the number in it shows the number of approved comments that post has received If there are pending a red notification circle with the number of pending comments is displayed Clicking the notification circle will filter the comments screen to show only pending comments on that post&lt;/p &gt;&lt; p &gt; In the&lt; strong &gt; Submitted On&lt;/strong &gt; column</div><div class="ttdef"><b>Definition:</b> <a href="edit-comments_8php_source.html#l00157">edit-comments.php:157</a></div></div>
<div class="ttc" id="noop_8php_html_a54639394aa645a2277ea41f3cbd23247"><div class="ttname"><a href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a></div><div class="ttdeci">apply_filters()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00026">noop.php:26</a></div></div>
<div class="ttc" id="class_w_p___date___query_html_af3aaa6c650fcd3a5c08c4ab2b82191cc"><div class="ttname"><a href="class_w_p___date___query.html#af3aaa6c650fcd3a5c08c4ab2b82191cc">WP_Date_Query\validate_date_values</a></div><div class="ttdeci">validate_date_values($date_query=array())</div><div class="ttdoc">Validates the given date_query values and triggers errors if something is not valid. </div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00292">tmp/wordpress/wp-includes/date.php:292</a></div></div>
<div class="ttc" id="gquiz__percent_8php_html_a1d2cd7133414dcb5bf74c0f3b3fb99e2"><div class="ttname"><a href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a></div><div class="ttdeci">if(empty($field['value'])) $format</div><div class="ttdoc">Modify the format of the display of the field. </div><div class="ttdef"><b>Definition:</b> <a href="gquiz__percent_8php_source.html#l00025">gquiz_percent.php:25</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a1d378f62122cd71a7bc4640d7f3f736f"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a1d378f62122cd71a7bc4640d7f3f736f">_wp_mysql_week</a></div><div class="ttdeci">_wp_mysql_week($column)</div><div class="ttdoc">Return a MySQL expression for selecting the week number based on the start_of_week option...</div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l04629">wordpress/wp-includes/functions.php:4629</a></div></div>
<div class="ttc" id="class_w_p___date___query_html_ac7b66eaa0aa677bdb4f8a60538df7bad"><div class="ttname"><a href="class_w_p___date___query.html#ac7b66eaa0aa677bdb4f8a60538df7bad">WP_Date_Query\build_time_query</a></div><div class="ttdeci">build_time_query($column, $compare, $hour=null, $minute=null, $second=null)</div><div class="ttdoc">Builds a query string for comparing time values (hour, minute, second). </div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00956">tmp/wordpress/wp-includes/date.php:956</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a049c0406648c2a00fce310c517b09cbb"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a049c0406648c2a00fce310c517b09cbb">_doing_it_wrong</a></div><div class="ttdeci">_doing_it_wrong($function, $message, $version)</div><div class="ttdoc">Mark something as being incorrectly called. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l03788">wordpress/wp-includes/functions.php:3788</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a1d3eb00c9fe92a90149ac06ca6c28132"><div class="ttname"><a href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv'foreach(get_object_taxonomies($post) as $tax_name) if($thumbnail_support &amp;&amp;current_user_can( 'upload_files')) add_meta_box('postimagediv' esc_html($post_type_object-&gt;labels-&gt;featured_image)</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00266">edit-form-advanced.php:266</a></div></div>
<div class="ttc" id="class_w_p___date___query_html_a61e9d3467f10fb7d0d24e5f19e18ccba"><div class="ttname"><a href="class_w_p___date___query.html#a61e9d3467f10fb7d0d24e5f19e18ccba">WP_Date_Query\get_sql</a></div><div class="ttdeci">get_sql()</div><div class="ttdoc">Generate WHERE clause to be appended to a main query. </div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00552">tmp/wordpress/wp-includes/date.php:552</a></div></div>
<div class="ttc" id="options-general_8php_html_af1d5ccdee975b8f4d20aaffc5b28557c"><div class="ttname"><a href="options-general_8php.html#af1d5ccdee975b8f4d20aaffc5b28557c">$now</a></div><div class="ttdeci">$now</div><div class="ttdef"><b>Definition:</b> <a href="options-general_8php_source.html#l00174">options-general.php:174</a></div></div>
<div class="ttc" id="search-field-date__range_8php_html_a1334d61bbc340f973c09c7031f3c21f2"><div class="ttname"><a href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a></div><div class="ttdeci">$value</div><div class="ttdef"><b>Definition:</b> <a href="search-field-date__range_8php_source.html#l00010">search-field-date_range.php:10</a></div></div>
<div class="ttc" id="class_w_p___date___query_html_a6b8f9d1b57d35bdd7a2caf31a72c69f0"><div class="ttname"><a href="class_w_p___date___query.html#a6b8f9d1b57d35bdd7a2caf31a72c69f0">WP_Date_Query\$relation</a></div><div class="ttdeci">$relation</div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00036">tmp/wordpress/wp-includes/date.php:36</a></div></div>
<div class="ttc" id="options-permalink_8php_html_a642d4aa9cec81e63ddf673048f68132d"><div class="ttname"><a href="options-permalink_8php.html#a642d4aa9cec81e63ddf673048f68132d">date</a></div><div class="ttdeci">hence the name permalink&lt;/p &gt;&lt; p &gt; This screen allows you to choose your permalink structure You can choose from common settings or create custom URL structures&lt;/p &gt;&lt; p &gt; You must click the Save Changes button at the bottom of the screen for new settings to take effect&lt;/p &gt; id permalink settings title Permalink Settings content&lt; p &gt; Permalinks can contain useful such as the post date</div><div class="ttdef"><b>Definition:</b> <a href="options-permalink_8php_source.html#l00029">options-permalink.php:29</a></div></div>
<div class="ttc" id="class_w_p___date___query_html_af35bfe752fe4204de44f37edfb42756e"><div class="ttname"><a href="class_w_p___date___query.html#af35bfe752fe4204de44f37edfb42756e">WP_Date_Query\sanitize_query</a></div><div class="ttdeci">sanitize_query($queries, $parent_query=null)</div><div class="ttdoc">Recursive-friendly query sanitizer. </div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00202">tmp/wordpress/wp-includes/date.php:202</a></div></div>
<div class="ttc" id="class_w_p___date___query_html_a576b05de2f452e4cce4e3de12667ba0f"><div class="ttname"><a href="class_w_p___date___query.html#a576b05de2f452e4cce4e3de12667ba0f">WP_Date_Query\$queries</a></div><div class="ttdeci">$queries</div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00027">tmp/wordpress/wp-includes/date.php:27</a></div></div>
<div class="ttc" id="class_w_p___date___query_html_a383ce86ffdebe8e2c7d1cfc52324198e"><div class="ttname"><a href="class_w_p___date___query.html#a383ce86ffdebe8e2c7d1cfc52324198e">WP_Date_Query\$time_keys</a></div><div class="ttdeci">$time_keys</div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00063">tmp/wordpress/wp-includes/date.php:63</a></div></div>
<div class="ttc" id="class_w_p___date___query_html"><div class="ttname"><a href="class_w_p___date___query.html">WP_Date_Query</a></div><div class="ttdoc">Class for generating SQL clauses that filter a primary query according to date. </div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00017">tmp/wordpress/wp-includes/date.php:17</a></div></div>
<div class="ttc" id="class_w_p___date___query_html_ac1488c7d47b5522fa3ff30fbec175be7"><div class="ttname"><a href="class_w_p___date___query.html#ac1488c7d47b5522fa3ff30fbec175be7">WP_Date_Query\get_compare</a></div><div class="ttdeci">get_compare($query)</div><div class="ttdoc">Determines and validates what comparison operator to use. </div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00272">tmp/wordpress/wp-includes/date.php:272</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a2c2f7f39b8329a7a9eb6287d73c84a08"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a2c2f7f39b8329a7a9eb6287d73c84a08">wp_checkdate</a></div><div class="ttdeci">wp_checkdate($month, $day, $year, $source_date)</div><div class="ttdoc">Test if the supplied date is valid for the Gregorian calendar. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l04882">wordpress/wp-includes/functions.php:4882</a></div></div>
<div class="ttc" id="class_w_p___date___query_html_a9cef34da35af7b0bcf88e50456e3c035"><div class="ttname"><a href="class_w_p___date___query.html#a9cef34da35af7b0bcf88e50456e3c035">WP_Date_Query\get_sql_clauses</a></div><div class="ttdeci">get_sql_clauses()</div><div class="ttdoc">Generate SQL clauses to be appended to a main query. </div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00584">tmp/wordpress/wp-includes/date.php:584</a></div></div>
<div class="ttc" id="class_w_p___date___query_html_a8413cb82a85405c549f363a739fce89b"><div class="ttname"><a href="class_w_p___date___query.html#a8413cb82a85405c549f363a739fce89b">WP_Date_Query\get_sql_for_subquery</a></div><div class="ttdeci">get_sql_for_subquery($query)</div><div class="ttdoc">Turns a single date clause into pieces for a WHERE clause. </div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00696">tmp/wordpress/wp-includes/date.php:696</a></div></div>
<div class="ttc" id="class_w_p___date___query_html_a56bf80e08c3a11583781258953ba8305"><div class="ttname"><a href="class_w_p___date___query.html#a56bf80e08c3a11583781258953ba8305">WP_Date_Query\get_sql_for_clause</a></div><div class="ttdeci">get_sql_for_clause($query, $parent_query)</div><div class="ttdoc">Turns a first-order date query into SQL for a WHERE clause. </div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00715">tmp/wordpress/wp-includes/date.php:715</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a46b3622ccc6d393dfd97e355b7bd0bd6"><div class="ttname"><a href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv' null</div><div class="ttdoc">When displaying the single entry we should always know to which View it belongs (the context is every...</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00244">edit-form-advanced.php:244</a></div></div>
<div class="ttc" id="formatting_8php_html_a504d7c0a95e0e63a5d6133117749470b"><div class="ttname"><a href="formatting_8php.html#a504d7c0a95e0e63a5d6133117749470b">esc_sql</a></div><div class="ttdeci">esc_sql($data)</div><div class="ttdoc">Escapes data for use in a MySQL query. </div><div class="ttdef"><b>Definition:</b> <a href="formatting_8php_source.html#l03346">formatting.php:3346</a></div></div>
<div class="ttc" id="namespacephp_html"><div class="ttname"><a href="namespacephp.html">php</a></div></div>
<div class="ttc" id="class_w_p___date___query_html_a63379d41de8f9108e8b9a2f65976f4f5"><div class="ttname"><a href="class_w_p___date___query.html#a63379d41de8f9108e8b9a2f65976f4f5">WP_Date_Query\validate_column</a></div><div class="ttdeci">validate_column($column)</div><div class="ttdoc">Validates a column name parameter. </div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00488">tmp/wordpress/wp-includes/date.php:488</a></div></div>
<div class="ttc" id="class_w_p___date___query_html_a1b3dadff718c9eb25a4af1534a59adab"><div class="ttname"><a href="class_w_p___date___query.html#a1b3dadff718c9eb25a4af1534a59adab">WP_Date_Query\$compare</a></div><div class="ttdeci">$compare</div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-includes_2date_8php_source.html#l00054">tmp/wordpress/wp-includes/date.php:54</a></div></div>
<div class="ttc" id="schema_8php_html_aaac3ddf81d405fac59e1dceeca05b0a7"><div class="ttname"><a href="schema_8php.html#aaac3ddf81d405fac59e1dceeca05b0a7">$wpdb</a></div><div class="ttdeci">global $wpdb</div><div class="ttdoc">Declare these as global in case schema.php is included from a function. </div><div class="ttdef"><b>Definition:</b> <a href="schema_8php_source.html#l00018">schema.php:18</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a866e7f0f003101850a78f372dd07bd2a"><div class="ttname"><a href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv'foreach(get_object_taxonomies($post) as $tax_name) if($thumbnail_support &amp;&amp;current_user_can( 'upload_files')) add_meta_box('postimagediv'if(post_type_supports($post_type, 'excerpt')) add_meta_box('postexcerpt' __('Excerpt')</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00269">edit-form-advanced.php:269</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/>
<script type="text/javascript">
    jQuery( document ).ready( function( $ ) {
        $( 'a.anchor[id^=_filters],a.anchor[id^=_actions]' ).each( function() {
            $( this )
                .text('#')
                .attr( 'href', function() {
                    return '#' + $( this ).attr( 'id' );
                }).prependTo( $( this ).parent('dt' ).next('dd') );
        });
    });
</script>
</body>
</html>
