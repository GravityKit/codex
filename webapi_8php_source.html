<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>GravityView: webapi.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom-doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GravityView
   &#160;<span id="projectnumber">1.16.1</span>
   </div>
   <div id="projectbrief">Beautifully display your Gravity Forms data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_f202f45fd139109afdc6cee542e9540d.html">tmp</a></li><li class="navelem"><a class="el" href="dir_3d569d22f974606bd3e53ee7510e95b5.html">gravityforms</a></li><li class="navelem"><a class="el" href="dir_8abe01bff1563ad3ca6025c6782b6a2a.html">includes</a></li><li class="navelem"><a class="el" href="dir_03c460a7a367c2e5a232037880e59c6c.html">webapi</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">webapi.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="webapi_8php.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keywordflow">if</span> ( ! class_exists( <span class="stringliteral">&#39;GFForms&#39;</span> ) ) {</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    die();</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;}</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keywordflow">if</span> ( ! defined( <span class="stringliteral">&#39;GFWEBAPI_REQUIRE_SIGNATURE&#39;</span> ) ) {</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    define( <span class="stringliteral">&#39;GFWEBAPI_REQUIRE_SIGNATURE&#39;</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;}</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keywordflow">if</span> ( ! defined( <span class="stringliteral">&#39;GFWEBAPI_SLUG&#39;</span> ) ) {</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    define( <span class="stringliteral">&#39;GFWEBAPI_SLUG&#39;</span>, <span class="stringliteral">&#39;gravityformsapi&#39;</span> );</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;}</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keywordflow">if</span> ( ! defined( <span class="stringliteral">&#39;GFWEBAPI_ROUTE_VAR&#39;</span> ) ) {</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    define( <span class="stringliteral">&#39;GFWEBAPI_ROUTE_VAR&#39;</span>, <span class="stringliteral">&#39;gfapi_route&#39;</span> );</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;}</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keywordflow">if</span> ( ! defined( <span class="stringliteral">&#39;GFWEBAPI_API_BASE_URL&#39;</span> ) ) {</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    define( <span class="stringliteral">&#39;GFWEBAPI_API_BASE_URL&#39;</span>, <a class="code" href="noop_8php.html#ad8e3cb90f141ac5aa6d225bc337efc9c">site_url</a>( GFWEBAPI_SLUG ) );</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;}</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keywordflow">if</span> ( class_exists( <span class="stringliteral">&#39;GFForms&#39;</span> ) ) {</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <a class="code" href="class_g_f_forms.html#a48405d16fb9e957a4a77126c87c52f28">GFForms::include_addon_framework</a>();</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="keyword">class </span>GFWebAPI <span class="keyword">extends</span> <a class="code" href="namespace_g_f_add_on.html">GFAddOn</a> {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <span class="keyword">protected</span> $_version = <span class="stringliteral">&#39;1.0&#39;</span>;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        <span class="keyword">protected</span> $_min_gravityforms_version = <span class="stringliteral">&#39;1.7.9999&#39;</span>;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        <span class="keyword">protected</span> $_slug = <span class="stringliteral">&#39;gravityformswebapi&#39;</span>;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        <span class="keyword">protected</span> $_path = <span class="stringliteral">&#39;gravityformswebapi/webapi.php&#39;</span>;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        <span class="keyword">protected</span> $_full_path = __FILE__;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        <span class="keyword">protected</span> $_url = <span class="stringliteral">&#39;http://www.gravityforms.com&#39;</span>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        <span class="keyword">protected</span> $_title = <span class="stringliteral">&#39;Gravity Forms API&#39;</span>;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        <span class="keyword">protected</span> $_short_title = <span class="stringliteral">&#39;API&#39;</span>;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        <span class="keyword">private</span> $_enabled;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        <span class="keyword">private</span> $_private_key;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <span class="keyword">private</span> $_public_key;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <span class="comment">// Members plugin integration</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <span class="keyword">protected</span> $_capabilities = array( <span class="stringliteral">&#39;gravityforms_api&#39;</span>, <span class="stringliteral">&#39;gravityforms_api_settings&#39;</span> );</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <span class="comment">// Permissions</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <span class="keyword">protected</span> $_capabilities_settings_page = <span class="stringliteral">&#39;gravityforms_api_settings&#39;</span>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <span class="keyword">protected</span> $_capabilities_uninstall = <span class="stringliteral">&#39;gravityforms_webapi_uninstall&#39;</span>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_g_f_add_on.html#a095c5d389db211932136b53f25f39685">__construct</a>() {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;            <span class="keywordflow">if</span> ( defined( <span class="stringliteral">&#39;DOING_CRON&#39;</span> ) &amp;&amp; <a class="code" href="wp-cron_8php.html#a27bfc155c0a3fbd3103bf2d1928375f8">DOING_CRON</a> ) {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                <a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&#39;gravityforms_results_cron_&#39;</span> . $this-&gt;_slug, array( $this, <span class="stringliteral">&#39;results_cron&#39;</span> ), 10, 3 );</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            }</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;            parent::__construct();</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        }</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_g_f_add_on.html#a802bf757f8f1ce52e79b29a9462a31df">init_ajax</a>() {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            parent::init_ajax();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            <a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&#39;wp_ajax_gfwebapi_qrcode&#39;</span>, array( $this, <span class="stringliteral">&#39;ajax_qrcode&#39;</span> ) );</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        }</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_g_f_add_on.html#af69daa3fdab4bc1886daf4a79f89c004">init_admin</a>() {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            parent::init_admin();</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <span class="comment">// update the cache meta</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            <a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&#39;gform_after_update_entry&#39;</span>, array( $this, <span class="stringliteral">&#39;entry_updated&#39;</span> ), 10, 2 );</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            <a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&#39;gform_update_status&#39;</span>, array( $this, <span class="stringliteral">&#39;update_entry_status&#39;</span> ), 10, 2 );</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            <a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&#39;gform_after_save_form&#39;</span>, array( $this, <span class="stringliteral">&#39;after_save_form&#39;</span> ), 10, 2 );</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        }</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_g_f_add_on.html#aa1162453f19ce1f8cc95770761e59b4a">init_frontend</a>() {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            $settings           = $this-&gt;<a class="code" href="class_g_f_add_on.html#a4686ff68b3b0d792bf684587c378dead">get_plugin_settings</a>();</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            $this-&gt;_enabled     = rgar( $settings, <span class="stringliteral">&#39;enabled&#39;</span> );</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            $this-&gt;_public_key  = rgar( $settings, <span class="stringliteral">&#39;public_key&#39;</span> );</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            $this-&gt;_private_key = rgar( $settings, <span class="stringliteral">&#39;private_key&#39;</span> );</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            <span class="keywordflow">if</span> ( <span class="keyword">false</span> == $this-&gt;_enabled ) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            <a class="code" href="noop_8php.html#a4df34d0c6ff2b33c5178529f19b82f90">add_filter</a>( <span class="stringliteral">&#39;option_rewrite_rules&#39;</span>, array( $this, <span class="stringliteral">&#39;rewrite_rules&#39;</span> ) );</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            <a class="code" href="noop_8php.html#a4df34d0c6ff2b33c5178529f19b82f90">add_filter</a>( <span class="stringliteral">&#39;query_vars&#39;</span>, array( $this, <span class="stringliteral">&#39;query_vars&#39;</span> ) );</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&#39;template_redirect&#39;</span>, array( $this, <span class="stringliteral">&#39;handle_page_request&#39;</span> ) );</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <span class="comment">// update the cache</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&#39;gform_entry_created&#39;</span>, array( $this, <span class="stringliteral">&#39;entry_created&#39;</span> ), 10, 2 );</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        }</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="comment">// Scripts</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_g_f_add_on.html#a3dc593f496b7dbf2e5e3c406cb5fd106">scripts</a>() {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            <a class="code" href="preview_8php.html#a8fb7cd76a5f6fe9b500cb9eebcdc4259">$min</a>     = defined( <span class="stringliteral">&#39;SCRIPT_DEBUG&#39;</span> ) &amp;&amp; SCRIPT_DEBUG || isset( $_GET[<span class="stringliteral">&#39;gform_debug&#39;</span>] ) ? <span class="stringliteral">&#39;&#39;</span> : <span class="stringliteral">&#39;.min&#39;</span>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            $scripts = array(</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                array(</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                    <span class="stringliteral">&#39;handle&#39;</span>  =&gt; <span class="stringliteral">&#39;gfwebapi_hmac_sha1&#39;</span>,</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                    <span class="stringliteral">&#39;src&#39;</span>     =&gt; <span class="stringliteral">&#39;https://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/hmac-sha1.js&#39;</span>,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                    <span class="stringliteral">&#39;enqueue&#39;</span> =&gt; array(</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                        array( <span class="stringliteral">&#39;admin_page&#39;</span> =&gt; array( <span class="stringliteral">&#39;plugin_settings&#39;</span> ) ),</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                    )</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                ),</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                array(</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                    <span class="stringliteral">&#39;handle&#39;</span>   =&gt; <span class="stringliteral">&#39;gfwebapi_enc_base64&#39;</span>,</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                    <span class="stringliteral">&#39;src&#39;</span>      =&gt; <span class="stringliteral">&#39;https://crypto-js.googlecode.com/svn/tags/3.1.2/build/components/enc-base64-min.js&#39;</span>,</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                    <span class="stringliteral">&#39;deps&#39;</span>     =&gt; array( <span class="stringliteral">&#39;gfwebapi_hmac_sha1&#39;</span> ),</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                    <span class="stringliteral">&#39;callback&#39;</span> =&gt; array( $this, <span class="stringliteral">&#39;localize_form_settings_scripts&#39;</span> ),</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                    <span class="stringliteral">&#39;enqueue&#39;</span>  =&gt; array(</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                        array( <span class="stringliteral">&#39;admin_page&#39;</span> =&gt; array( <span class="stringliteral">&#39;plugin_settings&#39;</span> ) ),</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                    )</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                ),</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                array(</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                    <span class="stringliteral">&#39;handle&#39;</span>  =&gt; <span class="stringliteral">&#39;gfwebapi_settings.js&#39;</span>,</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                    <span class="stringliteral">&#39;src&#39;</span>     =&gt; GFCommon::get_base_url() . <span class="stringliteral">&quot;/includes/webapi/js/gfwebapi_settings{$min}.js&quot;</span>,</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                    <span class="stringliteral">&#39;version&#39;</span> =&gt; $this-&gt;_version,</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                    <span class="stringliteral">&#39;deps&#39;</span>    =&gt; array( <span class="stringliteral">&#39;jquery&#39;</span>, <span class="stringliteral">&#39;thickbox&#39;</span> ),</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                    <span class="stringliteral">&#39;enqueue&#39;</span> =&gt; array(</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                        array( <span class="stringliteral">&#39;admin_page&#39;</span> =&gt; array( <span class="stringliteral">&#39;plugin_settings&#39;</span> ) ),</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                    )</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                ),</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            );</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="keywordflow">return</span> array_merge( parent::scripts(), $scripts );</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_g_f_add_on.html#a53d31780f290c90071a213e9f786abb3">styles</a>() {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <a class="code" href="preview_8php.html#a8fb7cd76a5f6fe9b500cb9eebcdc4259">$min</a>    = defined( <span class="stringliteral">&#39;SCRIPT_DEBUG&#39;</span> ) &amp;&amp; SCRIPT_DEBUG || isset( $_GET[<span class="stringliteral">&#39;gform_debug&#39;</span>] ) ? <span class="stringliteral">&#39;&#39;</span> : <span class="stringliteral">&#39;.min&#39;</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <a class="code" href="preview_8php.html#a920c320068535c09e154c6707eb42ded">$styles</a> = array(</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                array(</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                    <span class="stringliteral">&#39;handle&#39;</span>  =&gt; <span class="stringliteral">&#39;gfwebap_settings&#39;</span>,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                    <span class="stringliteral">&#39;src&#39;</span>     =&gt; GFCommon::get_base_url() . <span class="stringliteral">&quot;/includes/webapi/css/gfwebapi_settings{$min}.css&quot;</span>,</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                    <span class="stringliteral">&#39;version&#39;</span> =&gt; $this-&gt;_version,</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                    <span class="stringliteral">&#39;deps&#39;</span>    =&gt; array( <span class="stringliteral">&#39;thickbox&#39;</span> ),</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                    <span class="stringliteral">&#39;enqueue&#39;</span> =&gt; array(</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                        array( <span class="stringliteral">&#39;admin_page&#39;</span> =&gt; array( <span class="stringliteral">&#39;plugin_settings&#39;</span> ) ),</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                    )</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                ),</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            );</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="keywordflow">return</span> array_merge( parent::styles(), <a class="code" href="preview_8php.html#a920c320068535c09e154c6707eb42ded">$styles</a> );</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_g_f_add_on.html#aa47673ffd04d894f2df03131d9fef2c8">render_uninstall</a>() {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="comment">// ------- Plugin settings -------</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_g_f_add_on.html#a142bbd7292b51e1b2b53cc42e578b3c4">plugin_settings_title</a>() {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Gravity Forms API Settings&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_g_f_add_on.html#a1ce51f6bb7b4bff32834f5ad72d66e3e">plugin_settings_fields</a>() {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            $args = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_webapi_get_users_settings_page&#39;</span>, array( <span class="stringliteral">&#39;number&#39;</span> =&gt; 200 ) );</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            $accounts = <a class="code" href="wp-includes_2user_8php.html#aa414164c348c21e38980eb95ebb0d541">get_users</a>( $args );</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            $account_choices = array();</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <span class="keywordflow">foreach</span> ( $accounts as $account ) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                $account_choices[] = array( <span class="stringliteral">&#39;label&#39;</span> =&gt; $account-&gt;user_login, <span class="stringliteral">&#39;value&#39;</span> =&gt; $account-&gt;ID );</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <a class="code" href="options-permalink_8php.html#a1b46ea8949d396a93da5d6e63bdae52c">$permalink_structure</a> = <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;permalink_structure&#39;</span> );</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <span class="keywordflow">if</span> ( ! <a class="code" href="options-permalink_8php.html#a1b46ea8949d396a93da5d6e63bdae52c">$permalink_structure</a> ) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                <span class="keywordflow">return</span> array(</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                    array(</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                        <span class="stringliteral">&#39;description&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;The Gravity Forms API allows developers to interact with this install via a JSON REST API.&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                        <span class="stringliteral">&#39;fields&#39;</span>      =&gt; array(</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                            array(</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                                <span class="stringliteral">&#39;name&#39;</span>  =&gt; <span class="stringliteral">&#39;requirements_check&#39;</span>,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Requirements check&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                                <span class="stringliteral">&#39;type&#39;</span>  =&gt; <span class="stringliteral">&#39;requirements_check&#39;</span>,</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                            ),</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                            array(</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                                <span class="stringliteral">&#39;id&#39;</span>    =&gt; <span class="stringliteral">&#39;save_button&#39;</span>,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                                <span class="stringliteral">&#39;type&#39;</span>  =&gt; <span class="stringliteral">&#39;save&#39;</span>,</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span> =&gt; <span class="stringliteral">&#39;Update&#39;</span>,</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                                <span class="stringliteral">&#39;style&#39;</span> =&gt; <span class="stringliteral">&#39;display:none;&#39;</span>,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                            ),</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                        )</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                    ),</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                );</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="keywordflow">return</span> array(</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                array(</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                    <span class="stringliteral">&#39;description&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;The Gravity Forms API allows developers to interact with this install via a JSON REST API.&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                    <span class="stringliteral">&#39;fields&#39;</span>      =&gt; array(</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                        array(</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                            <span class="stringliteral">&#39;type&#39;</span>    =&gt; <span class="stringliteral">&#39;checkbox&#39;</span>,</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                            <span class="stringliteral">&#39;label&#39;</span>   =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Enable access to the API&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                            <span class="stringliteral">&#39;name&#39;</span>    =&gt; <span class="stringliteral">&#39;activate&#39;</span>,</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                            <span class="stringliteral">&#39;onclick&#39;</span> =&gt; <span class="stringliteral">&#39;jQuery(this).parents(&quot;form&quot;).submit();&#39;</span>,</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                            <span class="stringliteral">&#39;choices&#39;</span> =&gt; array(</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                                array( <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Enabled&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ), <span class="stringliteral">&#39;name&#39;</span> =&gt; <span class="stringliteral">&#39;enabled&#39;</span> ),</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                            )</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                        ),</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    )</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                ),</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                array(</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                    <span class="stringliteral">&#39;title&#39;</span>       =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Authentication&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                    <span class="stringliteral">&#39;id&#39;</span>          =&gt; <span class="stringliteral">&#39;gform_section_authentication&#39;</span>,</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                    <span class="stringliteral">&#39;description&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;The settings below are only required to authenticate external applications. WordPress cookie authentication is supported for logged in users.&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                    <span class="stringliteral">&#39;dependency&#39;</span>  =&gt; array( <span class="stringliteral">&#39;field&#39;</span> =&gt; <span class="stringliteral">&#39;enabled&#39;</span>, <span class="stringliteral">&#39;values&#39;</span> =&gt; array( 1 ) ),</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                    <span class="stringliteral">&#39;fields&#39;</span>      =&gt; array(</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                        array(</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                            <span class="stringliteral">&#39;name&#39;</span>              =&gt; <span class="stringliteral">&#39;public_key&#39;</span>,</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                            <span class="stringliteral">&#39;label&#39;</span>             =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Public API Key&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                            <span class="stringliteral">&#39;type&#39;</span>              =&gt; <span class="stringliteral">&#39;text&#39;</span>,</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                            <span class="stringliteral">&#39;default_value&#39;</span>     =&gt; substr( wp_hash( <a class="code" href="noop_8php.html#ad8e3cb90f141ac5aa6d225bc337efc9c">site_url</a>() ), 0, 10 ),</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                            <span class="stringliteral">&#39;class&#39;</span>             =&gt; <span class="stringliteral">&#39;medium&#39;</span>,</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                            <span class="stringliteral">&#39;feedback_callback&#39;</span> =&gt; array( $this, <span class="stringliteral">&#39;is_valid_public_key&#39;</span> ),</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                        ),</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                        array(</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                            <span class="stringliteral">&#39;name&#39;</span>              =&gt; <span class="stringliteral">&#39;private_key&#39;</span>,</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                            <span class="stringliteral">&#39;label&#39;</span>             =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Private API Key&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                            <span class="stringliteral">&#39;type&#39;</span>              =&gt; <span class="stringliteral">&#39;text&#39;</span>,</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                            <span class="stringliteral">&#39;default_value&#39;</span>     =&gt; substr( wp_hash( <a class="code" href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a>( <span class="stringliteral">&#39;admin_email&#39;</span> ) ), 0, 15 ),</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                            <span class="stringliteral">&#39;class&#39;</span>             =&gt; <span class="stringliteral">&#39;medium&#39;</span>,</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                            <span class="stringliteral">&#39;feedback_callback&#39;</span> =&gt; array( $this, <span class="stringliteral">&#39;is_valid_private_key&#39;</span> )</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                        ),</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                        array(</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                            <span class="stringliteral">&#39;name&#39;</span>       =&gt; <span class="stringliteral">&#39;qrcode&#39;</span>,</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                            <span class="stringliteral">&#39;label&#39;</span>      =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;QR Code&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                            <span class="stringliteral">&#39;type&#39;</span>       =&gt; <span class="stringliteral">&#39;qrcode&#39;</span>,</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                            <span class="stringliteral">&#39;dependency&#39;</span> =&gt; array( <span class="stringliteral">&#39;field&#39;</span> =&gt; <span class="stringliteral">&#39;private_key&#39;</span>, <span class="stringliteral">&#39;values&#39;</span> =&gt; array( <span class="stringliteral">&#39;_notempty_&#39;</span> ) )</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                        ),</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                        array(</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                            <span class="stringliteral">&#39;name&#39;</span>    =&gt; <span class="stringliteral">&#39;impersonate_account&#39;</span>,</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                            <span class="stringliteral">&#39;label&#39;</span>   =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Impersonate account&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                            <span class="stringliteral">&#39;type&#39;</span>    =&gt; <span class="stringliteral">&#39;select&#39;</span>,</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                            <span class="stringliteral">&#39;choices&#39;</span> =&gt; $account_choices,</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                        ),</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                        array(</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                            <span class="stringliteral">&#39;name&#39;</span>       =&gt; <span class="stringliteral">&#39;developer_tools&#39;</span>,</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                            <span class="stringliteral">&#39;label&#39;</span>      =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Developer tools&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                            <span class="stringliteral">&#39;type&#39;</span>       =&gt; <span class="stringliteral">&#39;developer_tools&#39;</span>,</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                            <span class="stringliteral">&#39;dependency&#39;</span> =&gt; array( <span class="stringliteral">&#39;field&#39;</span> =&gt; <span class="stringliteral">&#39;private_key&#39;</span>, <span class="stringliteral">&#39;values&#39;</span> =&gt; array( <span class="stringliteral">&#39;_notempty_&#39;</span> ) )</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                        ),</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                    )</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                ),</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                array(</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                    <span class="stringliteral">&#39;fields&#39;</span> =&gt; array(</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                        array(</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                            <span class="stringliteral">&#39;id&#39;</span>    =&gt; <span class="stringliteral">&#39;save_button&#39;</span>,</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                            <span class="stringliteral">&#39;type&#39;</span>  =&gt; <span class="stringliteral">&#39;save&#39;</span>,</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                            <span class="stringliteral">&#39;value&#39;</span> =&gt; <span class="stringliteral">&#39;Update&#39;</span>,</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                        ),</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                    )</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                ),</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            );</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> settings_requirements_check() {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            $permalinks_url = <a class="code" href="noop_8php.html#a01815a0502df2442bbb063f4055c2194">admin_url</a>( <span class="stringliteral">&#39;options-permalink.php&#39;</span> );</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            ?&gt;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            &lt;i <span class="keyword">class</span>=<span class="stringliteral">&quot;fa fa-exclamation-triangle gf_invalid&quot;</span>&gt;&lt;/i&gt;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            &lt;span <span class="keyword">class</span>=<span class="stringliteral">&quot;gf_invalid&quot;</span>&gt;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                    &lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Permalinks are not in the correct format.&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ); ?&gt;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                &lt;/span&gt;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            &lt;br/&gt;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            &lt;span <span class="keyword">class</span>=<span class="stringliteral">&#39;gf_settings_description&#39;</span>&gt;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                printf( <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Change the %sWordPress Permalink Settings%s from default to any of the other options to get started.&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ), <span class="stringliteral">&#39;&lt;a href=&quot;&#39;</span> . <a class="code" href="twentyfifteen_2content-link_8php.html#a4a6fb8865e1ae52faa29662b4087e629">esc_url</a>( $permalinks_url ) . <span class="stringliteral">&#39;&quot;&gt;&#39;</span>, <span class="stringliteral">&#39;&lt;/a&gt;&#39;</span> );</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                ?&gt;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            &lt;/span&gt;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> settings_qrcode() {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            ?&gt;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            &lt;<a class="code" href="namespacebutton.html">button</a> <span class="keyword">class</span>=<span class="stringliteral">&quot;button-secondary&quot;</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                    <span class="keywordtype">id</span>=<span class="stringliteral">&quot;gfwebapi-qrbutton&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Show/hide QR Code&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ); ?&gt;&lt;/<a class="code" href="namespacebutton.html">button</a>&gt;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;gfwebapi-qrcode-container&quot;</span> style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                &lt;img <span class="keywordtype">id</span>=<span class="stringliteral">&quot;gfwebapi-qrcode&quot;</span> src=<span class="stringliteral">&quot;&lt;?php echo GFCommon::get_base_url() ?&gt;/images/spinner.gif&quot;</span>/&gt;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            &lt;/div&gt;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> settings_developer_tools() {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            ?&gt;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            &lt;script <a class="code" href="namespacetype.html">type</a>=<span class="stringliteral">&quot;text/javascript&quot;</span>&gt;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                var gfapiBaseUrl = <span class="stringliteral">&#39;&lt;?php echo esc_attr( GFWEBAPI_API_BASE_URL ) ?&gt;&#39;</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            &lt;/script&gt;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            &lt;<a class="code" href="namespacea.html">a</a> <a class="code" href="namespacetitle.html">title</a>=<span class="stringliteral">&quot;Gravity Forms API: Developer Tools&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;thickbox&quot;</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;               <a class="code" href="namespacehref.html">href</a>=<span class="stringliteral">&quot;#TB_inline?width=300&amp;height=550&amp;inlineId=gfwebapi-dev-tools&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Open developer tools&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) ?&gt;&lt;/<a class="code" href="namespacea.html">a</a>&gt;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;gfwebapi-dev-tools&quot;</span> style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                &lt;div&gt;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                    &lt;h4&gt;Documentation&lt;/h4&gt;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                    &lt;div&gt;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                        Please read through <a class="code" href="namespacethe.html">the</a> &lt;<a class="code" href="namespacea.html">a</a> target=<span class="stringliteral">&quot;_blank&quot;</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                                                   <a class="code" href="namespacehref.html">href</a>=<span class="stringliteral">&quot;http://www.gravityhelp.com/documentation/page/Gravity_Forms_API&quot;</span>&gt;<a class="code" href="namespace_gravity.html">Gravity</a></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                            Forms API Documentation&lt;/<a class="code" href="namespacea.html">a</a>&gt; before attempting <a class="code" href="namespaceto.html">to</a> <a class="code" href="namespaceuse.html">use</a> <a class="code" href="namespacethe.html">the</a> API.</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                    &lt;/div&gt;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                    &lt;h4&gt;<a class="code" href="edit-comments_8php.html#a75ea80de0123fb0d0ef5533eb33d3ae1">URL</a> Generator&lt;/h4&gt;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                    &lt;div&gt;This <a class="code" href="namespacetool.html">tool</a> <a class="code" href="namespacewill.html">will</a> generate <a class="code" href="namespacea.html">a</a> secure, expiring <a class="code" href="edit-comments_8php.html#a75ea80de0123fb0d0ef5533eb33d3ae1">URL</a>.&lt;/div&gt;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                    &lt;div&gt;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                        &lt;select <span class="keywordtype">id</span>=<span class="stringliteral">&quot;gfapi-url-builder-method&quot;</span>&gt;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                            &lt;option value=<span class="stringliteral">&quot;GET&quot;</span>&gt;GET&lt;/option&gt;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                            &lt;option value=<span class="stringliteral">&quot;POST&quot;</span>&gt;POST&lt;/option&gt;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                            &lt;option value=<span class="stringliteral">&quot;PUT&quot;</span>&gt;PUT&lt;/option&gt;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                            &lt;option value=<span class="stringliteral">&quot;DELETE&quot;</span>&gt;DELETE&lt;/option&gt;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                        &lt;/select&gt;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                        /&lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> type=<span class="stringliteral">&quot;text&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;gfapi-url-builder-route&quot;</span> value=<span class="stringliteral">&quot;forms/1&quot;</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                                <a class="code" href="select__columns_8php.html#ab73271f70effbb97663154a50a24ff00">placeholder</a>=<span class="stringliteral">&quot;route e.g. forms/1&quot;</span>/&gt;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                        &lt;select <span class="keywordtype">id</span>=<span class="stringliteral">&quot;gfapi-url-builder-expiration&quot;</span>&gt;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                            &lt;option value=<span class="stringliteral">&quot;60&quot;</span>&gt;1 minute&lt;/option&gt;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                            &lt;option value=<span class="stringliteral">&quot;3600&quot;</span>&gt;1 hour&lt;/option&gt;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                            &lt;option value=<span class="stringliteral">&quot;86400&quot;</span>&gt;1 day&lt;/option&gt;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                            &lt;option value=<span class="stringliteral">&quot;604800&quot;</span>&gt;1 week&lt;/option&gt;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                            &lt;option value=<span class="stringliteral">&quot;2628000&quot;</span>&gt;1 <a class="code" href="wordpress_2wp-admin_2export_8php.html#a2aa2e8d39121676417f4a0faabc33c46">month</a>&lt;/option&gt;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                        &lt;/select&gt;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                        &lt;<a class="code" href="namespacebutton.html">button</a> <span class="keyword">class</span>=<span class="stringliteral">&quot;button-secondary&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;gfapi-url-builder-button&quot;</span>&gt;Generate <a class="code" href="edit-comments_8php.html#a75ea80de0123fb0d0ef5533eb33d3ae1">URL</a>&lt;/button&gt;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                    &lt;/div&gt;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                    &lt;div&gt;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                        &lt;<a class="code" href="form__list_8php.html#a381e374962668a4298cb522b81c66e92">textarea</a> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;gfapi-url-builder-generated-url&quot;</span> value=<span class="stringliteral">&quot;&quot;</span> style=<span class="stringliteral">&quot;width:100%&quot;</span>&gt;&lt;/<a class="code" href="form__list_8php.html#a381e374962668a4298cb522b81c66e92">textarea</a>&gt;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                    &lt;/div&gt;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                    &lt;h4&gt;<a class="code" href="edit-comments_8php.html#a75ea80de0123fb0d0ef5533eb33d3ae1">URL</a> tester&lt;/h4&gt;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                    &lt;div&gt;This <a class="code" href="namespacetool.html">tool</a> tests <a class="code" href="namespacethe.html">the</a> authentication/signature - <a class="code" href="namespaceit.html">it</a> does <a class="code" href="namespacenot.html">not</a> perform <a class="code" href="namespaceany.html">any</a> operations.&lt;/div&gt;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                    &lt;select <span class="keywordtype">id</span>=<span class="stringliteral">&quot;gfapi-url-tester-method&quot;</span>&gt;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                        &lt;option value=<span class="stringliteral">&quot;GET&quot;</span>&gt;GET&lt;/option&gt;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                        &lt;option value=<span class="stringliteral">&quot;POST&quot;</span>&gt;POST&lt;/option&gt;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                        &lt;option value=<span class="stringliteral">&quot;PUT&quot;</span>&gt;PUT&lt;/option&gt;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                        &lt;option value=<span class="stringliteral">&quot;DELETE&quot;</span>&gt;DELETE&lt;/option&gt;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                    &lt;/select&gt;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                    &lt;div&gt;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                        &lt;<a class="code" href="form__list_8php.html#a381e374962668a4298cb522b81c66e92">textarea</a> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;gfapi-url-tester-url&quot;</span> value=<span class="stringliteral">&quot;&quot;</span> style=<span class="stringliteral">&quot;width:100%&quot;</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                                  <a class="code" href="select__columns_8php.html#ab73271f70effbb97663154a50a24ff00">placeholder</a>=<span class="stringliteral">&quot;paste your url here&quot;</span>&gt;&lt;/<a class="code" href="form__list_8php.html#a381e374962668a4298cb522b81c66e92">textarea</a>&gt;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                    &lt;/div&gt;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                    &lt;button <span class="keyword">class</span>=<span class="stringliteral">&quot;button-secondary&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;gfapi-url-tester-button&quot;</span>&gt;Test&lt;/button&gt;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                    &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;gfapi-url-tester-loading&quot;</span> style=<span class="stringliteral">&quot;display:none&quot;</span>&gt;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                        Loading....</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                    &lt;/div&gt;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                    &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;gfapi-url-tester-results&quot;</span>&gt;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                        &lt;!-- <a class="code" href="select__columns_8php.html#ab73271f70effbb97663154a50a24ff00">placeholder</a> <span class="keywordflow">for</span> results --&gt;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                    &lt;/div&gt;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                &lt;/div&gt;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            &lt;/div&gt;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_g_f_add_on.html#a7e93b92b4e88a620836966d239c1975b">set_logging_supported</a>( <a class="code" href="plugin-editor_8php.html#a4ab51386acb82cd0a0066eac2567b2bd">$plugins</a> ) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="keywordflow">return</span> parent::set_logging_supported( <a class="code" href="plugin-editor_8php.html#a4ab51386acb82cd0a0066eac2567b2bd">$plugins</a> );</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> rewrite_rules( $rules ) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            $gfapi_rules[ GFWEBAPI_SLUG . <span class="stringliteral">&#39;/(.*)&#39;</span> ] = <span class="stringliteral">&#39;index.php?&#39;</span> . GFWEBAPI_ROUTE_VAR . <span class="stringliteral">&#39;=$matches[1]&#39;</span>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="keywordflow">if</span> ( is_array( $rules ) ) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                <span class="comment">// the array operator instead of array_merge avoids tampering with the keys in the original array</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                $rules = $gfapi_rules + $rules;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                $rules = $gfapi_rules;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="keywordflow">return</span> $rules;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> query_vars( $query_vars ) {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            $query_vars[] = GFWEBAPI_ROUTE_VAR;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <span class="keywordflow">return</span> $query_vars;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> handle_page_request() {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            global $HTTP_RAW_POST_DATA;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            $route = <a class="code" href="query_8php.html#a8e8814f4728ccc9c0d616ec535845129">get_query_var</a>( GFWEBAPI_ROUTE_VAR );</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordflow">if</span> ( <span class="keyword">false</span> == $route ) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <a class="code" href="wordpress_2wp-includes_2http_8php.html#a261a794cd8821768dc1325f0bd7d30bf">send_origin_headers</a>();</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            $settings = <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;gravityformsaddon_gravityformswebapi_settings&#39;</span> );</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="keywordflow">if</span> ( empty( $settings ) || ! $settings[<span class="stringliteral">&#39;enabled&#39;</span>] ) {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                $this-&gt;<a class="code" href="class_g_f_add_on.html#a5450ae2a722efbf1a0d8391c185a8f02">log_debug</a>( <span class="stringliteral">&#39;API not enabled, permission denied.&#39;</span> );</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                $this-&gt;die_permission_denied();</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            $route_parts = pathinfo( $route );</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> = rgar( $route_parts, <span class="stringliteral">&#39;extension&#39;</span> );</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> ) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                $route = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="charliteral">&#39;.&#39;</span> . <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a>, <span class="stringliteral">&#39;&#39;</span>, $route );</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            $path_array = explode( <span class="charliteral">&#39;/&#39;</span>, $route );</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            $collection = strtolower( rgar( $path_array, 0 ) );</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> = rgar( $path_array, 1 );</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="keywordflow">if</span> ( strpos( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, <span class="charliteral">&#39;;&#39;</span> ) !== <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> = explode( <span class="charliteral">&#39;;&#39;</span>, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            $collection2 = strtolower( rgar( $path_array, 2 ) );</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            $id2         = rgar( $path_array, 3 );</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordflow">if</span> ( strpos( $id2, <span class="charliteral">&#39;;&#39;</span> ) !== <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                $id2 = explode( <span class="charliteral">&#39;;&#39;</span>, $id2 );</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            <span class="keywordflow">if</span> ( empty( <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> ) ) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> = <span class="stringliteral">&#39;json&#39;</span>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            $schema    = strtolower( ( rgget( <span class="stringliteral">&#39;schema&#39;</span> ) ) );</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            $offset    = isset( $_GET[<span class="stringliteral">&#39;paging&#39;</span>][<span class="stringliteral">&#39;offset&#39;</span>] ) ? strtolower( $_GET[<span class="stringliteral">&#39;paging&#39;</span>][<span class="stringliteral">&#39;offset&#39;</span>] ) : 0;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            $page_size = isset( $_GET[<span class="stringliteral">&#39;paging&#39;</span>][<span class="stringliteral">&#39;page_size&#39;</span>] ) ? strtolower( $_GET[<span class="stringliteral">&#39;paging&#39;</span>][<span class="stringliteral">&#39;page_size&#39;</span>] ) : 10;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            $method = strtoupper( <a class="code" href="edit-tags_8php.html#aed6d7b9acff0b9518917d3b0573bc636">$_SERVER</a>[<span class="stringliteral">&#39;REQUEST_METHOD&#39;</span>] );</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            $args   = compact( <span class="stringliteral">&#39;offset&#39;</span>, <span class="stringliteral">&#39;page_size&#39;</span>, <span class="stringliteral">&#39;schema&#39;</span> );</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            $endpoint = empty( $collection2 ) ? strtolower( $method ) . <span class="charliteral">&#39;_&#39;</span> . $collection : strtolower( $method ) . <span class="charliteral">&#39;_&#39;</span> . $collection . <span class="charliteral">&#39;_&#39;</span> . $collection2;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <span class="comment">// The POST forms/[ID]/submissions endpoint is public and does not require authentication.</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            $authentication_required = $endpoint !== <span class="stringliteral">&#39;post_forms_submissions&#39;</span>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">            /**</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">             * Allows overriding of authentication for all the endpoints of the Web API.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">             * gform_webapi_authentication_required_[end point]</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">             * e.g.</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">             * gform_webapi_authentication_required_post_form_submissions</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">             *</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">             * @param bool $authentication_required Whether authentication is required for this endpoint.</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            $authentication_required = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_webapi_authentication_required_&#39;</span> . $endpoint, $authentication_required );</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            <span class="keywordflow">if</span> ( $authentication_required ) {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                $this-&gt;authenticate();</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            $test_mode = rgget( <span class="stringliteral">&#39;test&#39;</span> );</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            <span class="keywordflow">if</span> ( $test_mode ) {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                die( <span class="stringliteral">&#39;test mode&#39;</span> );</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="keywordflow">if</span> ( empty( $collection2 ) ) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;gform_webapi_&#39;</span> . $endpoint, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a>, $args );</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;gform_webapi_&#39;</span> . $endpoint, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, $id2, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a>, $args );</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="keywordflow">if</span> ( ! isset( $HTTP_RAW_POST_DATA ) ) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                $HTTP_RAW_POST_DATA = file_get_contents( <span class="stringliteral">&#39;php://input&#39;</span> );</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            GFCommon::log_debug( <span class="stringliteral">&#39;GFWebAPI::handle_page_request(): HTTP_RAW_POST_DATA = &#39;</span> . $HTTP_RAW_POST_DATA );</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            $data = json_decode( $HTTP_RAW_POST_DATA, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="keywordflow">switch</span> ( $collection ) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&#39;forms&#39;</span> :</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                    <span class="keywordflow">switch</span> ( $collection2 ) {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;results&#39;</span> :</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                            <span class="keywordflow">switch</span> ( $method ) {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;GET&#39;</span> :</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                                    $this-&gt;get_results( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;DELETE&#39;</span>:</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;PUT&#39;</span>:</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;POST&#39;</span>:</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                                    $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                            }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;properties&#39;</span> :</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                            <span class="keywordflow">switch</span> ( $method ) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;PUT&#39;</span> :</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                                    $this-&gt;put_forms_properties( $data, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                                    $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                            }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;feeds&#39;</span> :</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                            <span class="keywordflow">if</span> ( <span class="keyword">false</span> == empty( $id2 ) ) {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                                $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                            }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                            <span class="keywordflow">switch</span> ( $method ) {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;GET&#39;</span> :</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                                    $this-&gt;get_feeds( <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;DELETE&#39;</span> :</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                                    $this-&gt;delete_feeds( <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;PUT&#39;</span> :</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                                    $this-&gt;die_not_implemented();</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;POST&#39;</span> :</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                                    $this-&gt;post_feeds( $data, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                                <span class="keywordflow">default</span> :</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                                    $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                            }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;entries&#39;</span> :</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                            <span class="keywordflow">if</span> ( <span class="keyword">false</span> == empty( $id2 ) ) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                                $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                            }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                            <span class="keywordflow">switch</span> ( $method ) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;GET&#39;</span> :</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                                    $this-&gt;get_entries( <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, $schema );</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;POST&#39;</span> :</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                                    $this-&gt;post_entries( $data, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;PUT&#39;</span> :</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;DELETE&#39;</span> :</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                                    $this-&gt;die_not_implemented();</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                                    $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                            }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;submissions&#39;</span> :</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                            <span class="keywordflow">if</span> ( <span class="keyword">false</span> == empty( $id2 ) ) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                                $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                            }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                            <span class="keywordflow">switch</span> ( $method ) {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;POST&#39;</span> :</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                                    $this-&gt;submit_form( $data, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;GET&#39;</span> :</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;PUT&#39;</span> :</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;DELETE&#39;</span> :</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                                    $this-&gt;die_not_implemented();</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                                    $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                            }</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;&#39;</span> :</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                            <span class="keywordflow">switch</span> ( $method ) {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;GET&#39;</span>:</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                                    $this-&gt;get_forms( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, $schema );</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;DELETE&#39;</span>:</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                                    $this-&gt;delete_forms( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;PUT&#39;</span>:</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                                    $this-&gt;put_forms( $data, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, $id2 );</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;POST&#39;</span>:</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                                    <span class="keywordflow">if</span> ( <span class="keyword">false</span> === empty( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) ) {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                                        $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                                    }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                                    $this-&gt;post_forms( $data, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                                    $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                            }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                        <span class="keywordflow">default</span> :</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                            $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                    }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&#39;entries&#39;</span> : <span class="comment">//  route = /entries/{id}</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                    <span class="keywordflow">switch</span> ( $method ) {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;GET&#39;</span>:</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                            <span class="keywordflow">switch</span> ( $collection2 ) {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;fields&#39;</span> : <span class="comment">// route = /entries/{id}/fields/{id2}</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                                    $this-&gt;get_entries( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>, $schema, $id2 );</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;&#39;</span> :</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                                    $this-&gt;get_entries( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>, $schema );</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                                <span class="keywordflow">default</span> :</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                                    $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                            }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;DELETE&#39;</span> :</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                            $this-&gt;delete_entries( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;PUT&#39;</span> :</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                            <span class="keywordflow">switch</span> ( $collection2 ) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;properties&#39;</span> : <span class="comment">// route = /entries/{id}/properties/{id2}</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                                    $this-&gt;put_entry_properties( $data, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;&#39;</span> :</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                                    $this-&gt;<a class="code" href="class_g_f_add_on.html#a5450ae2a722efbf1a0d8391c185a8f02">log_debug</a>( __METHOD__ . <span class="stringliteral">&#39;(): Putting entries&#39;</span> );</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                                    $this-&gt;put_entries( $data, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                            }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;POST&#39;</span> :</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                            <span class="keywordflow">if</span> ( <span class="keyword">false</span> === empty( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) ) {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                                $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                            }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                            $this-&gt;post_entries( $data );</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                            $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                    }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&#39;feeds&#39;</span> :</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                    <span class="keywordflow">switch</span> ( $method ) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;GET&#39;</span> :</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                            $this-&gt;get_feeds( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;DELETE&#39;</span> :</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                            <span class="keywordflow">if</span> ( empty( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) ) {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                                $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                            }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                            $this-&gt;delete_feeds( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;PUT&#39;</span> :</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                            $this-&gt;put_feeds( $data, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;POST&#39;</span> :</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                            <span class="keywordflow">if</span> ( <span class="keyword">false</span> === empty( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) ) {</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                                $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                            }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                            $this-&gt;post_feeds( $data );</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                        <span class="keywordflow">default</span> :</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                            $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                    }</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                <span class="keywordflow">default</span> :</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                    $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> authorize( $caps = array() ) {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            <span class="keywordflow">if</span> ( GFCommon::current_user_can_any( $caps ) ) {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                GFCommon::add_api_call();</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            $this-&gt;die_forbidden();</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="comment">//----- Feeds ------</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> get_feeds( $feed_ids, <a class="code" href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a> = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_web_api_capability_get_feeds&#39;</span>, <span class="stringliteral">&#39;gravityforms_edit_forms&#39;</span> );</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            $this-&gt;authorize( <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> );</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            $addon_slug = rgget( <span class="stringliteral">&#39;addon&#39;</span> );</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            <a class="code" href="edit__link_8php.html#a73004ce9cd673c1bfafd1dc351134797">$output</a>     = <a class="code" href="class_g_f_a_p_i.html#a2777cc61bbe371f6a8d8b9f34a8ee17e">GFAPI::get_feeds</a>( $feed_ids, <a class="code" href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a>, $addon_slug );</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( <a class="code" href="edit__link_8php.html#a73004ce9cd673c1bfafd1dc351134797">$output</a> ) ) {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                $this-&gt;die_not_found();</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            }</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            $response = <span class="keyword">false</span> === empty( $feed_ids ) &amp;&amp; <span class="keyword">false</span> === is_array( $feed_ids ) &amp;&amp; is_array( <a class="code" href="edit__link_8php.html#a73004ce9cd673c1bfafd1dc351134797">$output</a> ) ? array_shift( <a class="code" href="edit__link_8php.html#a73004ce9cd673c1bfafd1dc351134797">$output</a> ) : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            $this-&gt;end( 200, $response );</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        }</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> delete_feeds( $feed_ids, <a class="code" href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a> = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_web_api_capability_delete_feeds&#39;</span>, <span class="stringliteral">&#39;gravityforms_edit_forms&#39;</span> );</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            $this-&gt;authorize( <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> );</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a> = 0;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <span class="keywordflow">if</span> ( empty( $feed_ids ) ) {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                $feeds = <a class="code" href="class_g_f_a_p_i.html#a2777cc61bbe371f6a8d8b9f34a8ee17e">GFAPI::get_feeds</a>( <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>, <a class="code" href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a> );</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                <span class="keywordflow">foreach</span> ( $feeds as $feed ) {</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                    $result = <a class="code" href="class_g_f_a_p_i.html#a0d479b94f08ffc20c7a44d10a2f11700">GFAPI::delete_feed</a>( $feed[<span class="stringliteral">&#39;id&#39;</span>] );</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                    <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                    }</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                    <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a> ++;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                <span class="keywordflow">if</span> ( is_array( $feed_ids ) ) {</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                    <span class="keywordflow">foreach</span> ( $feed_ids as $feed_id ) {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                        $result = <a class="code" href="class_g_f_a_p_i.html#a0d479b94f08ffc20c7a44d10a2f11700">GFAPI::delete_feed</a>( $feed_id );</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                        <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                        }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                        <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a> ++;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                    }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                    $result = <a class="code" href="class_g_f_a_p_i.html#a0d479b94f08ffc20c7a44d10a2f11700">GFAPI::delete_feed</a>( $feed_ids );</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                    <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a> ++;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            <span class="keywordflow">if</span> ( isset( $result ) &amp;&amp; <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                $response = $this-&gt;get_error_response( $result );</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                $status   = $this-&gt;get_error_status( $result );</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                $status   = 200;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                $response = sprintf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Feeds deleted successfully: %d&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ), <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a> );</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            $this-&gt;end( $status, $response );</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        }</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> put_feeds( $feed_data, $feed_id = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_web_api_capability_put_feeds&#39;</span>, <span class="stringliteral">&#39;gravityforms_edit_forms&#39;</span> );</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            $this-&gt;authorize( <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> );</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;            <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a>  = 0;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            $result = array();</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            <span class="keywordflow">if</span> ( empty( $feed_id ) ) {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                <span class="keywordflow">foreach</span> ( $feed_data as $feed ) {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                    <span class="comment">//todo: validate feed id and form id</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                    $result = <a class="code" href="class_g_f_a_p_i.html#a9d39da393431e8b34fcffff4f75c1847">GFAPI::update_feed</a>( $feed[<span class="stringliteral">&#39;id&#39;</span>], $feed[<span class="stringliteral">&#39;meta&#39;</span>], $feed[<span class="stringliteral">&#39;form_id&#39;</span>] );</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                    <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                    }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                    <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a> ++;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                }</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                $result = <a class="code" href="class_g_f_a_p_i.html#a9d39da393431e8b34fcffff4f75c1847">GFAPI::update_feed</a>( $feed_id, $feed_data[<span class="stringliteral">&#39;meta&#39;</span>], $feed_data[<span class="stringliteral">&#39;form_id&#39;</span>] );</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a> ++;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            }</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            <span class="keywordflow">if</span> ( isset( $results ) &amp;&amp; <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                $response = $this-&gt;get_error_response( $result );</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                $status   = $this-&gt;get_error_status( $result );</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                $status   = 200;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                $response = sprintf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Feeds updated: %d&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ), <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a> );</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            }</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            $this-&gt;end( $status, $response );</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> post_feeds( $feeds, <a class="code" href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a> = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_web_api_capability_post_feeds&#39;</span>, <span class="stringliteral">&#39;gravityforms_edit_forms&#39;</span> );</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            $this-&gt;authorize( <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> );</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            $feed_ids = array();</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            $result   = array();</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            <span class="keywordflow">foreach</span> ( $feeds as $feed ) {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                $addon_slug = isset( $feed[<span class="stringliteral">&#39;addon_slug&#39;</span>] ) ? $feed[<span class="stringliteral">&#39;addon_slug&#39;</span>] : rgget( <span class="stringliteral">&#39;addon&#39;</span> );</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                $f_id       = empty( <a class="code" href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a> ) ? $feed[<span class="stringliteral">&#39;form_id&#39;</span>] : <a class="code" href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a>;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                <span class="keywordflow">if</span> ( empty( $f_id ) ) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                    $result = <span class="keyword">new</span> <a class="code" href="class_w_p___error.html">WP_Error</a>( <span class="stringliteral">&#39;missing_form_id&#39;</span>, <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Missing form id&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                }</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                $result = <a class="code" href="class_g_f_a_p_i.html#afc146d559a3ceea4b11df439fc388b6e">GFAPI::add_feed</a>( $f_id, $feed[<span class="stringliteral">&#39;meta&#39;</span>], $addon_slug );</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                $feed_ids[] = $result;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            }</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                $response = $this-&gt;get_error_response( $result );</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                $status   = $this-&gt;get_error_status( $result );</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                $status   = 201;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                $response = $feed_ids;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            }</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            $this-&gt;end( $status, $response );</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        }</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="comment">//----- Form Submissions ----</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> submit_form( $data, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) {</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            <a class="code" href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a> = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a> &lt; 1 ) {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            <span class="keywordflow">if</span> ( empty( $data[<span class="stringliteral">&#39;input_values&#39;</span>] ) ) {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                $this-&gt;die_bad_request();</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            $field_values = isset( $data[<span class="stringliteral">&#39;field_values&#39;</span>] ) ? $data[<span class="stringliteral">&#39;field_values&#39;</span>] : array();</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            $target_page  = isset( $data[<span class="stringliteral">&#39;target_page&#39;</span>] ) ? $data[<span class="stringliteral">&#39;target_page&#39;</span>] : 0;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            $source_page  = isset( $data[<span class="stringliteral">&#39;source_page&#39;</span>] ) ? $data[<span class="stringliteral">&#39;source_page&#39;</span>] : 1;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            $result = <a class="code" href="class_g_f_a_p_i.html#ab3a1495916d0af6643f5fb93fa63f5be">GFAPI::submit_form</a>( <a class="code" href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a>, $data[<span class="stringliteral">&#39;input_values&#39;</span>], $field_values, $target_page, $source_page );</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                $response = $this-&gt;get_error_response( $result );</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                $status   = $this-&gt;get_error_status( $result );</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                $status   = 200;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                $response = $result;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            }</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            $this-&gt;end( $status, $response );</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        }</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="comment">//----- Forms ------</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> delete_forms( $form_ids ) {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;            <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_web_api_capability_delete_forms&#39;</span>, <span class="stringliteral">&#39;gravityforms_delete_forms&#39;</span> );</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            $this-&gt;authorize( <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> );</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a> = 0;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            <span class="keywordflow">if</span> ( is_array( $form_ids ) ) {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                <span class="keywordflow">foreach</span> ( $form_ids as <a class="code" href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a> ) {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                    $result = <a class="code" href="class_g_f_a_p_i.html#a2e2519982f9dfc69e355dbee2afb4a6e">GFAPI::delete_form</a>( $form_id );</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                    <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                    }</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                    <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a> ++;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                }</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                $result = <a class="code" href="class_g_f_a_p_i.html#a2e2519982f9dfc69e355dbee2afb4a6e">GFAPI::delete_form</a>( $form_ids );</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a> ++;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;            }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <span class="keywordflow">if</span> ( isset( $result ) &amp;&amp; <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                $response = $this-&gt;get_error_response( $result );</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                $status   = $this-&gt;get_error_status( $result );</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                $status   = 200;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                $response = sprintf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Forms deleted successfully: %d&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ), <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a> );</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;            $this-&gt;end( $status, $response );</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        }</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> post_entries( $data, $form_id = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_web_api_capability_post_entries&#39;</span>, <span class="stringliteral">&#39;gravityforms_edit_entries&#39;</span> );</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            $this-&gt;authorize( <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> );</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            <a class="code" href="other__entries_8php.html#affb4200921149b6126d0e51b415b2c75">$entries</a> = array();</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            <span class="keywordflow">foreach</span> ( $data as $entry ) {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                <a class="code" href="other__entries_8php.html#affb4200921149b6126d0e51b415b2c75">$entries</a>[] = $this-&gt;maybe_serialize_list_fields( $entry, $form_id );</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            $result = <a class="code" href="class_g_f_a_p_i.html#aad94a0bbb9f2ff9cad300358b2c427cf">GFAPI::add_entries</a>( <a class="code" href="other__entries_8php.html#affb4200921149b6126d0e51b415b2c75">$entries</a>, $form_id );</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                $response = $this-&gt;get_error_response( $result );</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                $status   = $this-&gt;get_error_status( $result );</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                $status   = 201;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                $response = $result;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            }</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            $this-&gt;end( $status, $response );</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        }</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> put_entries( $data, $entry_id = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_web_api_capability_put_entries&#39;</span>, <span class="stringliteral">&#39;gravityforms_edit_entries&#39;</span> );</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;            $this-&gt;authorize( <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> );</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            <a class="code" href="other__entries_8php.html#affb4200921149b6126d0e51b415b2c75">$entries</a> = array();</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            <span class="keywordflow">if</span> ( empty( $entry_id ) ) {</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                <span class="keywordflow">foreach</span> ( $data as $entry ) {</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                    <a class="code" href="other__entries_8php.html#affb4200921149b6126d0e51b415b2c75">$entries</a>[] = $this-&gt;maybe_serialize_list_fields( $entry );</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                }</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                $result = <a class="code" href="class_g_f_a_p_i.html#aadac56ffa037583f0ae56c8a09b75bdd">GFAPI::update_entries</a>( <a class="code" href="other__entries_8php.html#affb4200921149b6126d0e51b415b2c75">$entries</a> );</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                $entry  = $this-&gt;maybe_serialize_list_fields( $data );</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                $result = <a class="code" href="class_g_f_a_p_i.html#a854185927da5cb648f21921be078f40b">GFAPI::update_entry</a>( $entry, $entry_id );</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            }</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                $response = $this-&gt;get_error_response( $result );</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                $status   = $this-&gt;get_error_status( $result );</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                $status   = 200;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                $response = empty( $entry_id ) ? <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Entries updated successfully&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) : <a class="code" href="namespace____.html">__</a>( <span class="stringliteral">&#39;Entry updated successfully&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            }</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            $this-&gt;end( $status, $response );</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> put_forms_properties( $property_values, $form_id ) {</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_web_api_capability_put_forms_properties&#39;</span>, <span class="stringliteral">&#39;gravityforms_edit_forms&#39;</span> );</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            $this-&gt;authorize( <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> );</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            <span class="keywordflow">foreach</span> ( $property_values as $key =&gt; $property_value ) {</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                $result = <a class="code" href="class_g_f_a_p_i.html#acaca2b9bbdf1d146e10df3de94e07a20">GFAPI::update_form_property</a>( $form_id, $key, $property_value );</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                }</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                $response = $this-&gt;get_error_response( $result );</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                $status   = $this-&gt;get_error_status( $result );</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                $status   = 200;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                $response = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Success&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;            }</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            $this-&gt;end( $status, $response );</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        }</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> put_entry_properties( $property_values, $entry_id ) {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_web_api_capability_put_entries_properties&#39;</span>, <span class="stringliteral">&#39;gravityforms_edit_entries&#39;</span> );</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;            $this-&gt;authorize( <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> );</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            <span class="keywordflow">if</span> ( is_array( $property_values ) ) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                <span class="keywordflow">foreach</span> ( $property_values as $key =&gt; $property_value ) {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                    $result = <a class="code" href="class_g_f_a_p_i.html#a524045a86763248cf95f0c4988b8875e">GFAPI::update_entry_property</a>( $entry_id, $key, $property_value );</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                    <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                    }</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                }</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                    $response = $this-&gt;get_error_response( $result );</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                    $status   = $this-&gt;get_error_status( $result );</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                    $status   = 200;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                    $response = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Success&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                }</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                $status = 400;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                <span class="keywordflow">if</span> ( empty( $property_values ) ) {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                    $response = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;No property values were found in the request body&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                    $response = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Property values should be sent as an array&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            }</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            $this-&gt;end( $status, $response );</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> post_forms( $data ) {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;            <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_web_api_capability_post_forms&#39;</span>, <span class="stringliteral">&#39;gravityforms_create_form&#39;</span> );</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            $this-&gt;authorize( <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> );</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            $form_ids = <a class="code" href="class_g_f_a_p_i.html#a1dbebe0c9441c8aaeeadca7800483bd3">GFAPI::add_forms</a>( $data );</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $form_ids ) || count( $form_ids ) == 0 ) {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                $response = $this-&gt;get_error_response( $form_ids );</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                $status   = $this-&gt;get_error_status( $form_ids );</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                $status   = 201;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                $response = $form_ids;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;            }</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;            $this-&gt;end( $status, $response );</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        }</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> put_forms( $data, $form_id = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_web_api_capability_put_forms&#39;</span>, <span class="stringliteral">&#39;gravityforms_create_form&#39;</span> );</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            $this-&gt;authorize( <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> );</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;            <span class="keywordflow">if</span> ( empty( $form_id ) ) {</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                $result = <a class="code" href="class_g_f_a_p_i.html#ac76935e7acd9bbab7e7e7e8fe5fc2a5a">GFAPI::update_forms</a>( $data );</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                $result = <a class="code" href="class_g_f_a_p_i.html#a031b7e943e92a2e103e2730afab3b52a">GFAPI::update_form</a>( $data, $form_id );</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            }</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                $response = $this-&gt;get_error_response( $result );</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                $status   = $this-&gt;get_error_status( $result );</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                $status   = 200;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                $response = empty( $form_id ) ? <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Forms updated successfully&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) : <a class="code" href="namespace____.html">__</a>( <span class="stringliteral">&#39;Form updated successfully&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            }</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            $this-&gt;end( $status, $response );</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        }</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> delete_entries( $entry_ids ) {</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_web_api_capability_delete_entries&#39;</span>, <span class="stringliteral">&#39;gravityforms_delete_entries&#39;</span> );</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;            $this-&gt;authorize( <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> );</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a> = 0;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            <span class="keywordflow">if</span> ( is_array( $entry_ids ) ) {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                <span class="keywordflow">foreach</span> ( $entry_ids as $entry_id ) {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                    $this-&gt;<a class="code" href="class_g_f_add_on.html#a5450ae2a722efbf1a0d8391c185a8f02">log_debug</a>( __METHOD__ . <span class="stringliteral">&#39;(): Deleting entry id &#39;</span> . $entry_id );</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                    $result = <a class="code" href="class_g_f_a_p_i.html#ad9aa75cb4f026023fe01781ea3ec6ad6">GFAPI::delete_entry</a>( $entry_id );</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                    <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                    }</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                    <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a> ++;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                }</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                $result = <a class="code" href="class_g_f_a_p_i.html#ad9aa75cb4f026023fe01781ea3ec6ad6">GFAPI::delete_entry</a>( $entry_ids );</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a> ++;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            <span class="keywordflow">if</span> ( isset( $result ) &amp;&amp; <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                $response = $this-&gt;get_error_response( $result );</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                $status   = $this-&gt;get_error_status( $result );</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                $status   = 200;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                $response = sprintf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Entries deleted successfully: %d&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ), <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a> );</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;            }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;            $this-&gt;end( $status, $response );</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        }</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> get_entries( $entry_ids, $form_ids = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>, $schema = <span class="stringliteral">&#39;&#39;</span>, <a class="code" href="select__columns_8php.html#a91d3461e81f93f1a4f3c0e641d254f6d">$field_ids</a> = array() ) {</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_web_api_capability_get_entries&#39;</span>, <span class="stringliteral">&#39;gravityforms_view_entries&#39;</span> );</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            $this-&gt;authorize( <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> );</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            $status   = 200;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            $response = array();</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            $result   = array();</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <span class="keywordflow">if</span> ( $entry_ids ) {</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                <span class="keywordflow">if</span> ( is_array( $entry_ids ) ) {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                    <span class="keywordflow">foreach</span> ( $entry_ids as $entry_id ) {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                        $result = <a class="code" href="class_g_f_a_p_i.html#a5f0f84a15a26ff9a75bb1ab5d5b6fc67">GFAPI::get_entry</a>( $entry_id );</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                        <span class="keywordflow">if</span> ( ! <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                            $result                = $this-&gt;maybe_json_encode_list_fields( $result );</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                            $response[ $entry_id ] = $result;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                            <span class="keywordflow">if</span> ( ! empty( <a class="code" href="select__columns_8php.html#a91d3461e81f93f1a4f3c0e641d254f6d">$field_ids</a> ) &amp;&amp; ( ! empty( $response[ $entry_id ] ) ) ) {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                                $response[ $entry_id ] = $this-&gt;filter_entry_object( $response[ $entry_id ], <a class="code" href="select__columns_8php.html#a91d3461e81f93f1a4f3c0e641d254f6d">$field_ids</a> );</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                            }</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                        }</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                    }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                    $result = <a class="code" href="class_g_f_a_p_i.html#a5f0f84a15a26ff9a75bb1ab5d5b6fc67">GFAPI::get_entry</a>( $entry_ids );</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                    <span class="keywordflow">if</span> ( ! <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                        $result   = $this-&gt;maybe_json_encode_list_fields( $result );</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                        $response = $result;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                        <span class="keywordflow">if</span> ( ! empty( <a class="code" href="select__columns_8php.html#a91d3461e81f93f1a4f3c0e641d254f6d">$field_ids</a> ) &amp;&amp; ( ! empty( $response ) ) ) {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                            $response = $this-&gt;filter_entry_object( $response, <a class="code" href="select__columns_8php.html#a91d3461e81f93f1a4f3c0e641d254f6d">$field_ids</a> );</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                        }</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                    }</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                }</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                <span class="keywordflow">if</span> ( $schema == <span class="stringliteral">&#39;mtd&#39;</span> ) {</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                    $response = self::mtd_transform_entry_data( $response );</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                }</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                <span class="comment">//sorting parameters</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                $sort_key = isset( $_GET[<span class="stringliteral">&#39;sorting&#39;</span>][<span class="stringliteral">&#39;key&#39;</span>] ) &amp;&amp; ! empty( $_GET[<span class="stringliteral">&#39;sorting&#39;</span>][<span class="stringliteral">&#39;key&#39;</span>] ) ? $_GET[<span class="stringliteral">&#39;sorting&#39;</span>][<span class="stringliteral">&#39;key&#39;</span>] : <span class="stringliteral">&#39;id&#39;</span>;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                $sort_dir = isset( $_GET[<span class="stringliteral">&#39;sorting&#39;</span>][<span class="stringliteral">&#39;direction&#39;</span>] ) &amp;&amp; ! empty( $_GET[<span class="stringliteral">&#39;sorting&#39;</span>][<span class="stringliteral">&#39;direction&#39;</span>] ) ? $_GET[<span class="stringliteral">&#39;sorting&#39;</span>][<span class="stringliteral">&#39;direction&#39;</span>] : <span class="stringliteral">&#39;DESC&#39;</span>;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                $sorting  = array( <span class="stringliteral">&#39;key&#39;</span> =&gt; $sort_key, <span class="stringliteral">&#39;direction&#39;</span> =&gt; $sort_dir );</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                <span class="keywordflow">if</span> ( isset( $_GET[<span class="stringliteral">&#39;sorting&#39;</span>][<span class="stringliteral">&#39;is_numeric&#39;</span>] ) ) {</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                    $sorting[<span class="stringliteral">&#39;is_numeric&#39;</span>] = $_GET[<span class="stringliteral">&#39;sorting&#39;</span>][<span class="stringliteral">&#39;is_numeric&#39;</span>];</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                }</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                <span class="comment">//paging parameters</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                $page_size = isset( $_GET[<span class="stringliteral">&#39;paging&#39;</span>][<span class="stringliteral">&#39;page_size&#39;</span>] ) ? intval( $_GET[<span class="stringliteral">&#39;paging&#39;</span>][<span class="stringliteral">&#39;page_size&#39;</span>] ) : 10;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                <span class="keywordflow">if</span> ( isset( $_GET[<span class="stringliteral">&#39;paging&#39;</span>][<span class="stringliteral">&#39;current_page&#39;</span>] ) ) {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                    $current_page = intval( $_GET[<span class="stringliteral">&#39;paging&#39;</span>][<span class="stringliteral">&#39;current_page&#39;</span>] );</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                    $offset       = $page_size * ( $current_page - 1 );</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                    $offset = isset( $_GET[<span class="stringliteral">&#39;paging&#39;</span>][<span class="stringliteral">&#39;offset&#39;</span>] ) ? intval( $_GET[<span class="stringliteral">&#39;paging&#39;</span>][<span class="stringliteral">&#39;offset&#39;</span>] ) : 0;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                }</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                $paging = array( <span class="stringliteral">&#39;offset&#39;</span> =&gt; $offset, <span class="stringliteral">&#39;page_size&#39;</span> =&gt; $page_size );</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                <span class="keywordflow">if</span> ( isset( $_GET[<span class="stringliteral">&#39;search&#39;</span>] ) ) {</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                    $search = $_GET[<span class="stringliteral">&#39;search&#39;</span>];</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                    <span class="keywordflow">if</span> ( ! is_array( $search ) ) {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                        $search = urldecode( ( stripslashes( $search ) ) );</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                        $search = json_decode( $search, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                    }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                    $search = array();</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                }</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                <span class="keywordflow">if</span> ( empty( $form_ids ) ) {</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                    $form_ids = 0;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                } <span class="comment">// all forms</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                $entry_count = <a class="code" href="class_g_f_a_p_i.html#a95265e7cfcd62d1b119e2bf4ba74d916">GFAPI::count_entries</a>( $form_ids, $search );</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                $result = $entry_count &gt; 0 ? <a class="code" href="class_g_f_a_p_i.html#a6282817eaab3805743b691007283d831">GFAPI::get_entries</a>( $form_ids, $search, $sorting, $paging ) : array();</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                <span class="keywordflow">if</span> ( ! <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                    <span class="keywordflow">foreach</span> ( $result as &amp;$entry ) {</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                        $entry = $this-&gt;maybe_json_encode_list_fields( $entry );</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                    }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                    $response = array( <span class="stringliteral">&#39;total_count&#39;</span> =&gt; $entry_count, <span class="stringliteral">&#39;entries&#39;</span> =&gt; $result );</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                    <span class="keywordflow">if</span> ( $schema == <span class="stringliteral">&#39;mtd&#39;</span> ) {</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                        $response = $this-&gt;mtd_transform_entries_data( $response, $form_ids );</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                    }</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                }</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;            }</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                $response = $this-&gt;get_error_response( $result );</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                $status   = $this-&gt;get_error_status( $result );</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;            }</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;            $this-&gt;end( $status, $response );</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        }</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> filter_entry_object( $entry, <a class="code" href="select__columns_8php.html#a91d3461e81f93f1a4f3c0e641d254f6d">$field_ids</a> ) {</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;            <span class="keywordflow">if</span> ( ! is_array( <a class="code" href="select__columns_8php.html#a91d3461e81f93f1a4f3c0e641d254f6d">$field_ids</a> ) ) {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                <a class="code" href="select__columns_8php.html#a91d3461e81f93f1a4f3c0e641d254f6d">$field_ids</a> = array( <a class="code" href="select__columns_8php.html#a91d3461e81f93f1a4f3c0e641d254f6d">$field_ids</a> );</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;            }</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;            $new_entry = array();</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;            <span class="keywordflow">foreach</span> ( $entry as $key =&gt; $val ) {</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                <span class="keywordflow">if</span> ( in_array( $key, <a class="code" href="select__columns_8php.html#a91d3461e81f93f1a4f3c0e641d254f6d">$field_ids</a> ) || ( is_numeric( $key ) &amp;&amp; in_array( intval( $key ), <a class="code" href="select__columns_8php.html#a91d3461e81f93f1a4f3c0e641d254f6d">$field_ids</a> ) ) ) {</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                    $new_entry[ $key ] = $val;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                }</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;            }</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;            <span class="keywordflow">return</span> $new_entry;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        }</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> get_forms( $form_ids = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>, $schema = <span class="stringliteral">&#39;&#39;</span> ) {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;            <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_web_api_capability_get_forms&#39;</span>, <span class="stringliteral">&#39;gravityforms_edit_forms&#39;</span> );</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;            $this-&gt;authorize( <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> );</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            $status   = 200;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;            $response = array();</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;            <span class="keywordflow">if</span> ( empty( $form_ids ) ) {</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                <a class="code" href="data-source_8php.html#a8dcd469e6c336555e43c3003b0a0da54">$forms</a> = <a class="code" href="class_g_f_forms_model.html#a2588ca308291486736bb5c13b9019596">RGFormsModel::get_forms</a>( <span class="keyword">true</span> );</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                <span class="keywordflow">foreach</span> ( <a class="code" href="data-source_8php.html#a8dcd469e6c336555e43c3003b0a0da54">$forms</a> as <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> ) {</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                    $form_id              = $form-&gt;id;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                    $totals               = <a class="code" href="class_g_f_forms_model.html#aee4143ad016d07b138295b9661f9f6dd">GFFormsModel::get_form_counts</a>( $form_id );</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                    $form_info            = array(</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                        <span class="stringliteral">&#39;id&#39;</span>      =&gt; $form_id,</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                        <span class="stringliteral">&#39;title&#39;</span>   =&gt; $form-&gt;title,</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                        <span class="stringliteral">&#39;entries&#39;</span> =&gt; rgar( $totals, <span class="stringliteral">&#39;total&#39;</span> )</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                    );</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                    $response[ <a class="code" href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a> ] = $form_info;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                }</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                <span class="keywordflow">if</span> ( $schema == <span class="stringliteral">&#39;mtd&#39;</span> ) {</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                    $response = $this-&gt;mtd_transform_forms_data( $response );</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                }</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                <span class="keywordflow">if</span> ( is_array( $form_ids ) ) {</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                    <span class="keywordflow">foreach</span> ( $form_ids as $form_id ) {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                        $response[ <a class="code" href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a> ] = <a class="code" href="class_g_f_a_p_i.html#a67f5153934232313e472eae02eb2d633">GFAPI::get_form</a>( $form_id );</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                    }</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                    $result = <a class="code" href="class_g_f_a_p_i.html#a67f5153934232313e472eae02eb2d633">GFAPI::get_form</a>( $form_ids );</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                    <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                        $response = $this-&gt;get_error_response( $result );</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                        $status   = $this-&gt;get_error_status( $result );</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                    } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( ! $result ) {</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                        $this-&gt;die_not_found();</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                        $response = $result;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                    }</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                }</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;            }</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;            $this-&gt;end( $status, $response );</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        }</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> maybe_json_encode_list_fields( $entry ) {</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;            $form_id = $entry[<span class="stringliteral">&#39;form_id&#39;</span>];</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;            $form    = <a class="code" href="class_g_f_a_p_i.html#a67f5153934232313e472eae02eb2d633">GFAPI::get_form</a>( $form_id );</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            <span class="keywordflow">if</span> ( ! empty ( $form[<span class="stringliteral">&#39;fields&#39;</span>] ) &amp;&amp; is_array( $form[<span class="stringliteral">&#39;fields&#39;</span>] ) ) {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                <span class="keywordflow">foreach</span> ( $form[<span class="stringliteral">&#39;fields&#39;</span>] as <a class="code" href="gquiz__grade_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a> ) {</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                    <span class="comment">/* @var GF_Field $field */</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                    <span class="keywordflow">if</span> ( $field-&gt;get_input_type() == <span class="stringliteral">&#39;list&#39;</span> ) {</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                        $new_value = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3c69a81464e61cfafd41fc129b6df2d4">maybe_unserialize</a>( $entry[ $field-&gt;id ] );</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                        <span class="keywordflow">if</span> ( ! $this-&gt;<a class="code" href="class_g_f_add_on.html#aa303e66617af58153c779ba74ba3f09f">is_json</a>( $new_value ) ) {</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                            $new_value = json_encode( $new_value );</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                        }</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                        $entry[ $field-&gt;id ] = $new_value;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                    }</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                }</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;            }</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            <span class="keywordflow">return</span> $entry;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        }</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> maybe_serialize_list_fields( $entry, $form_id = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            <span class="keywordflow">if</span> ( empty( $form_id ) ) {</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                $form_id = $entry[<span class="stringliteral">&#39;form_id&#39;</span>];</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;            }</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;            $form = <a class="code" href="class_g_f_a_p_i.html#a67f5153934232313e472eae02eb2d633">GFAPI::get_form</a>( $form_id );</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;            <span class="keywordflow">if</span> ( ! empty ( $form[<span class="stringliteral">&#39;fields&#39;</span>] ) &amp;&amp; is_array( $form[<span class="stringliteral">&#39;fields&#39;</span>] ) ) {</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                <span class="keywordflow">foreach</span> ( $form[<span class="stringliteral">&#39;fields&#39;</span>] as $field ) {</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                    <span class="comment">/* @var GF_Field $field */</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                    <span class="keywordflow">if</span> ( $field-&gt;get_input_type() == <span class="stringliteral">&#39;list&#39;</span> ) {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                        $new_list_value = $this-&gt;<a class="code" href="class_g_f_add_on.html#a69967c33c95b7fba0fc73f5ba4d05456">maybe_decode_json</a>( $entry[ $field-&gt;id ] );</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                        <span class="keywordflow">if</span> ( ! <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a72356a96b9449d3b2acd81b36cfc5c45">is_serialized</a>( $new_list_value ) ) {</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                            $new_list_value = serialize( $new_list_value );</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                        }</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                        $entry[ $field-&gt;id ] = $new_list_value;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                    }</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                }</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;            }</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;            <span class="keywordflow">return</span> $entry;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        }</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        <span class="comment">// RESULTS</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> get_results_cache_key( $form_id, $fields, $search_criteria ) {</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;            $key = $this-&gt;get_results_cache_key_prefix( $form_id );</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;            $key .= wp_hash( json_encode( $fields ) . json_encode( $search_criteria ) );</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;            <span class="keywordflow">return</span> $key;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        }</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> get_results_cache_key_prefix( $form_id ) {</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            global <a class="code" href="wp-settings_8php.html#a52044fb33b3842bc3d4655d3bd64415e">$blog_id</a>;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            $key = <a class="code" href="load_8php.html#a72e5386fcd7a5ce7526d208d0b03a0af">is_multisite</a>() ? $blog_id . <span class="charliteral">&#39;-&#39;</span> : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            $key .= sprintf( <span class="stringliteral">&#39;%s-cache-%s-&#39;</span>, $this-&gt;_slug, $form_id );</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;            <span class="comment">// The option_name column in the options table has a max length of 64 chars.</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;            <span class="comment">// Truncate the key if it&#39;s too long for column and allow space for the &#39;tmp&#39; prefix</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            $key = substr( $key, 0, 60 );</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            <span class="keywordflow">return</span> $key;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        }</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> update_entry_status( $lead_id ) {</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            $lead    = <a class="code" href="class_g_f_forms_model.html#a8aa723db710f9582b3742354d886c1a7">RGFormsModel::get_lead</a>( $lead_id );</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;            $form_id = $lead[<span class="stringliteral">&#39;form_id&#39;</span>];</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;            $form    = <a class="code" href="class_g_f_forms_model.html#a2bbf1022c96f557e04addbdd5d803fcf">GFFormsModel::get_form_meta</a>( $form_id );</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            $this-&gt;maybe_update_results_cache_meta( $form );</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        }</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> entry_updated( $form, $lead_id ) {</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;            $this-&gt;maybe_update_results_cache_meta( $form );</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        }</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> entry_created( $entry, $form ) {</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            $this-&gt;maybe_update_results_cache_meta( $form );</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        }</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> after_save_form( $form, $is_new ) {</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            <span class="keywordflow">if</span> ( $is_new ) {</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            }</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            $form_id = $form[<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;            <span class="comment">// only need cache meta when a cache exists</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;            <span class="keywordflow">if</span> ( <span class="keyword">false</span> === $this-&gt;results_cache_exists( $form_id ) ) {</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;            }</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;            $fields              = rgar( $form, <span class="stringliteral">&#39;fields&#39;</span> );</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;            $current_fields_hash = wp_hash( json_encode( $fields ) );</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;            $cache_meta         = $this-&gt;get_results_cache_meta( $form_id );</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;            $cached_fields_hash = rgar( $cache_meta, <span class="stringliteral">&#39;fields_hash&#39;</span> );</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            <span class="keywordflow">if</span> ( $current_fields_hash !== $cached_fields_hash ) {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                <span class="comment">// delete the meta for this form</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                $this-&gt;delete_results_cache_meta( $form_id );</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                <span class="comment">// delete all cached results for this form</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                $this-&gt;delete_cached_results( $form_id );</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;            }</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        }</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> results_cache_exists( $form_id ) {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;            global <a class="code" href="schema_8php.html#aaac3ddf81d405fac59e1dceeca05b0a7">$wpdb</a>;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;            $key = $this-&gt;get_results_cache_key_prefix( $form_id );</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;            $key = <span class="charliteral">&#39;%&#39;</span> . GFCommon::esc_like( $key ) . <span class="charliteral">&#39;%&#39;</span>;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;            $sql = $wpdb-&gt;prepare( <span class="stringliteral">&quot;SELECT count(option_id) FROM $wpdb-&gt;options WHERE option_name LIKE %s&quot;</span>, $key );</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            $result = $wpdb-&gt;get_var( $sql );</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;            <span class="keywordflow">return</span> $result &gt; 0;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        }</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> delete_cached_results( $form_id ) {</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;            global <a class="code" href="schema_8php.html#aaac3ddf81d405fac59e1dceeca05b0a7">$wpdb</a>;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;            $form = <a class="code" href="class_g_f_a_p_i.html#a67f5153934232313e472eae02eb2d633">GFAPI::get_form</a>( $form_id );</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;            <span class="keywordflow">if</span> ( ! ( $form ) || ! is_array( $form ) ) {</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;            }</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;            $key = $this-&gt;get_results_cache_key_prefix( $form_id );</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;            $key = <span class="charliteral">&#39;%&#39;</span> . GFCommon::esc_like( $key ) . <span class="charliteral">&#39;%&#39;</span>;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            $sql = $wpdb-&gt;prepare( <span class="stringliteral">&quot;DELETE FROM $wpdb-&gt;options WHERE option_name LIKE %s&quot;</span>, $key );</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;            $result = $wpdb-&gt;query( $sql );</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;            <span class="keywordflow">return</span> $result;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        }</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        <span class="comment">// When entries are added or updated the cache needs to be expired and rebuilt.</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        <span class="comment">// This cache meta records the last updated time for each form and a hash of the fields array.</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        <span class="comment">// Each time results are requested this value is checked to make sure the cache is still valid.</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> maybe_update_results_cache_meta( $form ) {</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;            $form_id = $form[<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;            <span class="comment">// only need to expire the cache when a cache already exists</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;            <span class="keywordflow">if</span> ( <span class="keyword">false</span> === $this-&gt;results_cache_exists( $form_id ) ) {</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;            }</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;            $this-&gt;update_results_cache_meta( $form_id, rgar( $form, <span class="stringliteral">&#39;fields&#39;</span> ) );</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        }</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> update_results_cache_meta( $form_id, $fields, $expiry = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;            <span class="keywordflow">if</span> ( empty( $expiry ) ) {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                $expiry = time();</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;            }</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            $data = array(</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;                <span class="stringliteral">&#39;fields_hash&#39;</span> =&gt; wp_hash( json_encode( $fields ) ),</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                <span class="stringliteral">&#39;timestamp&#39;</span>   =&gt; $expiry,</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;            );</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;            $key = $this-&gt;get_results_cache_meta_key( $form_id );</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            $this-&gt;update_results_cache( $key, $data );</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        }</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> delete_results_cache_meta( $form_id ) {</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            $key = $this-&gt;get_results_cache_meta_key( $form_id );</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            <a class="code" href="option_8php.html#a44451bc2bc382b2c24f4baeef80a3714">delete_option</a>( $key );</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        }</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> get_results_cache_meta_key( $form_id ) {</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;            global <a class="code" href="wp-settings_8php.html#a52044fb33b3842bc3d4655d3bd64415e">$blog_id</a>;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;            $key = <a class="code" href="load_8php.html#a72e5386fcd7a5ce7526d208d0b03a0af">is_multisite</a>() ? $blog_id . <span class="charliteral">&#39;-&#39;</span> : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            $key .= <span class="stringliteral">&#39;gfresults-cache-meta-form-&#39;</span> . <a class="code" href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a>;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;            <span class="keywordflow">return</span> $key;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        }</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> get_results_cache_meta( $form_id ) {</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;            $key        = $this-&gt;get_results_cache_meta_key( $form_id );</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;            $cache_meta = <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( $key );</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;            <span class="keywordflow">return</span> $cache_meta;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        }</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> update_results_cache( $key, $data ) {</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;            <a class="code" href="option_8php.html#a44451bc2bc382b2c24f4baeef80a3714">delete_option</a>( $key );</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;            $result = <a class="code" href="option_8php.html#afacc3facc45e9b1cf03120755d40f494">add_option</a>( $key, $data, <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;no&#39;</span> );</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;            <span class="keywordflow">return</span> $result;</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        }</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        <span class="comment">// Recursive wp_cron task to continue the calculation of results</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> results_cron( $form, $fields, $search_criteria ) {</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;            $form_id = $form[<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;            $key     = $this-&gt;get_results_cache_key( $form_id, $fields, $search_criteria );</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;            $key_tmp = <span class="stringliteral">&#39;tmp&#39;</span> . $key;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;            $state   = <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( $key_tmp, array() );</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;            <span class="keywordflow">if</span> ( ! empty( $state ) ) {</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                <span class="keywordflow">if</span> ( ! class_exists( <span class="stringliteral">&#39;GFResults&#39;</span> ) ) {</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;                    require_once( GFCommon::get_base_path() . <span class="stringliteral">&#39;/includes/addon/class-gf-results.php&#39;</span> );</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                }</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                $gf_results = <span class="keyword">new</span> GFResults( $this-&gt;_slug, array() );</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;                $results    = $gf_results-&gt;get_results_data( $form, $fields, $search_criteria, $state );</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;                <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;complete&#39;</span> == $results[<span class="stringliteral">&#39;status&#39;</span>] ) {</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;                    <span class="keywordflow">if</span> ( isset( $results[<span class="stringliteral">&#39;progress&#39;</span>] ) ) {</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;                        unset( $results[<span class="stringliteral">&#39;progress&#39;</span>] );</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                    }</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;                    $this-&gt;update_results_cache( $key, $results );</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;                    <span class="keywordflow">if</span> ( <span class="keyword">false</span> == empty( $state ) ) {</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                        <a class="code" href="option_8php.html#a44451bc2bc382b2c24f4baeef80a3714">delete_option</a>( $key_tmp );</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                    }</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;                    $this-&gt;update_results_cache( $key_tmp, $results );</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;                    $data = <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( $key );</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                    <span class="keywordflow">if</span> ( $data ) {</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;                        $data[<span class="stringliteral">&#39;progress&#39;</span>] = $results[<span class="stringliteral">&#39;progress&#39;</span>];</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;                        $this-&gt;update_results_cache( $key, $data );</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                    }</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                    $this-&gt;schedule_results_cron( $form, $fields, $search_criteria );</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;                }</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;            }</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        }</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;        <span class="comment">// Returns an array with the results for all the fields in the form.</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        <span class="comment">// If the results can be calculated within the time allowed in GFResults then the results are returned and nothing is cached.</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        <span class="comment">// If the calculation has not finished then a single recursive wp_cron task will be scheduled for immediate execution.</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        <span class="comment">// While the cache is being built by the wp_cron task this function will return the expired cache results if available or the latest step in the cache build.</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        <span class="comment">// Add-On-specific results are not included e.g. grade frequencies in the Quiz Add-On.</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> get_results( $form_id ) {</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;            <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_web_api_capability_get_results&#39;</span>, <span class="stringliteral">&#39;gravityforms_view_entries&#39;</span> );</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;            $this-&gt;authorize( <a class="code" href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a> );</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;            <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a> = rgget( <span class="charliteral">&#39;s&#39;</span> ); <span class="comment">// search criteria</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;            $search_criteria = <span class="keyword">false</span> === empty( <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a> ) &amp;&amp; is_array( <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a> ) ? <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a> : array();</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;            $form = <a class="code" href="class_g_f_a_p_i.html#a67f5153934232313e472eae02eb2d633">GFAPI::get_form</a>( $form_id );</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;            <span class="keywordflow">if</span> ( ! $form ) {</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;                self::die_not_found();</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;            }</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;            <span class="comment">// for the Web API return all fields</span></div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;            $fields = rgar( $form, <span class="stringliteral">&#39;fields&#39;</span> );</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;            $form_id = $form[<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;            $key     = $this-&gt;get_results_cache_key( $form_id, $fields, $search_criteria );</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;            $key_tmp = <span class="stringliteral">&#39;tmp&#39;</span> . $key;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            $data = <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( $key, array() );</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;            $cache_meta = $this-&gt;get_results_cache_meta( $form_id );</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;            <span class="comment">// add the cache meta early so form editor updates can test for valid field hash</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;            <span class="keywordflow">if</span> ( empty( $cache_meta ) ) {</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;                $this-&gt;update_results_cache_meta( $form_id, $fields, 0 );</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;            }</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;            $cache_expiry    = rgar( $cache_meta, <span class="stringliteral">&#39;timestamp&#39;</span> );</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;            $cache_timestamp = isset( $data[<span class="stringliteral">&#39;timestamp&#39;</span>] ) ? $data[<span class="stringliteral">&#39;timestamp&#39;</span>] : 0;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;            $cache_expired   = $cache_expiry ? $cache_expiry &gt; $cache_timestamp : <span class="keyword">false</span>;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;            <span class="comment">// check for valid cached results first</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;            <span class="keywordflow">if</span> ( ! empty( $data ) &amp;&amp; <span class="stringliteral">&#39;complete&#39;</span> == rgar( $data, <span class="stringliteral">&#39;status&#39;</span> ) &amp;&amp; ! $cache_expired ) {</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                $results = $data;</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                $status  = 200;</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;                <span class="keywordflow">if</span> ( isset( $results[<span class="stringliteral">&#39;progress&#39;</span>] ) ) {</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;                    unset( $results[<span class="stringliteral">&#39;progress&#39;</span>] );</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;                }</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;                $state = <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( $key_tmp );</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;                <span class="keywordflow">if</span> ( empty( $state ) || ( <span class="stringliteral">&#39;complete&#39;</span> == rgar( $data, <span class="stringliteral">&#39;status&#39;</span> ) &amp;&amp; $cache_expired ) ) {</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;                    <span class="keywordflow">if</span> ( ! class_exists( <span class="stringliteral">&#39;GFResults&#39;</span> ) ) {</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;                        require_once( GFCommon::get_base_path() . <span class="stringliteral">&#39;/includes/addon/class-gf-results.php&#39;</span> );</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;                    }</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;                    $gf_results         = <span class="keyword">new</span> GFResults( $this-&gt;_slug, array() );</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;                    $max_execution_time = 5;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;                    $results            = $gf_results-&gt;get_results_data( $form, $fields, $search_criteria, $state, $max_execution_time );</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;                    <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;complete&#39;</span> == rgar( $data, <span class="stringliteral">&#39;status&#39;</span> ) ) {</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;                        $status = 200;</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;                        <span class="keywordflow">if</span> ( <span class="keyword">false</span> == empty( $state ) ) {</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;                            <a class="code" href="option_8php.html#a44451bc2bc382b2c24f4baeef80a3714">delete_option</a>( $key_tmp );</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                        }</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;                        <span class="keywordflow">if</span> ( <span class="keyword">false</span> === empty( $data ) &amp;&amp; <span class="stringliteral">&#39;complete&#39;</span> == rgar( $data, <span class="stringliteral">&#39;status&#39;</span> ) &amp;&amp; $cache_expired ) {</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;                            $data[<span class="stringliteral">&#39;status&#39;</span>]   = <span class="stringliteral">&#39;expired&#39;</span>;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;                            $data[<span class="stringliteral">&#39;progress&#39;</span>] = $results[<span class="stringliteral">&#39;progress&#39;</span>];</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;                            $this-&gt;update_results_cache( $key, $data );</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                        }</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;                        $this-&gt;update_results_cache( $key_tmp, $results );</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;                        $this-&gt;schedule_results_cron( $form, $fields, $search_criteria );</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;                        <span class="keywordflow">if</span> ( $data ) {</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;                            $results = $data;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;                        }</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;                        $status = 202;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                    }</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                    <span class="comment">// The cron task is recursive, not periodic, so system restarts, script timeouts and memory issues can prevent the cron from restarting.</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                    <span class="comment">// Check timestamp and kick off the cron again if it appears to have stopped</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;                    $state_timestamp = rgar( $state, <span class="stringliteral">&#39;timestamp&#39;</span> );</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                    $state_age       = time() - $state_timestamp;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;                    <span class="keywordflow">if</span> ( $state_age &gt; 180 &amp;&amp; ! $this-&gt;results_cron_is_scheduled( $form, $fields, $search_criteria ) ) {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                        $this-&gt;schedule_results_cron( $form, $fields, $search_criteria );</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;                    }</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                    <span class="keywordflow">if</span> ( <span class="keyword">false</span> === empty( $data ) &amp;&amp; <span class="stringliteral">&#39;expired&#39;</span> == rgar( $data, <span class="stringliteral">&#39;status&#39;</span> ) ) {</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;                        $results = $data;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                        $results = $state;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                    }</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                    $status = 202;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                }</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;            }</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;            $fields = rgar( $results, <span class="stringliteral">&#39;field_data&#39;</span> );</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;            <span class="keywordflow">if</span> ( ! empty( $fields ) ) {</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;                <span class="comment">// add choice labels to the results so the client doesn&#39;t need to cross-reference with the form object</span></div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                $results[<span class="stringliteral">&#39;field_data&#39;</span>] = $this-&gt;results_data_add_labels( $form, $fields );</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;            }</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;            $this-&gt;end( $status, $results );</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        }</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> schedule_results_cron( $form, $fields, $search_criteria, $delay_in_seconds = 10 ) {</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;            <span class="comment">// reduces problems with concurrency</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;            <a class="code" href="cache_8php.html#a5051b30effe4731d830d0a838121b867">wp_cache_delete</a>( <span class="stringliteral">&#39;alloptions&#39;</span>, <span class="stringliteral">&#39;options&#39;</span> );</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;            $args = array( $form, $fields, $search_criteria );</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;            <a class="code" href="cron_8php.html#aa1513c794ed209ff01c44928a64f6752">wp_schedule_single_event</a>( time() + $delay_in_seconds, $this-&gt;get_results_cron_hook(), $args );</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;        }</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> results_cron_is_scheduled( $form, $fields, $search_criteria ) {</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;            $args = array( $form, $fields, $search_criteria );</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="cron_8php.html#a43c91d6f17c79de5969b87b540ad151f">wp_next_scheduled</a>( $this-&gt;get_results_cron_hook(), $args );</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        }</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> get_results_cron_hook() {</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&#39;gravityforms_results_cron_&#39;</span> . $this-&gt;_slug;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;        }</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> results_data_add_labels( $form, $fields ) {</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;            <span class="comment">// replace the values/ids with text labels</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;            <span class="keywordflow">foreach</span> ( $fields as <a class="code" href="time_8php.html#a77957aab921d62a9e2d2783a4924e634">$field_id</a> =&gt; $choice_counts ) {</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;                $field = <a class="code" href="class_g_f_forms_model.html#a5861b1ac8048f1af93bf65fd5d8cac7e">GFFormsModel::get_field</a>( $form, <a class="code" href="time_8php.html#a77957aab921d62a9e2d2783a4924e634">$field_id</a> );</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;                $type  = $field-&gt;get_input_type();</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;                <span class="keywordflow">if</span> ( is_array( $choice_counts ) ) {</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;                    <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> = 0;</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;                    <span class="keywordflow">foreach</span> ( $choice_counts as $choice_value =&gt; $choice_count ) {</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;                        <span class="keywordflow">if</span> ( class_exists( <span class="stringliteral">&#39;GFSurvey&#39;</span> ) &amp;&amp; <span class="stringliteral">&#39;likert&#39;</span> == $type &amp;&amp; rgar( $field, <span class="stringliteral">&#39;gsurveyLikertEnableMultipleRows&#39;</span> ) ) {</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;                            $row_text       = GFSurvey::get_likert_row_text( $field, <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> ++ );</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;                            $counts_for_row = array();</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;                            <span class="keywordflow">foreach</span> ( $choice_count as $col_val =&gt; $col_count ) {</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;                                <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>                       = GFSurvey::get_likert_column_text( $field, $choice_value . <span class="charliteral">&#39;:&#39;</span> . $col_val );</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;                                $counts_for_row[ $col_val ] = array( <span class="stringliteral">&#39;text&#39;</span> =&gt; <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, <span class="stringliteral">&#39;data&#39;</span> =&gt; $col_count );</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;                            }</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;                            $counts_for_row[ $choice_value ][<span class="stringliteral">&#39;data&#39;</span>] = $counts_for_row;</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;                            $fields[ <a class="code" href="time_8php.html#a77957aab921d62a9e2d2783a4924e634">$field_id</a> ][ $choice_value ]    = array(</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                                <span class="stringliteral">&#39;text&#39;</span>  =&gt; $row_text,</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span> =&gt; <span class="stringliteral">&quot;$choice_value&quot;</span>,</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;                                <span class="stringliteral">&#39;count&#39;</span> =&gt; $counts_for_row</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;                            );</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;                            <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>                                 = <a class="code" href="class_g_f_forms_model.html#a2db0d85a059a494987a8e8ef648e1c49">GFFormsModel::get_choice_text</a>( $field, $choice_value );</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;                            $fields[ <a class="code" href="time_8php.html#a77957aab921d62a9e2d2783a4924e634">$field_id</a> ][ $choice_value ] = array(</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;                                <span class="stringliteral">&#39;text&#39;</span>  =&gt; <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>,</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span> =&gt; <span class="stringliteral">&quot;$choice_value&quot;</span>,</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;                                <span class="stringliteral">&#39;count&#39;</span> =&gt; $choice_count</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;                            );</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;                        }</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;                    }</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;                }</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;            }</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;            <span class="keywordflow">return</span> $fields;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        }</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        <span class="comment">// ----- end RESULTS</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        <span class="keyword">private</span> <span class="keyword">function</span> authenticate() {</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;            <span class="keywordflow">if</span> ( isset( $_REQUEST[<span class="stringliteral">&#39;_gf_json_nonce&#39;</span>] ) &amp;&amp; is_user_logged_in() ) {</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;                <span class="comment">// WordPress cookie authentication for plugins and themes on this server.</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;                check_admin_referer( <span class="stringliteral">&#39;gf_api&#39;</span>, <span class="stringliteral">&#39;_gf_json_nonce&#39;</span> );</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;            }</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;            $authenticated = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;            <span class="keywordflow">if</span> ( isset( $_GET[<span class="stringliteral">&#39;api_key&#39;</span>] ) ) {</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;                <span class="comment">// Signatures required for external requests</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                <span class="keywordflow">if</span> ( rgget( <span class="stringliteral">&#39;api_key&#39;</span> ) == $this-&gt;_public_key ) {</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;                    <span class="keywordflow">if</span> ( self::check_signature() ) {</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                        $authenticated = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;                    }</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;                }</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;            }</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;            <span class="keywordflow">if</span> ( $authenticated ) {</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;                $settings = <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;gravityformsaddon_gravityformswebapi_settings&#39;</span> );</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;                <span class="keywordflow">if</span> ( empty( $settings ) || ! $settings[<span class="stringliteral">&#39;enabled&#39;</span>] ) {</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                    $authenticated = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;                    $account_id = $settings[<span class="stringliteral">&#39;impersonate_account&#39;</span>];</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;                    wp_set_current_user( $account_id );</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;                }</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;            }</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;            <span class="keywordflow">if</span> ( ! $authenticated ) {</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;                $this-&gt;<a class="code" href="class_g_f_add_on.html#a5450ae2a722efbf1a0d8391c185a8f02">log_debug</a>( __METHOD__ . <span class="stringliteral">&#39;(): Could not authenticate, permission denied.&#39;</span> );</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;                $this-&gt;die_permission_denied();</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;            }</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        }</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;        <span class="keyword">private</span> <span class="keyword">function</span> check_signature() {</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;            <span class="keywordflow">if</span> ( <span class="keyword">false</span> === GFWEBAPI_REQUIRE_SIGNATURE ) {</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;            }</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;            $expires = (int) rgget( <span class="stringliteral">&#39;expires&#39;</span> );</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;            $api_key = rgget( <span class="stringliteral">&#39;api_key&#39;</span> );</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;            <a class="code" href="wp-load_8php.html#a0a4baf0b22973c07685c3981f0d17fc4">$path</a>    = strtolower( <a class="code" href="query_8php.html#a8e8814f4728ccc9c0d616ec535845129">get_query_var</a>( GFWEBAPI_ROUTE_VAR ) );</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;            $method  = strtoupper( <a class="code" href="edit-tags_8php.html#aed6d7b9acff0b9518917d3b0573bc636">$_SERVER</a>[<span class="stringliteral">&#39;REQUEST_METHOD&#39;</span>] );</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;            $signature = rgget( <span class="stringliteral">&#39;signature&#39;</span> );</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;            $string_to_check = sprintf( <span class="stringliteral">&#39;%s:%s:%s:%s&#39;</span>, $api_key, $method, <a class="code" href="wp-load_8php.html#a0a4baf0b22973c07685c3981f0d17fc4">$path</a>, $expires );</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;            $calculated_sig = $this-&gt;calculate_signature( $string_to_check );</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;            <span class="keywordflow">if</span> ( time() &gt;= $expires ) {</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;            }</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;            $is_valid = $signature == $calculated_sig || $signature == rawurlencode( $calculated_sig );</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;            <span class="keywordflow">return</span> $is_valid;</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;        }</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;        <span class="keyword">private</span> <span class="keyword">function</span> calculate_signature( $string ) {</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;            $hash = hash_hmac( <span class="stringliteral">&#39;sha1&#39;</span>, $string, $this-&gt;_private_key, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;            $sig  = base64_encode( $hash );</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;            <span class="keywordflow">return</span> $sig;</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;        }</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> end( $status, $response ) {</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;            <a class="code" href="edit__link_8php.html#a73004ce9cd673c1bfafd1dc351134797">$output</a>[<span class="stringliteral">&#39;status&#39;</span>]   = $status;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;            <a class="code" href="edit__link_8php.html#a73004ce9cd673c1bfafd1dc351134797">$output</a>[<span class="stringliteral">&#39;response&#39;</span>] = $response;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;            <span class="comment">// PHP &gt; 5.3</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;            <span class="keywordflow">if</span> ( function_exists( <span class="stringliteral">&#39;header_remove&#39;</span> ) &amp;&amp; ! headers_sent() ) {</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;                header_remove( <span class="stringliteral">&#39;X-Pingback&#39;</span> );</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;            }</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;            header( <span class="stringliteral">&#39;Content-Type: application/json; charset=&#39;</span> . <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;blog_charset&#39;</span> ), <span class="keyword">true</span> );</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;            $output_json = json_encode( <a class="code" href="edit__link_8php.html#a73004ce9cd673c1bfafd1dc351134797">$output</a> );</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;            echo $output_json;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;            die();</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;        }</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> die_not_authorized() {</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;            $this-&gt;end( 401, <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Not authorized&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;        }</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> die_permission_denied() {</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;            $this-&gt;end( 401, <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Permission denied&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;        }</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> die_forbidden() {</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;            $this-&gt;end( 403, <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Forbidden&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        }</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> die_bad_request() {</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;            $this-&gt;end( 400, <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Bad request&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;        }</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> die_not_found() {</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;            $this-&gt;end( 404, <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Not found&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;        }</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> die_not_implemented() {</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;            $this-&gt;end( 501, <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Not implemented&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        }</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> die_error() {</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;            $this-&gt;end( 500, <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Internal Error&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;        }</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> get_error_response( $wp_error ) {</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;            $response[<span class="stringliteral">&#39;code&#39;</span>]    = $wp_error-&gt;get_error_code();</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;            $response[<span class="stringliteral">&#39;message&#39;</span>] = $wp_error-&gt;get_error_message();</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;            $data                = $wp_error-&gt;get_error_data();</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;            <span class="keywordflow">if</span> ( $data ) {</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                $response[<span class="stringliteral">&#39;data&#39;</span>] = $data;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;            }</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;            <span class="keywordflow">return</span> $response;</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        }</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> get_error_status( $wp_error ) {</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;            $error_code = $wp_error-&gt;get_error_code();</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;            $mappings   = array(</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                <span class="stringliteral">&#39;not_found&#39;</span>   =&gt; 404,</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;                <span class="stringliteral">&#39;not_allowed&#39;</span> =&gt; 401,</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;            );</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;            $http_code  = isset( $mappings[ $error_code ] ) ? $mappings[ $error_code ] : 400;</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;            <span class="keywordflow">return</span> $http_code;</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        }</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_form_metas() {</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;            $form_ids = array();</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;            <a class="code" href="data-source_8php.html#a8dcd469e6c336555e43c3003b0a0da54">$forms</a>    = <a class="code" href="class_g_f_forms_model.html#a2588ca308291486736bb5c13b9019596">RGFormsModel::get_forms</a>( <span class="keyword">true</span> );</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;            <span class="keywordflow">foreach</span> ( <a class="code" href="data-source_8php.html#a8dcd469e6c336555e43c3003b0a0da54">$forms</a> as $form ) {</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;                $form_ids[] = $form-&gt;id;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;            }</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;            $form_metas = <a class="code" href="class_g_f_forms_model.html#a07264d926c83b27cf2a451922fb26bba">GFFormsModel::get_form_meta_by_id</a>( $form_ids );</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;            <span class="keywordflow">return</span> $form_metas;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;        }</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> ajax_qrcode() {</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;            require_once GFCommon::get_base_path() . <span class="stringliteral">&#39;/includes/phpqrcode/phpqrcode.php&#39;</span>;</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;            $settings = <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;gravityformsaddon_gravityformswebapi_settings&#39;</span> );</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;            <span class="keywordflow">if</span> ( empty( $settings ) ) {</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                die();</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;            }</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;            $data[<span class="stringliteral">&#39;url&#39;</span>]         = <a class="code" href="noop_8php.html#ad8e3cb90f141ac5aa6d225bc337efc9c">site_url</a>();</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;            $data[<span class="stringliteral">&#39;name&#39;</span>]        = <a class="code" href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a>();</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;            $data[<span class="stringliteral">&#39;public_key&#39;</span>]  = rgar( $settings, <span class="stringliteral">&#39;public_key&#39;</span> );</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;            $data[<span class="stringliteral">&#39;private_key&#39;</span>] = rgar( $settings, <span class="stringliteral">&#39;private_key&#39;</span> );</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;            QRcode::png( json_encode( $data ), <span class="keyword">false</span>, <a class="code" href="phpqrcode_8php.html#ae106d3baebd9c27c90b2abadb25df012">QR_ECLEVEL_L</a>, 4, 1, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;            die();</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        }</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;<span class="comment">        /**</span></div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;<span class="comment">         * Support for MonoTouch.Dialog</span></div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;        <span class="comment">// todo: support array of form ids</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> mtd_transform_entries_data( <a class="code" href="edit__link_8php.html#a73004ce9cd673c1bfafd1dc351134797">$output</a>, $form_id ) {</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;            $form                  = <a class="code" href="class_g_f_forms_model.html#a2bbf1022c96f557e04addbdd5d803fcf">GFFormsModel::get_form_meta</a>( $form_id );</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;            $form_element          = array();</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;            $form_element[<span class="stringliteral">&#39;title&#39;</span>] = $form[<span class="stringliteral">&#39;title&#39;</span>];</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;            $form_element[<span class="stringliteral">&#39;type&#39;</span>]  = <span class="stringliteral">&#39;root&#39;</span>;</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;            $form_element[<span class="stringliteral">&#39;id&#39;</span>]    = <span class="stringliteral">&#39;id-form-&#39;</span> . <a class="code" href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a>;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;            $form_element[<span class="stringliteral">&#39;count&#39;</span>] = rgar( <a class="code" href="edit__link_8php.html#a73004ce9cd673c1bfafd1dc351134797">$output</a>, <span class="stringliteral">&#39;total_count&#39;</span> );</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;            <a class="code" href="other__entries_8php.html#affb4200921149b6126d0e51b415b2c75">$entries</a>               = rgar( <a class="code" href="edit__link_8php.html#a73004ce9cd673c1bfafd1dc351134797">$output</a>, <span class="stringliteral">&#39;entries&#39;</span> );</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;            $section[<span class="stringliteral">&#39;header&#39;</span>] = <span class="stringliteral">&#39;Entries&#39;</span>;</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;            $entry_elements    = array();</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;            <span class="keywordflow">if</span> ( is_array( <a class="code" href="other__entries_8php.html#affb4200921149b6126d0e51b415b2c75">$entries</a> ) ) {</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;                <span class="keywordflow">foreach</span> ( <a class="code" href="other__entries_8php.html#affb4200921149b6126d0e51b415b2c75">$entries</a> as $entry ) {</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;                    $entry_element[<span class="stringliteral">&#39;type&#39;</span>]  = <span class="stringliteral">&#39;root&#39;</span>;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                    $entry_element[<span class="stringliteral">&#39;title&#39;</span>] = $entry[<span class="stringliteral">&#39;id&#39;</span>] . <span class="stringliteral">&#39;: &#39;</span> . $entry[<span class="stringliteral">&#39;date_created&#39;</span>];</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;                    $entry_element[<span class="stringliteral">&#39;id&#39;</span>]    = $entry[<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                    $entry_element[<span class="stringliteral">&#39;url&#39;</span>]   = GFWEBAPI_API_BASE_URL . <span class="stringliteral">&#39;/entries/&#39;</span> . rgar( $entry, <span class="stringliteral">&#39;id&#39;</span> ) . <span class="stringliteral">&#39;?schema=mtd&#39;</span>;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                    $entry_elements[]       = $entry_element;</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;                }</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;            }</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;            $section[<span class="stringliteral">&#39;elements&#39;</span>]        = $entry_elements;</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;            $form_element[<span class="stringliteral">&#39;sections&#39;</span>][] = $section;</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;            <span class="keywordflow">return</span> $form_element;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        }</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> mtd_transform_forms_data( <a class="code" href="data-source_8php.html#a8dcd469e6c336555e43c3003b0a0da54">$forms</a> ) {</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;            $data          = array();</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;            $data[<span class="stringliteral">&#39;title&#39;</span>] = <span class="stringliteral">&#39;Forms&#39;</span>;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;            $data[<span class="stringliteral">&#39;type&#39;</span>]  = <span class="stringliteral">&#39;root&#39;</span>;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;            $data[<span class="stringliteral">&#39;id&#39;</span>]    = <span class="stringliteral">&#39;forms&#39;</span>;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            <span class="keywordflow">foreach</span> ( <a class="code" href="data-source_8php.html#a8dcd469e6c336555e43c3003b0a0da54">$forms</a> as $form ) {</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;                $element               = array();</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;                $element[<span class="stringliteral">&#39;title&#39;</span>]      = $form[<span class="stringliteral">&#39;title&#39;</span>];</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;                $element[<span class="stringliteral">&#39;type&#39;</span>]       = <span class="stringliteral">&#39;root&#39;</span>;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;                $element[<span class="stringliteral">&#39;id&#39;</span>]         = <span class="stringliteral">&#39;id-form-&#39;</span> . $form[<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;                $element[<span class="stringliteral">&#39;url&#39;</span>]        = GFWEBAPI_API_BASE_URL . <span class="stringliteral">&#39;/forms/&#39;</span> . $form[<span class="stringliteral">&#39;id&#39;</span>] . <span class="stringliteral">&#39;/entries.json?schema=mtd&#39;</span>;</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;                $section               = array();</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;                $section[<span class="stringliteral">&#39;elements&#39;</span>][] = $element;</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;                $data[<span class="stringliteral">&#39;sections&#39;</span>][]    = $section;</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;            }</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;            <span class="keywordflow">return</span> $data;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        }</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> mtd_transform_entry_data( $entry ) {</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;            $data                  = array();</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;            $root_element[<span class="stringliteral">&#39;type&#39;</span>]  = <span class="stringliteral">&#39;root&#39;</span>;</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;            $root_element[<span class="stringliteral">&#39;title&#39;</span>] = $entry[<span class="stringliteral">&#39;id&#39;</span>] . <span class="stringliteral">&#39;: &#39;</span> . $entry[<span class="stringliteral">&#39;date_created&#39;</span>];</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;            $root_element[<span class="stringliteral">&#39;id&#39;</span>]    = <span class="stringliteral">&#39;id-entry-&#39;</span> . $entry[<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;            $form_id = rgar( $entry, <span class="stringliteral">&#39;form_id&#39;</span> );</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;            $form    = <a class="code" href="class_g_f_forms_model.html#a2bbf1022c96f557e04addbdd5d803fcf">RGFormsModel::get_form_meta</a>( $form_id );</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;            $fields  = $form[<span class="stringliteral">&#39;fields&#39;</span>];</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;            <span class="keywordflow">foreach</span> ( $fields as $field ) {</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;                $field_data           = array();</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;                $field_data[<span class="stringliteral">&#39;header&#39;</span>] = $field-&gt;label;</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;                $elements             = array();</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;                <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>                = <a class="code" href="class_g_f_forms_model.html#abf73ae376358a1b72c4603c7b8b401ba">RGFormsModel::get_lead_field_value</a>( $entry, $field );</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;                <span class="keywordflow">if</span> ( is_array( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) &amp;&amp; isset( $field-&gt;choices ) ) {</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;                    $choices = $field-&gt;choices;</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;                    <span class="keywordflow">foreach</span> ( $choices as $choice ) {</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;                        $found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;                        <span class="keywordflow">foreach</span> ( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> as $item ) {</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;                            <span class="keywordflow">if</span> ( $item == rgar( $choice, <span class="stringliteral">&#39;value&#39;</span> ) ) {</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;                                $found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;                            }</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;                        }</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;                        $element = array();</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                        $element[<span class="stringliteral">&#39;type&#39;</span>]    = <span class="stringliteral">&#39;checkbox&#39;</span>;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;                        $element[<span class="stringliteral">&#39;caption&#39;</span>] = $choice[<span class="stringliteral">&#39;text&#39;</span>];</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;                        $element[<span class="stringliteral">&#39;value&#39;</span>]   = $found;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;                        $elements[]         = $element;</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                    }</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                    $element            = array();</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;                    $element[<span class="stringliteral">&#39;type&#39;</span>]    = <span class="stringliteral">&#39;string&#39;</span>;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                    $element[<span class="stringliteral">&#39;caption&#39;</span>] = <a class="code" href="class_g_f_forms_model.html#a2db0d85a059a494987a8e8ef648e1c49">GFFormsModel::get_choice_text</a>( $field, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                    $elements[] = $element;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;                }</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;                $field_data[<span class="stringliteral">&#39;elements&#39;</span>] = $elements;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;                $data[]                 = $field_data;</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;            }</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;            $root_element[<span class="stringliteral">&#39;sections&#39;</span>] = $data;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;            <span class="keywordflow">return</span> $root_element;</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        }</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    }</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <span class="keyword">new</span> GFWebAPI();</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;}</div>
<div class="ttc" id="wp-settings_8php_html_a52044fb33b3842bc3d4655d3bd64415e"><div class="ttname"><a href="wp-settings_8php.html#a52044fb33b3842bc3d4655d3bd64415e">$blog_id</a></div><div class="ttdeci">global $blog_id</div><div class="ttdoc">If not already configured, $blog_id will default to 1 in a single site configuration. </div><div class="ttdef"><b>Definition:</b> <a href="wp-settings_8php_source.html#l00030">wp-settings.php:30</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2http_8php_html_a261a794cd8821768dc1325f0bd7d30bf"><div class="ttname"><a href="wordpress_2wp-includes_2http_8php.html#a261a794cd8821768dc1325f0bd7d30bf">send_origin_headers</a></div><div class="ttdeci">send_origin_headers()</div><div class="ttdoc">Send Access-Control-Allow-Origin and related headers if the current request is from an allowed origin...</div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2http_8php_source.html#l00481">wordpress/wp-includes/http.php:481</a></div></div>
<div class="ttc" id="namespaceto_html"><div class="ttname"><a href="namespaceto.html">to</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a72356a96b9449d3b2acd81b36cfc5c45"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a72356a96b9449d3b2acd81b36cfc5c45">is_serialized</a></div><div class="ttdeci">is_serialized($data, $strict=true)</div><div class="ttdoc">Check value to find if it was serialized. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l00340">wordpress/wp-includes/functions.php:340</a></div></div>
<div class="ttc" id="class_g_f_add_on_html_aa1162453f19ce1f8cc95770761e59b4a"><div class="ttname"><a href="class_g_f_add_on.html#aa1162453f19ce1f8cc95770761e59b4a">GFAddOn\init_frontend</a></div><div class="ttdeci">init_frontend()</div><div class="ttdoc">Override this function to add initialization code (i.e. </div><div class="ttdef"><b>Definition:</b> <a href="class-gf-addon_8php_source.html#l00298">class-gf-addon.php:298</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_abf73ae376358a1b72c4603c7b8b401ba"><div class="ttname"><a href="class_g_f_forms_model.html#abf73ae376358a1b72c4603c7b8b401ba">GFFormsModel\get_lead_field_value</a></div><div class="ttdeci">static get_lead_field_value($lead, $field)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l03431">forms_model.php:3431</a></div></div>
<div class="ttc" id="namespacewill_html"><div class="ttname"><a href="namespacewill.html">will</a></div></div>
<div class="ttc" id="wp-includes_2plugin_8php_html_aed75045b0b4572e55462b37b063a77cc"><div class="ttname"><a href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a></div><div class="ttdeci">do_action($tag, $arg= '')</div><div class="ttdoc">Execute functions hooked on a specific action hook. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2plugin_8php_source.html#l00482">wp-includes/plugin.php:482</a></div></div>
<div class="ttc" id="data-source_8php_html_a8dcd469e6c336555e43c3003b0a0da54"><div class="ttname"><a href="data-source_8php.html#a8dcd469e6c336555e43c3003b0a0da54">$forms</a></div><div class="ttdeci">$forms</div><div class="ttdef"><b>Definition:</b> <a href="data-source_8php_source.html#l00017">data-source.php:17</a></div></div>
<div class="ttc" id="namespace_gravity_html"><div class="ttname"><a href="namespace_gravity.html">Gravity</a></div><div class="ttdoc">API for standard Gravity Forms functionality. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l00003">api.php:3</a></div></div>
<div class="ttc" id="noop_8php_html_ad8e3cb90f141ac5aa6d225bc337efc9c"><div class="ttname"><a href="noop_8php.html#ad8e3cb90f141ac5aa6d225bc337efc9c">site_url</a></div><div class="ttdeci">site_url()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00066">noop.php:66</a></div></div>
<div class="ttc" id="preview_8php_html_a21eed5208524a2f33323eabc88f8dcdd"><div class="ttname"><a href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a></div><div class="ttdeci">esc_html_e( 'Form Preview', 'gravityforms')?&gt;&lt;/title &gt;&lt; link rel</div><div class="ttdef"><b>Definition:</b> <a href="preview_8php_source.html#l00033">preview.php:33</a></div></div>
<div class="ttc" id="wordpress_2wp-admin_2export_8php_html_a2aa2e8d39121676417f4a0faabc33c46"><div class="ttname"><a href="wordpress_2wp-admin_2export_8php.html#a2aa2e8d39121676417f4a0faabc33c46">month</a></div><div class="ttdeci">s content in order to import it into another installation or platform The export file will be an XML file format called WXR custom and tags can be included You can choose for the WXR file date range by month</div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-admin_2export_8php_source.html#l00048">wordpress/wp-admin/export.php:48</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a07264d926c83b27cf2a451922fb26bba"><div class="ttname"><a href="class_g_f_forms_model.html#a07264d926c83b27cf2a451922fb26bba">GFFormsModel\get_form_meta_by_id</a></div><div class="ttdeci">static get_form_meta_by_id($ids)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l00391">forms_model.php:391</a></div></div>
<div class="ttc" id="class_g_f_add_on_html_a142bbd7292b51e1b2b53cc42e578b3c4"><div class="ttname"><a href="class_g_f_add_on.html#a142bbd7292b51e1b2b53cc42e578b3c4">GFAddOn\plugin_settings_title</a></div><div class="ttdeci">plugin_settings_title()</div><div class="ttdef"><b>Definition:</b> <a href="class-gf-addon_8php_source.html#l03526">class-gf-addon.php:3526</a></div></div>
<div class="ttc" id="namespaceany_html"><div class="ttname"><a href="namespaceany.html">any</a></div></div>
<div class="ttc" id="options_8php_html_a38b2392b03e92bf045133b4407fab618"><div class="ttname"><a href="options_8php.html#a38b2392b03e92bf045133b4407fab618">$capability</a></div><div class="ttdeci">$capability</div><div class="ttdef"><b>Definition:</b> <a href="options_8php_source.html#l00027">options.php:27</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_a524045a86763248cf95f0c4988b8875e"><div class="ttname"><a href="class_g_f_a_p_i.html#a524045a86763248cf95f0c4988b8875e">GFAPI\update_entry_property</a></div><div class="ttdeci">static update_entry_property($entry_id, $property, $value)</div><div class="ttdoc">Updates a single property of an entry. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l00920">api.php:920</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_a9d39da393431e8b34fcffff4f75c1847"><div class="ttname"><a href="class_g_f_a_p_i.html#a9d39da393431e8b34fcffff4f75c1847">GFAPI\update_feed</a></div><div class="ttdeci">static update_feed($feed_id, $feed_meta, $form_id=null)</div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l01167">api.php:1167</a></div></div>
<div class="ttc" id="menu_8php_html_a83018d9153d17d91fbcf3bc10158d34f"><div class="ttname"><a href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a></div><div class="ttdeci">$i</div><div class="ttdef"><b>Definition:</b> <a href="menu_8php_source.html#l00053">menu.php:53</a></div></div>
<div class="ttc" id="cron_8php_html_aa1513c794ed209ff01c44928a64f6752"><div class="ttname"><a href="cron_8php.html#aa1513c794ed209ff01c44928a64f6752">wp_schedule_single_event</a></div><div class="ttdeci">wp_schedule_single_event($timestamp, $hook, $args=array())</div><div class="ttdoc">Schedules a hook to run only once. </div><div class="ttdef"><b>Definition:</b> <a href="cron_8php_source.html#l00023">cron.php:23</a></div></div>
<div class="ttc" id="option_8php_html_afacc3facc45e9b1cf03120755d40f494"><div class="ttname"><a href="option_8php.html#afacc3facc45e9b1cf03120755d40f494">add_option</a></div><div class="ttdeci">add_option($option, $value= '', $deprecated= '', $autoload= 'yes')</div><div class="ttdoc">Add a new option. </div><div class="ttdef"><b>Definition:</b> <a href="option_8php_source.html#l00398">option.php:398</a></div></div>
<div class="ttc" id="plugin-editor_8php_html_a4ab51386acb82cd0a0066eac2567b2bd"><div class="ttname"><a href="plugin-editor_8php.html#a4ab51386acb82cd0a0066eac2567b2bd">$plugins</a></div><div class="ttdeci">$plugins</div><div class="ttdef"><b>Definition:</b> <a href="plugin-editor_8php_source.html#l00025">plugin-editor.php:25</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a8aa723db710f9582b3742354d886c1a7"><div class="ttname"><a href="class_g_f_forms_model.html#a8aa723db710f9582b3742354d886c1a7">GFFormsModel\get_lead</a></div><div class="ttdeci">static get_lead($lead_id)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l03387">forms_model.php:3387</a></div></div>
<div class="ttc" id="namespaceit_html"><div class="ttname"><a href="namespaceit.html">it</a></div></div>
<div class="ttc" id="preview_8php_html_a8fb7cd76a5f6fe9b500cb9eebcdc4259"><div class="ttname"><a href="preview_8php.html#a8fb7cd76a5f6fe9b500cb9eebcdc4259">$min</a></div><div class="ttdeci">if(!class_exists( 'RGForms')) if(!GFCommon::current_user_can_any(array( 'gravityforms_edit_forms', 'gravityforms_create_form', 'gravityforms_preview_forms'))) $min</div><div class="ttdef"><b>Definition:</b> <a href="preview_8php_source.html#l00024">preview.php:24</a></div></div>
<div class="ttc" id="class_g_f_add_on_html_a1ce51f6bb7b4bff32834f5ad72d66e3e"><div class="ttname"><a href="class_g_f_add_on.html#a1ce51f6bb7b4bff32834f5ad72d66e3e">GFAddOn\plugin_settings_fields</a></div><div class="ttdeci">plugin_settings_fields()</div><div class="ttdoc">Override this function to specify the settings fields to be rendered on the plugin settings page...</div><div class="ttdef"><b>Definition:</b> <a href="class-gf-addon_8php_source.html#l03617">class-gf-addon.php:3617</a></div></div>
<div class="ttc" id="admin-footer_8php_html_adf95f30eaafccead90ab5e2cdb55e9b9"><div class="ttname"><a href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a></div><div class="ttdeci">$text</div><div class="ttdef"><b>Definition:</b> <a href="admin-footer_8php_source.html#l00029">admin-footer.php:29</a></div></div>
<div class="ttc" id="select__columns_8php_html_a91d3461e81f93f1a4f3c0e641d254f6d"><div class="ttname"><a href="select__columns_8php.html#a91d3461e81f93f1a4f3c0e641d254f6d">$field_ids</a></div><div class="ttdeci">$field_ids</div><div class="ttdef"><b>Definition:</b> <a href="select__columns_8php_source.html#l00162">select_columns.php:162</a></div></div>
<div class="ttc" id="class_g_f_add_on_html_a4686ff68b3b0d792bf684587c378dead"><div class="ttname"><a href="class_g_f_add_on.html#a4686ff68b3b0d792bf684587c378dead">GFAddOn\get_plugin_settings</a></div><div class="ttdeci">get_plugin_settings()</div><div class="ttdoc">Returns the currently saved plugin settings. </div><div class="ttdef"><b>Definition:</b> <a href="class-gf-addon_8php_source.html#l03553">class-gf-addon.php:3553</a></div></div>
<div class="ttc" id="class_g_f_add_on_html_a3dc593f496b7dbf2e5e3c406cb5fd106"><div class="ttname"><a href="class_g_f_add_on.html#a3dc593f496b7dbf2e5e3c406cb5fd106">GFAddOn\scripts</a></div><div class="ttdeci">scripts()</div><div class="ttdoc">Override this function to provide a list of scripts to be enqueued. </div><div class="ttdef"><b>Definition:</b> <a href="class-gf-addon_8php_source.html#l00440">class-gf-addon.php:440</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a2588ca308291486736bb5c13b9019596"><div class="ttname"><a href="class_g_f_forms_model.html#a2588ca308291486736bb5c13b9019596">GFFormsModel\get_forms</a></div><div class="ttdeci">static get_forms($is_active=null, $sort_column= 'title', $sort_dir= 'ASC', $is_trash=false)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l00102">forms_model.php:102</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_aadac56ffa037583f0ae56c8a09b75bdd"><div class="ttname"><a href="class_g_f_a_p_i.html#aadac56ffa037583f0ae56c8a09b75bdd">GFAPI\update_entries</a></div><div class="ttdeci">static update_entries($entries)</div><div class="ttdoc">Updates multiple Entry objects. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l00547">api.php:547</a></div></div>
<div class="ttc" id="wp-cron_8php_html_a27bfc155c0a3fbd3103bf2d1928375f8"><div class="ttname"><a href="wp-cron_8php.html#a27bfc155c0a3fbd3103bf2d1928375f8">DOING_CRON</a></div><div class="ttdeci">const DOING_CRON</div><div class="ttdef"><b>Definition:</b> <a href="wp-cron_8php_source.html#l00022">wp-cron.php:22</a></div></div>
<div class="ttc" id="namespacea_html"><div class="ttname"><a href="namespacea.html">a</a></div></div>
<div class="ttc" id="form__list_8php_html_a381e374962668a4298cb522b81c66e92"><div class="ttname"><a href="form__list_8php.html#a381e374962668a4298cb522b81c66e92">textarea</a></div><div class="ttdeci">gf_new_form_modal_container setting row gf_new_form_modal_container setting row textarea</div><div class="ttdef"><b>Definition:</b> <a href="form__list_8php_source.html#l00158">form_list.php:158</a></div></div>
<div class="ttc" id="namespaceuse_html"><div class="ttname"><a href="namespaceuse.html">use</a></div></div>
<div class="ttc" id="class_g_f_add_on_html_a5450ae2a722efbf1a0d8391c185a8f02"><div class="ttname"><a href="class_g_f_add_on.html#a5450ae2a722efbf1a0d8391c185a8f02">GFAddOn\log_debug</a></div><div class="ttdeci">log_debug($message)</div><div class="ttdoc">Writes an error message to the Gravity Forms log. </div><div class="ttdef"><b>Definition:</b> <a href="class-gf-addon_8php_source.html#l04134">class-gf-addon.php:4134</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_a5f0f84a15a26ff9a75bb1ab5d5b6fc67"><div class="ttname"><a href="class_g_f_a_p_i.html#a5f0f84a15a26ff9a75bb1ab5d5b6fc67">GFAPI\get_entry</a></div><div class="ttdeci">static get_entry($entry_id)</div><div class="ttdoc">Returns the Entry object for a given Entry ID. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l00493">api.php:493</a></div></div>
<div class="ttc" id="preview_8php_html_a1a4fda4c28a9ee5f91102c023b9501f4"><div class="ttname"><a href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a></div><div class="ttdeci">$form</div><div class="ttdef"><b>Definition:</b> <a href="preview_8php_source.html#l00052">preview.php:52</a></div></div>
<div class="ttc" id="admin_8php_html_af1c9ecf26c0cfd247c0760dd4b594a6d"><div class="ttname"><a href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a></div><div class="ttdeci">if(get_option('db_upgraded')) elseif(get_option('db_version')!=$wp_db_version &amp;&amp;empty($_POST))</div><div class="ttdef"><b>Definition:</b> <a href="admin_8php_source.html#l00045">admin.php:45</a></div></div>
<div class="ttc" id="class_g_f_add_on_html_aa47673ffd04d894f2df03131d9fef2c8"><div class="ttname"><a href="class_g_f_add_on.html#aa47673ffd04d894f2df03131d9fef2c8">GFAddOn\render_uninstall</a></div><div class="ttdeci">render_uninstall()</div><div class="ttdoc">Override this function to customize the markup for the uninstall section on the plugin settings page...</div><div class="ttdef"><b>Definition:</b> <a href="class-gf-addon_8php_source.html#l03945">class-gf-addon.php:3945</a></div></div>
<div class="ttc" id="noop_8php_html_a16e782f4694432817e6f06d12b269704"><div class="ttname"><a href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a></div><div class="ttdeci">add_action()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00041">noop.php:41</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_a854185927da5cb648f21921be078f40b"><div class="ttname"><a href="class_g_f_a_p_i.html#a854185927da5cb648f21921be078f40b">GFAPI\update_entry</a></div><div class="ttdeci">static update_entry($entry, $entry_id=null)</div><div class="ttdoc">Updates a single Entry object. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l00573">api.php:573</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_ab3a1495916d0af6643f5fb93fa63f5be"><div class="ttname"><a href="class_g_f_a_p_i.html#ab3a1495916d0af6643f5fb93fa63f5be">GFAPI\submit_form</a></div><div class="ttdeci">static submit_form($form_id, $input_values, $field_values=array(), $target_page=0, $source_page=1)</div><div class="ttdoc">Submits a form. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l01017">api.php:1017</a></div></div>
<div class="ttc" id="edit-comments_8php_html_a75ea80de0123fb0d0ef5533eb33d3ae1"><div class="ttname"><a href="edit-comments_8php.html#a75ea80de0123fb0d0ef5533eb33d3ae1">URL</a></div><div class="ttdeci">s email and blog URL</div><div class="ttdef"><b>Definition:</b> <a href="edit-comments_8php_source.html#l00156">edit-comments.php:156</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_a1dbebe0c9441c8aaeeadca7800483bd3"><div class="ttname"><a href="class_g_f_a_p_i.html#a1dbebe0c9441c8aaeeadca7800483bd3">GFAPI\add_forms</a></div><div class="ttdeci">static add_forms($forms)</div><div class="ttdoc">Adds multiple form objects. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l00289">api.php:289</a></div></div>
<div class="ttc" id="other__entries_8php_html_affb4200921149b6126d0e51b415b2c75"><div class="ttname"><a href="other__entries_8php.html#affb4200921149b6126d0e51b415b2c75">$entries</a></div><div class="ttdeci">$entries</div><div class="ttdef"><b>Definition:</b> <a href="other__entries_8php_source.html#l00057">other_entries.php:57</a></div></div>
<div class="ttc" id="noop_8php_html_a472b5d168d122332c7e23553b87d7d5d"><div class="ttname"><a href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a></div><div class="ttdeci">get_bloginfo()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00056">noop.php:56</a></div></div>
<div class="ttc" id="noop_8php_html_a54639394aa645a2277ea41f3cbd23247"><div class="ttname"><a href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a></div><div class="ttdeci">apply_filters()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00026">noop.php:26</a></div></div>
<div class="ttc" id="class_g_f_add_on_html_aa303e66617af58153c779ba74ba3f09f"><div class="ttname"><a href="class_g_f_add_on.html#aa303e66617af58153c779ba74ba3f09f">GFAddOn\is_json</a></div><div class="ttdeci">static is_json($value)</div><div class="ttdef"><b>Definition:</b> <a href="class-gf-addon_8php_source.html#l01134">class-gf-addon.php:1134</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_a6282817eaab3805743b691007283d831"><div class="ttname"><a href="class_g_f_a_p_i.html#a6282817eaab3805743b691007283d831">GFAPI\get_entries</a></div><div class="ttdeci">static get_entries($form_ids, $search_criteria=array(), $sorting=null, $paging=null, &amp;$total_count=null)</div><div class="ttdoc">Returns an array of Entry objects for the given search criteria. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l00449">api.php:449</a></div></div>
<div class="ttc" id="async-upload_8php_html_ad69de186eb69f332f105ae157136192e"><div class="ttname"><a href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a></div><div class="ttdeci">if(isset($_REQUEST['post_id'])) $id</div><div class="ttdef"><b>Definition:</b> <a href="async-upload_8php_source.html#l00091">async-upload.php:91</a></div></div>
<div class="ttc" id="menu_8php_html_af789423037bbc89dc7c850e761177570"><div class="ttname"><a href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a></div><div class="ttdeci">$count</div><div class="ttdef"><b>Definition:</b> <a href="menu_8php_source.html#l00192">menu.php:192</a></div></div>
<div class="ttc" id="noop_8php_html_aaf1220eff85fdd291725eabf743b2ed3"><div class="ttname"><a href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a></div><div class="ttdeci">get_option()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00031">noop.php:31</a></div></div>
<div class="ttc" id="wp-includes_2user_8php_html_aa414164c348c21e38980eb95ebb0d541"><div class="ttname"><a href="wp-includes_2user_8php.html#aa414164c348c21e38980eb95ebb0d541">get_users</a></div><div class="ttdeci">get_users($args=array())</div><div class="ttdoc">Retrieve list of users matching criteria. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2user_8php_source.html#l00477">wp-includes/user.php:477</a></div></div>
<div class="ttc" id="wp-load_8php_html_a0a4baf0b22973c07685c3981f0d17fc4"><div class="ttname"><a href="wp-load_8php.html#a0a4baf0b22973c07685c3981f0d17fc4">$path</a></div><div class="ttdeci">$path</div><div class="ttdef"><b>Definition:</b> <a href="wp-load_8php_source.html#l00056">wp-load.php:56</a></div></div>
<div class="ttc" id="class-wp-error_8php_html_a741b5ec807dbba8d2a0851e32e7d926c"><div class="ttname"><a href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a></div><div class="ttdeci">is_wp_error($thing)</div><div class="ttdoc">Check whether variable is a WordPress Error. </div><div class="ttdef"><b>Definition:</b> <a href="class-wp-error_8php_source.html#l00216">class-wp-error.php:216</a></div></div>
<div class="ttc" id="gquiz__percent_8php_html_a1d2cd7133414dcb5bf74c0f3b3fb99e2"><div class="ttname"><a href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a></div><div class="ttdeci">if(empty($field['value'])) $format</div><div class="ttdoc">Modify the format of the display of the field. </div><div class="ttdef"><b>Definition:</b> <a href="gquiz__percent_8php_source.html#l00025">gquiz_percent.php:25</a></div></div>
<div class="ttc" id="namespacetool_html"><div class="ttname"><a href="namespacetool.html">tool</a></div></div>
<div class="ttc" id="class_g_f_forms_html_a48405d16fb9e957a4a77126c87c52f28"><div class="ttname"><a href="class_g_f_forms.html#a48405d16fb9e957a4a77126c87c52f28">GFForms\include_addon_framework</a></div><div class="ttdeci">static include_addon_framework()</div><div class="ttdef"><b>Definition:</b> <a href="gravityforms_8php_source.html#l01326">gravityforms.php:1326</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_a2777cc61bbe371f6a8d8b9f34a8ee17e"><div class="ttname"><a href="class_g_f_a_p_i.html#a2777cc61bbe371f6a8d8b9f34a8ee17e">GFAPI\get_feeds</a></div><div class="ttdeci">static get_feeds($feed_ids=null, $form_id=null, $addon_slug=null, $is_active=true)</div><div class="ttdoc">Returns all the feeds for the given criteria. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l01098">api.php:1098</a></div></div>
<div class="ttc" id="form__list_8php_html_a37ec3c0e38c16262d3ff05971a91c276"><div class="ttname"><a href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a></div><div class="ttdeci">gf_new_form_modal_container setting row input</div><div class="ttdef"><b>Definition:</b> <a href="form__list_8php_source.html#l00157">form_list.php:157</a></div></div>
<div class="ttc" id="preview_8php_html_a920c320068535c09e154c6707eb42ded"><div class="ttname"><a href="preview_8php.html#a920c320068535c09e154c6707eb42ded">$styles</a></div><div class="ttdeci">$styles</div><div class="ttdef"><b>Definition:</b> <a href="preview_8php_source.html#l00056">preview.php:56</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_acaca2b9bbdf1d146e10df3de94e07a20"><div class="ttname"><a href="class_g_f_a_p_i.html#acaca2b9bbdf1d146e10df3de94e07a20">GFAPI\update_form_property</a></div><div class="ttdeci">static update_form_property($form_id, $property_key, $value)</div><div class="ttdoc">Updates the property of one form - columns in the main forms table. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l00273">api.php:273</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_ac76935e7acd9bbab7e7e7e8fe5fc2a5a"><div class="ttname"><a href="class_g_f_a_p_i.html#ac76935e7acd9bbab7e7e7e8fe5fc2a5a">GFAPI\update_forms</a></div><div class="ttdeci">static update_forms($forms)</div><div class="ttdoc">Updates the forms with an array of form objects. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l00126">api.php:126</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_a95265e7cfcd62d1b119e2bf4ba74d916"><div class="ttname"><a href="class_g_f_a_p_i.html#a95265e7cfcd62d1b119e2bf4ba74d916">GFAPI\count_entries</a></div><div class="ttdeci">static count_entries($form_ids, $search_criteria=array())</div><div class="ttdoc">Returns the total number of entries for the given search criteria. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l00478">api.php:478</a></div></div>
<div class="ttc" id="admin-ajax_8php_html_a7e2b5c5f59b53e18d1dc6bf6ff251ed2"><div class="ttname"><a href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a></div><div class="ttdeci">if(!empty($_GET['action'])&amp;&amp;in_array($_GET['action'], $core_actions_get)) add_action( 'wp_ajax_'.$_GET['action'] str_replace( '-', '_', $_GET['action'])</div><div class="ttdef"><b>Definition:</b> <a href="admin-ajax_8php_source.html#l00073">admin-ajax.php:73</a></div></div>
<div class="ttc" id="l10n_8php_html_a8139ca70e171fee8478897f58679dba9"><div class="ttname"><a href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a></div><div class="ttdeci">esc_html__($text, $domain= 'default')</div><div class="ttdoc">Retrieve the translation of $text and escapes it for safe use in HTML output. </div><div class="ttdef"><b>Definition:</b> <a href="l10n_8php_source.html#l00204">l10n.php:204</a></div></div>
<div class="ttc" id="select__columns_8php_html_ab73271f70effbb97663154a50a24ff00"><div class="ttname"><a href="select__columns_8php.html#ab73271f70effbb97663154a50a24ff00">placeholder</a></div><div class="ttdeci">placeholder</div><div class="ttdef"><b>Definition:</b> <a href="select__columns_8php_source.html#l00075">select_columns.php:75</a></div></div>
<div class="ttc" id="class_g_f_add_on_html_a53d31780f290c90071a213e9f786abb3"><div class="ttname"><a href="class_g_f_add_on.html#a53d31780f290c90071a213e9f786abb3">GFAddOn\styles</a></div><div class="ttdeci">styles()</div><div class="ttdoc">Override this function to provide a list of styles to be enqueued. </div><div class="ttdef"><b>Definition:</b> <a href="class-gf-addon_8php_source.html#l00365">class-gf-addon.php:365</a></div></div>
<div class="ttc" id="class_g_f_add_on_html_a69967c33c95b7fba0fc73f5ba4d05456"><div class="ttname"><a href="class_g_f_add_on.html#a69967c33c95b7fba0fc73f5ba4d05456">GFAddOn\maybe_decode_json</a></div><div class="ttdeci">static maybe_decode_json($value)</div><div class="ttdef"><b>Definition:</b> <a href="class-gf-addon_8php_source.html#l01126">class-gf-addon.php:1126</a></div></div>
<div class="ttc" id="search-field-date__range_8php_html_a1334d61bbc340f973c09c7031f3c21f2"><div class="ttname"><a href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a></div><div class="ttdeci">$value</div><div class="ttdef"><b>Definition:</b> <a href="search-field-date__range_8php_source.html#l00010">search-field-date_range.php:10</a></div></div>
<div class="ttc" id="phpqrcode_8php_html_ae106d3baebd9c27c90b2abadb25df012"><div class="ttname"><a href="phpqrcode_8php.html#ae106d3baebd9c27c90b2abadb25df012">QR_ECLEVEL_L</a></div><div class="ttdeci">const QR_ECLEVEL_L</div><div class="ttdef"><b>Definition:</b> <a href="phpqrcode_8php_source.html#l00092">phpqrcode.php:92</a></div></div>
<div class="ttc" id="cache_8php_html_a5051b30effe4731d830d0a838121b867"><div class="ttname"><a href="cache_8php.html#a5051b30effe4731d830d0a838121b867">wp_cache_delete</a></div><div class="ttdeci">wp_cache_delete($key, $group= '')</div><div class="ttdoc">Removes the cache contents matching key and group. </div><div class="ttdef"><b>Definition:</b> <a href="cache_8php_source.html#l00081">cache.php:81</a></div></div>
<div class="ttc" id="class_w_p___error_html"><div class="ttname"><a href="class_w_p___error.html">WP_Error</a></div><div class="ttdef"><b>Definition:</b> <a href="class-wp-error_8php_source.html#l00021">class-wp-error.php:21</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_a0d479b94f08ffc20c7a44d10a2f11700"><div class="ttname"><a href="class_g_f_a_p_i.html#a0d479b94f08ffc20c7a44d10a2f11700">GFAPI\delete_feed</a></div><div class="ttdeci">static delete_feed($feed_id)</div><div class="ttdoc">Deletes a single Feed. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l01147">api.php:1147</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_a67f5153934232313e472eae02eb2d633"><div class="ttname"><a href="class_g_f_a_p_i.html#a67f5153934232313e472eae02eb2d633">GFAPI\get_form</a></div><div class="ttdeci">static get_form($form_id)</div><div class="ttdoc">Returns the form object for a given Form ID. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l00034">api.php:34</a></div></div>
<div class="ttc" id="load_8php_html_a72e5386fcd7a5ce7526d208d0b03a0af"><div class="ttname"><a href="load_8php.html#a72e5386fcd7a5ce7526d208d0b03a0af">is_multisite</a></div><div class="ttdeci">is_multisite()</div><div class="ttdoc">If Multisite is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="load_8php_source.html#l00753">load.php:753</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_aad94a0bbb9f2ff9cad300358b2c427cf"><div class="ttname"><a href="class_g_f_a_p_i.html#aad94a0bbb9f2ff9cad300358b2c427cf">GFAPI\add_entries</a></div><div class="ttdeci">static add_entries($entries, $form_id=null)</div><div class="ttdoc">Adds multiple Entry objects. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l00519">api.php:519</a></div></div>
<div class="ttc" id="time_8php_html_a77957aab921d62a9e2d2783a4924e634"><div class="ttname"><a href="time_8php.html#a77957aab921d62a9e2d2783a4924e634">$field_id</a></div><div class="ttdeci">$field_id</div><div class="ttdef"><b>Definition:</b> <a href="time_8php_source.html#l00017">time.php:17</a></div></div>
<div class="ttc" id="cron_8php_html_a43c91d6f17c79de5969b87b540ad151f"><div class="ttname"><a href="cron_8php.html#a43c91d6f17c79de5969b87b540ad151f">wp_next_scheduled</a></div><div class="ttdeci">wp_next_scheduled($hook, $args=array())</div><div class="ttdoc">Retrieve the next timestamp for a cron event. </div><div class="ttdef"><b>Definition:</b> <a href="cron_8php_source.html#l00222">cron.php:222</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a38ddbb5bed3a03da26b64c1916ad9e1f"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a></div><div class="ttdeci">absint($maybeint)</div><div class="ttdoc">Convert a value to non-negative integer. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l03551">wordpress/wp-includes/functions.php:3551</a></div></div>
<div class="ttc" id="twentyfifteen_2content-link_8php_html_a4a6fb8865e1ae52faa29662b4087e629"><div class="ttname"><a href="twentyfifteen_2content-link_8php.html#a4a6fb8865e1ae52faa29662b4087e629">esc_url</a></div><div class="ttdeci">else esc_url(twentyfifteen_get_link_url()))</div><div class="ttdef"><b>Definition:</b> <a href="twentyfifteen_2content-link_8php_source.html#l00021">twentyfifteen/content-link.php:21</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_afc146d559a3ceea4b11df439fc388b6e"><div class="ttname"><a href="class_g_f_a_p_i.html#afc146d559a3ceea4b11df439fc388b6e">GFAPI\add_feed</a></div><div class="ttdeci">static add_feed($form_id, $feed_meta, $addon_slug)</div><div class="ttdoc">Adds a feed with the given Feed object. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l01204">api.php:1204</a></div></div>
<div class="ttc" id="class_g_f_add_on_html_a095c5d389db211932136b53f25f39685"><div class="ttname"><a href="class_g_f_add_on.html#a095c5d389db211932136b53f25f39685">GFAddOn\__construct</a></div><div class="ttdeci">__construct()</div><div class="ttdoc">Class constructor which hooks the instance into the WordPress init action. </div><div class="ttdef"><b>Definition:</b> <a href="class-gf-addon_8php_source.html#l00110">class-gf-addon.php:110</a></div></div>
<div class="ttc" id="other__entries_8php_html_a61ce92a251f8ce1d28919fdfc3dd33a7"><div class="ttname"><a href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a></div><div class="ttdeci">if(empty($created_by)) $form_id</div><div class="ttdef"><b>Definition:</b> <a href="other__entries_8php_source.html#l00020">other_entries.php:20</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_ad9aa75cb4f026023fe01781ea3ec6ad6"><div class="ttname"><a href="class_g_f_a_p_i.html#ad9aa75cb4f026023fe01781ea3ec6ad6">GFAPI\delete_entry</a></div><div class="ttdeci">static delete_entry($entry_id)</div><div class="ttdoc">Deletes a single Entry. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l00896">api.php:896</a></div></div>
<div class="ttc" id="edit-tags_8php_html_aed6d7b9acff0b9518917d3b0573bc636"><div class="ttname"><a href="edit-tags_8php.html#aed6d7b9acff0b9518917d3b0573bc636">$_SERVER</a></div><div class="ttdeci">$_SERVER['REQUEST_URI']</div><div class="ttdef"><b>Definition:</b> <a href="edit-tags_8php_source.html#l00320">edit-tags.php:320</a></div></div>
<div class="ttc" id="options-permalink_8php_html_a1b46ea8949d396a93da5d6e63bdae52c"><div class="ttname"><a href="options-permalink_8php.html#a1b46ea8949d396a93da5d6e63bdae52c">$permalink_structure</a></div><div class="ttdeci">$permalink_structure</div><div class="ttdef"><b>Definition:</b> <a href="options-permalink_8php_source.html#l00053">options-permalink.php:53</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a2bbf1022c96f557e04addbdd5d803fcf"><div class="ttname"><a href="class_g_f_forms_model.html#a2bbf1022c96f557e04addbdd5d803fcf">GFFormsModel\get_form_meta</a></div><div class="ttdeci">static get_form_meta($form_id)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l00327">forms_model.php:327</a></div></div>
<div class="ttc" id="namespacetitle_html"><div class="ttname"><a href="namespacetitle.html">title</a></div></div>
<div class="ttc" id="edit__link_8php_html_a73004ce9cd673c1bfafd1dc351134797"><div class="ttname"><a href="edit__link_8php.html#a73004ce9cd673c1bfafd1dc351134797">$output</a></div><div class="ttdeci">$output</div><div class="ttdef"><b>Definition:</b> <a href="edit__link_8php_source.html#l00018">edit_link.php:18</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_aee4143ad016d07b138295b9661f9f6dd"><div class="ttname"><a href="class_g_f_forms_model.html#aee4143ad016d07b138295b9661f9f6dd">GFFormsModel\get_form_counts</a></div><div class="ttdeci">static get_form_counts($form_id)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l00201">forms_model.php:201</a></div></div>
<div class="ttc" id="namespacenot_html"><div class="ttname"><a href="namespacenot.html">not</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a46b3622ccc6d393dfd97e355b7bd0bd6"><div class="ttname"><a href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv' null</div><div class="ttdoc">When displaying the single entry we should always know to which View it belongs (the context is every...</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00244">edit-form-advanced.php:244</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_a031b7e943e92a2e103e2730afab3b52a"><div class="ttname"><a href="class_g_f_a_p_i.html#a031b7e943e92a2e103e2730afab3b52a">GFAPI\update_form</a></div><div class="ttdeci">static update_form($form, $form_id=null)</div><div class="ttdoc">Updates the form with a given form object. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l00150">api.php:150</a></div></div>
<div class="ttc" id="namespacethe_html"><div class="ttname"><a href="namespacethe.html">the</a></div></div>
<div class="ttc" id="noop_8php_html_a4df34d0c6ff2b33c5178529f19b82f90"><div class="ttname"><a href="noop_8php.html#a4df34d0c6ff2b33c5178529f19b82f90">add_filter</a></div><div class="ttdeci">add_filter()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00016">noop.php:16</a></div></div>
<div class="ttc" id="noop_8php_html_a01815a0502df2442bbb063f4055c2194"><div class="ttname"><a href="noop_8php.html#a01815a0502df2442bbb063f4055c2194">admin_url</a></div><div class="ttdeci">admin_url()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00071">noop.php:71</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a5861b1ac8048f1af93bf65fd5d8cac7e"><div class="ttname"><a href="class_g_f_forms_model.html#a5861b1ac8048f1af93bf65fd5d8cac7e">GFFormsModel\get_field</a></div><div class="ttdeci">static get_field($form, $field_id)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l04057">forms_model.php:4057</a></div></div>
<div class="ttc" id="query_8php_html_a8e8814f4728ccc9c0d616ec535845129"><div class="ttname"><a href="query_8php.html#a8e8814f4728ccc9c0d616ec535845129">get_query_var</a></div><div class="ttdeci">get_query_var($var, $default= '')</div><div class="ttdoc">Retrieve variable in the WP_Query class. </div><div class="ttdef"><b>Definition:</b> <a href="query_8php_source.html#l00026">query.php:26</a></div></div>
<div class="ttc" id="namespacephp_html"><div class="ttname"><a href="namespacephp.html">php</a></div></div>
<div class="ttc" id="namespacehref_html"><div class="ttname"><a href="namespacehref.html">href</a></div></div>
<div class="ttc" id="namespace_g_f_add_on_html"><div class="ttname"><a href="namespace_g_f_add_on.html">GFAddOn</a></div><div class="ttdoc">Handles all tasks mostly common to any Gravity Forms Add-On, including third party ones...</div><div class="ttdef"><b>Definition:</b> <a href="class-gf-addon_8php_source.html#l00003">class-gf-addon.php:3</a></div></div>
<div class="ttc" id="class_g_f_add_on_html_af69daa3fdab4bc1886daf4a79f89c004"><div class="ttname"><a href="class_g_f_add_on.html#af69daa3fdab4bc1886daf4a79f89c004">GFAddOn\init_admin</a></div><div class="ttdeci">init_admin()</div><div class="ttdoc">Override this function to add initialization code (i.e. </div><div class="ttdef"><b>Definition:</b> <a href="class-gf-addon_8php_source.html#l00225">class-gf-addon.php:225</a></div></div>
<div class="ttc" id="namespacebutton_html"><div class="ttname"><a href="namespacebutton.html">button</a></div></div>
<div class="ttc" id="site-themes_8php_html_a50b05cf2e02ef0b67fcad97106dd7634"><div class="ttname"><a href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a></div><div class="ttdeci">$s</div><div class="ttdef"><b>Definition:</b> <a href="site-themes_8php_source.html#l00046">site-themes.php:46</a></div></div>
<div class="ttc" id="option_8php_html_a44451bc2bc382b2c24f4baeef80a3714"><div class="ttname"><a href="option_8php.html#a44451bc2bc382b2c24f4baeef80a3714">delete_option</a></div><div class="ttdeci">delete_option($option)</div><div class="ttdoc">Removes option by name. </div><div class="ttdef"><b>Definition:</b> <a href="option_8php_source.html#l00491">option.php:491</a></div></div>
<div class="ttc" id="namespace_____html"><div class="ttname"><a href="namespace____.html">__</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a2db0d85a059a494987a8e8ef648e1c49"><div class="ttname"><a href="class_g_f_forms_model.html#a2db0d85a059a494987a8e8ef648e1c49">GFFormsModel\get_choice_text</a></div><div class="ttdeci">static get_choice_text($field, $value, $input_id=0)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l02537">forms_model.php:2537</a></div></div>
<div class="ttc" id="schema_8php_html_aaac3ddf81d405fac59e1dceeca05b0a7"><div class="ttname"><a href="schema_8php.html#aaac3ddf81d405fac59e1dceeca05b0a7">$wpdb</a></div><div class="ttdeci">global $wpdb</div><div class="ttdoc">Declare these as global in case schema.php is included from a function. </div><div class="ttdef"><b>Definition:</b> <a href="schema_8php_source.html#l00018">schema.php:18</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a3c69a81464e61cfafd41fc129b6df2d4"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a3c69a81464e61cfafd41fc129b6df2d4">maybe_unserialize</a></div><div class="ttdeci">maybe_unserialize($original)</div><div class="ttdoc">Unserialize value only if it was serialized. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l00322">wordpress/wp-includes/functions.php:322</a></div></div>
<div class="ttc" id="class_g_f_add_on_html_a802bf757f8f1ce52e79b29a9462a31df"><div class="ttname"><a href="class_g_f_add_on.html#a802bf757f8f1ce52e79b29a9462a31df">GFAddOn\init_ajax</a></div><div class="ttdeci">init_ajax()</div><div class="ttdoc">Override this function to add AJAX hooks or to add initialization code when an AJAX request is being ...</div><div class="ttdef"><b>Definition:</b> <a href="class-gf-addon_8php_source.html#l00311">class-gf-addon.php:311</a></div></div>
<div class="ttc" id="namespacetype_html"><div class="ttname"><a href="namespacetype.html">type</a></div></div>
<div class="ttc" id="gquiz__grade_8php_html_a83e4d6721f3491a4fd780dbd3ce1a3c0"><div class="ttname"><a href="gquiz__grade_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a></div><div class="ttdeci">$field</div><div class="ttdef"><b>Definition:</b> <a href="gquiz__grade_8php_source.html#l00011">gquiz_grade.php:11</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a866e7f0f003101850a78f372dd07bd2a"><div class="ttname"><a href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv'foreach(get_object_taxonomies($post) as $tax_name) if($thumbnail_support &amp;&amp;current_user_can( 'upload_files')) add_meta_box('postimagediv'if(post_type_supports($post_type, 'excerpt')) add_meta_box('postexcerpt' __('Excerpt')</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00269">edit-form-advanced.php:269</a></div></div>
<div class="ttc" id="class_g_f_add_on_html_a7e93b92b4e88a620836966d239c1975b"><div class="ttname"><a href="class_g_f_add_on.html#a7e93b92b4e88a620836966d239c1975b">GFAddOn\set_logging_supported</a></div><div class="ttdeci">set_logging_supported($plugins)</div><div class="ttdef"><b>Definition:</b> <a href="class-gf-addon_8php_source.html#l00849">class-gf-addon.php:849</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_a2e2519982f9dfc69e355dbee2afb4a6e"><div class="ttname"><a href="class_g_f_a_p_i.html#a2e2519982f9dfc69e355dbee2afb4a6e">GFAPI\delete_form</a></div><div class="ttdeci">static delete_form($form_id)</div><div class="ttdoc">Deletes the form with the given Form ID. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l00105">api.php:105</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/>
<script type="text/javascript">
    jQuery( document ).ready( function( $ ) {
        $( 'a.anchor[id^=_filters],a.anchor[id^=_actions]' ).each( function() {
            $( this )
                .text('#')
                .attr( 'href', function() {
                    return '#' + $( this ).attr( 'id' );
                }).prependTo( $( this ).parent('dt' ).next('dd') );
        });
    });
</script>
</body>
</html>
