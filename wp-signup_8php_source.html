<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>GravityView: wp-signup.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom-doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GravityView
   &#160;<span id="projectnumber">1.16.1</span>
   </div>
   <div id="projectbrief">Beautifully display your Gravity Forms data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_f202f45fd139109afdc6cee542e9540d.html">tmp</a></li><li class="navelem"><a class="el" href="dir_bab4839c1ebfd97cab4362c92e1efb01.html">wordpress</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">wp-signup.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="wp-signup_8php.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">/** Sets up the WordPress Environment. */</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;require( dirname(__FILE__) . <span class="stringliteral">&#39;/wp-load.php&#39;</span> );</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&#39;wp_head&#39;</span>, <span class="stringliteral">&#39;wp_no_robots&#39;</span> );</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;require( dirname( __FILE__ ) . <span class="stringliteral">&#39;/wp-blog-header.php&#39;</span> );</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keywordflow">if</span> ( is_array( <a class="code" href="option_8php.html#aadb234e9fde76b878f50351325bab9fb">get_site_option</a>( <span class="stringliteral">&#39;illegal_names&#39;</span> )) &amp;&amp; isset( $_GET[ <span class="stringliteral">&#39;new&#39;</span> ] ) &amp;&amp; in_array( $_GET[ <span class="stringliteral">&#39;new&#39;</span> ], <a class="code" href="option_8php.html#aadb234e9fde76b878f50351325bab9fb">get_site_option</a>( <span class="stringliteral">&#39;illegal_names&#39;</span> ) ) ) {</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    wp_redirect( <a class="code" href="link-template_8php.html#a3f2ddf18359777959ef1230ebdd5132c">network_home_url</a>() );</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    die();</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;}</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Prints signup_header via wp_head</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * @since MU</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="wp-signup_8php.html#ad121040fe429c5f377bf5d26139c032b">   20</a></span>&#160;<span class="keyword">function</span> <a class="code" href="wp-signup_8php.html#ad121040fe429c5f377bf5d26139c032b">do_signup_header</a>() {<span class="comment"></span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">     * Fires within the head section of the site sign-up screen.</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">     * @since 3.0.0</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;signup_header&#39;</span> );</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;}</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&#39;wp_head&#39;</span>, <span class="stringliteral">&#39;do_signup_header&#39;</span> );</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keywordflow">if</span> ( !<a class="code" href="load_8php.html#a72e5386fcd7a5ce7526d208d0b03a0af">is_multisite</a>() ) {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    wp_redirect( <a class="code" href="general-template_8php.html#a3db4f83e405854d38d4f314b4e13969f">wp_registration_url</a>() );</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    die();</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;}</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keywordflow">if</span> ( !<a class="code" href="wordpress_2wp-includes_2functions_8php.html#af56ce4c5410aedf5dda37e798124b74a">is_main_site</a>() ) {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    wp_redirect( <a class="code" href="link-template_8php.html#a5db0b2459751c30571b0517244bba727">network_site_url</a>( <span class="stringliteral">&#39;wp-signup.php&#39;</span> ) );</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    die();</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;}</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">// Fix for page title</span></div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="wp-signup_8php.html#a477fa9de5f37c5029aa1c620f792eec5">   41</a></span>&#160;$wp_query-&gt;is_404 = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"> * Fires before the Site Signup page is loaded.</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"> * @since 4.4.0</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;before_signup_header&#39;</span> );</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"> * Prints styles for front-end Multisite signup pages</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"> * @since MU</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="wp-signup_8php.html#a8f41fc3b190e83c8fc1659c89a745cbb">   55</a></span>&#160;<span class="keyword">function</span> <a class="code" href="wp-signup_8php.html#a8f41fc3b190e83c8fc1659c89a745cbb">wpmu_signup_stylesheet</a>() {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    ?&gt;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    &lt;style <a class="code" href="namespacetype.html">type</a>=<span class="stringliteral">&quot;text/css&quot;</span>&gt;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        .mu_register { <a class="code" href="wp-content_2themes_2twentythirteen_2inc_2custom-header_8php.html#ab1b1d44a8c4dbcaeff449be6b5e19935">width</a>: 90%; <a class="code" href="form__list_8php.html#a88a9f534b48462f570bf4c70c63f81ea">margin</a>:0 <span class="keyword">auto</span>; }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        .mu_register form { <a class="code" href="form__list_8php.html#a88a9f534b48462f570bf4c70c63f81ea">margin</a>-<a class="code" href="namespacetop.html">top</a>: 2em; }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        .mu_register .error { font-weight:700; padding:10px; <a class="code" href="wordpress_2wp-content_2themes_2twentyeleven_2functions_8php.html#aee0174667653000761904b9bea00878d">color</a>:#333333; background:#FFEBE8; border:1px solid #CC0000; }</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        .mu_register <a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a>[type=<span class="stringliteral">&quot;submit&quot;</span>],</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            .mu_register #blog_title,</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            .mu_register #user_email,</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            .mu_register #blogname,</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            .mu_register #user_name { <a class="code" href="wp-content_2themes_2twentythirteen_2inc_2custom-header_8php.html#ab1b1d44a8c4dbcaeff449be6b5e19935">width</a>:100%; font-<a class="code" href="select__columns_8php.html#ae20d3ca2acbfbfe24798ca800435f9f1">size</a>: 24px; <a class="code" href="form__list_8php.html#a88a9f534b48462f570bf4c70c63f81ea">margin</a>:5px 0; }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        .mu_register #<a class="code" href="options-reading_8php.html#a701e52e41a7a63be2b24481016c74a50">site</a>-language { <a class="code" href="namespacedisplay.html">display</a>: block; }</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        .mu_register .prefix_address,</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            .mu_register .suffix_address {font-<a class="code" href="select__columns_8php.html#ae20d3ca2acbfbfe24798ca800435f9f1">size</a>: 18px;<a class="code" href="namespacedisplay.html">display</a>:<span class="keyword">inline</span>; }</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        .mu_register <a class="code" href="form__list_8php.html#a75c7d6fef8f2fc1b14944df043dd5690">label</a> { font-weight:700; font-<a class="code" href="select__columns_8php.html#ae20d3ca2acbfbfe24798ca800435f9f1">size</a>:15px; <a class="code" href="namespacedisplay.html">display</a>:block; <a class="code" href="form__list_8php.html#a88a9f534b48462f570bf4c70c63f81ea">margin</a>:10px 0; }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        .mu_register <a class="code" href="form__list_8php.html#a75c7d6fef8f2fc1b14944df043dd5690">label</a>.checkbox { <a class="code" href="namespacedisplay.html">display</a>:<span class="keyword">inline</span>; }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        .mu_register .mu_alert { font-weight:700; padding:10px; <a class="code" href="wordpress_2wp-content_2themes_2twentyeleven_2functions_8php.html#aee0174667653000761904b9bea00878d">color</a>:#333333; background:#ffffe0; border:1px solid #e6db55; }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    &lt;/style&gt;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;}</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&#39;wp_head&#39;</span>, <span class="stringliteral">&#39;wpmu_signup_stylesheet&#39;</span> );</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<a class="code" href="general-template_8php.html#aabf74018b68d8745de5df44dee7dc537">get_header</a>( <span class="stringliteral">&#39;wp-signup&#39;</span> );</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"> * Fires before the site sign-up form.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"> * @since 3.0.0</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;before_signup_form&#39;</span> );</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;?&gt;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;&lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;signup-content&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;widecolumn&quot;</span>&gt;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;&lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;mu_register wp-signup-container&quot;</span>&gt;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a><span class="comment"></span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"> * Generates and displays the Signup and Create Site forms</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"> * @since MU</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"> * @param string $blogname The new site name</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"> * @param string $blog_title The new site title</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"> * @param array $errors</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="keyword">function</span> show_blog_form( $blogname = <span class="stringliteral">&#39;&#39;</span>, $blog_title = <span class="stringliteral">&#39;&#39;</span>, <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a> = <span class="stringliteral">&#39;&#39;</span> ) {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="tmp_2wordpress-tests-lib_2includes_2bootstrap_8php.html#a17e7de3a4115b66c4e07cd6eac8046c2">$current_site</a> = <a class="code" href="ms-functions_8php.html#a7a458e0f14af3efce48fb42d7ff4d6d9">get_current_site</a>();</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// Blog name</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="ms-load_8php.html#a34f9732e2013b8bce02c952e9b4e0d29">is_subdomain_install</a>() )</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        echo <span class="stringliteral">&#39;&lt;label for=&quot;blogname&quot;&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;Site Name:&#39;</span>) . <span class="stringliteral">&#39;&lt;/label&gt;&#39;</span>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        echo <span class="stringliteral">&#39;&lt;label for=&quot;blogname&quot;&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;Site Domain:&#39;</span>) . <span class="stringliteral">&#39;&lt;/label&gt;&#39;</span>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="plugins_8php.html#a949e330838a018cd41df6664c0a03191">$errmsg</a> = <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a>-&gt;get_error_message(<span class="stringliteral">&#39;blogname&#39;</span>) ) { ?&gt;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        &lt;<a class="code" href="namespacep.html">p</a> <span class="keyword">class</span>=<span class="stringliteral">&quot;error&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> echo <a class="code" href="plugins_8php.html#a949e330838a018cd41df6664c0a03191">$errmsg</a> ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="ms-load_8php.html#a34f9732e2013b8bce02c952e9b4e0d29">is_subdomain_install</a>() )</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        echo <span class="stringliteral">&#39;&lt;span class=&quot;prefix_address&quot;&gt;&#39;</span> . <a class="code" href="tmp_2wordpress-tests-lib_2includes_2bootstrap_8php.html#a17e7de3a4115b66c4e07cd6eac8046c2">$current_site</a>-&gt;domain . <a class="code" href="tmp_2wordpress-tests-lib_2includes_2bootstrap_8php.html#a17e7de3a4115b66c4e07cd6eac8046c2">$current_site</a>-&gt;path . <span class="stringliteral">&#39;&lt;/span&gt;&lt;input name=&quot;blogname&quot; type=&quot;text&quot; id=&quot;blogname&quot; value=&quot;&#39;</span>. <a class="code" href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a>($blogname) .<span class="stringliteral">&#39;&quot; maxlength=&quot;60&quot; /&gt;&lt;br /&gt;&#39;</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        echo <span class="stringliteral">&#39;&lt;input name=&quot;blogname&quot; type=&quot;text&quot; id=&quot;blogname&quot; value=&quot;&#39;</span>.esc_attr($blogname).<span class="stringliteral">&#39;&quot; maxlength=&quot;60&quot; /&gt;&lt;span class=&quot;suffix_address&quot;&gt;.&#39;</span> . ( $site_domain = preg_replace( <span class="stringliteral">&#39;|^www\.|&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, <a class="code" href="tmp_2wordpress-tests-lib_2includes_2bootstrap_8php.html#a17e7de3a4115b66c4e07cd6eac8046c2">$current_site</a>-&gt;domain ) ) . <span class="stringliteral">&#39;&lt;/span&gt;&lt;br /&gt;&#39;</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">if</span> ( !is_user_logged_in() ) {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">if</span> ( !<a class="code" href="ms-load_8php.html#a34f9732e2013b8bce02c952e9b4e0d29">is_subdomain_install</a>() )</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            $site = <a class="code" href="tmp_2wordpress-tests-lib_2includes_2bootstrap_8php.html#a17e7de3a4115b66c4e07cd6eac8046c2">$current_site</a>-&gt;domain . <a class="code" href="tmp_2wordpress-tests-lib_2includes_2bootstrap_8php.html#a17e7de3a4115b66c4e07cd6eac8046c2">$current_site</a>-&gt;path . <a class="code" href="namespace____.html">__</a>( <span class="stringliteral">&#39;sitename&#39;</span> );</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            $site = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;domain&#39;</span> ) . <span class="charliteral">&#39;.&#39;</span> . $site_domain . <a class="code" href="tmp_2wordpress-tests-lib_2includes_2bootstrap_8php.html#a17e7de3a4115b66c4e07cd6eac8046c2">$current_site</a>-&gt;path;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        echo <span class="stringliteral">&#39;&lt;p&gt;(&lt;strong&gt;&#39;</span> . sprintf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;Your address will be %s.&#39;</span>), $site ) . <span class="stringliteral">&#39;&lt;/strong&gt;) &#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Must be at least 4 characters, letters and numbers only. It cannot be changed, so choose carefully!&#39;</span> ) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// Blog Title</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    ?&gt;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    &lt;<a class="code" href="form__list_8php.html#a75c7d6fef8f2fc1b14944df043dd5690">label</a> <span class="keywordflow">for</span>=<span class="stringliteral">&quot;blog_title&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>(<span class="stringliteral">&#39;Site Title:&#39;</span>) ?&gt;&lt;/<a class="code" href="form__list_8php.html#a75c7d6fef8f2fc1b14944df043dd5690">label</a>&gt;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">if</span> ( <a class="code" href="plugins_8php.html#a949e330838a018cd41df6664c0a03191">$errmsg</a> = <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a>-&gt;get_error_message(<span class="stringliteral">&#39;blog_title&#39;</span>) ) { ?&gt;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        &lt;<a class="code" href="namespacep.html">p</a> <span class="keyword">class</span>=<span class="stringliteral">&quot;error&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> echo <a class="code" href="plugins_8php.html#a949e330838a018cd41df6664c0a03191">$errmsg</a> ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    echo <span class="stringliteral">&#39;&lt;input name=&quot;blog_title&quot; type=&quot;text&quot; id=&quot;blog_title&quot; value=&quot;&#39;</span>.esc_attr($blog_title).<span class="stringliteral">&#39;&quot; /&gt;&#39;</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    ?&gt;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">// Site Language.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    $languages = signup_get_available_languages();</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span> ( ! empty( $languages ) ) :</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        ?&gt;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        &lt;<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            &lt;<a class="code" href="form__list_8php.html#a75c7d6fef8f2fc1b14944df043dd5690">label</a> <span class="keywordflow">for</span>=<span class="stringliteral">&quot;site-language&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Site Language:&#39;</span> ); ?&gt;&lt;/label&gt;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="comment">// Network default.</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <a class="code" href="site-new_8php.html#a7714b111b644017933931ec69a154102">$lang</a> = <a class="code" href="option_8php.html#aadb234e9fde76b878f50351325bab9fb">get_site_option</a>( <span class="stringliteral">&#39;WPLANG&#39;</span> );</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <span class="keywordflow">if</span> ( isset( $_POST[<span class="stringliteral">&#39;WPLANG&#39;</span>] ) ) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                $lang = $_POST[<span class="stringliteral">&#39;WPLANG&#39;</span>];</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="comment">// Use US English if the default isn&#39;t available.</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            <span class="keywordflow">if</span> ( ! in_array( $lang, $languages ) ) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                $lang = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <a class="code" href="l10n_8php.html#aab010f47fc7012c35f69d3599967142f">wp_dropdown_languages</a>( array(</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                <span class="stringliteral">&#39;name&#39;</span>                        =&gt; <span class="stringliteral">&#39;WPLANG&#39;</span>,</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                <span class="stringliteral">&#39;id&#39;</span>                          =&gt; <span class="stringliteral">&#39;site-language&#39;</span>,</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                <span class="stringliteral">&#39;selected&#39;</span>                    =&gt; $lang,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                <span class="stringliteral">&#39;languages&#39;</span>                   =&gt; $languages,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                <span class="stringliteral">&#39;show_available_translations&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            ) );</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            ?&gt;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        &lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="api-core_2wp-includes_2compat_8php.html#a69ce1131cd2c65fd147aa7b1de9ed7ee">endif</a>; <span class="comment">// Languages. ?&gt;</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;privacy&quot;</span>&gt;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        &lt;<a class="code" href="namespacep.html">p</a> <span class="keyword">class</span>=<span class="stringliteral">&quot;privacy-intro&quot;</span>&gt;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            &lt;label <span class="keywordflow">for</span>=<span class="stringliteral">&quot;blog_public_on&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>(<span class="stringliteral">&#39;Privacy:&#39;</span>) ?&gt;&lt;/label&gt;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            &lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Allow search engines to index this site.&#39;</span> ); ?&gt;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            &lt;br style=<span class="stringliteral">&quot;clear:both&quot;</span> /&gt;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            &lt;label <span class="keyword">class</span>=<span class="stringliteral">&quot;checkbox&quot;</span> <span class="keywordflow">for</span>=<span class="stringliteral">&quot;blog_public_on&quot;</span>&gt;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> <a class="code" href="namespacetype.html">type</a>=<span class="stringliteral">&quot;radio&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;blog_public_on&quot;</span> <a class="code" href="edit-comments_8php.html#a01a5ac2afed3a262528186f4ba5f9693">name</a>=<span class="stringliteral">&quot;blog_public&quot;</span> value=<span class="stringliteral">&quot;1&quot;</span> &lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">if</span> ( !isset( $_POST[<span class="stringliteral">&#39;blog_public&#39;</span>] ) || $_POST[<span class="stringliteral">&#39;blog_public&#39;</span>] == <span class="charliteral">&#39;1&#39;</span> ) { ?&gt;<a class="code" href="general-template_8php.html#ac5a8cddc08f21085ba0939cda4f64766">checked</a>=<span class="stringliteral">&quot;checked&quot;</span>&lt;?<a class="code" href="namespacephp.html">php</a> } ?&gt; /&gt;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                &lt;<a class="code" href="namespacestrong.html">strong</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Yes&#39;</span> ); ?&gt;&lt;/<a class="code" href="namespacestrong.html">strong</a>&gt;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            &lt;/label&gt;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            &lt;label <span class="keyword">class</span>=<span class="stringliteral">&quot;checkbox&quot;</span> <span class="keywordflow">for</span>=<span class="stringliteral">&quot;blog_public_off&quot;</span>&gt;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> type=<span class="stringliteral">&quot;radio&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;blog_public_off&quot;</span> <a class="code" href="edit-comments_8php.html#a01a5ac2afed3a262528186f4ba5f9693">name</a>=<span class="stringliteral">&quot;blog_public&quot;</span> value=<span class="stringliteral">&quot;0&quot;</span> &lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">if</span> ( isset( $_POST[<span class="stringliteral">&#39;blog_public&#39;</span>] ) &amp;&amp; $_POST[<span class="stringliteral">&#39;blog_public&#39;</span>] == <span class="charliteral">&#39;0&#39;</span> ) { ?&gt;<a class="code" href="general-template_8php.html#ac5a8cddc08f21085ba0939cda4f64766">checked</a>=<span class="stringliteral">&quot;checked&quot;</span>&lt;?<a class="code" href="namespacephp.html">php</a> } ?&gt; /&gt;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                &lt;<a class="code" href="namespacestrong.html">strong</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;No&#39;</span> ); ?&gt;&lt;/<a class="code" href="namespacestrong.html">strong</a>&gt;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            &lt;/label&gt;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        &lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    &lt;/div&gt;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a><span class="comment"></span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">     * Fires after the site sign-up form.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">     * @since 3.0.0</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">     * @param array $errors An array possibly containing &#39;blogname&#39; or &#39;blog_title&#39; errors.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;signup_blogform&#39;</span>, <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a> );</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"> * Validate the new site signup</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment"> * @since MU</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment"> * @return array Contains the new site data and error messages.</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="keyword">function</span> validate_blog_form() {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span> ( is_user_logged_in() )</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> = wp_get_current_user();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ms-functions_8php.html#ab0e3f1a4ed2340e305a26b271effcd67">wpmu_validate_blog_signup</a>($_POST[<span class="stringliteral">&#39;blogname&#39;</span>], $_POST[<span class="stringliteral">&#39;blog_title&#39;</span>], <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment"> * Display user registration form</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment"> * @since MU</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment"> * @param string $user_name The entered username</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment"> * @param string $user_email The entered email address</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment"> * @param array $errors</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="keyword">function</span> show_user_form($user_name = <span class="stringliteral">&#39;&#39;</span>, $user_email = <span class="stringliteral">&#39;&#39;</span>, <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a> = <span class="stringliteral">&#39;&#39;</span>) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">// User name</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    echo <span class="stringliteral">&#39;&lt;label for=&quot;user_name&quot;&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;Username:&#39;</span>) . <span class="stringliteral">&#39;&lt;/label&gt;&#39;</span>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="plugins_8php.html#a949e330838a018cd41df6664c0a03191">$errmsg</a> = <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a>-&gt;get_error_message(<span class="stringliteral">&#39;user_name&#39;</span>) ) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        echo <span class="stringliteral">&#39;&lt;p class=&quot;error&quot;&gt;&#39;</span>.$errmsg.<span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    echo <span class="stringliteral">&#39;&lt;input name=&quot;user_name&quot; type=&quot;text&quot; id=&quot;user_name&quot; value=&quot;&#39;</span>. <a class="code" href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a>($user_name) .<span class="stringliteral">&#39;&quot; maxlength=&quot;60&quot; /&gt;&lt;br /&gt;&#39;</span>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;(Must be at least 4 characters, letters and numbers only.)&#39;</span> );</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    ?&gt;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    &lt;label <span class="keywordflow">for</span>=<span class="stringliteral">&quot;user_email&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Email&amp;nbsp;Address:&#39;</span> ) ?&gt;&lt;/label&gt;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">if</span> ( <a class="code" href="plugins_8php.html#a949e330838a018cd41df6664c0a03191">$errmsg</a> = <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a>-&gt;get_error_message(<span class="stringliteral">&#39;user_email&#39;</span>) ) { ?&gt;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        &lt;<a class="code" href="namespacep.html">p</a> <span class="keyword">class</span>=<span class="stringliteral">&quot;error&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> echo <a class="code" href="plugins_8php.html#a949e330838a018cd41df6664c0a03191">$errmsg</a> ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> } ?&gt;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> <a class="code" href="edit-comments_8php.html#a01a5ac2afed3a262528186f4ba5f9693">name</a>=<span class="stringliteral">&quot;user_email&quot;</span> type=<span class="stringliteral">&quot;email&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;user_email&quot;</span> value=<span class="stringliteral">&quot;&lt;?php  echo esc_attr($user_email) ?&gt;&quot;</span> maxlength=<span class="stringliteral">&quot;200&quot;</span> /&gt;&lt;br /&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>(<span class="stringliteral">&#39;We send your registration email to this address. (Double-check your email address before continuing.)&#39;</span>) ?&gt;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="plugins_8php.html#a949e330838a018cd41df6664c0a03191">$errmsg</a> = <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a>-&gt;get_error_message(<span class="stringliteral">&#39;generic&#39;</span>) ) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        echo <span class="stringliteral">&#39;&lt;p class=&quot;error&quot;&gt;&#39;</span> . <a class="code" href="plugins_8php.html#a949e330838a018cd41df6664c0a03191">$errmsg</a> . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    }<span class="comment"></span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">     * Fires at the end of the user registration form on the site sign-up form.</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">     * @since 3.0.0</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">     * @param array $errors An array possibly containing &#39;user_name&#39; or &#39;user_email&#39; errors.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;signup_extra_fields&#39;</span>, <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a> );</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;}</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment"> * Validate user signup name and email</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment"> * @since MU</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment"> * @return array Contains username, email, and error messages.</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="keyword">function</span> validate_user_form() {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ms-functions_8php.html#af7ed3ab412e3b6305a695b477cd1ff25">wpmu_validate_user_signup</a>($_POST[<span class="stringliteral">&#39;user_name&#39;</span>], $_POST[<span class="stringliteral">&#39;user_email&#39;</span>]);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment"> * Allow returning users to sign up for another site</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment"> * @since MU</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment"> * @param string $blogname The new site name</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment"> * @param string $blog_title The new blog title</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment"> * @param array $errors</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="keyword">function</span> signup_another_blog( $blogname = <span class="stringliteral">&#39;&#39;</span>, $blog_title = <span class="stringliteral">&#39;&#39;</span>, <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a> = <span class="stringliteral">&#39;&#39;</span> ) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="user-edit_8php.html#a12f5443cc19cb33ae0292013c53a7b19">$current_user</a> = wp_get_current_user();</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>(<a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a>) ) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a> = <span class="keyword">new</span> <a class="code" href="class_w_p___error.html">WP_Error</a>();</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    $signup_defaults = array(</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="stringliteral">&#39;blogname&#39;</span>   =&gt; $blogname,</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="stringliteral">&#39;blog_title&#39;</span> =&gt; $blog_title,</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="stringliteral">&#39;errors&#39;</span>     =&gt; <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    );</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">     * Filter the default site sign-up variables.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">     * @since 3.0.0</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">     * @param array $signup_defaults {</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">     *     An array of default site sign-up variables.</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">     *     @type string $blogname   The site blogname.</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">     *     @type string $blog_title The site title.</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">     *     @type array  $errors     An array possibly containing &#39;blogname&#39; or &#39;blog_title&#39; errors.</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">     * }</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    $filtered_results = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;signup_another_blog_init&#39;</span>, $signup_defaults );</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    $blogname = $filtered_results[<span class="stringliteral">&#39;blogname&#39;</span>];</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    $blog_title = $filtered_results[<span class="stringliteral">&#39;blog_title&#39;</span>];</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a> = $filtered_results[<span class="stringliteral">&#39;errors&#39;</span>];</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    echo <span class="stringliteral">&#39;&lt;h2&gt;&#39;</span> . sprintf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Get &lt;em&gt;another&lt;/em&gt; %s site in seconds&#39;</span> ), <a class="code" href="ms-functions_8php.html#a7a458e0f14af3efce48fb42d7ff4d6d9">get_current_site</a>()-&gt;site_name ) . <span class="stringliteral">&#39;&lt;/h2&gt;&#39;</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a>-&gt;get_error_code() ) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        echo <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;There was a problem, please correct the form below and try again.&#39;</span> ) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    ?&gt;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> printf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Welcome back, %s. By filling out the form below, you can &lt;strong&gt;add another site to your account&lt;/strong&gt;. There is no limit to the number of sites you can have, so create to your heart&amp;#8217;s content, but write responsibly!&#39;</span> ), <a class="code" href="user-edit_8php.html#a12f5443cc19cb33ae0292013c53a7b19">$current_user</a>-&gt;display_name ) ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="my-sites_8php.html#a9cebca68f8380dcdc115add3eeb90f54">$blogs</a> = <a class="code" href="wp-includes_2user_8php.html#aa996da3ba6781da9cf467c0dc860a9c2">get_blogs_of_user</a>(<a class="code" href="user-edit_8php.html#a12f5443cc19cb33ae0292013c53a7b19">$current_user</a>-&gt;ID);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> ( !empty($blogs) ) { ?&gt;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            &lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Sites you are already a member of:&#39;</span> ) ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            &lt;ul&gt;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                &lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">foreach</span> ( $blogs as <a class="code" href="ms-delete-site_8php.html#af0758b84c94743c711c2b1fce220a626">$blog</a> ) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                    $home_url = <a class="code" href="link-template_8php.html#a80007310997738f7b518f6bedb6e59a5">get_home_url</a>( $blog-&gt;userblog_id );</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                    echo <span class="stringliteral">&#39;&lt;li&gt;&lt;a href=&quot;&#39;</span> . <a class="code" href="twentyfifteen_2content-link_8php.html#a4a6fb8865e1ae52faa29662b4087e629">esc_url</a>( $home_url ) . <span class="stringliteral">&#39;&quot;&gt;&#39;</span> . $home_url . <span class="stringliteral">&#39;&lt;/a&gt;&lt;/li&gt;&#39;</span>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                } ?&gt;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            &lt;/ul&gt;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> } ?&gt;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;If you&amp;#8217;re not going to use a great site domain, leave it for a new user. Now have at it!&#39;</span> ) ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    &lt;form <span class="keywordtype">id</span>=<span class="stringliteral">&quot;setupform&quot;</span> method=<span class="stringliteral">&quot;post&quot;</span> <a class="code" href="namespaceaction.html">action</a>=<span class="stringliteral">&quot;wp-signup.php&quot;</span>&gt;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> type=<span class="stringliteral">&quot;hidden&quot;</span> name=<span class="stringliteral">&quot;stage&quot;</span> value=<span class="stringliteral">&quot;gimmeanotherblog&quot;</span> /&gt;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a><span class="comment"></span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">        /**</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">         * Hidden sign-up form fields output when creating another site or user.</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">         * @since MU</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">         * @param string $context A string describing the steps of the sign-up process. The value can be</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">         *                        &#39;create-another-site&#39;, &#39;validate-user&#39;, or &#39;validate-site&#39;.</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;signup_hidden_fields&#39;</span>, <span class="stringliteral">&#39;create-another-site&#39;</span> );</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        ?&gt;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a> show_blog_form($blogname, $blog_title, <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a>); ?&gt;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        &lt;<a class="code" href="namespacep.html">p</a> <span class="keyword">class</span>=<span class="stringliteral">&quot;submit&quot;</span>&gt;&lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> type=<span class="stringliteral">&quot;submit&quot;</span> name=<span class="stringliteral">&quot;submit&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;submit&quot;</span> value=<span class="stringliteral">&quot;&lt;?php esc_attr_e( &#39;Create Site&#39; ) ?&gt;&quot;</span> /&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    &lt;/form&gt;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;}</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment"> * Validate a new blog signup</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment"> * @since MU</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment"> * @return null|bool True if blog signup was validated, false if error.</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment"> *                   The function halts all execution if the user is not logged in.</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="keyword">function</span> validate_another_blog_signup() {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    global <a class="code" href="schema_8php.html#aaac3ddf81d405fac59e1dceeca05b0a7">$wpdb</a>, $blogname, $blog_title, <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a>, $domain, <a class="code" href="wp-load_8php.html#a0a4baf0b22973c07685c3981f0d17fc4">$path</a>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <a class="code" href="user-edit_8php.html#a12f5443cc19cb33ae0292013c53a7b19">$current_user</a> = wp_get_current_user();</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span> ( ! is_user_logged_in() ) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        die();</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    $result = validate_blog_form();</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="comment">// Extracted values set/overwrite globals.</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    $domain = $result[<span class="stringliteral">&#39;domain&#39;</span>];</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    $path = $result[<span class="stringliteral">&#39;path&#39;</span>];</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    $blogname = $result[<span class="stringliteral">&#39;blogname&#39;</span>];</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    $blog_title = $result[<span class="stringliteral">&#39;blog_title&#39;</span>];</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    $errors = $result[<span class="stringliteral">&#39;errors&#39;</span>];</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">if</span> ( $errors-&gt;get_error_code() ) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        signup_another_blog($blogname, $blog_title, $errors);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    $public = (int) $_POST[<span class="stringliteral">&#39;blog_public&#39;</span>];</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    $blog_meta_defaults = array(</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="stringliteral">&#39;lang_id&#39;</span> =&gt; 1,</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="stringliteral">&#39;public&#39;</span>  =&gt; $public</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    );</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">// Handle the language setting for the new site.</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">if</span> ( ! empty( $_POST[<span class="stringliteral">&#39;WPLANG&#39;</span>] ) ) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        $languages = signup_get_available_languages();</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">if</span> ( in_array( $_POST[<span class="stringliteral">&#39;WPLANG&#39;</span>], $languages ) ) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <a class="code" href="wp-admin_2install_8php.html#a2ba769a382a3db95c4fc25db4b242429">$language</a> = <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( <a class="code" href="formatting_8php.html#a7220e1930f7f74f3fafb67ea1d7234f1">sanitize_text_field</a>( $_POST[<span class="stringliteral">&#39;WPLANG&#39;</span>] ) );</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="wp-admin_2install_8php.html#a2ba769a382a3db95c4fc25db4b242429">$language</a> ) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                $blog_meta_defaults[<span class="stringliteral">&#39;WPLANG&#39;</span>] = <a class="code" href="wp-admin_2install_8php.html#a2ba769a382a3db95c4fc25db4b242429">$language</a>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            }</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">     * Filter the new site meta variables.</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">     * @since MU</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">     * @deprecated 3.0.0 Use the &#39;add_signup_meta&#39; filter instead.</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">     * @param array $blog_meta_defaults An array of default blog meta variables.</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    $meta_defaults = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;signup_create_blog_meta&#39;</span>, $blog_meta_defaults );</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">     * Filter the new default site meta variables.</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">     * @since 3.0.0</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">     * @param array $meta {</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">     *     An array of default site meta variables.</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">     *     @type int $lang_id     The language ID.</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">     *     @type int $blog_public Whether search engines should be discouraged from indexing the site. 1 for true, 0 for false.</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">     * }</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    $meta = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;add_signup_meta&#39;</span>, $meta_defaults );</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="wp-settings_8php.html#a52044fb33b3842bc3d4655d3bd64415e">$blog_id</a> = <a class="code" href="ms-functions_8php.html#a94df666e8946aa4e4ed6a1e9bde7d7c0">wpmu_create_blog</a>( $domain, $path, $blog_title, <a class="code" href="user-edit_8php.html#a12f5443cc19cb33ae0292013c53a7b19">$current_user</a>-&gt;ID, $meta, $wpdb-&gt;siteid );</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( <a class="code" href="wp-settings_8php.html#a52044fb33b3842bc3d4655d3bd64415e">$blog_id</a> ) ) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    confirm_another_blog_signup( $domain, $path, $blog_title, <a class="code" href="user-edit_8php.html#a12f5443cc19cb33ae0292013c53a7b19">$current_user</a>-&gt;user_login, <a class="code" href="user-edit_8php.html#a12f5443cc19cb33ae0292013c53a7b19">$current_user</a>-&gt;user_email, $meta, <a class="code" href="wp-settings_8php.html#a52044fb33b3842bc3d4655d3bd64415e">$blog_id</a> );</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment"> * Confirm a new site signup</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment"> * @since MU</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment"> * @since 4.4.0 Added the `$blog_id` parameter.</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment"> * @param string $domain The domain URL</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment"> * @param string $path The site root path</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment"> * @param string $blog_title The blog title</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment"> * @param string $user_name The username</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment"> * @param string $user_email The user&#39;s email address</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment"> * @param array  $meta Any additional meta from the &#39;add_signup_meta&#39; filter in validate_blog_signup()</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment"> * @param int    $blog_id The blog ID</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="keyword">function</span> confirm_another_blog_signup( $domain, $path, $blog_title, $user_name, $user_email = <span class="stringliteral">&#39;&#39;</span>, $meta = array(), <a class="code" href="wp-settings_8php.html#a52044fb33b3842bc3d4655d3bd64415e">$blog_id</a> = 0 ) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="wp-settings_8php.html#a52044fb33b3842bc3d4655d3bd64415e">$blog_id</a> ) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <a class="code" href="ms-blogs_8php.html#ad7c90de7a9734c0cf051edff556efcee">switch_to_blog</a>( <a class="code" href="wp-settings_8php.html#a52044fb33b3842bc3d4655d3bd64415e">$blog_id</a> );</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        $home_url  = <a class="code" href="noop_8php.html#a2d2cbc03d92d4736569cab661c417c22">home_url</a>( <span class="charliteral">&#39;/&#39;</span> );</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        $login_url = <a class="code" href="general-template_8php.html#ac3a568d96fe29ca2a8aefd1d016abd0b">wp_login_url</a>();</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <a class="code" href="ms-blogs_8php.html#aa6ec3a2b8c0ff571962ccc9bcdb82ced">restore_current_blog</a>();</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        $home_url  = <span class="stringliteral">&#39;http://&#39;</span> . $domain . <a class="code" href="wp-load_8php.html#a0a4baf0b22973c07685c3981f0d17fc4">$path</a>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        $login_url = <span class="stringliteral">&#39;http://&#39;</span> . $domain . $path . <span class="stringliteral">&#39;wp-login.php&#39;</span>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    $site = sprintf( <span class="stringliteral">&#39;&lt;a href=&quot;%1$s&quot;&gt;%2$s&lt;/a&gt;&#39;</span>,</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <a class="code" href="twentyfifteen_2content-link_8php.html#a4a6fb8865e1ae52faa29662b4087e629">esc_url</a>( $home_url ),</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        $blog_title</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    );</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    ?&gt;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    &lt;h2&gt;&lt;?<a class="code" href="namespacephp.html">php</a> printf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;The site %s is yours.&#39;</span> ), $site ); ?&gt;&lt;/h2&gt;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a> printf(</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;&lt;a href=&quot;%1$s&quot;&gt;%2$s&lt;/a&gt; is your new site. &lt;a href=&quot;%3$s&quot;&gt;Log in&lt;/a&gt; as &amp;#8220;%4$s&amp;#8221; using your existing password.&#39;</span> ),</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <a class="code" href="twentyfifteen_2content-link_8php.html#a4a6fb8865e1ae52faa29662b4087e629">esc_url</a>( $home_url ),</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <a class="code" href="formatting_8php.html#ab99d2b875428a3172f6ea9d4d2e33e72">untrailingslashit</a>( $domain . $path ),</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <a class="code" href="twentyfifteen_2content-link_8php.html#a4a6fb8865e1ae52faa29662b4087e629">esc_url</a>( $login_url ),</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            $user_name</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        ); ?&gt;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    &lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a><span class="comment"></span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">     * Fires when the site or user sign-up process is complete.</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">     * @since 3.0.0</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;signup_finished&#39;</span> );</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment"> * Setup the new user signup process</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment"> * @since MU</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment"> * @param string $user_name The username</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment"> * @param string $user_email The user&#39;s email</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment"> * @param array $errors</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="keyword">function</span> signup_user( $user_name = <span class="stringliteral">&#39;&#39;</span>, $user_email = <span class="stringliteral">&#39;&#39;</span>, $errors = <span class="stringliteral">&#39;&#39;</span> ) {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    global $active_signup;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>($errors) )</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        $errors = <span class="keyword">new</span> <a class="code" href="class_w_p___error.html">WP_Error</a>();</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    $signup_for = isset( $_POST[ <span class="stringliteral">&#39;signup_for&#39;</span> ] ) ? <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $_POST[ <span class="stringliteral">&#39;signup_for&#39;</span> ] ) : <span class="stringliteral">&#39;blog&#39;</span>;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    $signup_user_defaults = array(</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="stringliteral">&#39;user_name&#39;</span>  =&gt; $user_name,</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="stringliteral">&#39;user_email&#39;</span> =&gt; $user_email,</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="stringliteral">&#39;errors&#39;</span>     =&gt; $errors,</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    );</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">     * Filter the default user variables used on the user sign-up form.</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">     * @since 3.0.0</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">     * @param array $signup_user_defaults {</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">     *     An array of default user variables.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">     *     @type string $user_name  The user username.</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">     *     @type string $user_email The user email address.</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">     *     @type array  $errors     An array of possible errors relevant to the sign-up user.</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">     * }</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    $filtered_results = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;signup_user_init&#39;</span>, $signup_user_defaults );</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    $user_name = $filtered_results[<span class="stringliteral">&#39;user_name&#39;</span>];</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    $user_email = $filtered_results[<span class="stringliteral">&#39;user_email&#39;</span>];</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    $errors = $filtered_results[<span class="stringliteral">&#39;errors&#39;</span>];</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    ?&gt;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    &lt;h2&gt;&lt;?<a class="code" href="namespacephp.html">php</a> printf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Get your own %s account in seconds&#39;</span> ), <a class="code" href="ms-functions_8php.html#a7a458e0f14af3efce48fb42d7ff4d6d9">get_current_site</a>()-&gt;site_name ) ?&gt;&lt;/h2&gt;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    &lt;form <span class="keywordtype">id</span>=<span class="stringliteral">&quot;setupform&quot;</span> method=<span class="stringliteral">&quot;post&quot;</span> <a class="code" href="namespaceaction.html">action</a>=<span class="stringliteral">&quot;wp-signup.php&quot;</span> novalidate=<span class="stringliteral">&quot;novalidate&quot;</span>&gt;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> type=<span class="stringliteral">&quot;hidden&quot;</span> name=<span class="stringliteral">&quot;stage&quot;</span> value=<span class="stringliteral">&quot;validate-user-signup&quot;</span> /&gt;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a><span class="comment"></span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">        /** This action is documented in wp-signup.php */</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;signup_hidden_fields&#39;</span>, <span class="stringliteral">&#39;validate-user&#39;</span> );</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        ?&gt;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a> show_user_form($user_name, $user_email, $errors); ?&gt;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        &lt;<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">if</span> ( $active_signup == <span class="stringliteral">&#39;blog&#39;</span> ) { ?&gt;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;signupblog&quot;</span> type=<span class="stringliteral">&quot;hidden&quot;</span> name=<span class="stringliteral">&quot;signup_for&quot;</span> value=<span class="stringliteral">&quot;blog&quot;</span> /&gt;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a> } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( $active_signup == <span class="stringliteral">&#39;user&#39;</span> ) { ?&gt;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;signupblog&quot;</span> type=<span class="stringliteral">&quot;hidden&quot;</span> name=<span class="stringliteral">&quot;signup_for&quot;</span> value=<span class="stringliteral">&quot;user&quot;</span> /&gt;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a> } <span class="keywordflow">else</span> { ?&gt;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;signupblog&quot;</span> type=<span class="stringliteral">&quot;radio&quot;</span> name=<span class="stringliteral">&quot;signup_for&quot;</span> value=<span class="stringliteral">&quot;blog&quot;</span> &lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="general-template_8php.html#ac5a8cddc08f21085ba0939cda4f64766">checked</a>( $signup_for, <span class="stringliteral">&#39;blog&#39;</span> ); ?&gt; /&gt;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            &lt;label <span class="keyword">class</span>=<span class="stringliteral">&quot;checkbox&quot;</span> <span class="keywordflow">for</span>=<span class="stringliteral">&quot;signupblog&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>(<span class="stringliteral">&#39;Gimme a site!&#39;</span>) ?&gt;&lt;/label&gt;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            &lt;br /&gt;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;signupuser&quot;</span> type=<span class="stringliteral">&quot;radio&quot;</span> name=<span class="stringliteral">&quot;signup_for&quot;</span> value=<span class="stringliteral">&quot;user&quot;</span> &lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="general-template_8php.html#ac5a8cddc08f21085ba0939cda4f64766">checked</a>( $signup_for, <span class="stringliteral">&#39;user&#39;</span> ); ?&gt; /&gt;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            &lt;label <span class="keyword">class</span>=<span class="stringliteral">&quot;checkbox&quot;</span> <span class="keywordflow">for</span>=<span class="stringliteral">&quot;signupuser&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>(<span class="stringliteral">&#39;Just a username, please.&#39;</span>) ?&gt;&lt;/label&gt;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a> } ?&gt;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        &lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        &lt;<a class="code" href="namespacep.html">p</a> <span class="keyword">class</span>=<span class="stringliteral">&quot;submit&quot;</span>&gt;&lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> type=<span class="stringliteral">&quot;submit&quot;</span> name=<span class="stringliteral">&quot;submit&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;submit&quot;</span> value=<span class="stringliteral">&quot;&lt;?php esc_attr_e(&#39;Next&#39;) ?&gt;&quot;</span> /&gt;&lt;/p&gt;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    &lt;/form&gt;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;}</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment"> * Validate the new user signup</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment"> * @since MU</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment"> * @return bool True if new user signup was validated, false if error</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="keyword">function</span> validate_user_signup() {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    $result = validate_user_form();</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    $user_name = $result[<span class="stringliteral">&#39;user_name&#39;</span>];</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    $user_email = $result[<span class="stringliteral">&#39;user_email&#39;</span>];</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    $errors = $result[<span class="stringliteral">&#39;errors&#39;</span>];</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">if</span> ( $errors-&gt;get_error_code() ) {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        signup_user($user_name, $user_email, $errors);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;blog&#39;</span> == $_POST[<span class="stringliteral">&#39;signup_for&#39;</span>] ) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        signup_blog($user_name, $user_email);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">    /** This filter is documented in wp-signup.php */</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <a class="code" href="ms-functions_8php.html#a82e4acb951d2eedb80de073eb78398ed">wpmu_signup_user</a>( $user_name, $user_email, <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;add_signup_meta&#39;</span>, array() ) );</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    confirm_user_signup($user_name, $user_email);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;}</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment"> * New user signup confirmation</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment"> * @since MU</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment"> * @param string $user_name The username</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment"> * @param string $user_email The user&#39;s email address</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="keyword">function</span> confirm_user_signup($user_name, $user_email) {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    ?&gt;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    &lt;h2&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <span class="comment">/* translators: %s: username */</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    printf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;%s is your new username&#39;</span> ), $user_name) ?&gt;&lt;/h2&gt;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;But, before you can start using your new username, &lt;strong&gt;you must activate it&lt;/strong&gt;.&#39;</span> ) ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <span class="comment">/* translators: %s: email address */</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    printf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Check your inbox at %s and click the link given.&#39;</span> ), <span class="stringliteral">&#39;&lt;strong&gt;&#39;</span> . $user_email . <span class="stringliteral">&#39;&lt;/strong&gt;&#39;</span> ); ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;If you do not activate your username within two days, you will have to sign up again.&#39;</span> ); ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a><span class="comment"></span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">    /** This action is documented in wp-signup.php */</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;signup_finished&#39;</span> );</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;}</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment"> * Setup the new site signup</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment"> * @since MU</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment"> * @param string $user_name The username</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment"> * @param string $user_email The user&#39;s email address</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment"> * @param string $blogname The site name</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment"> * @param string $blog_title The site title</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment"> * @param array $errors</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="keyword">function</span> signup_blog($user_name = <span class="stringliteral">&#39;&#39;</span>, $user_email = <span class="stringliteral">&#39;&#39;</span>, $blogname = <span class="stringliteral">&#39;&#39;</span>, $blog_title = <span class="stringliteral">&#39;&#39;</span>, $errors = <span class="stringliteral">&#39;&#39;</span>) {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>($errors) )</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        $errors = <span class="keyword">new</span> <a class="code" href="class_w_p___error.html">WP_Error</a>();</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    $signup_blog_defaults = array(</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="stringliteral">&#39;user_name&#39;</span>  =&gt; $user_name,</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="stringliteral">&#39;user_email&#39;</span> =&gt; $user_email,</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="stringliteral">&#39;blogname&#39;</span>   =&gt; $blogname,</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="stringliteral">&#39;blog_title&#39;</span> =&gt; $blog_title,</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="stringliteral">&#39;errors&#39;</span>     =&gt; $errors</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    );</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">     * Filter the default site creation variables for the site sign-up form.</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">     * @since 3.0.0</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment">     * @param array $signup_blog_defaults {</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment">     *     An array of default site creation variables.</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">     *     @type string $user_name  The user username.</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment">     *     @type string $user_email The user email address.</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">     *     @type string $blogname   The blogname.</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">     *     @type string $blog_title The title of the site.</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">     *     @type array  $errors     An array of possible errors relevant to new site creation variables.</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">     * }</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    $filtered_results = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;signup_blog_init&#39;</span>, $signup_blog_defaults );</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    $user_name = $filtered_results[<span class="stringliteral">&#39;user_name&#39;</span>];</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    $user_email = $filtered_results[<span class="stringliteral">&#39;user_email&#39;</span>];</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    $blogname = $filtered_results[<span class="stringliteral">&#39;blogname&#39;</span>];</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    $blog_title = $filtered_results[<span class="stringliteral">&#39;blog_title&#39;</span>];</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    $errors = $filtered_results[<span class="stringliteral">&#39;errors&#39;</span>];</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">if</span> ( empty($blogname) )</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        $blogname = $user_name;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    ?&gt;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    &lt;form <span class="keywordtype">id</span>=<span class="stringliteral">&quot;setupform&quot;</span> method=<span class="stringliteral">&quot;post&quot;</span> <a class="code" href="namespaceaction.html">action</a>=<span class="stringliteral">&quot;wp-signup.php&quot;</span>&gt;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> type=<span class="stringliteral">&quot;hidden&quot;</span> name=<span class="stringliteral">&quot;stage&quot;</span> value=<span class="stringliteral">&quot;validate-blog-signup&quot;</span> /&gt;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> type=<span class="stringliteral">&quot;hidden&quot;</span> name=<span class="stringliteral">&quot;user_name&quot;</span> value=<span class="stringliteral">&quot;&lt;?php echo esc_attr($user_name) ?&gt;&quot;</span> /&gt;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> type=<span class="stringliteral">&quot;hidden&quot;</span> name=<span class="stringliteral">&quot;user_email&quot;</span> value=<span class="stringliteral">&quot;&lt;?php echo esc_attr($user_email) ?&gt;&quot;</span> /&gt;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a><span class="comment"></span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">        /** This action is documented in wp-signup.php */</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;signup_hidden_fields&#39;</span>, <span class="stringliteral">&#39;validate-site&#39;</span> );</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        ?&gt;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a> show_blog_form($blogname, $blog_title, $errors); ?&gt;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        &lt;<a class="code" href="namespacep.html">p</a> <span class="keyword">class</span>=<span class="stringliteral">&quot;submit&quot;</span>&gt;&lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> type=<span class="stringliteral">&quot;submit&quot;</span> name=<span class="stringliteral">&quot;submit&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;submit&quot;</span> value=<span class="stringliteral">&quot;&lt;?php esc_attr_e(&#39;Signup&#39;) ?&gt;&quot;</span> /&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    &lt;/form&gt;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;}</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment"> * Validate new site signup</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment"> * @since MU</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment"> * @return bool True if the site signup was validated, false if error</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="keyword">function</span> validate_blog_signup() {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="comment">// Re-validate user info.</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    $user_result = <a class="code" href="ms-functions_8php.html#af7ed3ab412e3b6305a695b477cd1ff25">wpmu_validate_user_signup</a>( $_POST[<span class="stringliteral">&#39;user_name&#39;</span>], $_POST[<span class="stringliteral">&#39;user_email&#39;</span>] );</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    $user_name = $user_result[<span class="stringliteral">&#39;user_name&#39;</span>];</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    $user_email = $user_result[<span class="stringliteral">&#39;user_email&#39;</span>];</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    $user_errors = $user_result[<span class="stringliteral">&#39;errors&#39;</span>];</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">if</span> ( $user_errors-&gt;get_error_code() ) {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        signup_user( $user_name, $user_email, $user_errors );</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    $result = <a class="code" href="ms-functions_8php.html#ab0e3f1a4ed2340e305a26b271effcd67">wpmu_validate_blog_signup</a>( $_POST[<span class="stringliteral">&#39;blogname&#39;</span>], $_POST[<span class="stringliteral">&#39;blog_title&#39;</span>] );</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    $domain = $result[<span class="stringliteral">&#39;domain&#39;</span>];</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    $path = $result[<span class="stringliteral">&#39;path&#39;</span>];</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    $blogname = $result[<span class="stringliteral">&#39;blogname&#39;</span>];</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    $blog_title = $result[<span class="stringliteral">&#39;blog_title&#39;</span>];</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    $errors = $result[<span class="stringliteral">&#39;errors&#39;</span>];</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">if</span> ( $errors-&gt;get_error_code() ) {</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        signup_blog($user_name, $user_email, $blogname, $blog_title, $errors);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    }</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    $public = (int) $_POST[<span class="stringliteral">&#39;blog_public&#39;</span>];</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    $signup_meta = array (<span class="stringliteral">&#39;lang_id&#39;</span> =&gt; 1, <span class="stringliteral">&#39;public&#39;</span> =&gt; $public);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="comment">// Handle the language setting for the new site.</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">if</span> ( ! empty( $_POST[<span class="stringliteral">&#39;WPLANG&#39;</span>] ) ) {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        $languages = signup_get_available_languages();</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <span class="keywordflow">if</span> ( in_array( $_POST[<span class="stringliteral">&#39;WPLANG&#39;</span>], $languages ) ) {</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            <a class="code" href="wp-admin_2install_8php.html#a2ba769a382a3db95c4fc25db4b242429">$language</a> = <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( <a class="code" href="formatting_8php.html#a7220e1930f7f74f3fafb67ea1d7234f1">sanitize_text_field</a>( $_POST[<span class="stringliteral">&#39;WPLANG&#39;</span>] ) );</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="wp-admin_2install_8php.html#a2ba769a382a3db95c4fc25db4b242429">$language</a> ) {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                $signup_meta[<span class="stringliteral">&#39;WPLANG&#39;</span>] = <a class="code" href="wp-admin_2install_8php.html#a2ba769a382a3db95c4fc25db4b242429">$language</a>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        }</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">    /** This filter is documented in wp-signup.php */</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    $meta = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;add_signup_meta&#39;</span>, $signup_meta );</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <a class="code" href="ms-functions_8php.html#aa184013afd8f8d1658d523292e28c25d">wpmu_signup_blog</a>($domain, $path, $blog_title, $user_name, $user_email, $meta);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    confirm_blog_signup($domain, $path, $blog_title, $user_name, $user_email, $meta);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;}</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment"> * New site signup confirmation</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment"> * @since MU</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment"> * @param string $domain The domain URL</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment"> * @param string $path The site root path</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment"> * @param string $blog_title The new site title</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment"> * @param string $user_name The user&#39;s username</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment"> * @param string $user_email The user&#39;s email address</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment"> * @param array $meta Any additional meta from the &#39;add_signup_meta&#39; filter in validate_blog_signup()</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="keyword">function</span> confirm_blog_signup( $domain, $path, $blog_title, $user_name = <span class="stringliteral">&#39;&#39;</span>, $user_email = <span class="stringliteral">&#39;&#39;</span>, $meta = array() ) {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    ?&gt;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    &lt;h2&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <span class="comment">/* translators: %s: site address */</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    printf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Congratulations! Your new site, %s, is almost ready.&#39;</span> ), <span class="stringliteral">&quot;&lt;a href=&#39;http://{$domain}{$path}&#39;&gt;{$blog_title}&lt;/a&gt;&quot;</span> ) ?&gt;&lt;/h2&gt;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;But, before you can start using your site, &lt;strong&gt;you must activate it&lt;/strong&gt;.&#39;</span> ) ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <span class="comment">/* translators: %s: email address */</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    printf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Check your inbox at %s and click the link given.&#39;</span> ), <span class="stringliteral">&#39;&lt;strong&gt;&#39;</span> . $user_email . <span class="stringliteral">&#39;&lt;/strong&gt;&#39;</span> ); ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;If you do not activate your site within two days, you will have to sign up again.&#39;</span> ); ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    &lt;h2&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Still waiting for your email?&#39;</span> ); ?&gt;&lt;/h2&gt;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;If you haven&amp;#8217;t received your email yet, there are a number of things you can do:&#39;</span> ) ?&gt;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        &lt;ul <span class="keywordtype">id</span>=<span class="stringliteral">&quot;noemail-tips&quot;</span>&gt;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            &lt;<a class="code" href="wordpress_2wp-includes_2functions_8php.html#af06cd3b218b548cf6b733df97c80c8a3">li</a>&gt;&lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;<a class="code" href="namespacestrong.html">strong</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Wait a little longer. Sometimes delivery of email can be delayed by processes outside of our control.&#39;</span> ) ?&gt;&lt;/<a class="code" href="namespacestrong.html">strong</a>&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;&lt;/<a class="code" href="wordpress_2wp-includes_2functions_8php.html#af06cd3b218b548cf6b733df97c80c8a3">li</a>&gt;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            &lt;<a class="code" href="wordpress_2wp-includes_2functions_8php.html#af06cd3b218b548cf6b733df97c80c8a3">li</a>&gt;&lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Check the junk or spam folder of your email client. Sometime emails wind up there by mistake.&#39;</span> ) ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;&lt;/<a class="code" href="wordpress_2wp-includes_2functions_8php.html#af06cd3b218b548cf6b733df97c80c8a3">li</a>&gt;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            &lt;<a class="code" href="wordpress_2wp-includes_2functions_8php.html#af06cd3b218b548cf6b733df97c80c8a3">li</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> printf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Have you entered your email correctly? You have entered %s, if it&amp;#8217;s incorrect, you will not receive your email.&#39;</span> ), $user_email ) ?&gt;&lt;/<a class="code" href="wordpress_2wp-includes_2functions_8php.html#af06cd3b218b548cf6b733df97c80c8a3">li</a>&gt;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        &lt;/ul&gt;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    &lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a><span class="comment"></span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment">    /** This action is documented in wp-signup.php */</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;signup_finished&#39;</span> );</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;}</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment"> * Retrieves languages available during the site/user signup process.</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment"> * @since 4.4.0</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment"> * @see get_available_languages()</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment"> * @return array List of available languages.</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="keyword">function</span> signup_get_available_languages() {<span class="comment"></span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">     * Filter the list of available languages for front-end site signups.</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">     * Passing an empty array to this hook will disable output of the setting on the</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">     * signup form, and the default language will be used when creating the site.</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">     * Languages not already installed will be stripped.</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">     * @since 4.4.0</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">     * @param array $available_languages Available languages.</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    $languages = (array) <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;signup_get_available_languages&#39;</span>, <a class="code" href="l10n_8php.html#a3b3d1cf3cd27c9b5225753297028b332">get_available_languages</a>() );</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">     * Strip any non-installed languages and return.</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment">     * Re-call get_available_languages() here in case a language pack was installed</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment">     * in a callback hooked to the &#39;signup_get_available_languages&#39; filter before this point.</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">return</span> array_intersect_assoc( $languages, <a class="code" href="l10n_8php.html#a3b3d1cf3cd27c9b5225753297028b332">get_available_languages</a>() );</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;}</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">// Main</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;$active_signup = <a class="code" href="option_8php.html#aadb234e9fde76b878f50351325bab9fb">get_site_option</a>( <span class="stringliteral">&#39;registration&#39;</span>, <span class="stringliteral">&#39;none&#39;</span> );<span class="comment"></span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment"> * Filter the type of site sign-up.</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment"> * @since 3.0.0</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment"> * @param string $active_signup String that returns registration type. The value can be</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment"> *                              &#39;all&#39;, &#39;none&#39;, &#39;blog&#39;, or &#39;user&#39;.</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;$active_signup = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;wpmu_active_signup&#39;</span>, $active_signup );</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">// Make the signup type translatable.</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;$i18n_signup[<span class="stringliteral">&#39;all&#39;</span>] = <a class="code" href="edit-form-advanced_8php.html#ada8efad85a9cd028503cbe55c37c890a">_x</a>(<span class="stringliteral">&#39;all&#39;</span>, <span class="stringliteral">&#39;Multisite active signup type&#39;</span>);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;$i18n_signup[<span class="stringliteral">&#39;none&#39;</span>] = <a class="code" href="edit-form-advanced_8php.html#ada8efad85a9cd028503cbe55c37c890a">_x</a>(<span class="stringliteral">&#39;none&#39;</span>, <span class="stringliteral">&#39;Multisite active signup type&#39;</span>);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;$i18n_signup[<span class="stringliteral">&#39;blog&#39;</span>] = <a class="code" href="edit-form-advanced_8php.html#ada8efad85a9cd028503cbe55c37c890a">_x</a>(<span class="stringliteral">&#39;blog&#39;</span>, <span class="stringliteral">&#39;Multisite active signup type&#39;</span>);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;$i18n_signup[<span class="stringliteral">&#39;user&#39;</span>] = <a class="code" href="edit-form-advanced_8php.html#ada8efad85a9cd028503cbe55c37c890a">_x</a>(<span class="stringliteral">&#39;user&#39;</span>, <span class="stringliteral">&#39;Multisite active signup type&#39;</span>);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="keywordflow">if</span> ( <a class="code" href="capabilities_8php.html#a99845439f6f1db111622e0b684512ba7">is_super_admin</a>() )</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    echo <span class="stringliteral">&#39;&lt;div class=&quot;mu_alert&quot;&gt;&#39;</span> . sprintf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Greetings Site Administrator! You are currently allowing &amp;#8220;%s&amp;#8221; registrations. To change or disable registration go to your &lt;a href=&quot;%s&quot;&gt;Options page&lt;/a&gt;.&#39;</span> ), $i18n_signup[$active_signup], <a class="code" href="twentyfifteen_2content-link_8php.html#a4a6fb8865e1ae52faa29662b4087e629">esc_url</a>( <a class="code" href="link-template_8php.html#a4a32808e319cd6ec587320eaa73b2a96">network_admin_url</a>( <span class="stringliteral">&#39;settings.php&#39;</span> ) ) ) . <span class="stringliteral">&#39;&lt;/div&gt;&#39;</span>;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;$newblogname = isset($_GET[<span class="stringliteral">&#39;new&#39;</span>]) ? strtolower(preg_replace(<span class="stringliteral">&#39;/^-|-$|[^-a-zA-Z0-9]/&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, $_GET[<span class="stringliteral">&#39;new&#39;</span>])) : <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<a class="code" href="user-edit_8php.html#a12f5443cc19cb33ae0292013c53a7b19">$current_user</a> = wp_get_current_user();</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="keywordflow">if</span> ( $active_signup == <span class="stringliteral">&#39;none&#39;</span> ) {</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Registration has been disabled.&#39;</span> );</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;} <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( $active_signup == <span class="stringliteral">&#39;blog&#39;</span> &amp;&amp; !is_user_logged_in() ) {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    $login_url = <a class="code" href="general-template_8php.html#ac3a568d96fe29ca2a8aefd1d016abd0b">wp_login_url</a>( <a class="code" href="link-template_8php.html#a5db0b2459751c30571b0517244bba727">network_site_url</a>( <span class="stringliteral">&#39;wp-signup.php&#39;</span> ) );</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    echo sprintf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;You must first &lt;a href=&quot;%s&quot;&gt;log in&lt;/a&gt;, and then you can create a new site.&#39;</span> ), $login_url );</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;} <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    $stage = isset( $_POST[<span class="stringliteral">&#39;stage&#39;</span>] ) ?  $_POST[<span class="stringliteral">&#39;stage&#39;</span>] : <span class="stringliteral">&#39;default&#39;</span>;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">switch</span> ( $stage ) {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="keywordflow">case</span> <span class="stringliteral">&#39;validate-user-signup&#39;</span> :</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            <span class="keywordflow">if</span> ( $active_signup == <span class="stringliteral">&#39;all&#39;</span> || $_POST[ <span class="stringliteral">&#39;signup_for&#39;</span> ] == <span class="stringliteral">&#39;blog&#39;</span> &amp;&amp; $active_signup == <span class="stringliteral">&#39;blog&#39;</span> || $_POST[ <span class="stringliteral">&#39;signup_for&#39;</span> ] == <span class="stringliteral">&#39;user&#39;</span> &amp;&amp; $active_signup == <span class="stringliteral">&#39;user&#39;</span> )</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                validate_user_signup();</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;User registration has been disabled.&#39;</span> );</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <span class="keywordflow">case</span> <span class="stringliteral">&#39;validate-blog-signup&#39;</span>:</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            <span class="keywordflow">if</span> ( $active_signup == <span class="stringliteral">&#39;all&#39;</span> || $active_signup == <span class="stringliteral">&#39;blog&#39;</span> )</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                validate_blog_signup();</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Site registration has been disabled.&#39;</span> );</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="keywordflow">case</span> <span class="stringliteral">&#39;gimmeanotherblog&#39;</span>:</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            validate_another_blog_signup();</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="keywordflow">case</span> <span class="stringliteral">&#39;default&#39;</span>:</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="keywordflow">default</span> :</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            $user_email = isset( $_POST[ <span class="stringliteral">&#39;user_email&#39;</span> ] ) ? $_POST[ <span class="stringliteral">&#39;user_email&#39;</span> ] : <span class="stringliteral">&#39;&#39;</span>;<span class="comment"></span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="comment">            /**</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment">             * Fires when the site sign-up form is sent.</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment">             *</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment">             * @since 3.0.0</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;preprocess_signup_form&#39;</span> );</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            <span class="keywordflow">if</span> ( is_user_logged_in() &amp;&amp; ( $active_signup == <span class="stringliteral">&#39;all&#39;</span> || $active_signup == <span class="stringliteral">&#39;blog&#39;</span> ) )</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                signup_another_blog($newblogname);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( ! is_user_logged_in() &amp;&amp; ( $active_signup == <span class="stringliteral">&#39;all&#39;</span> || $active_signup == <span class="stringliteral">&#39;user&#39;</span> ) )</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                signup_user( $newblogname, $user_email );</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( ! is_user_logged_in() &amp;&amp; ( $active_signup == &#39;blog&#39; ) )</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( &#39;Sorry, <a class="code" href="namespacenew.html">new</a> registrations <a class="code" href="namespaceare.html">are</a> <a class="code" href="namespacenot.html">not</a> allowed <a class="code" href="namespaceat.html">at</a> <a class="code" href="namespacethis.html">this</a> time.&#39; );</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            <a class="code" href="address_8php.html#abf1587eec3e668593f0b811050a678e3">else</a></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( &#39;<a class="code" href="namespace_you.html">You</a> <a class="code" href="namespaceare.html">are</a> logged <a class="code" href="namespacein.html">in</a> already. No need <a class="code" href="namespaceto.html">to</a> register again!&#39; );</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            <a class="code" href="search-field-date_8php.html#ab0fb235c4acb6fcb8c0d565d101505a4">if</a> ( $newblogname ) {</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                $newblog = <a class="code" href="ms-blogs_8php.html#ab1bd133df4842ce70f9c9d74e8b60d89">get_blogaddress_by_name</a>( $newblogname );</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                <span class="keywordflow">if</span> ( $active_signup == <span class="stringliteral">&#39;blog&#39;</span> || $active_signup == <span class="stringliteral">&#39;all&#39;</span> )</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                    <span class="comment">/* translators: %s: site address */</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                    printf( <span class="stringliteral">&#39;&lt;p&gt;&lt;em&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;The site you were looking for, %s, does not exist, but you can create it now!&#39;</span> ) . <span class="stringliteral">&#39;&lt;/em&gt;&lt;/p&gt;&#39;</span>,</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                        <span class="stringliteral">&#39;&lt;strong&gt;&#39;</span> . $newblog . <span class="stringliteral">&#39;&lt;/strong&gt;&#39;</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                    );</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                    <span class="comment">/* translators: %s: site address */</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                    printf( <span class="stringliteral">&#39;&lt;p&gt;&lt;em&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;The site you were looking for, %s, does not exist.&#39;</span> ) . <span class="stringliteral">&#39;&lt;/em&gt;&lt;/p&gt;&#39;</span>,</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                        <span class="stringliteral">&#39;&lt;strong&gt;&#39;</span> . $newblog . <span class="stringliteral">&#39;&lt;/strong&gt;&#39;</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                    );</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            }</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    }</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;}</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;?&gt;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;&lt;/div&gt;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;&lt;/div&gt;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a><span class="comment"></span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment"> * Fires after the sign-up forms, before wp_footer.</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment"> * @since 3.0.0</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;after_signup_form&#39;</span> ); ?&gt;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="general-template_8php.html#a19bb641c2a25108066ef03ea311e112a">get_footer</a>( <span class="stringliteral">&#39;wp-signup&#39;</span> );</div>
<div class="ttc" id="wp-settings_8php_html_a52044fb33b3842bc3d4655d3bd64415e"><div class="ttname"><a href="wp-settings_8php.html#a52044fb33b3842bc3d4655d3bd64415e">$blog_id</a></div><div class="ttdeci">global $blog_id</div><div class="ttdoc">If not already configured, $blog_id will default to 1 in a single site configuration. </div><div class="ttdef"><b>Definition:</b> <a href="wp-settings_8php_source.html#l00030">wp-settings.php:30</a></div></div>
<div class="ttc" id="namespaceto_html"><div class="ttname"><a href="namespaceto.html">to</a></div></div>
<div class="ttc" id="namespacedisplay_html"><div class="ttname"><a href="namespacedisplay.html">display</a></div></div>
<div class="ttc" id="link-template_8php_html_a5db0b2459751c30571b0517244bba727"><div class="ttname"><a href="link-template_8php.html#a5db0b2459751c30571b0517244bba727">network_site_url</a></div><div class="ttdeci">network_site_url($path= '', $scheme=null)</div><div class="ttdoc">Retrieve the site url for the current network. </div><div class="ttdef"><b>Definition:</b> <a href="link-template_8php_source.html#l03223">link-template.php:3223</a></div></div>
<div class="ttc" id="namespaceaction_html"><div class="ttname"><a href="namespaceaction.html">action</a></div></div>
<div class="ttc" id="user-edit_8php_html_a12f5443cc19cb33ae0292013c53a7b19"><div class="ttname"><a href="user-edit_8php.html#a12f5443cc19cb33ae0292013c53a7b19">$current_user</a></div><div class="ttdeci">$current_user</div><div class="ttdef"><b>Definition:</b> <a href="user-edit_8php_source.html#l00015">user-edit.php:15</a></div></div>
<div class="ttc" id="wp-includes_2user_8php_html_aa996da3ba6781da9cf467c0dc860a9c2"><div class="ttname"><a href="wp-includes_2user_8php.html#aa996da3ba6781da9cf467c0dc860a9c2">get_blogs_of_user</a></div><div class="ttdeci">get_blogs_of_user($user_id, $all=false)</div><div class="ttdoc">Get the blogs a user belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2user_8php_source.html#l00500">wp-includes/user.php:500</a></div></div>
<div class="ttc" id="wp-includes_2plugin_8php_html_aed75045b0b4572e55462b37b063a77cc"><div class="ttname"><a href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a></div><div class="ttdeci">do_action($tag, $arg= '')</div><div class="ttdoc">Execute functions hooked on a specific action hook. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2plugin_8php_source.html#l00482">wp-includes/plugin.php:482</a></div></div>
<div class="ttc" id="formatting_8php_html_ab99d2b875428a3172f6ea9d4d2e33e72"><div class="ttname"><a href="formatting_8php.html#ab99d2b875428a3172f6ea9d4d2e33e72">untrailingslashit</a></div><div class="ttdeci">untrailingslashit($string)</div><div class="ttdoc">Removes trailing forward slashes and backslashes if they exist. </div><div class="ttdef"><b>Definition:</b> <a href="formatting_8php_source.html#l01994">formatting.php:1994</a></div></div>
<div class="ttc" id="options-reading_8php_html_a701e52e41a7a63be2b24481016c74a50"><div class="ttname"><a href="options-reading_8php.html#a701e52e41a7a63be2b24481016c74a50">site</a></div><div class="ttdeci">s displayed on the front page of your site It can be posts in reverse chronological order(classic blog) or a static fixed page To set static a home you first need to create two&lt; a href=&quot;%s&quot;&gt; Pages&lt;/a &gt; One will become the front and the other will be where your posts are displayed post new php including the maximum numbers of posts to display and whether to show full text or a summary&lt;/p &gt;&lt; p &gt; You must click the Save Changes button at the bottom of the screen for new settings to take effect&lt;/p &gt; id site visibility title blog_privacy_selector Site Visibility Search Engine Visibility content&lt; p &gt; You can choose whether or not your site will be crawled by ping and spiders If you want those services to ignore your site</div><div class="ttdef"><b>Definition:</b> <a href="options-reading_8php_source.html#l00024">options-reading.php:24</a></div></div>
<div class="ttc" id="wp-content_2themes_2twentythirteen_2inc_2custom-header_8php_html_ab1b1d44a8c4dbcaeff449be6b5e19935"><div class="ttname"><a href="wp-content_2themes_2twentythirteen_2inc_2custom-header_8php.html#ab1b1d44a8c4dbcaeff449be6b5e19935">width</a></div><div class="ttdeci">max width</div><div class="ttdef"><b>Definition:</b> <a href="wp-content_2themes_2twentythirteen_2inc_2custom-header_8php_source.html#l00172">wp-content/themes/twentythirteen/inc/custom-header.php:172</a></div></div>
<div class="ttc" id="capabilities_8php_html_a99845439f6f1db111622e0b684512ba7"><div class="ttname"><a href="capabilities_8php.html#a99845439f6f1db111622e0b684512ba7">is_super_admin</a></div><div class="ttdeci">is_super_admin($user_id=false)</div><div class="ttdoc">Determine if user is a site admin. </div><div class="ttdef"><b>Definition:</b> <a href="capabilities_8php_source.html#l00598">capabilities.php:598</a></div></div>
<div class="ttc" id="ms-functions_8php_html_af7ed3ab412e3b6305a695b477cd1ff25"><div class="ttname"><a href="ms-functions_8php.html#af7ed3ab412e3b6305a695b477cd1ff25">wpmu_validate_user_signup</a></div><div class="ttdeci">wpmu_validate_user_signup($user_name, $user_email)</div><div class="ttdoc">Sanitize and validate data required for a user sign-up. </div><div class="ttdef"><b>Definition:</b> <a href="ms-functions_8php_source.html#l00407">ms-functions.php:407</a></div></div>
<div class="ttc" id="form__list_8php_html_a88a9f534b48462f570bf4c70c63f81ea"><div class="ttname"><a href="form__list_8php.html#a88a9f534b48462f570bf4c70c63f81ea">margin</a></div><div class="ttdeci">gf_new_form_modal_container margin</div><div class="ttdef"><b>Definition:</b> <a href="form__list_8php_source.html#l00172">form_list.php:172</a></div></div>
<div class="ttc" id="noop_8php_html_a2d2cbc03d92d4736569cab661c417c22"><div class="ttname"><a href="noop_8php.html#a2d2cbc03d92d4736569cab661c417c22">home_url</a></div><div class="ttdeci">home_url()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00076">noop.php:76</a></div></div>
<div class="ttc" id="search-field-date_8php_html_ab0fb235c4acb6fcb8c0d565d101505a4"><div class="ttname"><a href="search-field-date_8php.html#ab0fb235c4acb6fcb8c0d565d101505a4">if</a></div><div class="ttdeci">if(!gv_empty($search_field['label'], false))</div><div class="ttdoc">Install global terms. </div><div class="ttdef"><b>Definition:</b> <a href="search-field-date_8php_source.html#l00014">search-field-date.php:14</a></div></div>
<div class="ttc" id="wp-signup_8php_html_a8f41fc3b190e83c8fc1659c89a745cbb"><div class="ttname"><a href="wp-signup_8php.html#a8f41fc3b190e83c8fc1659c89a745cbb">wpmu_signup_stylesheet</a></div><div class="ttdeci">wpmu_signup_stylesheet()</div><div class="ttdoc">Prints styles for front-end Multisite signup pages. </div><div class="ttdef"><b>Definition:</b> <a href="wp-signup_8php_source.html#l00055">wp-signup.php:55</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_ada8efad85a9cd028503cbe55c37c890a"><div class="ttname"><a href="edit-form-advanced_8php.html#ada8efad85a9cd028503cbe55c37c890a">_x</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv' _x( 'Format', 'post format')</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00244">edit-form-advanced.php:244</a></div></div>
<div class="ttc" id="general-template_8php_html_a3db4f83e405854d38d4f314b4e13969f"><div class="ttname"><a href="general-template_8php.html#a3db4f83e405854d38d4f314b4e13969f">wp_registration_url</a></div><div class="ttdeci">wp_registration_url()</div><div class="ttdoc">Returns the URL that allows the user to register on the site. </div><div class="ttdef"><b>Definition:</b> <a href="general-template_8php_source.html#l00363">general-template.php:363</a></div></div>
<div class="ttc" id="admin_8php_html_af1c9ecf26c0cfd247c0760dd4b594a6d"><div class="ttname"><a href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a></div><div class="ttdeci">if(get_option('db_upgraded')) elseif(get_option('db_version')!=$wp_db_version &amp;&amp;empty($_POST))</div><div class="ttdef"><b>Definition:</b> <a href="admin_8php_source.html#l00045">admin.php:45</a></div></div>
<div class="ttc" id="ms-blogs_8php_html_ad7c90de7a9734c0cf051edff556efcee"><div class="ttname"><a href="ms-blogs_8php.html#ad7c90de7a9734c0cf051edff556efcee">switch_to_blog</a></div><div class="ttdeci">switch_to_blog($new_blog, $deprecated=null)</div><div class="ttdoc">Switch the current blog. </div><div class="ttdef"><b>Definition:</b> <a href="ms-blogs_8php_source.html#l00610">ms-blogs.php:610</a></div></div>
<div class="ttc" id="link-template_8php_html_a80007310997738f7b518f6bedb6e59a5"><div class="ttname"><a href="link-template_8php.html#a80007310997738f7b518f6bedb6e59a5">get_home_url</a></div><div class="ttdeci">get_home_url($blog_id=null, $path= '', $scheme=null)</div><div class="ttdoc">Retrieve the home url for a given site. </div><div class="ttdef"><b>Definition:</b> <a href="link-template_8php_source.html#l02963">link-template.php:2963</a></div></div>
<div class="ttc" id="namespacestrong_html"><div class="ttname"><a href="namespacestrong.html">strong</a></div></div>
<div class="ttc" id="namespacep_html"><div class="ttname"><a href="namespacep.html">p</a></div></div>
<div class="ttc" id="noop_8php_html_a16e782f4694432817e6f06d12b269704"><div class="ttname"><a href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a></div><div class="ttdeci">add_action()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00041">noop.php:41</a></div></div>
<div class="ttc" id="ms-functions_8php_html_aa184013afd8f8d1658d523292e28c25d"><div class="ttname"><a href="ms-functions_8php.html#aa184013afd8f8d1658d523292e28c25d">wpmu_signup_blog</a></div><div class="ttdeci">wpmu_signup_blog($domain, $path, $title, $user, $user_email, $meta=array())</div><div class="ttdoc">Record site signup information for future activation. </div><div class="ttdef"><b>Definition:</b> <a href="ms-functions_8php_source.html#l00666">ms-functions.php:666</a></div></div>
<div class="ttc" id="noop_8php_html_a54639394aa645a2277ea41f3cbd23247"><div class="ttname"><a href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a></div><div class="ttdeci">apply_filters()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00026">noop.php:26</a></div></div>
<div class="ttc" id="option_8php_html_aadb234e9fde76b878f50351325bab9fb"><div class="ttname"><a href="option_8php.html#aadb234e9fde76b878f50351325bab9fb">get_site_option</a></div><div class="ttdeci">get_site_option($option, $default=false, $deprecated=true)</div><div class="ttdoc">Retrieve an option value for the current network based on name of option. </div><div class="ttdef"><b>Definition:</b> <a href="option_8php_source.html#l01008">option.php:1008</a></div></div>
<div class="ttc" id="ms-load_8php_html_a34f9732e2013b8bce02c952e9b4e0d29"><div class="ttname"><a href="ms-load_8php.html#a34f9732e2013b8bce02c952e9b4e0d29">is_subdomain_install</a></div><div class="ttdeci">is_subdomain_install()</div><div class="ttdoc">Whether a subdomain configuration is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="ms-load_8php_source.html#l00018">ms-load.php:18</a></div></div>
<div class="ttc" id="wp-load_8php_html_a0a4baf0b22973c07685c3981f0d17fc4"><div class="ttname"><a href="wp-load_8php.html#a0a4baf0b22973c07685c3981f0d17fc4">$path</a></div><div class="ttdeci">$path</div><div class="ttdef"><b>Definition:</b> <a href="wp-load_8php_source.html#l00056">wp-load.php:56</a></div></div>
<div class="ttc" id="address_8php_html_abf1587eec3e668593f0b811050a678e3"><div class="ttname"><a href="address_8php.html#abf1587eec3e668593f0b811050a678e3">else</a></div><div class="ttdeci">if(floor($field_id)===floatval($field_id)) else</div><div class="ttdef"><b>Definition:</b> <a href="address_8php_source.html#l00035">address.php:35</a></div></div>
<div class="ttc" id="class-wp-error_8php_html_a741b5ec807dbba8d2a0851e32e7d926c"><div class="ttname"><a href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a></div><div class="ttdeci">is_wp_error($thing)</div><div class="ttdoc">Check whether variable is a WordPress Error. </div><div class="ttdef"><b>Definition:</b> <a href="class-wp-error_8php_source.html#l00216">class-wp-error.php:216</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_af06cd3b218b548cf6b733df97c80c8a3"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#af06cd3b218b548cf6b733df97c80c8a3">li</a></div><div class="ttdeci">ul li</div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l02622">wordpress/wp-includes/functions.php:2622</a></div></div>
<div class="ttc" id="namespacenew_html"><div class="ttname"><a href="namespacenew.html">new</a></div></div>
<div class="ttc" id="form__list_8php_html_a37ec3c0e38c16262d3ff05971a91c276"><div class="ttname"><a href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a></div><div class="ttdeci">gf_new_form_modal_container setting row input</div><div class="ttdef"><b>Definition:</b> <a href="form__list_8php_source.html#l00157">form_list.php:157</a></div></div>
<div class="ttc" id="site-new_8php_html_a7714b111b644017933931ec69a154102"><div class="ttname"><a href="site-new_8php.html#a7714b111b644017933931ec69a154102">$lang</a></div><div class="ttdeci">$lang</div><div class="ttdef"><b>Definition:</b> <a href="site-new_8php_source.html#l00205">site-new.php:205</a></div></div>
<div class="ttc" id="formatting_8php_html_a7220e1930f7f74f3fafb67ea1d7234f1"><div class="ttname"><a href="formatting_8php.html#a7220e1930f7f74f3fafb67ea1d7234f1">sanitize_text_field</a></div><div class="ttdeci">sanitize_text_field($str)</div><div class="ttdoc">Sanitize a string from user input or from the db. </div><div class="ttdef"><b>Definition:</b> <a href="formatting_8php_source.html#l04257">formatting.php:4257</a></div></div>
<div class="ttc" id="wordpress_2wp-admin_2network_2settings_8php_html_af850206ec47fb9a5348fb5b666662c18"><div class="ttname"><a href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a></div><div class="ttdeci">_e( 'Network Title')?&gt;&lt;/label &gt;&lt;/th &gt;&lt; td &gt;&lt; input name</div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-admin_2network_2settings_8php_source.html#l00107">wordpress/wp-admin/network/settings.php:107</a></div></div>
<div class="ttc" id="namespacein_html"><div class="ttname"><a href="namespacein.html">in</a></div></div>
<div class="ttc" id="general-template_8php_html_ac3a568d96fe29ca2a8aefd1d016abd0b"><div class="ttname"><a href="general-template_8php.html#ac3a568d96fe29ca2a8aefd1d016abd0b">wp_login_url</a></div><div class="ttdeci">wp_login_url($redirect= '', $force_reauth=false)</div><div class="ttdoc">Returns the URL that allows the user to log in to the site. </div><div class="ttdef"><b>Definition:</b> <a href="general-template_8php_source.html#l00334">general-template.php:334</a></div></div>
<div class="ttc" id="namespacethis_html"><div class="ttname"><a href="namespacethis.html">this</a></div></div>
<div class="ttc" id="general-template_8php_html_a19bb641c2a25108066ef03ea311e112a"><div class="ttname"><a href="general-template_8php.html#a19bb641c2a25108066ef03ea311e112a">get_footer</a></div><div class="ttdeci">get_footer($name=null)</div><div class="ttdoc">Load footer template. </div><div class="ttdef"><b>Definition:</b> <a href="general-template_8php_source.html#l00062">general-template.php:62</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a1d3eb00c9fe92a90149ac06ca6c28132"><div class="ttname"><a href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv'foreach(get_object_taxonomies($post) as $tax_name) if($thumbnail_support &amp;&amp;current_user_can( 'upload_files')) add_meta_box('postimagediv' esc_html($post_type_object-&gt;labels-&gt;featured_image)</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00266">edit-form-advanced.php:266</a></div></div>
<div class="ttc" id="wp-admin_2install_8php_html_a2ba769a382a3db95c4fc25db4b242429"><div class="ttname"><a href="wp-admin_2install_8php.html#a2ba769a382a3db95c4fc25db4b242429">$language</a></div><div class="ttdeci">if(!$mysql_compat||!$php_compat) if(!is_string($wpdb-&gt;base_prefix)|| ''===$wpdb-&gt;base_prefix) if(defined( 'DO_NOT_UPGRADE_GLOBAL_TABLES')) $language</div><div class="ttdoc">string $wp_local_package  WP_Locale $wp_locale </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2install_8php_source.html#l00257">wp-admin/install.php:257</a></div></div>
<div class="ttc" id="ms-blogs_8php_html_aa6ec3a2b8c0ff571962ccc9bcdb82ced"><div class="ttname"><a href="ms-blogs_8php.html#aa6ec3a2b8c0ff571962ccc9bcdb82ced">restore_current_blog</a></div><div class="ttdeci">restore_current_blog()</div><div class="ttdoc">Restore the current blog, after calling switch_to_blog() </div><div class="ttdef"><b>Definition:</b> <a href="ms-blogs_8php_source.html#l00692">ms-blogs.php:692</a></div></div>
<div class="ttc" id="general-template_8php_html_ac5a8cddc08f21085ba0939cda4f64766"><div class="ttname"><a href="general-template_8php.html#ac5a8cddc08f21085ba0939cda4f64766">checked</a></div><div class="ttdeci">checked($checked, $current=true, $echo=true)</div><div class="ttdoc">Outputs the html checked attribute. </div><div class="ttdef"><b>Definition:</b> <a href="general-template_8php_source.html#l03396">general-template.php:3396</a></div></div>
<div class="ttc" id="my-sites_8php_html_a9cebca68f8380dcdc115add3eeb90f54"><div class="ttname"><a href="my-sites_8php.html#a9cebca68f8380dcdc115add3eeb90f54">$blogs</a></div><div class="ttdeci">$blogs</div><div class="ttdef"><b>Definition:</b> <a href="my-sites_8php_source.html#l00020">my-sites.php:20</a></div></div>
<div class="ttc" id="link-template_8php_html_a3f2ddf18359777959ef1230ebdd5132c"><div class="ttname"><a href="link-template_8php.html#a3f2ddf18359777959ef1230ebdd5132c">network_home_url</a></div><div class="ttdeci">network_home_url($path= '', $scheme=null)</div><div class="ttdoc">Retrieves the home url for the current network. </div><div class="ttdef"><b>Definition:</b> <a href="link-template_8php_source.html#l03265">link-template.php:3265</a></div></div>
<div class="ttc" id="ms-delete-site_8php_html_a598ca4e71b15a1313ec95f0df1027ca5"><div class="ttname"><a href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a></div><div class="ttdeci">$user</div><div class="ttdef"><b>Definition:</b> <a href="ms-delete-site_8php_source.html#l00028">ms-delete-site.php:28</a></div></div>
<div class="ttc" id="ms-functions_8php_html_a7a458e0f14af3efce48fb42d7ff4d6d9"><div class="ttname"><a href="ms-functions_8php.html#a7a458e0f14af3efce48fb42d7ff4d6d9">get_current_site</a></div><div class="ttdeci">get_current_site()</div><div class="ttdoc">Get the current network. </div><div class="ttdef"><b>Definition:</b> <a href="ms-functions_8php_source.html#l01597">ms-functions.php:1597</a></div></div>
<div class="ttc" id="api-core_2wp-includes_2compat_8php_html_a69ce1131cd2c65fd147aa7b1de9ed7ee"><div class="ttname"><a href="api-core_2wp-includes_2compat_8php.html#a69ce1131cd2c65fd147aa7b1de9ed7ee">endif</a></div><div class="ttdeci">if(!function_exists( 'json_last_error_msg'))() endif</div><div class="ttdef"><b>Definition:</b> <a href="api-core_2wp-includes_2compat_8php_source.html#l00011">api-core/wp-includes/compat.php:11</a></div></div>
<div class="ttc" id="select__columns_8php_html_ae20d3ca2acbfbfe24798ca800435f9f1"><div class="ttname"><a href="select__columns_8php.html#ae20d3ca2acbfbfe24798ca800435f9f1">size</a></div><div class="ttdeci">font size</div><div class="ttdef"><b>Definition:</b> <a href="select__columns_8php_source.html#l00100">select_columns.php:100</a></div></div>
<div class="ttc" id="l10n_8php_html_aab010f47fc7012c35f69d3599967142f"><div class="ttname"><a href="l10n_8php.html#aab010f47fc7012c35f69d3599967142f">wp_dropdown_languages</a></div><div class="ttdeci">wp_dropdown_languages($args=array())</div><div class="ttdoc">Language selector. </div><div class="ttdef"><b>Definition:</b> <a href="l10n_8php_source.html#l00965">l10n.php:965</a></div></div>
<div class="ttc" id="ms-blogs_8php_html_ab1bd133df4842ce70f9c9d74e8b60d89"><div class="ttname"><a href="ms-blogs_8php.html#ab1bd133df4842ce70f9c9d74e8b60d89">get_blogaddress_by_name</a></div><div class="ttdeci">get_blogaddress_by_name($blogname)</div><div class="ttdoc">Get a full blog URL, given a blog name. </div><div class="ttdef"><b>Definition:</b> <a href="ms-blogs_8php_source.html#l00061">ms-blogs.php:61</a></div></div>
<div class="ttc" id="edit-comments_8php_html_a01a5ac2afed3a262528186f4ba5f9693"><div class="ttname"><a href="edit-comments_8php.html#a01a5ac2afed3a262528186f4ba5f9693">name</a></div><div class="ttdeci">s name</div><div class="ttdef"><b>Definition:</b> <a href="edit-comments_8php_source.html#l00156">edit-comments.php:156</a></div></div>
<div class="ttc" id="wp-signup_8php_html_ad121040fe429c5f377bf5d26139c032b"><div class="ttname"><a href="wp-signup_8php.html#ad121040fe429c5f377bf5d26139c032b">do_signup_header</a></div><div class="ttdeci">if(is_array(get_site_option( 'illegal_names'))&amp;&amp;isset($_GET[ 'new'])&amp;&amp;in_array($_GET[ 'new'], get_site_option( 'illegal_names'))) do_signup_header()</div><div class="ttdoc">Prints signup_header via wp_head. </div><div class="ttdef"><b>Definition:</b> <a href="wp-signup_8php_source.html#l00020">wp-signup.php:20</a></div></div>
<div class="ttc" id="namespaceare_html"><div class="ttname"><a href="namespaceare.html">are</a></div></div>
<div class="ttc" id="class_w_p___error_html"><div class="ttname"><a href="class_w_p___error.html">WP_Error</a></div><div class="ttdef"><b>Definition:</b> <a href="class-wp-error_8php_source.html#l00021">class-wp-error.php:21</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_af56ce4c5410aedf5dda37e798124b74a"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#af56ce4c5410aedf5dda37e798124b74a">is_main_site</a></div><div class="ttdeci">is_main_site($site_id=null)</div><div class="ttdoc">Determine whether a site is the main site of the current network. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l04086">wordpress/wp-includes/functions.php:4086</a></div></div>
<div class="ttc" id="wordpress_2wp-content_2themes_2twentyeleven_2functions_8php_html_aee0174667653000761904b9bea00878d"><div class="ttname"><a href="wordpress_2wp-content_2themes_2twentyeleven_2functions_8php.html#aee0174667653000761904b9bea00878d">color</a></div><div class="ttdeci">if(!function_exists( 'twentyeleven_header_style'))() color</div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-content_2themes_2twentyeleven_2functions_8php_source.html#l00232">wordpress/wp-content/themes/twentyeleven/functions.php:232</a></div></div>
<div class="ttc" id="load_8php_html_a72e5386fcd7a5ce7526d208d0b03a0af"><div class="ttname"><a href="load_8php.html#a72e5386fcd7a5ce7526d208d0b03a0af">is_multisite</a></div><div class="ttdeci">is_multisite()</div><div class="ttdoc">If Multisite is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="load_8php_source.html#l00753">load.php:753</a></div></div>
<div class="ttc" id="namespacetop_html"><div class="ttname"><a href="namespacetop.html">top</a></div></div>
<div class="ttc" id="plugins_8php_html_a949e330838a018cd41df6664c0a03191"><div class="ttname"><a href="plugins_8php.html#a949e330838a018cd41df6664c0a03191">$errmsg</a></div><div class="ttdeci">else $errmsg</div><div class="ttdef"><b>Definition:</b> <a href="plugins_8php_source.html#l00432">plugins.php:432</a></div></div>
<div class="ttc" id="twentyfifteen_2content-link_8php_html_a4a6fb8865e1ae52faa29662b4087e629"><div class="ttname"><a href="twentyfifteen_2content-link_8php.html#a4a6fb8865e1ae52faa29662b4087e629">esc_url</a></div><div class="ttdeci">else esc_url(twentyfifteen_get_link_url()))</div><div class="ttdef"><b>Definition:</b> <a href="twentyfifteen_2content-link_8php_source.html#l00021">twentyfifteen/content-link.php:21</a></div></div>
<div class="ttc" id="namespaceat_html"><div class="ttname"><a href="namespaceat.html">at</a></div></div>
<div class="ttc" id="formatting_8php_html_a6dba609f82ebf662ef06615fac81a032"><div class="ttname"><a href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a></div><div class="ttdeci">wp_unslash($value)</div><div class="ttdoc">Remove slashes from a string or array of strings. </div><div class="ttdef"><b>Definition:</b> <a href="formatting_8php_source.html#l04420">formatting.php:4420</a></div></div>
<div class="ttc" id="form__list_8php_html_a75c7d6fef8f2fc1b14944df043dd5690"><div class="ttname"><a href="form__list_8php.html#a75c7d6fef8f2fc1b14944df043dd5690">label</a></div><div class="ttdeci">gf_new_form_modal_container setting row label</div><div class="ttdef"><b>Definition:</b> <a href="form__list_8php_source.html#l00153">form_list.php:153</a></div></div>
<div class="ttc" id="namespacenot_html"><div class="ttname"><a href="namespacenot.html">not</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a46b3622ccc6d393dfd97e355b7bd0bd6"><div class="ttname"><a href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv' null</div><div class="ttdoc">When displaying the single entry we should always know to which View it belongs (the context is every...</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00244">edit-form-advanced.php:244</a></div></div>
<div class="ttc" id="ms-delete-site_8php_html_af0758b84c94743c711c2b1fce220a626"><div class="ttname"><a href="ms-delete-site_8php.html#af0758b84c94743c711c2b1fce220a626">$blog</a></div><div class="ttdeci">if(isset($_GET['h'])&amp;&amp;$_GET['h']!= ''&amp;&amp;get_option( 'delete_blog_hash')!=false) $blog</div><div class="ttdef"><b>Definition:</b> <a href="ms-delete-site_8php_source.html#l00027">ms-delete-site.php:27</a></div></div>
<div class="ttc" id="general-template_8php_html_aabf74018b68d8745de5df44dee7dc537"><div class="ttname"><a href="general-template_8php.html#aabf74018b68d8745de5df44dee7dc537">get_header</a></div><div class="ttdeci">get_header($name=null)</div><div class="ttdoc">Load header template. </div><div class="ttdef"><b>Definition:</b> <a href="general-template_8php_source.html#l00022">general-template.php:22</a></div></div>
<div class="ttc" id="noop_8php_html_a0cf0f358a47f49ebdba78be2ed10a41c"><div class="ttname"><a href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a></div><div class="ttdeci">esc_attr()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00021">noop.php:21</a></div></div>
<div class="ttc" id="tmp_2wordpress-tests-lib_2includes_2bootstrap_8php_html_a17e7de3a4115b66c4e07cd6eac8046c2"><div class="ttname"><a href="tmp_2wordpress-tests-lib_2includes_2bootstrap_8php.html#a17e7de3a4115b66c4e07cd6eac8046c2">$current_site</a></div><div class="ttdeci">global $current_site</div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress-tests-lib_2includes_2bootstrap_8php_source.html#l00019">tmp/wordpress-tests-lib/includes/bootstrap.php:19</a></div></div>
<div class="ttc" id="namespacephp_html"><div class="ttname"><a href="namespacephp.html">php</a></div></div>
<div class="ttc" id="l10n_8php_html_a3b3d1cf3cd27c9b5225753297028b332"><div class="ttname"><a href="l10n_8php.html#a3b3d1cf3cd27c9b5225753297028b332">get_available_languages</a></div><div class="ttdeci">get_available_languages($dir=null)</div><div class="ttdoc">Get all available languages based on the presence of *.mo files in a given directory. </div><div class="ttdef"><b>Definition:</b> <a href="l10n_8php_source.html#l00849">l10n.php:849</a></div></div>
<div class="ttc" id="ms-functions_8php_html_a82e4acb951d2eedb80de073eb78398ed"><div class="ttname"><a href="ms-functions_8php.html#a82e4acb951d2eedb80de073eb78398ed">wpmu_signup_user</a></div><div class="ttdeci">wpmu_signup_user($user, $user_email, $meta=array())</div><div class="ttdoc">Record user signup information for future activation. </div><div class="ttdef"><b>Definition:</b> <a href="ms-functions_8php_source.html#l00713">ms-functions.php:713</a></div></div>
<div class="ttc" id="wp-admin_2widgets_8php_html_ab24faf4aa647cdcee494fc48524ad4ff"><div class="ttname"><a href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a></div><div class="ttdeci">$errors</div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2widgets_8php_source.html#l00339">wp-admin/widgets.php:339</a></div></div>
<div class="ttc" id="namespace_____html"><div class="ttname"><a href="namespace____.html">__</a></div></div>
<div class="ttc" id="schema_8php_html_aaac3ddf81d405fac59e1dceeca05b0a7"><div class="ttname"><a href="schema_8php.html#aaac3ddf81d405fac59e1dceeca05b0a7">$wpdb</a></div><div class="ttdeci">global $wpdb</div><div class="ttdoc">Declare these as global in case schema.php is included from a function. </div><div class="ttdef"><b>Definition:</b> <a href="schema_8php_source.html#l00018">schema.php:18</a></div></div>
<div class="ttc" id="ms-functions_8php_html_ab0e3f1a4ed2340e305a26b271effcd67"><div class="ttname"><a href="ms-functions_8php.html#ab0e3f1a4ed2340e305a26b271effcd67">wpmu_validate_blog_signup</a></div><div class="ttdeci">wpmu_validate_blog_signup($blogname, $blog_title, $user= '')</div><div class="ttdoc">Processes new site registrations. </div><div class="ttdef"><b>Definition:</b> <a href="ms-functions_8php_source.html#l00543">ms-functions.php:543</a></div></div>
<div class="ttc" id="link-template_8php_html_a4a32808e319cd6ec587320eaa73b2a96"><div class="ttname"><a href="link-template_8php.html#a4a32808e319cd6ec587320eaa73b2a96">network_admin_url</a></div><div class="ttdeci">network_admin_url($path= '', $scheme= 'admin')</div><div class="ttdoc">Retrieve the url to the admin area for the network. </div><div class="ttdef"><b>Definition:</b> <a href="link-template_8php_source.html#l03306">link-template.php:3306</a></div></div>
<div class="ttc" id="namespace_you_html"><div class="ttname"><a href="namespace_you.html">You</a></div></div>
<div class="ttc" id="namespacetype_html"><div class="ttname"><a href="namespacetype.html">type</a></div></div>
<div class="ttc" id="ms-functions_8php_html_a94df666e8946aa4e4ed6a1e9bde7d7c0"><div class="ttname"><a href="ms-functions_8php.html#a94df666e8946aa4e4ed6a1e9bde7d7c0">wpmu_create_blog</a></div><div class="ttdeci">wpmu_create_blog($domain, $path, $title, $user_id, $meta=array(), $site_id=1)</div><div class="ttdoc">Create a site. </div><div class="ttdef"><b>Definition:</b> <a href="ms-functions_8php_source.html#l01091">ms-functions.php:1091</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a866e7f0f003101850a78f372dd07bd2a"><div class="ttname"><a href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv'foreach(get_object_taxonomies($post) as $tax_name) if($thumbnail_support &amp;&amp;current_user_can( 'upload_files')) add_meta_box('postimagediv'if(post_type_supports($post_type, 'excerpt')) add_meta_box('postexcerpt' __('Excerpt')</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00269">edit-form-advanced.php:269</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/>
<script type="text/javascript">
    jQuery( document ).ready( function( $ ) {
        $( 'a.anchor[id^=_filters],a.anchor[id^=_actions]' ).each( function() {
            $( this )
                .text('#')
                .attr( 'href', function() {
                    return '#' + $( this ).attr( 'id' );
                }).prependTo( $( this ).parent('dt' ).next('dd') );
        });
    });
</script>
</body>
</html>
