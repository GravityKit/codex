<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>GravityView: ajax-actions.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom-doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GravityView
   &#160;<span id="projectnumber">1.16.1</span>
   </div>
   <div id="projectbrief">Beautifully display your Gravity Forms data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_f202f45fd139109afdc6cee542e9540d.html">tmp</a></li><li class="navelem"><a class="el" href="dir_bab4839c1ebfd97cab4362c92e1efb01.html">wordpress</a></li><li class="navelem"><a class="el" href="dir_6befe1ce5953e76db4cf235d50144e4d.html">wp-admin</a></li><li class="navelem"><a class="el" href="dir_5f7e0c6af6da142503046b2ffe3240cd.html">includes</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ajax-actions.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ajax-actions_8php.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a><span class="comment"></span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Administration API: Core Ajax handlers</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * @package WordPress</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * @subpackage Administration</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * @since 2.1.0</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// No-privilege Ajax handlers.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * Ajax handler for the Heartbeat API in</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * the no-privilege context.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * Runs when the user is not logged in.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * @since 3.6.0</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#ab1d93e99f97bdd2456e922a5c3011661">   22</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#ab1d93e99f97bdd2456e922a5c3011661">wp_ajax_nopriv_heartbeat</a>() {</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    $response = array();</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="comment">// screen_id is the same as $current_screen-&gt;id and the JS global &#39;pagenow&#39;.</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <span class="keywordflow">if</span> ( ! empty($_POST[<span class="stringliteral">&#39;screen_id&#39;</span>]) )</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        $screen_id = <a class="code" href="formatting_8php.html#a0ebdd3bb5f66266f5302c24c3537fb50">sanitize_key</a>($_POST[<span class="stringliteral">&#39;screen_id&#39;</span>]);</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        $screen_id = <span class="stringliteral">&#39;front&#39;</span>;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keywordflow">if</span> ( ! empty($_POST[<span class="stringliteral">&#39;data&#39;</span>]) ) {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        $data = <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( (array) $_POST[<span class="stringliteral">&#39;data&#39;</span>] );</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">        /**</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">         * Filter Heartbeat AJAX response in no-privilege environments.</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">         * @since 3.6.0</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">         * @param array|object $response  The no-priv Heartbeat response object or array.</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">         * @param array        $data      An array of data passed via $_POST.</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">         * @param string       $screen_id The screen id.</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        $response = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;heartbeat_nopriv_received&#39;</span>, $response, $data, $screen_id );</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    }</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">     * Filter Heartbeat AJAX response when no data is passed.</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">     * @since 3.6.0</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">     * @param array|object $response  The Heartbeat response object or array.</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">     * @param string       $screen_id The screen id.</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    $response = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;heartbeat_nopriv_send&#39;</span>, $response, $screen_id );</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">     * Fires when Heartbeat ticks in no-privilege environments.</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">     * Allows the transport to be easily replaced with long-polling.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">     * @since 3.6.0</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">     * @param array|object $response  The no-priv Heartbeat response.</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">     * @param string       $screen_id The screen id.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;heartbeat_nopriv_tick&#39;</span>, $response, $screen_id );</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">// Send the current time according to the server.</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    $response[<span class="stringliteral">&#39;server_time&#39;</span>] = time();</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a2331e879806fb799da8cb7e20efc2111">wp_send_json</a>($response);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">// GET-based Ajax handlers.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"> * Ajax handler for fetching a list table.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"> * @global WP_List_Table $wp_list_table</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a82898c4034aa5ec0e1c34590c72e0015">   85</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a82898c4034aa5ec0e1c34590c72e0015">wp_ajax_fetch_list</a>() {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    global <a class="code" href="edit-comments_8php.html#a0abf38733b389a685a48be096cd47fbc">$wp_list_table</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    $list_class = $_GET[<span class="stringliteral">&#39;list_args&#39;</span>][<span class="stringliteral">&#39;class&#39;</span>];</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    check_ajax_referer( <span class="stringliteral">&quot;fetch-list-$list_class&quot;</span>, <span class="stringliteral">&#39;_ajax_fetch_list_nonce&#39;</span> );</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    $wp_list_table = <a class="code" href="list-table_8php.html#a9623ca4c4d39a43ceb4b356dfde7a195">_get_list_table</a>( $list_class, array( <span class="stringliteral">&#39;screen&#39;</span> =&gt; $_GET[<span class="stringliteral">&#39;list_args&#39;</span>][<span class="stringliteral">&#39;screen&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>] ) );</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">if</span> ( ! $wp_list_table )</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">if</span> ( ! $wp_list_table-&gt;ajax_user_can() )</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    $wp_list_table-&gt;ajax_response();</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"> * Ajax handler for tag search.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a5dbc2fb460cf9fee69e473eb8f8a794c">  108</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a5dbc2fb460cf9fee69e473eb8f8a794c">wp_ajax_ajax_tag_search</a>() {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span> ( ! isset( $_GET[<span class="stringliteral">&#39;tax&#39;</span>] ) ) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    $taxonomy = <a class="code" href="formatting_8php.html#a0ebdd3bb5f66266f5302c24c3537fb50">sanitize_key</a>( $_GET[<span class="stringliteral">&#39;tax&#39;</span>] );</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="edit-tags_8php.html#a889a2afc68d4bc472eeed20fd267a583">$tax</a> = <a class="code" href="wp-includes_2taxonomy_8php.html#aa73d2fdc1c00f823e31ca7e90f904a5e">get_taxonomy</a>( $taxonomy );</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="edit-tags_8php.html#a889a2afc68d4bc472eeed20fd267a583">$tax</a> ) {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <a class="code" href="edit-tags_8php.html#a889a2afc68d4bc472eeed20fd267a583">$tax</a>-&gt;cap-&gt;assign_terms ) ) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a> = <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( $_GET[<span class="charliteral">&#39;q&#39;</span>] );</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    $comma = <a class="code" href="edit-form-advanced_8php.html#ada8efad85a9cd028503cbe55c37c890a">_x</a>( <span class="charliteral">&#39;,&#39;</span>, <span class="stringliteral">&#39;tag delimiter&#39;</span> );</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">if</span> ( <span class="charliteral">&#39;,&#39;</span> !== $comma )</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( $comma, <span class="charliteral">&#39;,&#39;</span>, <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a> );</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">if</span> ( <span class="keyword">false</span> !== strpos( <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a>, <span class="charliteral">&#39;,&#39;</span> ) ) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a> = explode( <span class="charliteral">&#39;,&#39;</span>, <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a> );</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a> = <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a>[count( <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a> ) - 1];</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a> = trim( <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a> );</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">     * Filter the minimum number of characters required to fire a tag search via AJAX.</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">     * @since 4.0.0</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">     * @param int    $characters The minimum number of characters required. Default 2.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">     * @param object $tax        The taxonomy object.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">     * @param string $s          The search term.</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    $term_search_min_chars = (int) <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;term_search_min_chars&#39;</span>, 2, <a class="code" href="edit-tags_8php.html#a889a2afc68d4bc472eeed20fd267a583">$tax</a>, <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a> );</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">     * Require $term_search_min_chars chars for matching (default: 2)</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">     * ensure it&#39;s a non-negative, non-zero integer.</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> ( ( $term_search_min_chars == 0 ) || ( strlen( <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a> ) &lt; $term_search_min_chars ) ){</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    $results = <a class="code" href="wp-includes_2taxonomy_8php.html#aa491ab8e62a9a11b6a3aa62e015f75dd">get_terms</a>( $taxonomy, array( <span class="stringliteral">&#39;name__like&#39;</span> =&gt; <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a>, <span class="stringliteral">&#39;fields&#39;</span> =&gt; <span class="stringliteral">&#39;names&#39;</span>, <span class="stringliteral">&#39;hide_empty&#39;</span> =&gt; <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    echo join( $results, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;}</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment"> * Ajax handler for compression testing.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#aa4a7f5a3dbca296bf34976077b16d220">  164</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#aa4a7f5a3dbca296bf34976077b16d220">wp_ajax_wp_compression_test</a>() {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;manage_options&#39;</span> ) )</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span> ( ini_get(<span class="stringliteral">&#39;zlib.output_compression&#39;</span>) || <span class="stringliteral">&#39;ob_gzhandler&#39;</span> == ini_get(<span class="stringliteral">&#39;output_handler&#39;</span>) ) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <a class="code" href="option_8php.html#a7ffd65e258601322158dc39ee84b3121">update_site_option</a>(<span class="stringliteral">&#39;can_compress_scripts&#39;</span>, 0);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">if</span> ( isset($_GET[<span class="stringliteral">&#39;test&#39;</span>]) ) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        header( <span class="stringliteral">&#39;Expires: Wed, 11 Jan 1984 05:00:00 GMT&#39;</span> );</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        header( <span class="stringliteral">&#39;Last-Modified: &#39;</span> . gmdate( <span class="stringliteral">&#39;D, d M Y H:i:s&#39;</span> ) . <span class="stringliteral">&#39; GMT&#39;</span> );</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        header( <span class="stringliteral">&#39;Cache-Control: no-cache, must-revalidate, max-age=0&#39;</span> );</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        header( <span class="stringliteral">&#39;Pragma: no-cache&#39;</span> );</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        header(<span class="stringliteral">&#39;Content-Type: application/javascript; charset=UTF-8&#39;</span>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <a class="code" href="load-scripts_8php.html#a0962d0e9eb6aa0b2309589ab476e1f15">$force_gzip</a> = ( defined(<span class="stringliteral">&#39;ENFORCE_GZIP&#39;</span>) &amp;&amp; ENFORCE_GZIP );</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        $test_str = <span class="stringliteral">&#39;&quot;wpCompressionTest Lorem ipsum dolor sit amet consectetuer mollis sapien urna ut a. Eu nonummy condimentum fringilla tempor pretium platea vel nibh netus Maecenas. Hac molestie amet justo quis pellentesque est ultrices interdum nibh Morbi. Cras mattis pretium Phasellus ante ipsum ipsum ut sociis Suspendisse Lorem. Ante et non molestie. Porta urna Vestibulum egestas id congue nibh eu risus gravida sit. Ac augue auctor Ut et non a elit massa id sodales. Elit eu Nulla at nibh adipiscing mattis lacus mauris at tempus. Netus nibh quis suscipit nec feugiat eget sed lorem et urna. Pellentesque lacus at ut massa consectetuer ligula ut auctor semper Pellentesque. Ut metus massa nibh quam Curabitur molestie nec mauris congue. Volutpat molestie elit justo facilisis neque ac risus Ut nascetur tristique. Vitae sit lorem tellus et quis Phasellus lacus tincidunt nunc Fusce. Pharetra wisi Suspendisse mus sagittis libero lacinia Integer consequat ac Phasellus. Et urna ac cursus tortor aliquam Aliquam amet tellus volutpat Vestibulum. Justo interdum condimentum In augue congue tellus sollicitudin Quisque quis nibh.&quot;&#39;</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;         <span class="keywordflow">if</span> ( 1 == $_GET[<span class="stringliteral">&#39;test&#39;</span>] ) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            echo $test_str;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;         } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( 2 == $_GET[<span class="stringliteral">&#39;test&#39;</span>] ) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <span class="keywordflow">if</span> ( !isset(<a class="code" href="edit-tags_8php.html#aed6d7b9acff0b9518917d3b0573bc636">$_SERVER</a>[<span class="stringliteral">&#39;HTTP_ACCEPT_ENCODING&#39;</span>]) )</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="keywordflow">if</span> ( <span class="keyword">false</span> !== stripos( <a class="code" href="edit-tags_8php.html#aed6d7b9acff0b9518917d3b0573bc636">$_SERVER</a>[<span class="stringliteral">&#39;HTTP_ACCEPT_ENCODING&#39;</span>], <span class="stringliteral">&#39;deflate&#39;</span>) &amp;&amp; function_exists(<span class="stringliteral">&#39;gzdeflate&#39;</span>) &amp;&amp; ! <a class="code" href="load-scripts_8php.html#a0962d0e9eb6aa0b2309589ab476e1f15">$force_gzip</a> ) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                header(<span class="stringliteral">&#39;Content-Encoding: deflate&#39;</span>);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                <a class="code" href="load-scripts_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a> = gzdeflate( $test_str, 1 );</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( <span class="keyword">false</span> !== stripos( <a class="code" href="edit-tags_8php.html#aed6d7b9acff0b9518917d3b0573bc636">$_SERVER</a>[<span class="stringliteral">&#39;HTTP_ACCEPT_ENCODING&#39;</span>], <span class="stringliteral">&#39;gzip&#39;</span>) &amp;&amp; function_exists(<span class="stringliteral">&#39;gzencode&#39;</span>) ) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                header(<span class="stringliteral">&#39;Content-Encoding: gzip&#39;</span>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                <a class="code" href="load-scripts_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a> = gzencode( $test_str, 1 );</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            echo <a class="code" href="load-scripts_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( <span class="stringliteral">&#39;no&#39;</span> == $_GET[<span class="stringliteral">&#39;test&#39;</span>] ) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <a class="code" href="option_8php.html#a7ffd65e258601322158dc39ee84b3121">update_site_option</a>(<span class="stringliteral">&#39;can_compress_scripts&#39;</span>, 0);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( <span class="stringliteral">&#39;yes&#39;</span> == $_GET[<span class="stringliteral">&#39;test&#39;</span>] ) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <a class="code" href="option_8php.html#a7ffd65e258601322158dc39ee84b3121">update_site_option</a>(<span class="stringliteral">&#39;can_compress_scripts&#39;</span>, 1);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment"> * Ajax handler for image editor previews.</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a28a0d3d106627d2eb405de4f4266012f">  214</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a28a0d3d106627d2eb405de4f4266012f">wp_ajax_imgedit_preview</a>() {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> = intval($_GET[<span class="stringliteral">&#39;postid&#39;</span>]);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span> ( empty(<a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a>) || !<a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>(<span class="stringliteral">&#39;edit_post&#39;</span>, <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a>) )</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    check_ajax_referer( <span class="stringliteral">&quot;image_editor-$post_id&quot;</span> );</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    include_once( <a class="code" href="load-scripts_8php.html#a495f94983b95273ad267511b2411351f">ABSPATH</a> . <span class="stringliteral">&#39;wp-admin/includes/image-edit.php&#39;</span> );</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="image-edit_8php.html#a092f70ecf7f6a44955b2aee867851b5f">stream_preview_image</a>(<a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a>) )</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment"> * Ajax handler for oEmbed caching.</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment"> * @global WP_Embed $wp_embed</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#aff52dbe3c6413e76482e7cd539b630bf">  235</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#aff52dbe3c6413e76482e7cd539b630bf">wp_ajax_oembed_cache</a>() {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="class-wp-press-this_8php.html#aacd3725c798ebf18f0c5a0bae7e30a5a">$GLOBALS</a>[<span class="stringliteral">&#39;wp_embed&#39;</span>]-&gt;cache_oembed( $_GET[<span class="stringliteral">&#39;post&#39;</span>] );</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment"> * Ajax handler for user autocomplete.</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment"> * @since 3.4.0</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a65ab2385ec321353131e78099e0503cc">  245</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a65ab2385ec321353131e78099e0503cc">wp_ajax_autocomplete_user</a>() {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="load_8php.html#a72e5386fcd7a5ce7526d208d0b03a0af">is_multisite</a>() || ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;promote_users&#39;</span> ) || <a class="code" href="ms-functions_8php.html#af8744a9eea4abee621215d9ae6348c68">wp_is_large_network</a>( <span class="stringliteral">&#39;users&#39;</span> ) )</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">    /** This filter is documented in wp-admin/user-new.php */</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a99845439f6f1db111622e0b684512ba7">is_super_admin</a>() &amp;&amp; ! <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;autocomplete_users_for_site_admins&#39;</span>, <span class="keyword">false</span> ) )</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    $return = array();</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment">// Check the type of request</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">// Current allowed values are `add` and `search`</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">if</span> ( isset( $_REQUEST[<span class="stringliteral">&#39;autocomplete_type&#39;</span>] ) &amp;&amp; <span class="stringliteral">&#39;search&#39;</span> === $_REQUEST[<span class="stringliteral">&#39;autocomplete_type&#39;</span>] ) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        $type = $_REQUEST[<span class="stringliteral">&#39;autocomplete_type&#39;</span>];</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        $type = <span class="stringliteral">&#39;add&#39;</span>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">// Check the desired field for value</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">// Current allowed values are `user_email` and `user_login`</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> ( isset( $_REQUEST[<span class="stringliteral">&#39;autocomplete_field&#39;</span>] ) &amp;&amp; <span class="stringliteral">&#39;user_email&#39;</span> === $_REQUEST[<span class="stringliteral">&#39;autocomplete_field&#39;</span>] ) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <a class="code" href="gquiz__grade_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a> = $_REQUEST[<span class="stringliteral">&#39;autocomplete_field&#39;</span>];</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <a class="code" href="gquiz__grade_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a> = <span class="stringliteral">&#39;user_login&#39;</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="comment">// Exclude current users of this blog</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">if</span> ( isset( $_REQUEST[<span class="stringliteral">&#39;site_id&#39;</span>] ) ) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $_REQUEST[<span class="stringliteral">&#39;site_id&#39;</span>] );</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> = <a class="code" href="load_8php.html#a49b99067b44a28b2df04dcbd50569624">get_current_blog_id</a>();</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    $include_blog_users = ( $type == <span class="stringliteral">&#39;search&#39;</span> ? <a class="code" href="wp-includes_2user_8php.html#aa414164c348c21e38980eb95ebb0d541">get_users</a>( array( <span class="stringliteral">&#39;blog_id&#39;</span> =&gt; <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, <span class="stringliteral">&#39;fields&#39;</span> =&gt; <span class="stringliteral">&#39;ID&#39;</span> ) ) : array() );</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    $exclude_blog_users = ( $type == <span class="stringliteral">&#39;add&#39;</span> ? <a class="code" href="wp-includes_2user_8php.html#aa414164c348c21e38980eb95ebb0d541">get_users</a>( array( <span class="stringliteral">&#39;blog_id&#39;</span> =&gt; <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, <span class="stringliteral">&#39;fields&#39;</span> =&gt; <span class="stringliteral">&#39;ID&#39;</span> ) ) : array() );</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    $users = <a class="code" href="wp-includes_2user_8php.html#aa414164c348c21e38980eb95ebb0d541">get_users</a>( array(</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="stringliteral">&#39;blog_id&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="stringliteral">&#39;search&#39;</span>  =&gt; <span class="charliteral">&#39;*&#39;</span> . $_REQUEST[<span class="stringliteral">&#39;term&#39;</span>] . <span class="charliteral">&#39;*&#39;</span>,</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="stringliteral">&#39;include&#39;</span> =&gt; $include_blog_users,</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="stringliteral">&#39;exclude&#39;</span> =&gt; $exclude_blog_users,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="stringliteral">&#39;search_columns&#39;</span> =&gt; array( <span class="stringliteral">&#39;user_login&#39;</span>, <span class="stringliteral">&#39;user_nicename&#39;</span>, <span class="stringliteral">&#39;user_email&#39;</span> ),</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    ) );</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">foreach</span> ( $users as <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> ) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        $return[] = array(</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="comment">/* translators: 1: user_login, 2: user_email */</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="stringliteral">&#39;label&#39;</span> =&gt; sprintf( <a class="code" href="edit-form-advanced_8php.html#ada8efad85a9cd028503cbe55c37c890a">_x</a>( <span class="stringliteral">&#39;%1$s (%2$s)&#39;</span>, <span class="stringliteral">&#39;user autocomplete result&#39;</span> ), $user-&gt;user_login, $user-&gt;user_email ),</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <span class="stringliteral">&#39;value&#39;</span> =&gt; $user-&gt;$field,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        );</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="wordpress_2wp-includes_2functions_8php.html#ae7021fd5ae9e6f91ee8a2258d1e30e33">wp_json_encode</a>( $return ) );</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;}</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment"> * Ajax handler for dashboard widgets.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment"> * @since 3.4.0</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a01758e5a91788dbef73bba2fce7e83f0">  305</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a01758e5a91788dbef73bba2fce7e83f0">wp_ajax_dashboard_widgets</a>() {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    require_once <a class="code" href="load-scripts_8php.html#a495f94983b95273ad267511b2411351f">ABSPATH</a> . <span class="stringliteral">&#39;wp-admin/includes/dashboard.php&#39;</span>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <a class="code" href="admin-header_8php.html#a226a8c35ebe8d3d1d1cc57b01677223b">$pagenow</a> = $_GET[<span class="stringliteral">&#39;pagenow&#39;</span>];</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="admin-header_8php.html#a226a8c35ebe8d3d1d1cc57b01677223b">$pagenow</a> === <span class="stringliteral">&#39;dashboard-user&#39;</span> || <a class="code" href="admin-header_8php.html#a226a8c35ebe8d3d1d1cc57b01677223b">$pagenow</a> === <span class="stringliteral">&#39;dashboard-network&#39;</span> || <a class="code" href="admin-header_8php.html#a226a8c35ebe8d3d1d1cc57b01677223b">$pagenow</a> === <span class="stringliteral">&#39;dashboard&#39;</span> ) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <a class="code" href="screen_8php.html#af69de8ef8ce8a4ffad17e9ee2a4fb1d8">set_current_screen</a>( <a class="code" href="admin-header_8php.html#a226a8c35ebe8d3d1d1cc57b01677223b">$pagenow</a> );</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">switch</span> ( $_GET[<span class="stringliteral">&#39;widget&#39;</span>] ) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keywordflow">case</span> <span class="stringliteral">&#39;dashboard_primary&#39;</span> :</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            <a class="code" href="dashboard_8php.html#a4757da1e14317b7db04035d2fcaea1ea">wp_dashboard_primary</a>();</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;}</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment"> * Ajax handler for Customizer preview logged-in status.</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment"> * @since 3.4.0</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#aec4a7b1d2fe28186a7f3010007f96cc3">  326</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#aec4a7b1d2fe28186a7f3010007f96cc3">wp_ajax_logged_in</a>() {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">// Ajax helpers.</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment"> * Sends back current comment total and new page links if they need to be updated.</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment"> * Contrary to normal success AJAX response (&quot;1&quot;), die with time() on success.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment"> * @since 2.7.0</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment"> * @param int $comment_id</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment"> * @param int $delta</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#aa98d72fd07903600ae74d7a78989d943">  344</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#aa98d72fd07903600ae74d7a78989d943">_wp_ajax_delete_comment_response</a>( $comment_id, $delta = -1 ) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    $total    = isset( $_POST[<span class="stringliteral">&#39;_total&#39;</span>] )    ? (int) $_POST[<span class="stringliteral">&#39;_total&#39;</span>]    : 0;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    $per_page = isset( $_POST[<span class="stringliteral">&#39;_per_page&#39;</span>] ) ? (int) $_POST[<span class="stringliteral">&#39;_per_page&#39;</span>] : 0;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <a class="code" href="wp-content_2themes_2twentyeleven_2header_8php.html#a0e2dd2aed1e3361c3aec57e7f7170f73">$page</a>     = isset( $_POST[<span class="stringliteral">&#39;_page&#39;</span>] )     ? (int) $_POST[<span class="stringliteral">&#39;_page&#39;</span>]     : 0;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a>      = isset( $_POST[<span class="stringliteral">&#39;_url&#39;</span>] )      ? <a class="code" href="formatting_8php.html#ad9e809b6901d247527672e11ce5d7368">esc_url_raw</a>( $_POST[<span class="stringliteral">&#39;_url&#39;</span>] ) : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">// JS didn&#39;t send us everything we need to know. Just die with success message</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">if</span> ( ! $total || ! $per_page || ! <a class="code" href="wp-content_2themes_2twentyeleven_2header_8php.html#a0e2dd2aed1e3361c3aec57e7f7170f73">$page</a> || ! <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> ) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        $time = time();</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> = <a class="code" href="wp-includes_2comment_8php.html#a98326ce8f0babf67e0b178d863263f67">get_comment</a>( $comment_id );</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        $counts = <a class="code" href="wp-includes_2comment_8php.html#af157bfcf71c9a2c3829ab7249742de78">wp_count_comments</a>();</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        $x = <span class="keyword">new</span> <a class="code" href="class_w_p___ajax___response.html">WP_Ajax_Response</a>( array(</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="stringliteral">&#39;what&#39;</span> =&gt; <span class="stringliteral">&#39;comment&#39;</span>,</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="comment">// Here for completeness - not used.</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="stringliteral">&#39;id&#39;</span> =&gt; $comment_id,</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="stringliteral">&#39;supplemental&#39;</span> =&gt; array(</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                <span class="stringliteral">&#39;status&#39;</span> =&gt; <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> ? <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a>-&gt;comment_approved : <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                <span class="stringliteral">&#39;postId&#39;</span> =&gt; <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> ? <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a>-&gt;comment_post_ID : <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                <span class="stringliteral">&#39;time&#39;</span> =&gt; $time,</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                <span class="stringliteral">&#39;in_moderation&#39;</span> =&gt; $counts-&gt;moderated,</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                <span class="stringliteral">&#39;i18n_comments_text&#39;</span> =&gt; sprintf(</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                    <a class="code" href="l10n_8php.html#abf087b3109e1ee5f1bbe14b72c3705ae">_n</a>( <span class="stringliteral">&#39;%s Comment&#39;</span>, <span class="stringliteral">&#39;%s Comments&#39;</span>, $counts-&gt;approved ),</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a49014f78a9cbd2165631fee1e722e2ef">number_format_i18n</a>( $counts-&gt;approved )</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                ),</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                <span class="stringliteral">&#39;i18n_moderation_text&#39;</span> =&gt; sprintf(</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                    <a class="code" href="l10n_8php.html#a886a0fa23c3318d0172ef3489f97939b">_nx</a>( <span class="stringliteral">&#39;%s in moderation&#39;</span>, <span class="stringliteral">&#39;%s in moderation&#39;</span>, $counts-&gt;moderated, <span class="stringliteral">&#39;comments&#39;</span> ),</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a49014f78a9cbd2165631fee1e722e2ef">number_format_i18n</a>( $counts-&gt;moderated )</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                )</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            )</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        ) );</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        $x-&gt;send();</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    $total += $delta;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">if</span> ( $total &lt; 0 )</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        $total = 0;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">// Only do the expensive stuff on a page-break, and about 1 other time per page</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">if</span> ( 0 == $total % $per_page || 1 == mt_rand( 1, $per_page ) ) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> = 0;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="comment">// What type of comment count are we looking for?</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        $status = <span class="stringliteral">&#39;all&#39;</span>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        $parsed = parse_url( <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> );</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keywordflow">if</span> ( isset( $parsed[<span class="stringliteral">&#39;query&#39;</span>] ) ) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            parse_str( $parsed[<span class="stringliteral">&#39;query&#39;</span>], $query_vars );</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="keywordflow">if</span> ( !empty( $query_vars[<span class="stringliteral">&#39;comment_status&#39;</span>] ) )</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                $status = $query_vars[<span class="stringliteral">&#39;comment_status&#39;</span>];</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <span class="keywordflow">if</span> ( !empty( $query_vars[<span class="charliteral">&#39;p&#39;</span>] ) )</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> = (int) $query_vars[<span class="charliteral">&#39;p&#39;</span>];</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        $comment_count = <a class="code" href="wp-includes_2comment_8php.html#af157bfcf71c9a2c3829ab7249742de78">wp_count_comments</a>(<a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a>);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="comment">// We&#39;re looking for a known type of comment count.</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">if</span> ( isset( $comment_count-&gt;$status ) )</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            $total = $comment_count-&gt;$status;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <span class="comment">// Else use the decremented value from above.</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">// The time since the last comment count.</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    $time = time();</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> = <a class="code" href="wp-includes_2comment_8php.html#a98326ce8f0babf67e0b178d863263f67">get_comment</a>( $comment_id );</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    $x = <span class="keyword">new</span> <a class="code" href="class_w_p___ajax___response.html">WP_Ajax_Response</a>( array(</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="stringliteral">&#39;what&#39;</span> =&gt; <span class="stringliteral">&#39;comment&#39;</span>,</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="comment">// Here for completeness - not used.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="stringliteral">&#39;id&#39;</span> =&gt; $comment_id,</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="stringliteral">&#39;supplemental&#39;</span> =&gt; array(</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="stringliteral">&#39;status&#39;</span> =&gt; <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> ? <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a>-&gt;comment_approved : <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="stringliteral">&#39;postId&#39;</span> =&gt; <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> ? <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a>-&gt;comment_post_ID : <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            <span class="stringliteral">&#39;total_items_i18n&#39;</span> =&gt; sprintf( <a class="code" href="l10n_8php.html#abf087b3109e1ee5f1bbe14b72c3705ae">_n</a>( <span class="stringliteral">&#39;%s item&#39;</span>, <span class="stringliteral">&#39;%s items&#39;</span>, $total ), <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a49014f78a9cbd2165631fee1e722e2ef">number_format_i18n</a>( $total ) ),</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <span class="stringliteral">&#39;total_pages&#39;</span> =&gt; ceil( $total / $per_page ),</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            <span class="stringliteral">&#39;total_pages_i18n&#39;</span> =&gt; <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a49014f78a9cbd2165631fee1e722e2ef">number_format_i18n</a>( ceil( $total / $per_page ) ),</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            <span class="stringliteral">&#39;total&#39;</span> =&gt; $total,</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            <span class="stringliteral">&#39;time&#39;</span> =&gt; $time</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        )</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    ) );</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    $x-&gt;send();</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;}</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">// POST-based Ajax handlers.</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment"> * Ajax handler for adding a hierarchical term.</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00435"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a4205fb9bb221c4f60047548ab185a4fa">  435</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a4205fb9bb221c4f60047548ab185a4fa">_wp_ajax_add_hierarchical_term</a>() {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> = $_POST[<span class="stringliteral">&#39;action&#39;</span>];</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    $taxonomy = <a class="code" href="wp-includes_2taxonomy_8php.html#aa73d2fdc1c00f823e31ca7e90f904a5e">get_taxonomy</a>(substr(<a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a>, 4));</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    check_ajax_referer( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a>, <span class="stringliteral">&#39;_ajax_nonce-add-&#39;</span> . $taxonomy-&gt;name );</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( $taxonomy-&gt;cap-&gt;edit_terms ) )</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    $names = explode(<span class="charliteral">&#39;,&#39;</span>, $_POST[<span class="stringliteral">&#39;new&#39;</span>.$taxonomy-&gt;name]);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    $parent = isset($_POST[<span class="stringliteral">&#39;new&#39;</span>.$taxonomy-&gt;name.<span class="stringliteral">&#39;_parent&#39;</span>]) ? (int) $_POST[<span class="stringliteral">&#39;new&#39;</span>.$taxonomy-&gt;name.<span class="stringliteral">&#39;_parent&#39;</span>] : 0;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="search-field-date_8php.html#ab0fb235c4acb6fcb8c0d565d101505a4">if</a> ( 0 &gt; $parent )</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        $parent = 0;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">if</span> ( $taxonomy-&gt;name == <span class="stringliteral">&#39;category&#39;</span> )</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        $post_category = isset($_POST[<span class="stringliteral">&#39;post_category&#39;</span>]) ? (array) $_POST[<span class="stringliteral">&#39;post_category&#39;</span>] : array();</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        $post_category = ( isset($_POST[<span class="stringliteral">&#39;tax_input&#39;</span>]) &amp;&amp; isset($_POST[<span class="stringliteral">&#39;tax_input&#39;</span>][$taxonomy-&gt;name]) ) ? (array) $_POST[<span class="stringliteral">&#39;tax_input&#39;</span>][$taxonomy-&gt;name] : array();</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    $checked_categories = array_map( <span class="stringliteral">&#39;absint&#39;</span>, (array) $post_category );</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    $popular_ids = <a class="code" href="wp-admin_2includes_2template_8php.html#af1dfa47eba57f9f63fdc16a76c2fbeef">wp_popular_terms_checklist</a>($taxonomy-&gt;name, 0, 10, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">foreach</span> ( $names as $cat_name ) {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        $cat_name = trim($cat_name);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        $category_nicename = <a class="code" href="formatting_8php.html#ac6495c47468fb816d78bb2d2b326d808">sanitize_title</a>($cat_name);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;&#39;</span> === $category_nicename )</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keywordflow">if</span> ( !$cat_id = <a class="code" href="wp-includes_2taxonomy_8php.html#a85dd27198696fc266a731792fd32abcb">term_exists</a>( $cat_name, $taxonomy-&gt;name, $parent ) )</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            $cat_id = <a class="code" href="wp-includes_2taxonomy_8php.html#ad905a6910c87bb55f7d9b1092f747fb5">wp_insert_term</a>( $cat_name, $taxonomy-&gt;name, array( <span class="stringliteral">&#39;parent&#39;</span> =&gt; $parent ) );</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $cat_id ) ) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( is_array( $cat_id ) ) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            $cat_id = $cat_id[<span class="stringliteral">&#39;term_id&#39;</span>];</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        $checked_categories[] = $cat_id;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordflow">if</span> ( $parent ) <span class="comment">// Do these all at once in a second</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        ob_start();</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <a class="code" href="wp-admin_2includes_2template_8php.html#ae06137f852b3d9652ce772760e297626">wp_terms_checklist</a>( 0, array( <span class="stringliteral">&#39;taxonomy&#39;</span> =&gt; $taxonomy-&gt;name, <span class="stringliteral">&#39;descendants_and_self&#39;</span> =&gt; $cat_id, <span class="stringliteral">&#39;selected_cats&#39;</span> =&gt; $checked_categories, <span class="stringliteral">&#39;popular_cats&#39;</span> =&gt; $popular_ids ));</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        $data = ob_get_clean();</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        $add = array(</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            <span class="stringliteral">&#39;what&#39;</span> =&gt; $taxonomy-&gt;name,</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <span class="stringliteral">&#39;id&#39;</span> =&gt; $cat_id,</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <span class="stringliteral">&#39;data&#39;</span> =&gt; <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( array(<span class="stringliteral">&quot;\n&quot;</span>, <span class="stringliteral">&quot;\t&quot;</span>), <span class="stringliteral">&#39;&#39;</span>, $data),</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <span class="stringliteral">&#39;position&#39;</span> =&gt; -1</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        );</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">if</span> ( $parent ) { <span class="comment">// Foncy - replace the parent and all its children</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        $parent = <a class="code" href="wp-includes_2taxonomy_8php.html#a99b6f0c73dd9c512b520be29fa94df3e">get_term</a>( $parent, $taxonomy-&gt;name );</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        $term_id = $parent-&gt;term_id;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">while</span> ( $parent-&gt;parent ) { <span class="comment">// get the top parent</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            $parent = <a class="code" href="wp-includes_2taxonomy_8php.html#a99b6f0c73dd9c512b520be29fa94df3e">get_term</a>( $parent-&gt;parent, $taxonomy-&gt;name );</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $parent ) )</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            $term_id = $parent-&gt;term_id;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        ob_start();</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <a class="code" href="wp-admin_2includes_2template_8php.html#ae06137f852b3d9652ce772760e297626">wp_terms_checklist</a>( 0, array(<span class="stringliteral">&#39;taxonomy&#39;</span> =&gt; $taxonomy-&gt;name, <span class="stringliteral">&#39;descendants_and_self&#39;</span> =&gt; $term_id, <span class="stringliteral">&#39;selected_cats&#39;</span> =&gt; $checked_categories, <span class="stringliteral">&#39;popular_cats&#39;</span> =&gt; $popular_ids));</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        $data = ob_get_clean();</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        $add = array(</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            <span class="stringliteral">&#39;what&#39;</span> =&gt; $taxonomy-&gt;name,</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            <span class="stringliteral">&#39;id&#39;</span> =&gt; $term_id,</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <span class="stringliteral">&#39;data&#39;</span> =&gt; <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( array(<span class="stringliteral">&quot;\n&quot;</span>, <span class="stringliteral">&quot;\t&quot;</span>), <span class="stringliteral">&#39;&#39;</span>, $data),</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            <span class="stringliteral">&#39;position&#39;</span> =&gt; -1</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        );</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    ob_start();</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <a class="code" href="category-template_8php.html#ae49cb876bff40964321072d7be006a9c">wp_dropdown_categories</a>( array(</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="stringliteral">&#39;taxonomy&#39;</span> =&gt; $taxonomy-&gt;name, <span class="stringliteral">&#39;hide_empty&#39;</span> =&gt; 0, <span class="stringliteral">&#39;name&#39;</span> =&gt; <span class="stringliteral">&#39;new&#39;</span>.$taxonomy-&gt;name.<span class="stringliteral">&#39;_parent&#39;</span>, <span class="stringliteral">&#39;orderby&#39;</span> =&gt; <span class="stringliteral">&#39;name&#39;</span>,</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="stringliteral">&#39;hierarchical&#39;</span> =&gt; 1, <span class="stringliteral">&#39;show_option_none&#39;</span> =&gt; <span class="stringliteral">&#39;&amp;mdash; &#39;</span>.$taxonomy-&gt;labels-&gt;parent_item.<span class="stringliteral">&#39; &amp;mdash;&#39;</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    ) );</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    $sup = ob_get_clean();</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    $add[<span class="stringliteral">&#39;supplemental&#39;</span>] = array( <span class="stringliteral">&#39;newcat_parent&#39;</span> =&gt; $sup );</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    $x = <span class="keyword">new</span> <a class="code" href="class_w_p___ajax___response.html">WP_Ajax_Response</a>( $add );</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    $x-&gt;send();</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;}</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment"> * Ajax handler for deleting a comment.</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00527"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a7ae2df754250282b3f729c110dc354b8">  527</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a7ae2df754250282b3f729c110dc354b8">wp_ajax_delete_comment</a>() {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> = isset( $_POST[<span class="stringliteral">&#39;id&#39;</span>] ) ? (int) $_POST[<span class="stringliteral">&#39;id&#39;</span>] : 0;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> = <a class="code" href="wp-includes_2comment_8php.html#a98326ce8f0babf67e0b178d863263f67">get_comment</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) )</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( time() );</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_comment&#39;</span>, <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a>-&gt;comment_ID ) )</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    check_ajax_referer( <span class="stringliteral">&quot;delete-comment_$id&quot;</span> );</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    $status = <a class="code" href="wp-includes_2comment_8php.html#ad1516694f994fb605a8aa218ac0fafcf">wp_get_comment_status</a>( <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> );</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    $delta = -1;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">if</span> ( isset($_POST[<span class="stringliteral">&#39;trash&#39;</span>]) &amp;&amp; 1 == $_POST[<span class="stringliteral">&#39;trash&#39;</span>] ) {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;trash&#39;</span> == $status )</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( time() );</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        $r = <a class="code" href="wp-includes_2comment_8php.html#aea1c4f43ccdafd6389e3188637844128">wp_trash_comment</a>( <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> );</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( isset($_POST[<span class="stringliteral">&#39;untrash&#39;</span>]) &amp;&amp; 1 == $_POST[<span class="stringliteral">&#39;untrash&#39;</span>] ) {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;trash&#39;</span> != $status )</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( time() );</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        $r = <a class="code" href="wp-includes_2comment_8php.html#a6aa515b002d44b79277dfd22d2f1488f">wp_untrash_comment</a>( <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> );</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="keywordflow">if</span> ( ! isset( $_POST[<span class="stringliteral">&#39;comment_status&#39;</span>] ) || $_POST[<span class="stringliteral">&#39;comment_status&#39;</span>] != <span class="stringliteral">&#39;trash&#39;</span> ) <span class="comment">// undo trash, not in trash</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            $delta = 1;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( isset($_POST[<span class="stringliteral">&#39;spam&#39;</span>]) &amp;&amp; 1 == $_POST[<span class="stringliteral">&#39;spam&#39;</span>] ) {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;spam&#39;</span> == $status )</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( time() );</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        $r = <a class="code" href="wp-includes_2comment_8php.html#a79953ca35c2c790df12b3bb3cc1755f9">wp_spam_comment</a>( <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> );</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( isset($_POST[<span class="stringliteral">&#39;unspam&#39;</span>]) &amp;&amp; 1 == $_POST[<span class="stringliteral">&#39;unspam&#39;</span>] ) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;spam&#39;</span> != $status )</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( time() );</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        $r = <a class="code" href="wp-includes_2comment_8php.html#a41289828663eca63f8655541c55ceacf">wp_unspam_comment</a>( <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> );</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="keywordflow">if</span> ( ! isset( $_POST[<span class="stringliteral">&#39;comment_status&#39;</span>] ) || $_POST[<span class="stringliteral">&#39;comment_status&#39;</span>] != <span class="stringliteral">&#39;spam&#39;</span> ) <span class="comment">// undo spam, not in spam</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            $delta = 1;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( isset($_POST[<span class="stringliteral">&#39;delete&#39;</span>]) &amp;&amp; 1 == $_POST[<span class="stringliteral">&#39;delete&#39;</span>] ) {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        $r = <a class="code" href="wp-includes_2comment_8php.html#a7754633416dca78a36ef5b4722e654b5">wp_delete_comment</a>( <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> );</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">if</span> ( $r ) <span class="comment">// Decide if we need to send back &#39;1&#39; or a more complicated response including page links and comment counts</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <a class="code" href="ajax-actions_8php.html#aa98d72fd07903600ae74d7a78989d943">_wp_ajax_delete_comment_response</a>( <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a>-&gt;comment_ID, $delta );</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;}</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment"> * Ajax handler for deleting a tag.</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00575"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#af4079f9ff14a4b7b2a830af70e6ebce5">  575</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#af4079f9ff14a4b7b2a830af70e6ebce5">wp_ajax_delete_tag</a>() {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    $tag_id = (int) $_POST[<span class="stringliteral">&#39;tag_ID&#39;</span>];</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    check_ajax_referer( <span class="stringliteral">&quot;delete-tag_$tag_id&quot;</span> );</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    $taxonomy = !empty($_POST[<span class="stringliteral">&#39;taxonomy&#39;</span>]) ? $_POST[<span class="stringliteral">&#39;taxonomy&#39;</span>] : <span class="stringliteral">&#39;post_tag&#39;</span>;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="edit-tags_8php.html#a889a2afc68d4bc472eeed20fd267a583">$tax</a> = <a class="code" href="wp-includes_2taxonomy_8php.html#aa73d2fdc1c00f823e31ca7e90f904a5e">get_taxonomy</a>($taxonomy);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <a class="code" href="edit-tags_8php.html#a889a2afc68d4bc472eeed20fd267a583">$tax</a>-&gt;cap-&gt;delete_terms ) )</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    $tag = <a class="code" href="wp-includes_2taxonomy_8php.html#a99b6f0c73dd9c512b520be29fa94df3e">get_term</a>( $tag_id, $taxonomy );</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">if</span> ( !$tag || <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $tag ) )</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2taxonomy_8php.html#ad28d62c01fc8952379351022b765987e">wp_delete_term</a>($tag_id, $taxonomy))</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;}</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment"> * Ajax handler for deleting a link.</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00600"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a6af0ccade45b009de36f8840810757f3">  600</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a6af0ccade45b009de36f8840810757f3">wp_ajax_delete_link</a>() {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> = isset( $_POST[<span class="stringliteral">&#39;id&#39;</span>] ) ? (int) $_POST[<span class="stringliteral">&#39;id&#39;</span>] : 0;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    check_ajax_referer( <span class="stringliteral">&quot;delete-bookmark_$id&quot;</span> );</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;manage_links&#39;</span> ) )</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <a class="code" href="link-add_8php.html#a5d346e31b75d916e3bac9cb193bfc97f">$link</a> = <a class="code" href="wp-includes_2bookmark_8php.html#a944dca9670f9a99ea1f1cee75ee0f48f">get_bookmark</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="link-add_8php.html#a5d346e31b75d916e3bac9cb193bfc97f">$link</a> || <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( <a class="code" href="link-add_8php.html#a5d346e31b75d916e3bac9cb193bfc97f">$link</a> ) )</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="wp-admin_2includes_2bookmark_8php.html#a6f5ecff74333cbdccebc568f669e61d0">wp_delete_link</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) )</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;}</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment"> * Ajax handler for deleting meta.</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00622"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a28b90382a34687e525493508c081b662">  622</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a28b90382a34687e525493508c081b662">wp_ajax_delete_meta</a>() {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> = isset( $_POST[<span class="stringliteral">&#39;id&#39;</span>] ) ? (int) $_POST[<span class="stringliteral">&#39;id&#39;</span>] : 0;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    check_ajax_referer( <span class="stringliteral">&quot;delete-meta_$id&quot;</span> );</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">if</span> ( !$meta = <a class="code" href="meta_8php.html#ad3d9d6ac672b7ab0599cdbe08195aef5">get_metadata_by_mid</a>( <span class="stringliteral">&#39;post&#39;</span>, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) )</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="meta_8php.html#a5fc1c8123ec9618ddec9206f3324432d">is_protected_meta</a>( $meta-&gt;meta_key, <span class="stringliteral">&#39;post&#39;</span> ) || ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;delete_post_meta&#39;</span>,  $meta-&gt;post_id, $meta-&gt;meta_key ) )</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="wp-admin_2includes_2post_8php.html#aaa6130670385de3c63511b4c96bed33f">delete_meta</a>( $meta-&gt;meta_id ) )</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;}</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment"> * Ajax handler for deleting a post.</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment"> * @param string $action Action to perform.</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00643"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#afa1002e46ff52ab99a353e83b4c3a5e9">  643</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#afa1002e46ff52ab99a353e83b4c3a5e9">wp_ajax_delete_post</a>( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> ) {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">if</span> ( empty( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> ) )</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> = <span class="stringliteral">&#39;delete-post&#39;</span>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> = isset( $_POST[<span class="stringliteral">&#39;id&#39;</span>] ) ? (int) $_POST[<span class="stringliteral">&#39;id&#39;</span>] : 0;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    check_ajax_referer( <span class="stringliteral">&quot;{$action}_$id&quot;</span> );</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;delete_post&#39;</span>, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) )</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) )</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2post_8php.html#affbeae076f02be4fd44a2019f39a6928">wp_delete_post</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) )</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;}</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment"> * Ajax handler for sending a post to the trash.</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="comment"> * @param string $action Action to perform.</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00668"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#aed0388080c80d833e5b81b6e0bae6c97">  668</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#aed0388080c80d833e5b81b6e0bae6c97">wp_ajax_trash_post</a>( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> ) {</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">if</span> ( empty( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> ) )</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> = <span class="stringliteral">&#39;trash-post&#39;</span>;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> = isset( $_POST[<span class="stringliteral">&#39;id&#39;</span>] ) ? (int) $_POST[<span class="stringliteral">&#39;id&#39;</span>] : 0;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    check_ajax_referer( <span class="stringliteral">&quot;{$action}_$id&quot;</span> );</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;delete_post&#39;</span>, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) )</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) )</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;trash-post&#39;</span> == <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> )</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        $done = <a class="code" href="wp-includes_2post_8php.html#a4d499fa89c9cb5fb7f3bea60c2368c37">wp_trash_post</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        $done = <a class="code" href="wp-includes_2post_8php.html#adb0ab0c2f2c447ee2f6505d6e8487b2b">wp_untrash_post</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">if</span> ( $done )</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;}</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment"> * Ajax handler to restore a post from the trash.</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment"> * @param string $action Action to perform.</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00698"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a937aef348b489a0cb87b259ce2ef4287">  698</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a937aef348b489a0cb87b259ce2ef4287">wp_ajax_untrash_post</a>( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> ) {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordflow">if</span> ( empty( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> ) )</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> = <span class="stringliteral">&#39;untrash-post&#39;</span>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <a class="code" href="ajax-actions_8php.html#aed0388080c80d833e5b81b6e0bae6c97">wp_ajax_trash_post</a>( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> );</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;}</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment"> * @param string $action</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00709"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a030765aeba8dead9b875f014d2b3d576">  709</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a030765aeba8dead9b875f014d2b3d576">wp_ajax_delete_page</a>( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> ) {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">if</span> ( empty( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> ) )</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> = <span class="stringliteral">&#39;delete-page&#39;</span>;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> = isset( $_POST[<span class="stringliteral">&#39;id&#39;</span>] ) ? (int) $_POST[<span class="stringliteral">&#39;id&#39;</span>] : 0;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    check_ajax_referer( <span class="stringliteral">&quot;{$action}_$id&quot;</span> );</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;delete_page&#39;</span>, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) )</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) )</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2post_8php.html#affbeae076f02be4fd44a2019f39a6928">wp_delete_post</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) )</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;}</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment"> * Ajax handler to dim a comment.</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00732"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#ac7822daecffd987bf169955c722cc4c2">  732</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#ac7822daecffd987bf169955c722cc4c2">wp_ajax_dim_comment</a>() {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> = isset( $_POST[<span class="stringliteral">&#39;id&#39;</span>] ) ? (int) $_POST[<span class="stringliteral">&#39;id&#39;</span>] : 0;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> = <a class="code" href="wp-includes_2comment_8php.html#a98326ce8f0babf67e0b178d863263f67">get_comment</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) ) {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        $x = <span class="keyword">new</span> <a class="code" href="class_w_p___ajax___response.html">WP_Ajax_Response</a>( array(</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            <span class="stringliteral">&#39;what&#39;</span> =&gt; <span class="stringliteral">&#39;comment&#39;</span>,</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            <span class="stringliteral">&#39;id&#39;</span> =&gt; <span class="keyword">new</span> <a class="code" href="class_w_p___error.html">WP_Error</a>(<span class="stringliteral">&#39;invalid_comment&#39;</span>, sprintf(<a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;Comment %d does not exist&#39;</span>), <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>))</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        ) );</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        $x-&gt;send();</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    }</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_comment&#39;</span>, <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a>-&gt;comment_ID ) &amp;&amp; ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;moderate_comments&#39;</span> ) )</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    $current = <a class="code" href="wp-includes_2comment_8php.html#ad1516694f994fb605a8aa218ac0fafcf">wp_get_comment_status</a>( <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> );</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordflow">if</span> ( isset( $_POST[<span class="stringliteral">&#39;new&#39;</span>] ) &amp;&amp; $_POST[<span class="stringliteral">&#39;new&#39;</span>] == $current )</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( time() );</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    check_ajax_referer( <span class="stringliteral">&quot;approve-comment_$id&quot;</span> );</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">if</span> ( in_array( $current, array( <span class="stringliteral">&#39;unapproved&#39;</span>, <span class="stringliteral">&#39;spam&#39;</span> ) ) ) {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        $result = <a class="code" href="wp-includes_2comment_8php.html#afe01dce5c3f3e7d1f4586252df709e08">wp_set_comment_status</a>( <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a>, <span class="stringliteral">&#39;approve&#39;</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        $result = <a class="code" href="wp-includes_2comment_8php.html#afe01dce5c3f3e7d1f4586252df709e08">wp_set_comment_status</a>( <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a>, <span class="stringliteral">&#39;hold&#39;</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    }</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>($result) ) {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        $x = <span class="keyword">new</span> <a class="code" href="class_w_p___ajax___response.html">WP_Ajax_Response</a>( array(</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            <span class="stringliteral">&#39;what&#39;</span> =&gt; <span class="stringliteral">&#39;comment&#39;</span>,</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            <span class="stringliteral">&#39;id&#39;</span> =&gt; $result</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        ) );</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        $x-&gt;send();</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    }</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="comment">// Decide if we need to send back &#39;1&#39; or a more complicated response including page links and comment counts</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <a class="code" href="ajax-actions_8php.html#aa98d72fd07903600ae74d7a78989d943">_wp_ajax_delete_comment_response</a>( <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a>-&gt;comment_ID );</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;}</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment"> * Ajax handler for deleting a link category.</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment"> * @param string $action Action to perform.</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00777"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a8184ff8faa494ee050392d58978fd256">  777</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a8184ff8faa494ee050392d58978fd256">wp_ajax_add_link_category</a>( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> ) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">if</span> ( empty( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> ) )</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> = <span class="stringliteral">&#39;add-link-category&#39;</span>;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    check_ajax_referer( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> );</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;manage_categories&#39;</span> ) )</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    $names = explode(<span class="charliteral">&#39;,&#39;</span>, <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( $_POST[<span class="stringliteral">&#39;newcat&#39;</span>] ) );</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    $x = <span class="keyword">new</span> <a class="code" href="class_w_p___ajax___response.html">WP_Ajax_Response</a>();</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">foreach</span> ( $names as $cat_name ) {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        $cat_name = trim($cat_name);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        $slug = <a class="code" href="formatting_8php.html#ac6495c47468fb816d78bb2d2b326d808">sanitize_title</a>($cat_name);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;&#39;</span> === $slug )</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <span class="keywordflow">if</span> ( !$cat_id = <a class="code" href="wp-includes_2taxonomy_8php.html#a85dd27198696fc266a731792fd32abcb">term_exists</a>( $cat_name, <span class="stringliteral">&#39;link_category&#39;</span> ) )</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            $cat_id = <a class="code" href="wp-includes_2taxonomy_8php.html#ad905a6910c87bb55f7d9b1092f747fb5">wp_insert_term</a>( $cat_name, <span class="stringliteral">&#39;link_category&#39;</span> );</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $cat_id ) ) {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( is_array( $cat_id ) ) {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            $cat_id = $cat_id[<span class="stringliteral">&#39;term_id&#39;</span>];</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        $cat_name = <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $cat_name );</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        $x-&gt;add( array(</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            <span class="stringliteral">&#39;what&#39;</span> =&gt; <span class="stringliteral">&#39;link-category&#39;</span>,</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            <span class="stringliteral">&#39;id&#39;</span> =&gt; $cat_id,</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            <span class="stringliteral">&#39;data&#39;</span> =&gt; <span class="stringliteral">&quot;&lt;li id=&#39;link-category-$cat_id&#39;&gt;&lt;label for=&#39;in-link-category-$cat_id&#39; class=&#39;selectit&#39;&gt;&lt;input value=&#39;&quot;</span> . <a class="code" href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a>($cat_id) . <span class="stringliteral">&quot;&#39; type=&#39;checkbox&#39; checked=&#39;checked&#39; name=&#39;link_category[]&#39; id=&#39;in-link-category-$cat_id&#39;/&gt; $cat_name&lt;/label&gt;&lt;/li&gt;&quot;</span>,</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            <span class="stringliteral">&#39;position&#39;</span> =&gt; -1</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        ) );</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    }</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    $x-&gt;send();</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;}</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment"> * Ajax handler to add a tag.</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment"> * @global WP_List_Table $wp_list_table</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00815"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#adbbff8530ecf449911e25793078f0148">  815</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#adbbff8530ecf449911e25793078f0148">wp_ajax_add_tag</a>() {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    global <a class="code" href="edit-comments_8php.html#a0abf38733b389a685a48be096cd47fbc">$wp_list_table</a>;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;add-tag&#39;</span>, <span class="stringliteral">&#39;_wpnonce_add-tag&#39;</span> );</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    $taxonomy = !empty($_POST[<span class="stringliteral">&#39;taxonomy&#39;</span>]) ? $_POST[<span class="stringliteral">&#39;taxonomy&#39;</span>] : <span class="stringliteral">&#39;post_tag&#39;</span>;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <a class="code" href="edit-tags_8php.html#a889a2afc68d4bc472eeed20fd267a583">$tax</a> = <a class="code" href="wp-includes_2taxonomy_8php.html#aa73d2fdc1c00f823e31ca7e90f904a5e">get_taxonomy</a>($taxonomy);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <a class="code" href="edit-tags_8php.html#a889a2afc68d4bc472eeed20fd267a583">$tax</a>-&gt;cap-&gt;edit_terms ) )</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    $x = <span class="keyword">new</span> <a class="code" href="class_w_p___ajax___response.html">WP_Ajax_Response</a>();</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    $tag = <a class="code" href="wp-includes_2taxonomy_8php.html#ad905a6910c87bb55f7d9b1092f747fb5">wp_insert_term</a>($_POST[<span class="stringliteral">&#39;tag-name&#39;</span>], $taxonomy, $_POST );</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">if</span> ( !$tag || <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>($tag) || (!$tag = <a class="code" href="wp-includes_2taxonomy_8php.html#a99b6f0c73dd9c512b520be29fa94df3e">get_term</a>( $tag[<span class="stringliteral">&#39;term_id&#39;</span>], $taxonomy )) ) {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;An error has occurred. Please reload the page and try again.&#39;</span>);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>($tag) &amp;&amp; $tag-&gt;get_error_message() )</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> = $tag-&gt;get_error_message();</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        $x-&gt;add( array(</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            <span class="stringliteral">&#39;what&#39;</span> =&gt; <span class="stringliteral">&#39;taxonomy&#39;</span>,</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;            <span class="stringliteral">&#39;data&#39;</span> =&gt; <span class="keyword">new</span> <a class="code" href="class_w_p___error.html">WP_Error</a>(<span class="stringliteral">&#39;error&#39;</span>, <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> )</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        ) );</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        $x-&gt;send();</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    }</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    $wp_list_table = <a class="code" href="list-table_8php.html#a9623ca4c4d39a43ceb4b356dfde7a195">_get_list_table</a>( <span class="stringliteral">&#39;WP_Terms_List_Table&#39;</span>, array( <span class="stringliteral">&#39;screen&#39;</span> =&gt; $_POST[<span class="stringliteral">&#39;screen&#39;</span>] ) );</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    $level = 0;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2taxonomy_8php.html#a17ad0f2ad8a5f0b72d2c8221b02ab84c">is_taxonomy_hierarchical</a>($taxonomy) ) {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        $level = count( <a class="code" href="wp-includes_2taxonomy_8php.html#a7c7f560ba5e5d169307cdda1c7873b9b">get_ancestors</a>( $tag-&gt;term_id, $taxonomy, <span class="stringliteral">&#39;taxonomy&#39;</span> ) );</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        ob_start();</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        $wp_list_table-&gt;single_row( $tag, $level );</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        $noparents = ob_get_clean();</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    ob_start();</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    $wp_list_table-&gt;single_row( $tag );</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    $parents = ob_get_clean();</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    $x-&gt;add( array(</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <span class="stringliteral">&#39;what&#39;</span> =&gt; <span class="stringliteral">&#39;taxonomy&#39;</span>,</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="stringliteral">&#39;supplemental&#39;</span> =&gt; compact(<span class="stringliteral">&#39;parents&#39;</span>, <span class="stringliteral">&#39;noparents&#39;</span>)</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    ) );</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    $x-&gt;add( array(</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        <span class="stringliteral">&#39;what&#39;</span> =&gt; <span class="stringliteral">&#39;term&#39;</span>,</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <span class="stringliteral">&#39;position&#39;</span> =&gt; $level,</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        <span class="stringliteral">&#39;supplemental&#39;</span> =&gt; (array) $tag</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    ) );</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    $x-&gt;send();</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;}</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment"> * Ajax handler for getting a tagcloud.</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00872"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#af20ad6d8461a5a8b33b5574062294a4c">  872</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#af20ad6d8461a5a8b33b5574062294a4c">wp_ajax_get_tagcloud</a>() {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">if</span> ( ! isset( $_POST[<span class="stringliteral">&#39;tax&#39;</span>] ) ) {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    }</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    $taxonomy = <a class="code" href="formatting_8php.html#a0ebdd3bb5f66266f5302c24c3537fb50">sanitize_key</a>( $_POST[<span class="stringliteral">&#39;tax&#39;</span>] );</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <a class="code" href="edit-tags_8php.html#a889a2afc68d4bc472eeed20fd267a583">$tax</a> = <a class="code" href="wp-includes_2taxonomy_8php.html#aa73d2fdc1c00f823e31ca7e90f904a5e">get_taxonomy</a>( $taxonomy );</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="edit-tags_8php.html#a889a2afc68d4bc472eeed20fd267a583">$tax</a> ) {</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    }</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <a class="code" href="edit-tags_8php.html#a889a2afc68d4bc472eeed20fd267a583">$tax</a>-&gt;cap-&gt;assign_terms ) ) {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    }</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <a class="code" href="tools_8php.html#a475a6a63b85186663d34151bcbd21590">$tags</a> = <a class="code" href="wp-includes_2taxonomy_8php.html#aa491ab8e62a9a11b6a3aa62e015f75dd">get_terms</a>( $taxonomy, array( <span class="stringliteral">&#39;number&#39;</span> =&gt; 45, <span class="stringliteral">&#39;orderby&#39;</span> =&gt; <span class="stringliteral">&#39;count&#39;</span>, <span class="stringliteral">&#39;order&#39;</span> =&gt; <span class="stringliteral">&#39;DESC&#39;</span> ) );</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordflow">if</span> ( empty( <a class="code" href="tools_8php.html#a475a6a63b85186663d34151bcbd21590">$tags</a> ) )</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="edit-tags_8php.html#a889a2afc68d4bc472eeed20fd267a583">$tax</a>-&gt;labels-&gt;not_found );</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( <a class="code" href="tools_8php.html#a475a6a63b85186663d34151bcbd21590">$tags</a> ) )</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="tools_8php.html#a475a6a63b85186663d34151bcbd21590">$tags</a>-&gt;get_error_message() );</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">foreach</span> ( <a class="code" href="tools_8php.html#a475a6a63b85186663d34151bcbd21590">$tags</a> as $key =&gt; $tag ) {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        <a class="code" href="tools_8php.html#a475a6a63b85186663d34151bcbd21590">$tags</a>[ $key ]-&gt;link = <span class="charliteral">&#39;#&#39;</span>;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        <a class="code" href="tools_8php.html#a475a6a63b85186663d34151bcbd21590">$tags</a>[ $key ]-&gt;id = $tag-&gt;term_id;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="comment">// We need raw tag names here, so don&#39;t filter the output</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    $return = <a class="code" href="category-template_8php.html#aef0ef4cafaeef225886f521ccdde06d9">wp_generate_tag_cloud</a>( <a class="code" href="tools_8php.html#a475a6a63b85186663d34151bcbd21590">$tags</a>, array(<span class="stringliteral">&#39;filter&#39;</span> =&gt; 0) );</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="keywordflow">if</span> ( empty($return) )</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    echo $return;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;}</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment"> * Ajax handler for getting comments.</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment"> * @global WP_List_Table $wp_list_table</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment"> * @global int           $post_id</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment"> * @param string $action Action to perform.</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00921"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#aac619fea8ee3fa5038657f209c806137">  921</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#aac619fea8ee3fa5038657f209c806137">wp_ajax_get_comments</a>( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> ) {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    global <a class="code" href="edit-comments_8php.html#a0abf38733b389a685a48be096cd47fbc">$wp_list_table</a>, <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a>;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">if</span> ( empty( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> ) )</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> = <span class="stringliteral">&#39;get-comments&#39;</span>;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    check_ajax_referer( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> );</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordflow">if</span> ( empty( $post_id ) &amp;&amp; ! empty( $_REQUEST[<span class="charliteral">&#39;p&#39;</span>] ) ) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $_REQUEST[<span class="charliteral">&#39;p&#39;</span>] );</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        <span class="keywordflow">if</span> ( ! empty( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) )</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            $post_id = <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    }</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="keywordflow">if</span> ( empty( $post_id ) )</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    $wp_list_table = <a class="code" href="list-table_8php.html#a9623ca4c4d39a43ceb4b356dfde7a195">_get_list_table</a>( <span class="stringliteral">&#39;WP_Post_Comments_List_Table&#39;</span>, array( <span class="stringliteral">&#39;screen&#39;</span> =&gt; <span class="stringliteral">&#39;edit-comments&#39;</span> ) );</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_post&#39;</span>, $post_id ) )</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    $wp_list_table-&gt;prepare_items();</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordflow">if</span> ( !$wp_list_table-&gt;has_items() )</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    $x = <span class="keyword">new</span> <a class="code" href="class_w_p___ajax___response.html">WP_Ajax_Response</a>();</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    ob_start();</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keywordflow">foreach</span> ( $wp_list_table-&gt;items as <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> ) {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_comment&#39;</span>, $comment-&gt;comment_ID ) )</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <a class="code" href="wp-includes_2comment_8php.html#a98326ce8f0babf67e0b178d863263f67">get_comment</a>( $comment );</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        $wp_list_table-&gt;single_row( $comment );</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    $comment_list_item = ob_get_clean();</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    $x-&gt;add( array(</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <span class="stringliteral">&#39;what&#39;</span> =&gt; <span class="stringliteral">&#39;comments&#39;</span>,</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        <span class="stringliteral">&#39;data&#39;</span> =&gt; $comment_list_item</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    ) );</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    $x-&gt;send();</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;}</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment"> * Ajax handler for replying to a comment.</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment"> * @global WP_List_Table $wp_list_table</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="comment"> * @param string $action Action to perform.</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00973"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a67daa9c1bc1c137f82f30794164e7760">  973</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a67daa9c1bc1c137f82f30794164e7760">wp_ajax_replyto_comment</a>( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> ) {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    global <a class="code" href="edit-comments_8php.html#a0abf38733b389a685a48be096cd47fbc">$wp_list_table</a>;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordflow">if</span> ( empty( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> ) )</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> = <span class="stringliteral">&#39;replyto-comment&#39;</span>;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    check_ajax_referer( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a>, <span class="stringliteral">&#39;_ajax_nonce-replyto-comment&#39;</span> );</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    $comment_post_ID = (int) $_POST[<span class="stringliteral">&#39;comment_post_ID&#39;</span>];</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( $comment_post_ID );</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> )</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_post&#39;</span>, $comment_post_ID ) )</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">if</span> ( empty( <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>-&gt;post_status ) )</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( in_array(<a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>-&gt;post_status, array(<span class="stringliteral">&#39;draft&#39;</span>, <span class="stringliteral">&#39;pending&#39;</span>, <span class="stringliteral">&#39;trash&#39;</span>) ) )</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;ERROR: you are replying to a comment on a draft post.&#39;</span>) );</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> = wp_get_current_user();</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>-&gt;exists() ) {</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <a class="code" href="edit-form-advanced_8php.html#af935895be7531a761425c2f71732cd96">$user_ID</a> = <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>-&gt;ID;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        $comment_author       = <a class="code" href="formatting_8php.html#aa5eab0fce35c72689998f801b8fc7dfe">wp_slash</a>( <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>-&gt;display_name );</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        $comment_author_email = <a class="code" href="formatting_8php.html#aa5eab0fce35c72689998f801b8fc7dfe">wp_slash</a>( <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>-&gt;user_email );</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        $comment_author_url   = <a class="code" href="formatting_8php.html#aa5eab0fce35c72689998f801b8fc7dfe">wp_slash</a>( <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>-&gt;user_url );</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        $comment_content      = trim( $_POST[<span class="stringliteral">&#39;content&#39;</span>] );</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        $comment_type         = isset( $_POST[<span class="stringliteral">&#39;comment_type&#39;</span>] ) ? trim( $_POST[<span class="stringliteral">&#39;comment_type&#39;</span>] ) : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;unfiltered_html&#39;</span> ) ) {</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            <span class="keywordflow">if</span> ( ! isset( $_POST[<span class="stringliteral">&#39;_wp_unfiltered_html_comment&#39;</span>] ) )</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                $_POST[<span class="stringliteral">&#39;_wp_unfiltered_html_comment&#39;</span>] = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            <span class="keywordflow">if</span> ( wp_create_nonce( <span class="stringliteral">&#39;unfiltered-html-comment&#39;</span> ) != $_POST[<span class="stringliteral">&#39;_wp_unfiltered_html_comment&#39;</span>] ) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                <a class="code" href="kses_8php.html#abfa52cf1353d843015ff87062d3e341f">kses_remove_filters</a>(); <span class="comment">// start with a clean slate</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                <a class="code" href="kses_8php.html#a0b821c489422f75b2d9746b1ea6d8437">kses_init_filters</a>(); <span class="comment">// set up the filters</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            }</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        }</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Sorry, you must be logged in to reply to a comment.&#39;</span> ) );</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;&#39;</span> == $comment_content )</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;ERROR: please type a comment.&#39;</span> ) );</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    $comment_parent = 0;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordflow">if</span> ( isset( $_POST[<span class="stringliteral">&#39;comment_ID&#39;</span>] ) )</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        $comment_parent = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $_POST[<span class="stringliteral">&#39;comment_ID&#39;</span>] );</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    $comment_auto_approved = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    $commentdata = compact(<span class="stringliteral">&#39;comment_post_ID&#39;</span>, <span class="stringliteral">&#39;comment_author&#39;</span>, <span class="stringliteral">&#39;comment_author_email&#39;</span>, <span class="stringliteral">&#39;comment_author_url&#39;</span>, <span class="stringliteral">&#39;comment_content&#39;</span>, <span class="stringliteral">&#39;comment_type&#39;</span>, <span class="stringliteral">&#39;comment_parent&#39;</span>, <span class="stringliteral">&#39;user_ID&#39;</span>);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="comment">// Automatically approve parent comment.</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="keywordflow">if</span> ( !empty($_POST[<span class="stringliteral">&#39;approve_parent&#39;</span>]) ) {</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        $parent = <a class="code" href="wp-includes_2comment_8php.html#a98326ce8f0babf67e0b178d863263f67">get_comment</a>( $comment_parent );</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <span class="keywordflow">if</span> ( $parent &amp;&amp; $parent-&gt;comment_approved === <span class="charliteral">&#39;0&#39;</span> &amp;&amp; $parent-&gt;comment_post_ID == $comment_post_ID ) {</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_comment&#39;</span>, $parent-&gt;comment_ID ) ) {</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            }</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2comment_8php.html#afe01dce5c3f3e7d1f4586252df709e08">wp_set_comment_status</a>( $parent, <span class="stringliteral">&#39;approve&#39;</span> ) )</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                $comment_auto_approved = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        }</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    }</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    $comment_id = <a class="code" href="wp-includes_2comment_8php.html#a14572adcc56c214d6a337ffb30bc2bfa">wp_new_comment</a>( $commentdata );</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> = <a class="code" href="wp-includes_2comment_8php.html#a98326ce8f0babf67e0b178d863263f67">get_comment</a>($comment_id);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> ) <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    $position = ( isset($_POST[<span class="stringliteral">&#39;position&#39;</span>]) &amp;&amp; (int) $_POST[<span class="stringliteral">&#39;position&#39;</span>] ) ? (int) $_POST[<span class="stringliteral">&#39;position&#39;</span>] : <span class="stringliteral">&#39;-1&#39;</span>;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    ob_start();</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordflow">if</span> ( isset( $_REQUEST[<span class="stringliteral">&#39;mode&#39;</span>] ) &amp;&amp; <span class="stringliteral">&#39;dashboard&#39;</span> == $_REQUEST[<span class="stringliteral">&#39;mode&#39;</span>] ) {</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        require_once( <a class="code" href="load-scripts_8php.html#a495f94983b95273ad267511b2411351f">ABSPATH</a> . <span class="stringliteral">&#39;wp-admin/includes/dashboard.php&#39;</span> );</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        <a class="code" href="dashboard_8php.html#a5fe09a9ce7f1d04e1c83ab29747fcc43">_wp_dashboard_recent_comments_row</a>( <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> );</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <span class="keywordflow">if</span> ( isset( $_REQUEST[<span class="stringliteral">&#39;mode&#39;</span>] ) &amp;&amp; <span class="stringliteral">&#39;single&#39;</span> == $_REQUEST[<span class="stringliteral">&#39;mode&#39;</span>] ) {</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;            $wp_list_table = <a class="code" href="list-table_8php.html#a9623ca4c4d39a43ceb4b356dfde7a195">_get_list_table</a>(<span class="stringliteral">&#39;WP_Post_Comments_List_Table&#39;</span>, array( <span class="stringliteral">&#39;screen&#39;</span> =&gt; <span class="stringliteral">&#39;edit-comments&#39;</span> ) );</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            $wp_list_table = <a class="code" href="list-table_8php.html#a9623ca4c4d39a43ceb4b356dfde7a195">_get_list_table</a>(<span class="stringliteral">&#39;WP_Comments_List_Table&#39;</span>, array( <span class="stringliteral">&#39;screen&#39;</span> =&gt; <span class="stringliteral">&#39;edit-comments&#39;</span> ) );</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        }</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        $wp_list_table-&gt;single_row( <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> );</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    }</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    $comment_list_item = ob_get_clean();</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    $response =  array(</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        <span class="stringliteral">&#39;what&#39;</span> =&gt; <span class="stringliteral">&#39;comment&#39;</span>,</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        <span class="stringliteral">&#39;id&#39;</span> =&gt; <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a>-&gt;comment_ID,</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        <span class="stringliteral">&#39;data&#39;</span> =&gt; $comment_list_item,</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        <span class="stringliteral">&#39;position&#39;</span> =&gt; $position</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    );</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    $counts = <a class="code" href="wp-includes_2comment_8php.html#af157bfcf71c9a2c3829ab7249742de78">wp_count_comments</a>();</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    $response[<span class="stringliteral">&#39;supplemental&#39;</span>] = array(</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        <span class="stringliteral">&#39;in_moderation&#39;</span> =&gt; $counts-&gt;moderated,</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <span class="stringliteral">&#39;i18n_comments_text&#39;</span> =&gt; sprintf(</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;            <a class="code" href="l10n_8php.html#abf087b3109e1ee5f1bbe14b72c3705ae">_n</a>( <span class="stringliteral">&#39;%s Comment&#39;</span>, <span class="stringliteral">&#39;%s Comments&#39;</span>, $counts-&gt;approved ),</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a49014f78a9cbd2165631fee1e722e2ef">number_format_i18n</a>( $counts-&gt;approved )</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        ),</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="stringliteral">&#39;i18n_moderation_text&#39;</span> =&gt; sprintf(</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;            <a class="code" href="l10n_8php.html#a886a0fa23c3318d0172ef3489f97939b">_nx</a>( <span class="stringliteral">&#39;%s in moderation&#39;</span>, <span class="stringliteral">&#39;%s in moderation&#39;</span>, $counts-&gt;moderated, <span class="stringliteral">&#39;comments&#39;</span> ),</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a49014f78a9cbd2165631fee1e722e2ef">number_format_i18n</a>( $counts-&gt;moderated )</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        )</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    );</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordflow">if</span> ( $comment_auto_approved ) {</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        $response[<span class="stringliteral">&#39;supplemental&#39;</span>][<span class="stringliteral">&#39;parent_approved&#39;</span>] = $parent-&gt;comment_ID;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        $response[<span class="stringliteral">&#39;supplemental&#39;</span>][<span class="stringliteral">&#39;parent_post_id&#39;</span>] = $parent-&gt;comment_post_ID;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    }</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    $x = <span class="keyword">new</span> <a class="code" href="class_w_p___ajax___response.html">WP_Ajax_Response</a>();</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    $x-&gt;add( $response );</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    $x-&gt;send();</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;}</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="comment"> * Ajax handler for editing a comment.</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="comment"> * @global WP_List_Table $wp_list_table</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a2db1f93c7f31eb62728aa7a24613d13e"> 1094</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a2db1f93c7f31eb62728aa7a24613d13e">wp_ajax_edit_comment</a>() {</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    global <a class="code" href="edit-comments_8php.html#a0abf38733b389a685a48be096cd47fbc">$wp_list_table</a>;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;replyto-comment&#39;</span>, <span class="stringliteral">&#39;_ajax_nonce-replyto-comment&#39;</span> );</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    $comment_id = (int) $_POST[<span class="stringliteral">&#39;comment_ID&#39;</span>];</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_comment&#39;</span>, $comment_id ) )</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;&#39;</span> == $_POST[<span class="stringliteral">&#39;content&#39;</span>] )</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;ERROR: please type a comment.&#39;</span> ) );</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keywordflow">if</span> ( isset( $_POST[<span class="stringliteral">&#39;status&#39;</span>] ) )</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        $_POST[<span class="stringliteral">&#39;comment_status&#39;</span>] = $_POST[<span class="stringliteral">&#39;status&#39;</span>];</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <a class="code" href="wp-admin_2includes_2comment_8php.html#a8f745e9a594108b17bd45516efbf76f5">edit_comment</a>();</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    $position = ( isset($_POST[<span class="stringliteral">&#39;position&#39;</span>]) &amp;&amp; (int) $_POST[<span class="stringliteral">&#39;position&#39;</span>]) ? (int) $_POST[<span class="stringliteral">&#39;position&#39;</span>] : <span class="stringliteral">&#39;-1&#39;</span>;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    $checkbox = ( isset($_POST[<span class="stringliteral">&#39;checkbox&#39;</span>]) &amp;&amp; <span class="keyword">true</span> == $_POST[<span class="stringliteral">&#39;checkbox&#39;</span>] ) ? 1 : 0;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    $wp_list_table = <a class="code" href="list-table_8php.html#a9623ca4c4d39a43ceb4b356dfde7a195">_get_list_table</a>( $checkbox ? <span class="stringliteral">&#39;WP_Comments_List_Table&#39;</span> : <span class="stringliteral">&#39;WP_Post_Comments_List_Table&#39;</span>, array( <span class="stringliteral">&#39;screen&#39;</span> =&gt; <span class="stringliteral">&#39;edit-comments&#39;</span> ) );</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> = <a class="code" href="wp-includes_2comment_8php.html#a98326ce8f0babf67e0b178d863263f67">get_comment</a>( $comment_id );</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="keywordflow">if</span> ( empty( <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a>-&gt;comment_ID ) )</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    ob_start();</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    $wp_list_table-&gt;single_row( <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a> );</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    $comment_list_item = ob_get_clean();</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    $x = <span class="keyword">new</span> <a class="code" href="class_w_p___ajax___response.html">WP_Ajax_Response</a>();</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    $x-&gt;add( array(</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        <span class="stringliteral">&#39;what&#39;</span> =&gt; <span class="stringliteral">&#39;edit_comment&#39;</span>,</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        <span class="stringliteral">&#39;id&#39;</span> =&gt; <a class="code" href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a>-&gt;comment_ID,</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        <span class="stringliteral">&#39;data&#39;</span> =&gt; $comment_list_item,</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <span class="stringliteral">&#39;position&#39;</span> =&gt; $position</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    ));</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    $x-&gt;send();</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;}</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment"> * Ajax handler for adding a menu item.</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#aba22a1757906917106c85aaaf43a5ba1"> 1139</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#aba22a1757906917106c85aaaf43a5ba1">wp_ajax_add_menu_item</a>() {</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;add-menu_item&#39;</span>, <span class="stringliteral">&#39;menu-settings-column-nonce&#39;</span> );</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_theme_options&#39;</span> ) )</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    require_once <a class="code" href="load-scripts_8php.html#a495f94983b95273ad267511b2411351f">ABSPATH</a> . <span class="stringliteral">&#39;wp-admin/includes/nav-menu.php&#39;</span>;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="comment">// For performance reasons, we omit some object properties from the checklist.</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="comment">// The following is a hacky way to restore them when adding non-custom items.</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    $menu_items_data = array();</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keywordflow">foreach</span> ( (array) $_POST[<span class="stringliteral">&#39;menu-item&#39;</span>] as $menu_item_data ) {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <span class="keywordflow">if</span> (</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;            ! empty( $menu_item_data[<span class="stringliteral">&#39;menu-item-type&#39;</span>] ) &amp;&amp;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;            <span class="stringliteral">&#39;custom&#39;</span> != $menu_item_data[<span class="stringliteral">&#39;menu-item-type&#39;</span>] &amp;&amp;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;            ! empty( $menu_item_data[<span class="stringliteral">&#39;menu-item-object-id&#39;</span>] )</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        ) {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;            <span class="keywordflow">switch</span>( $menu_item_data[<span class="stringliteral">&#39;menu-item-type&#39;</span>] ) {</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&#39;post_type&#39;</span> :</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                    $_object = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( $menu_item_data[<span class="stringliteral">&#39;menu-item-object-id&#39;</span>] );</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&#39;post_type_archive&#39;</span> :</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                    $_object = <a class="code" href="wp-includes_2post_8php.html#a61c47864d25a054d86d7977ed6bc6bed">get_post_type_object</a>( $menu_item_data[<span class="stringliteral">&#39;menu-item-object&#39;</span>] );</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&#39;taxonomy&#39;</span> :</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                    $_object = <a class="code" href="wp-includes_2taxonomy_8php.html#a99b6f0c73dd9c512b520be29fa94df3e">get_term</a>( $menu_item_data[<span class="stringliteral">&#39;menu-item-object-id&#39;</span>], $menu_item_data[<span class="stringliteral">&#39;menu-item-object&#39;</span>] );</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;            }</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;            $_menu_items = array_map( <span class="stringliteral">&#39;wp_setup_nav_menu_item&#39;</span>, array( $_object ) );</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;            $_menu_item = reset( $_menu_items );</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;            <span class="comment">// Restore the missing menu item properties</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;            $menu_item_data[<span class="stringliteral">&#39;menu-item-description&#39;</span>] = $_menu_item-&gt;description;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        }</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        $menu_items_data[] = $menu_item_data;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    }</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    $item_ids = <a class="code" href="wp-admin_2includes_2nav-menu_8php.html#abef127dda5896ac75ab6111787c3fb05">wp_save_nav_menu_items</a>( 0, $menu_items_data );</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $item_ids ) )</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#a603ebf2df9caeca1a319ecbd9b409e76">$menu_items</a> = array();</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="keywordflow">foreach</span> ( (array) $item_ids as $menu_item_id ) {</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        $menu_obj = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( $menu_item_id );</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $menu_obj-&gt;ID ) ) {</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;            $menu_obj = <a class="code" href="wp-includes_2nav-menu_8php.html#ab677367f6b21a0846da6af660371026b">wp_setup_nav_menu_item</a>( $menu_obj );</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;            $menu_obj-&gt;label = $menu_obj-&gt;title; <span class="comment">// don&#39;t show &quot;(pending)&quot; in ajax-added items</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;            <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#a603ebf2df9caeca1a319ecbd9b409e76">$menu_items</a>[] = $menu_obj;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        }</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    }</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment">    /** This filter is documented in wp-admin/includes/nav-menu.php */</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    $walker_class_name = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;wp_edit_nav_menu_walker&#39;</span>, <span class="stringliteral">&#39;Walker_Nav_Menu_Edit&#39;</span>, $_POST[<span class="stringliteral">&#39;menu&#39;</span>] );</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="keywordflow">if</span> ( ! class_exists( $walker_class_name ) )</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="keywordflow">if</span> ( ! empty( <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#a603ebf2df9caeca1a319ecbd9b409e76">$menu_items</a> ) ) {</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        $args = array(</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;            <span class="stringliteral">&#39;after&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;            <span class="stringliteral">&#39;before&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;            <span class="stringliteral">&#39;link_after&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;            <span class="stringliteral">&#39;link_before&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;            <span class="stringliteral">&#39;walker&#39;</span> =&gt; <span class="keyword">new</span> $walker_class_name,</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        );</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        echo <a class="code" href="nav-menu-template_8php.html#afb965e927149ce0599bea943bb2f3394">walk_nav_menu_tree</a>( <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#a603ebf2df9caeca1a319ecbd9b409e76">$menu_items</a>, 0, (<span class="keywordtype">object</span>) $args );</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    }</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;}</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="comment"> * Ajax handler for adding meta.</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a135b323d63a3baf705d0d971266bc159"> 1220</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a135b323d63a3baf705d0d971266bc159">wp_ajax_add_meta</a>() {</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;add-meta&#39;</span>, <span class="stringliteral">&#39;_ajax_nonce-add-meta&#39;</span> );</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    $c = 0;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    $pid = (int) $_POST[<span class="stringliteral">&#39;post_id&#39;</span>];</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( $pid );</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">if</span> ( isset($_POST[<span class="stringliteral">&#39;metakeyselect&#39;</span>]) || isset($_POST[<span class="stringliteral">&#39;metakeyinput&#39;</span>]) ) {</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        <span class="keywordflow">if</span> ( !<a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_post&#39;</span>, $pid ) )</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        <span class="keywordflow">if</span> ( isset($_POST[<span class="stringliteral">&#39;metakeyselect&#39;</span>]) &amp;&amp; <span class="stringliteral">&#39;#NONE#&#39;</span> == $_POST[<span class="stringliteral">&#39;metakeyselect&#39;</span>] &amp;&amp; empty($_POST[<span class="stringliteral">&#39;metakeyinput&#39;</span>]) )</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        <span class="comment">// If the post is an autodraft, save the post as a draft and then attempt to save the meta.</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>-&gt;post_status == <span class="stringliteral">&#39;auto-draft&#39;</span> ) {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;            $post_data = array();</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            $post_data[<span class="stringliteral">&#39;action&#39;</span>] = <span class="stringliteral">&#39;draft&#39;</span>; <span class="comment">// Warning fix</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;            $post_data[<span class="stringliteral">&#39;post_ID&#39;</span>] = $pid;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            $post_data[<span class="stringliteral">&#39;post_type&#39;</span>] = <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>-&gt;post_type;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;            $post_data[<span class="stringliteral">&#39;post_status&#39;</span>] = <span class="stringliteral">&#39;draft&#39;</span>;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;            <a class="code" href="options-general_8php.html#af1d5ccdee975b8f4d20aaffc5b28557c">$now</a> = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a4dacfef72ebe1c7276f7d94fdbe93554">current_time</a>(<span class="stringliteral">&#39;timestamp&#39;</span>, 1);</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;            $post_data[<span class="stringliteral">&#39;post_title&#39;</span>] = sprintf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Draft created on %1$s at %2$s&#39;</span> ), <a class="code" href="options-permalink_8php.html#a642d4aa9cec81e63ddf673048f68132d">date</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;F j, Y&#39;</span> ), <a class="code" href="options-general_8php.html#af1d5ccdee975b8f4d20aaffc5b28557c">$now</a> ), <a class="code" href="options-permalink_8php.html#a642d4aa9cec81e63ddf673048f68132d">date</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;g:i a&#39;</span> ), <a class="code" href="options-general_8php.html#af1d5ccdee975b8f4d20aaffc5b28557c">$now</a> ) );</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            $pid = <a class="code" href="wp-admin_2includes_2post_8php.html#a40bd171c0346a1ee42b164a8d9efab30">edit_post</a>( $post_data );</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            <span class="keywordflow">if</span> ( $pid ) {</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $pid ) ) {</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                    $x = <span class="keyword">new</span> <a class="code" href="class_w_p___ajax___response.html">WP_Ajax_Response</a>( array(</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                        <span class="stringliteral">&#39;what&#39;</span> =&gt; <span class="stringliteral">&#39;meta&#39;</span>,</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                        <span class="stringliteral">&#39;data&#39;</span> =&gt; $pid</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                    ) );</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                    $x-&gt;send();</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                }</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                <span class="keywordflow">if</span> ( !$mid = <a class="code" href="wp-admin_2includes_2post_8php.html#aff82f0f18e5a6f0fe68d279c56044d4d">add_meta</a>( $pid ) )</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Please provide a custom field value.&#39;</span> ) );</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            }</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( ! $mid = <a class="code" href="wp-admin_2includes_2post_8php.html#aff82f0f18e5a6f0fe68d279c56044d4d">add_meta</a>( $pid ) ) {</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Please provide a custom field value.&#39;</span> ) );</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        }</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        $meta = <a class="code" href="meta_8php.html#ad3d9d6ac672b7ab0599cdbe08195aef5">get_metadata_by_mid</a>( <span class="stringliteral">&#39;post&#39;</span>, $mid );</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        $pid = (int) $meta-&gt;post_id;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;        $meta = get_object_vars( $meta );</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        $x = <span class="keyword">new</span> <a class="code" href="class_w_p___ajax___response.html">WP_Ajax_Response</a>( array(</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            <span class="stringliteral">&#39;what&#39;</span> =&gt; <span class="stringliteral">&#39;meta&#39;</span>,</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            <span class="stringliteral">&#39;id&#39;</span> =&gt; $mid,</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;            <span class="stringliteral">&#39;data&#39;</span> =&gt; <a class="code" href="wp-admin_2includes_2template_8php.html#ac6618af35f5e6e072da3e6a459637bd4">_list_meta_row</a>( $meta, $c ),</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;            <span class="stringliteral">&#39;position&#39;</span> =&gt; 1,</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;            <span class="stringliteral">&#39;supplemental&#39;</span> =&gt; array(<span class="stringliteral">&#39;postid&#39;</span> =&gt; $pid)</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        ) );</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">// Update?</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        $mid = (int) key( $_POST[<span class="stringliteral">&#39;meta&#39;</span>] );</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        $key = <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( $_POST[<span class="stringliteral">&#39;meta&#39;</span>][$mid][<span class="stringliteral">&#39;key&#39;</span>] );</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( $_POST[<span class="stringliteral">&#39;meta&#39;</span>][$mid][<span class="stringliteral">&#39;value&#39;</span>] );</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;&#39;</span> == trim($key) )</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Please provide a custom field name.&#39;</span> ) );</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;&#39;</span> == trim(<a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>) )</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Please provide a custom field value.&#39;</span> ) );</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        <span class="keywordflow">if</span> ( ! $meta = <a class="code" href="meta_8php.html#ad3d9d6ac672b7ab0599cdbe08195aef5">get_metadata_by_mid</a>( <span class="stringliteral">&#39;post&#39;</span>, $mid ) )</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 ); <span class="comment">// if meta doesn&#39;t exist</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="meta_8php.html#a5fc1c8123ec9618ddec9206f3324432d">is_protected_meta</a>( $meta-&gt;meta_key, <span class="stringliteral">&#39;post&#39;</span> ) || <a class="code" href="meta_8php.html#a5fc1c8123ec9618ddec9206f3324432d">is_protected_meta</a>( $key, <span class="stringliteral">&#39;post&#39;</span> ) ||</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;            ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_post_meta&#39;</span>, $meta-&gt;post_id, $meta-&gt;meta_key ) ||</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;            ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_post_meta&#39;</span>, $meta-&gt;post_id, $key ) )</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        <span class="keywordflow">if</span> ( $meta-&gt;meta_value != <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> || $meta-&gt;meta_key != $key ) {</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            <span class="keywordflow">if</span> ( !$u = <a class="code" href="meta_8php.html#abbc8c66e89b6d7d45cd4d990e998bdb4">update_metadata_by_mid</a>( <span class="stringliteral">&#39;post&#39;</span>, $mid, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, $key ) )</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 ); <span class="comment">// We know meta exists; we also know it&#39;s unchanged (or DB error, in which case there are bigger problems).</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;        }</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        $x = <span class="keyword">new</span> <a class="code" href="class_w_p___ajax___response.html">WP_Ajax_Response</a>( array(</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;            <span class="stringliteral">&#39;what&#39;</span> =&gt; <span class="stringliteral">&#39;meta&#39;</span>,</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            <span class="stringliteral">&#39;id&#39;</span> =&gt; $mid, <span class="stringliteral">&#39;old_id&#39;</span> =&gt; $mid,</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;            <span class="stringliteral">&#39;data&#39;</span> =&gt; <a class="code" href="wp-admin_2includes_2template_8php.html#ac6618af35f5e6e072da3e6a459637bd4">_list_meta_row</a>( array(</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                <span class="stringliteral">&#39;meta_key&#39;</span> =&gt; $key,</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                <span class="stringliteral">&#39;meta_value&#39;</span> =&gt; <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>,</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                <span class="stringliteral">&#39;meta_id&#39;</span> =&gt; $mid</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;            ), $c ),</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;            <span class="stringliteral">&#39;position&#39;</span> =&gt; 0,</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            <span class="stringliteral">&#39;supplemental&#39;</span> =&gt; array(<span class="stringliteral">&#39;postid&#39;</span> =&gt; $meta-&gt;post_id)</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        ) );</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    }</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    $x-&gt;send();</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;}</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="comment"> * Ajax handler for adding a user.</span></div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="comment"> * @global WP_List_Table $wp_list_table</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;<span class="comment"> * @param string $action Action to perform.</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a7259baae276fef3d04d79ecebbb926c8"> 1314</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a7259baae276fef3d04d79ecebbb926c8">wp_ajax_add_user</a>( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> ) {</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    global <a class="code" href="edit-comments_8php.html#a0abf38733b389a685a48be096cd47fbc">$wp_list_table</a>;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="keywordflow">if</span> ( empty( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> ) )</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> = <span class="stringliteral">&#39;add-user&#39;</span>;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    check_ajax_referer( <a class="code" href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a> );</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>(<span class="stringliteral">&#39;create_users&#39;</span>) )</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="user-edit_8php.html#af0fcd925f00973e32f7214859dfb3c6b">$user_id</a> = <a class="code" href="wp-admin_2includes_2user_8php.html#aadbd7df2f4f267fe7d491d1adb6d2c62">edit_user</a>() ) {</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( <a class="code" href="user-edit_8php.html#af0fcd925f00973e32f7214859dfb3c6b">$user_id</a> ) ) {</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        $x = <span class="keyword">new</span> <a class="code" href="class_w_p___ajax___response.html">WP_Ajax_Response</a>( array(</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;            <span class="stringliteral">&#39;what&#39;</span> =&gt; <span class="stringliteral">&#39;user&#39;</span>,</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;            <span class="stringliteral">&#39;id&#39;</span> =&gt; <a class="code" href="user-edit_8php.html#af0fcd925f00973e32f7214859dfb3c6b">$user_id</a></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        ) );</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        $x-&gt;send();</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    }</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    $user_object = get_userdata( <a class="code" href="user-edit_8php.html#af0fcd925f00973e32f7214859dfb3c6b">$user_id</a> );</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    $wp_list_table = <a class="code" href="list-table_8php.html#a9623ca4c4d39a43ceb4b356dfde7a195">_get_list_table</a>(<span class="stringliteral">&#39;WP_Users_List_Table&#39;</span>);</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    $role = current( $user_object-&gt;roles );</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    $x = <span class="keyword">new</span> <a class="code" href="class_w_p___ajax___response.html">WP_Ajax_Response</a>( array(</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        <span class="stringliteral">&#39;what&#39;</span> =&gt; <span class="stringliteral">&#39;user&#39;</span>,</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        <span class="stringliteral">&#39;id&#39;</span> =&gt; <a class="code" href="user-edit_8php.html#af0fcd925f00973e32f7214859dfb3c6b">$user_id</a>,</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <span class="stringliteral">&#39;data&#39;</span> =&gt; $wp_list_table-&gt;single_row( $user_object, <span class="stringliteral">&#39;&#39;</span>, $role ),</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        <span class="stringliteral">&#39;supplemental&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;            <span class="stringliteral">&#39;show-link&#39;</span> =&gt; sprintf(</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;                <span class="comment">/* translators: %s: the new user */</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;                <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;User %s added&#39;</span> ),</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;                <span class="stringliteral">&#39;&lt;a href=&quot;#user-&#39;</span> . <a class="code" href="user-edit_8php.html#af0fcd925f00973e32f7214859dfb3c6b">$user_id</a> . <span class="stringliteral">&#39;&quot;&gt;&#39;</span> . $user_object-&gt;user_login . <span class="stringliteral">&#39;&lt;/a&gt;&#39;</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;            ),</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            <span class="stringliteral">&#39;role&#39;</span> =&gt; $role,</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        )</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    ) );</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    $x-&gt;send();</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;}</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment"> * Ajax handler for closed post boxes.</span></div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01358"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#ab0e59dc720f3d4a2362e1689adef0aeb"> 1358</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#ab0e59dc720f3d4a2362e1689adef0aeb">wp_ajax_closed_postboxes</a>() {</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;closedpostboxes&#39;</span>, <span class="stringliteral">&#39;closedpostboxesnonce&#39;</span> );</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    $closed = isset( $_POST[<span class="stringliteral">&#39;closed&#39;</span>] ) ? explode( <span class="charliteral">&#39;,&#39;</span>, $_POST[<span class="stringliteral">&#39;closed&#39;</span>]) : array();</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    $closed = array_filter($closed);</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    $hidden = isset( $_POST[<span class="stringliteral">&#39;hidden&#39;</span>] ) ? explode( <span class="charliteral">&#39;,&#39;</span>, $_POST[<span class="stringliteral">&#39;hidden&#39;</span>]) : array();</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    $hidden = array_filter($hidden);</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <a class="code" href="wp-content_2themes_2twentyeleven_2header_8php.html#a0e2dd2aed1e3361c3aec57e7f7170f73">$page</a> = isset( $_POST[<span class="stringliteral">&#39;page&#39;</span>] ) ? $_POST[<span class="stringliteral">&#39;page&#39;</span>] : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="wp-content_2themes_2twentyeleven_2header_8php.html#a0e2dd2aed1e3361c3aec57e7f7170f73">$page</a> != <a class="code" href="formatting_8php.html#a0ebdd3bb5f66266f5302c24c3537fb50">sanitize_key</a>( <a class="code" href="wp-content_2themes_2twentyeleven_2header_8php.html#a0e2dd2aed1e3361c3aec57e7f7170f73">$page</a> ) )</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> = wp_get_current_user() )</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="keywordflow">if</span> ( is_array($closed) )</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        <a class="code" href="wp-includes_2user_8php.html#a51c82c9257936dea066761047d2dddba">update_user_option</a>(<a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>-&gt;ID, <span class="stringliteral">&quot;closedpostboxes_$page&quot;</span>, $closed, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="keywordflow">if</span> ( is_array($hidden) ) {</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        $hidden = array_diff( $hidden, array(<span class="stringliteral">&#39;submitdiv&#39;</span>, <span class="stringliteral">&#39;linksubmitdiv&#39;</span>, <span class="stringliteral">&#39;manage-menu&#39;</span>, <span class="stringliteral">&#39;create-menu&#39;</span>) ); <span class="comment">// postboxes that are always shown</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        <a class="code" href="wp-includes_2user_8php.html#a51c82c9257936dea066761047d2dddba">update_user_option</a>(<a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>-&gt;ID, <span class="stringliteral">&quot;metaboxhidden_$page&quot;</span>, $hidden, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    }</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;}</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment"> * Ajax handler for hidden columns.</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a578845871d8a21cd76e4b64722a5e070"> 1390</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a578845871d8a21cd76e4b64722a5e070">wp_ajax_hidden_columns</a>() {</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;screen-options-nonce&#39;</span>, <span class="stringliteral">&#39;screenoptionnonce&#39;</span> );</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <a class="code" href="wp-content_2themes_2twentyeleven_2header_8php.html#a0e2dd2aed1e3361c3aec57e7f7170f73">$page</a> = isset( $_POST[<span class="stringliteral">&#39;page&#39;</span>] ) ? $_POST[<span class="stringliteral">&#39;page&#39;</span>] : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="wp-content_2themes_2twentyeleven_2header_8php.html#a0e2dd2aed1e3361c3aec57e7f7170f73">$page</a> != <a class="code" href="formatting_8php.html#a0ebdd3bb5f66266f5302c24c3537fb50">sanitize_key</a>( <a class="code" href="wp-content_2themes_2twentyeleven_2header_8php.html#a0e2dd2aed1e3361c3aec57e7f7170f73">$page</a> ) )</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> = wp_get_current_user() )</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    $hidden = ! empty( $_POST[<span class="stringliteral">&#39;hidden&#39;</span>] ) ? explode( <span class="charliteral">&#39;,&#39;</span>, $_POST[<span class="stringliteral">&#39;hidden&#39;</span>] ) : array();</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <a class="code" href="wp-includes_2user_8php.html#a51c82c9257936dea066761047d2dddba">update_user_option</a>( <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>-&gt;ID, <span class="stringliteral">&quot;manage{$page}columnshidden&quot;</span>, $hidden, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;}</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment"> * Ajax handler for updating whether to display the welcome panel.</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a6ec11f9b2c86f3c0b39e175f1cc4a21a"> 1411</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a6ec11f9b2c86f3c0b39e175f1cc4a21a">wp_ajax_update_welcome_panel</a>() {</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;welcome-panel-nonce&#39;</span>, <span class="stringliteral">&#39;welcomepanelnonce&#39;</span> );</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_theme_options&#39;</span> ) )</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <a class="code" href="wp-includes_2user_8php.html#a414887490e946c7f6459d886b09e0e5a">update_user_meta</a>( <a class="code" href="wp-includes_2user_8php.html#a1359853bbf09cba486c9826f4ab66f7f">get_current_user_id</a>(), <span class="stringliteral">&#39;show_welcome_panel&#39;</span>, empty( $_POST[<span class="stringliteral">&#39;visible&#39;</span>] ) ? 0 : 1 );</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;}</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="comment"> * Ajax handler for retrieving menu meta boxes.</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a646c0471bc2510170f7f0581b8144688"> 1427</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a646c0471bc2510170f7f0581b8144688">wp_ajax_menu_get_metabox</a>() {</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_theme_options&#39;</span> ) )</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    require_once <a class="code" href="load-scripts_8php.html#a495f94983b95273ad267511b2411351f">ABSPATH</a> . <span class="stringliteral">&#39;wp-admin/includes/nav-menu.php&#39;</span>;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="keywordflow">if</span> ( isset( $_POST[<span class="stringliteral">&#39;item-type&#39;</span>] ) &amp;&amp; <span class="stringliteral">&#39;post_type&#39;</span> == $_POST[<span class="stringliteral">&#39;item-type&#39;</span>] ) {</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;        $type = <span class="stringliteral">&#39;posttype&#39;</span>;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;        $callback = <span class="stringliteral">&#39;wp_nav_menu_item_post_type_meta_box&#39;</span>;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        $items = (array) <a class="code" href="wp-includes_2post_8php.html#a608a82c55bc57d0bc9b34888b92212e1">get_post_types</a>( array( <span class="stringliteral">&#39;show_in_nav_menus&#39;</span> =&gt; <span class="keyword">true</span> ), <span class="stringliteral">&#39;object&#39;</span> );</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( isset( $_POST[<span class="stringliteral">&#39;item-type&#39;</span>] ) &amp;&amp; <span class="stringliteral">&#39;taxonomy&#39;</span> == $_POST[<span class="stringliteral">&#39;item-type&#39;</span>] ) {</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        $type = <span class="stringliteral">&#39;taxonomy&#39;</span>;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        $callback = <span class="stringliteral">&#39;wp_nav_menu_item_taxonomy_meta_box&#39;</span>;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        $items = (array) <a class="code" href="wp-includes_2taxonomy_8php.html#a2564bddeb1e0131321dbaf7e14087265">get_taxonomies</a>( array( <span class="stringliteral">&#39;show_ui&#39;</span> =&gt; <span class="keyword">true</span> ), <span class="stringliteral">&#39;object&#39;</span> );</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    }</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="keywordflow">if</span> ( ! empty( $_POST[<span class="stringliteral">&#39;item-object&#39;</span>] ) &amp;&amp; isset( $items[$_POST[<span class="stringliteral">&#39;item-object&#39;</span>]] ) ) {</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        $menus_meta_box_object = $items[ $_POST[<span class="stringliteral">&#39;item-object&#39;</span>] ];</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="comment">        /** This filter is documented in wp-admin/includes/nav-menu.php */</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        $item = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;nav_menu_meta_box_object&#39;</span>, $menus_meta_box_object );</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        ob_start();</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        call_user_func_array($callback, array(</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;            <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>,</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;            array(</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;                <span class="stringliteral">&#39;id&#39;</span> =&gt; <span class="stringliteral">&#39;add-&#39;</span> . $item-&gt;name,</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;                <span class="stringliteral">&#39;title&#39;</span> =&gt; $item-&gt;labels-&gt;name,</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;                <span class="stringliteral">&#39;callback&#39;</span> =&gt; $callback,</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                <span class="stringliteral">&#39;args&#39;</span> =&gt; $item,</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;            )</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        ));</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;        $markup = ob_get_clean();</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        echo <a class="code" href="wordpress_2wp-includes_2functions_8php.html#ae7021fd5ae9e6f91ee8a2258d1e30e33">wp_json_encode</a>(array(</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;            <span class="stringliteral">&#39;replace-id&#39;</span> =&gt; $type . <span class="charliteral">&#39;-&#39;</span> . $item-&gt;name,</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;            <span class="stringliteral">&#39;markup&#39;</span> =&gt; $markup,</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        ));</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    }</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;}</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="comment"> * Ajax handler for internal linking.</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a3244e55e03af2a2b283562dbd2f2bf10"> 1475</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a3244e55e03af2a2b283562dbd2f2bf10">wp_ajax_wp_link_ajax</a>() {</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;internal-linking&#39;</span>, <span class="stringliteral">&#39;_ajax_linking_nonce&#39;</span> );</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    $args = array();</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <span class="keywordflow">if</span> ( isset( $_POST[<span class="stringliteral">&#39;search&#39;</span>] ) )</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        $args[<span class="charliteral">&#39;s&#39;</span>] = <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( $_POST[<span class="stringliteral">&#39;search&#39;</span>] );</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    $args[<span class="stringliteral">&#39;pagenum&#39;</span>] = ! empty( $_POST[<span class="stringliteral">&#39;page&#39;</span>] ) ? <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $_POST[<span class="stringliteral">&#39;page&#39;</span>] ) : 1;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    require(<a class="code" href="load-scripts_8php.html#a495f94983b95273ad267511b2411351f">ABSPATH</a> . <a class="code" href="load-scripts_8php.html#a10daeac5d6abc9109d6a9a8e8d8ba2e2">WPINC</a> . <span class="stringliteral">&#39;/class-wp-editor.php&#39;</span>);</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    $results = <a class="code" href="class___w_p___editors.html#ae4292743784fade94ba344034a45c04c">_WP_Editors::wp_link_query</a>( $args );</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <span class="keywordflow">if</span> ( ! isset( $results ) )</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    echo <a class="code" href="wordpress_2wp-includes_2functions_8php.html#ae7021fd5ae9e6f91ee8a2258d1e30e33">wp_json_encode</a>( $results );</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    echo <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;}</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;<span class="comment"> * Ajax handler for menu locations save.</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#af2188083d94c9d1fe10a857274bec3ef"> 1501</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#af2188083d94c9d1fe10a857274bec3ef">wp_ajax_menu_locations_save</a>() {</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_theme_options&#39;</span> ) )</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;add-menu_item&#39;</span>, <span class="stringliteral">&#39;menu-settings-column-nonce&#39;</span> );</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="keywordflow">if</span> ( ! isset( $_POST[<span class="stringliteral">&#39;menu-locations&#39;</span>] ) )</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <a class="code" href="wp-includes_2theme_8php.html#a4d6498454d40a2c245452c1ba2b4ef59">set_theme_mod</a>( <span class="stringliteral">&#39;nav_menu_locations&#39;</span>, array_map( <span class="stringliteral">&#39;absint&#39;</span>, $_POST[<span class="stringliteral">&#39;menu-locations&#39;</span>] ) );</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;}</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;<span class="comment"> * Ajax handler for saving the meta box order.</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a5ef59f22feb8d70a3d998f57931a4053"> 1516</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a5ef59f22feb8d70a3d998f57931a4053">wp_ajax_meta_box_order</a>() {</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;meta-box-order&#39;</span> );</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    $order = isset( $_POST[<span class="stringliteral">&#39;order&#39;</span>] ) ? (array) $_POST[<span class="stringliteral">&#39;order&#39;</span>] : <span class="keyword">false</span>;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    $page_columns = isset( $_POST[<span class="stringliteral">&#39;page_columns&#39;</span>] ) ? $_POST[<span class="stringliteral">&#39;page_columns&#39;</span>] : <span class="stringliteral">&#39;auto&#39;</span>;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordflow">if</span> ( $page_columns != <span class="stringliteral">&#39;auto&#39;</span> )</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        $page_columns = (int) $page_columns;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <a class="code" href="wp-content_2themes_2twentyeleven_2header_8php.html#a0e2dd2aed1e3361c3aec57e7f7170f73">$page</a> = isset( $_POST[<span class="stringliteral">&#39;page&#39;</span>] ) ? $_POST[<span class="stringliteral">&#39;page&#39;</span>] : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="wp-content_2themes_2twentyeleven_2header_8php.html#a0e2dd2aed1e3361c3aec57e7f7170f73">$page</a> != <a class="code" href="formatting_8php.html#a0ebdd3bb5f66266f5302c24c3537fb50">sanitize_key</a>( <a class="code" href="wp-content_2themes_2twentyeleven_2header_8php.html#a0e2dd2aed1e3361c3aec57e7f7170f73">$page</a> ) )</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> = wp_get_current_user() )</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    <span class="keywordflow">if</span> ( $order )</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        <a class="code" href="wp-includes_2user_8php.html#a51c82c9257936dea066761047d2dddba">update_user_option</a>(<a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>-&gt;ID, <span class="stringliteral">&quot;meta-box-order_$page&quot;</span>, $order, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <span class="keywordflow">if</span> ( $page_columns )</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        <a class="code" href="wp-includes_2user_8php.html#a51c82c9257936dea066761047d2dddba">update_user_option</a>(<a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>-&gt;ID, <span class="stringliteral">&quot;screen_layout_$page&quot;</span>, $page_columns, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;}</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;<span class="comment"> * Ajax handler for menu quick searching.</span></div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01546"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a4b16794f0eb389704c55cb6b9a7ffadf"> 1546</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a4b16794f0eb389704c55cb6b9a7ffadf">wp_ajax_menu_quick_search</a>() {</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_theme_options&#39;</span> ) )</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    require_once <a class="code" href="load-scripts_8php.html#a495f94983b95273ad267511b2411351f">ABSPATH</a> . <span class="stringliteral">&#39;wp-admin/includes/nav-menu.php&#39;</span>;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    <a class="code" href="wp-admin_2includes_2nav-menu_8php.html#af0c11c54f540ef25063389c2b0f19256">_wp_ajax_menu_quick_search</a>( $_POST );</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;}</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;<span class="comment"> * Ajax handler to retrieve a permalink.</span></div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#ab5ced6af2767bd4586c00b4c61d2061e"> 1562</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#ab5ced6af2767bd4586c00b4c61d2061e">wp_ajax_get_permalink</a>() {</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;getpermalink&#39;</span>, <span class="stringliteral">&#39;getpermalinknonce&#39;</span> );</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> = isset($_POST[<span class="stringliteral">&#39;post_id&#39;</span>])? intval($_POST[<span class="stringliteral">&#39;post_id&#39;</span>]) : 0;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="link-template_8php.html#a7c79474868c42888bb84a7be39048dad">get_preview_post_link</a>( <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> ) );</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;}</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;<span class="comment"> * Ajax handler to retrieve a sample permalink.</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a237dc496b5169a5a37e48e3409238c61"> 1573</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a237dc496b5169a5a37e48e3409238c61">wp_ajax_sample_permalink</a>() {</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;samplepermalink&#39;</span>, <span class="stringliteral">&#39;samplepermalinknonce&#39;</span> );</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> = isset($_POST[<span class="stringliteral">&#39;post_id&#39;</span>])? intval($_POST[<span class="stringliteral">&#39;post_id&#39;</span>]) : 0;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <a class="code" href="post__image_8php.html#ada57e7bb7c152edad18fe2f166188691">$title</a> = isset($_POST[<span class="stringliteral">&#39;new_title&#39;</span>])? $_POST[<span class="stringliteral">&#39;new_title&#39;</span>] : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    $slug = isset($_POST[<span class="stringliteral">&#39;new_slug&#39;</span>])? $_POST[<span class="stringliteral">&#39;new_slug&#39;</span>] : <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="wp-admin_2includes_2post_8php.html#a91b35b20a950ab0c939b36183a9047e2">get_sample_permalink_html</a>( <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a>, <a class="code" href="post__image_8php.html#ada57e7bb7c152edad18fe2f166188691">$title</a>, $slug ) );</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;}</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;<span class="comment"> * Ajax handler for Quick Edit saving a post from a list table.</span></div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;<span class="comment"> * @global WP_List_Table $wp_list_table</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01588"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#aacc9836c7634d19e85127866e165d2f4"> 1588</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#aacc9836c7634d19e85127866e165d2f4">wp_ajax_inline_save</a>() {</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    global <a class="code" href="edit-comments_8php.html#a0abf38733b389a685a48be096cd47fbc">$wp_list_table</a>, <a class="code" href="wordpress_2wp-admin_2upload_8php.html#a3aaf40baac36e278c7d7c9139df1750c">$mode</a>;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;inlineeditnonce&#39;</span>, <span class="stringliteral">&#39;_inline_edit&#39;</span> );</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="keywordflow">if</span> ( ! isset($_POST[<span class="stringliteral">&#39;post_ID&#39;</span>]) || ! ( <a class="code" href="edit-form-advanced_8php.html#a73f2ab6780b6a35ccc55a7693f79b7a8">$post_ID</a> = (<span class="keywordtype">int</span>) $_POST[<span class="stringliteral">&#39;post_ID&#39;</span>] ) )</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;page&#39;</span> == $_POST[<span class="stringliteral">&#39;post_type&#39;</span>] ) {</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_page&#39;</span>, <a class="code" href="edit-form-advanced_8php.html#a73f2ab6780b6a35ccc55a7693f79b7a8">$post_ID</a> ) )</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;You are not allowed to edit this page.&#39;</span> ) );</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_post&#39;</span>, <a class="code" href="edit-form-advanced_8php.html#a73f2ab6780b6a35ccc55a7693f79b7a8">$post_ID</a> ) )</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;You are not allowed to edit this post.&#39;</span> ) );</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    }</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <span class="keywordflow">if</span> ( $last = <a class="code" href="wp-admin_2includes_2post_8php.html#a97ebb7325ac6a2fbacebe0f055e66756">wp_check_post_lock</a>( <a class="code" href="edit-form-advanced_8php.html#a73f2ab6780b6a35ccc55a7693f79b7a8">$post_ID</a> ) ) {</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        $last_user = get_userdata( $last );</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        $last_user_name = $last_user ? $last_user-&gt;display_name : <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Someone&#39;</span> );</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        printf( $_POST[<span class="stringliteral">&#39;post_type&#39;</span>] == <span class="stringliteral">&#39;page&#39;</span> ? <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Saving is disabled: %s is currently editing this page.&#39;</span> ) : <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Saving is disabled: %s is currently editing this post.&#39;</span> ),    <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $last_user_name ) );</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    }</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    $data = &amp;$_POST;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( <a class="code" href="edit-form-advanced_8php.html#a73f2ab6780b6a35ccc55a7693f79b7a8">$post_ID</a>, <a class="code" href="wp-db_8php.html#abe96a896fb17a28640696071972d1405">ARRAY_A</a> );</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <span class="comment">// Since it&#39;s coming from the database.</span></div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> = <a class="code" href="formatting_8php.html#aa5eab0fce35c72689998f801b8fc7dfe">wp_slash</a>(<a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>);</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    $data[<span class="stringliteral">&#39;content&#39;</span>] = <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;post_content&#39;</span>];</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    $data[<span class="stringliteral">&#39;excerpt&#39;</span>] = <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;post_excerpt&#39;</span>];</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <span class="comment">// Rename.</span></div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    $data[<span class="stringliteral">&#39;user_ID&#39;</span>] = <a class="code" href="wp-includes_2user_8php.html#a1359853bbf09cba486c9826f4ab66f7f">get_current_user_id</a>();</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <span class="keywordflow">if</span> ( isset($data[<span class="stringliteral">&#39;post_parent&#39;</span>]) )</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        $data[<span class="stringliteral">&#39;parent_id&#39;</span>] = $data[<span class="stringliteral">&#39;post_parent&#39;</span>];</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="comment">// Status.</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <span class="keywordflow">if</span> ( isset( $data[<span class="stringliteral">&#39;keep_private&#39;</span>] ) &amp;&amp; <span class="stringliteral">&#39;private&#39;</span> == $data[<span class="stringliteral">&#39;keep_private&#39;</span>] ) {</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        $data[<span class="stringliteral">&#39;visibility&#39;</span>]  = <span class="stringliteral">&#39;private&#39;</span>;</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        $data[<span class="stringliteral">&#39;post_status&#39;</span>] = <span class="stringliteral">&#39;private&#39;</span>;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;        $data[<span class="stringliteral">&#39;post_status&#39;</span>] = $data[<span class="stringliteral">&#39;_status&#39;</span>];</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    }</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="keywordflow">if</span> ( empty($data[<span class="stringliteral">&#39;comment_status&#39;</span>]) )</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        $data[<span class="stringliteral">&#39;comment_status&#39;</span>] = <span class="stringliteral">&#39;closed&#39;</span>;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="keywordflow">if</span> ( empty($data[<span class="stringliteral">&#39;ping_status&#39;</span>]) )</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;        $data[<span class="stringliteral">&#39;ping_status&#39;</span>] = <span class="stringliteral">&#39;closed&#39;</span>;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <span class="comment">// Exclude terms from taxonomies that are not supposed to appear in Quick Edit.</span></div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="keywordflow">if</span> ( ! empty( $data[<span class="stringliteral">&#39;tax_input&#39;</span>] ) ) {</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;        <span class="keywordflow">foreach</span> ( $data[<span class="stringliteral">&#39;tax_input&#39;</span>] as $taxonomy =&gt; $terms ) {</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;            $tax_object = <a class="code" href="wp-includes_2taxonomy_8php.html#aa73d2fdc1c00f823e31ca7e90f904a5e">get_taxonomy</a>( $taxonomy );<span class="comment"></span></div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;<span class="comment">            /** This filter is documented in wp-admin/includes/class-wp-posts-list-table.php */</span></div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;            <span class="keywordflow">if</span> ( ! <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;quick_edit_show_taxonomy&#39;</span>, $tax_object-&gt;show_in_quick_edit, $taxonomy, <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;post_type&#39;</span>] ) ) {</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;                unset( $data[<span class="stringliteral">&#39;tax_input&#39;</span>][ $taxonomy ] );</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;            }</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        }</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    }</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <span class="comment">// Hack: wp_unique_post_slug() doesn&#39;t work for drafts, so we will fake that our post is published.</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <span class="keywordflow">if</span> ( ! empty( $data[<span class="stringliteral">&#39;post_name&#39;</span>] ) &amp;&amp; in_array( <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;post_status&#39;</span>], array( <span class="stringliteral">&#39;draft&#39;</span>, <span class="stringliteral">&#39;pending&#39;</span> ) ) ) {</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;        <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;post_status&#39;</span>] = <span class="stringliteral">&#39;publish&#39;</span>;</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;        $data[<span class="stringliteral">&#39;post_name&#39;</span>] = <a class="code" href="wp-includes_2post_8php.html#a8e6df85dac0b77a87b3bd9b26e82fe72">wp_unique_post_slug</a>( $data[<span class="stringliteral">&#39;post_name&#39;</span>], <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;ID&#39;</span>], <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;post_status&#39;</span>], <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;post_type&#39;</span>], <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;post_parent&#39;</span>] );</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    }</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <span class="comment">// Update the post.</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <a class="code" href="wp-admin_2includes_2post_8php.html#a40bd171c0346a1ee42b164a8d9efab30">edit_post</a>();</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    $wp_list_table = <a class="code" href="list-table_8php.html#a9623ca4c4d39a43ceb4b356dfde7a195">_get_list_table</a>( <span class="stringliteral">&#39;WP_Posts_List_Table&#39;</span>, array( <span class="stringliteral">&#39;screen&#39;</span> =&gt; $_POST[<span class="stringliteral">&#39;screen&#39;</span>] ) );</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    $mode = $_POST[<span class="stringliteral">&#39;post_view&#39;</span>] === <span class="stringliteral">&#39;excerpt&#39;</span> ? <span class="stringliteral">&#39;excerpt&#39;</span> : <span class="stringliteral">&#39;list&#39;</span>;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    $level = 0;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    $request_post = array( <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( $_POST[<span class="stringliteral">&#39;post_ID&#39;</span>] ) );</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    $parent = $request_post[0]-&gt;post_parent;</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <span class="keywordflow">while</span> ( $parent &gt; 0 ) {</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        $parent_post = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( $parent );</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;        $parent = $parent_post-&gt;post_parent;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        $level++;</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    }</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    $wp_list_table-&gt;display_rows( array( <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( $_POST[<span class="stringliteral">&#39;post_ID&#39;</span>] ) ), $level );</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;}</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;<span class="comment"> * Ajax handler for quick edit saving for a term.</span></div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;<span class="comment"> * @global WP_List_Table $wp_list_table</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#ab023bcb2055f950c1ed7aa272908b6f0"> 1686</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#ab023bcb2055f950c1ed7aa272908b6f0">wp_ajax_inline_save_tax</a>() {</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    global <a class="code" href="edit-comments_8php.html#a0abf38733b389a685a48be096cd47fbc">$wp_list_table</a>;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;taxinlineeditnonce&#39;</span>, <span class="stringliteral">&#39;_inline_edit&#39;</span> );</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    $taxonomy = <a class="code" href="formatting_8php.html#a0ebdd3bb5f66266f5302c24c3537fb50">sanitize_key</a>( $_POST[<span class="stringliteral">&#39;taxonomy&#39;</span>] );</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    <a class="code" href="edit-tags_8php.html#a889a2afc68d4bc472eeed20fd267a583">$tax</a> = <a class="code" href="wp-includes_2taxonomy_8php.html#aa73d2fdc1c00f823e31ca7e90f904a5e">get_taxonomy</a>( $taxonomy );</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="edit-tags_8php.html#a889a2afc68d4bc472eeed20fd267a583">$tax</a> )</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <a class="code" href="edit-tags_8php.html#a889a2afc68d4bc472eeed20fd267a583">$tax</a>-&gt;cap-&gt;edit_terms ) )</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    $wp_list_table = <a class="code" href="list-table_8php.html#a9623ca4c4d39a43ceb4b356dfde7a195">_get_list_table</a>( <span class="stringliteral">&#39;WP_Terms_List_Table&#39;</span>, array( <span class="stringliteral">&#39;screen&#39;</span> =&gt; <span class="stringliteral">&#39;edit-&#39;</span> . $taxonomy ) );</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    <span class="keywordflow">if</span> ( ! isset($_POST[<span class="stringliteral">&#39;tax_ID&#39;</span>]) || ! ( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> = (<span class="keywordtype">int</span>) $_POST[<span class="stringliteral">&#39;tax_ID&#39;</span>] ) )</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    $tag = <a class="code" href="wp-includes_2taxonomy_8php.html#a99b6f0c73dd9c512b520be29fa94df3e">get_term</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, $taxonomy );</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    $_POST[<span class="stringliteral">&#39;description&#39;</span>] = $tag-&gt;description;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <a class="code" href="my-sites_8php.html#a57d6fd1200be8dd145a9b57549797d37">$updated</a> = <a class="code" href="wp-includes_2taxonomy_8php.html#a3ae2e65e7c8e1a377a73f52e680b9346">wp_update_term</a>(<a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, $taxonomy, $_POST);</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="my-sites_8php.html#a57d6fd1200be8dd145a9b57549797d37">$updated</a> &amp;&amp; !<a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>(<a class="code" href="my-sites_8php.html#a57d6fd1200be8dd145a9b57549797d37">$updated</a>) ) {</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        $tag = <a class="code" href="wp-includes_2taxonomy_8php.html#a99b6f0c73dd9c512b520be29fa94df3e">get_term</a>( <a class="code" href="my-sites_8php.html#a57d6fd1200be8dd145a9b57549797d37">$updated</a>[<span class="stringliteral">&#39;term_id&#39;</span>], $taxonomy );</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        <span class="keywordflow">if</span> ( !$tag || <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $tag ) ) {</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>($tag) &amp;&amp; $tag-&gt;get_error_message() )</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;                <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( $tag-&gt;get_error_message() );</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Item not updated.&#39;</span> ) );</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        }</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>(<a class="code" href="my-sites_8php.html#a57d6fd1200be8dd145a9b57549797d37">$updated</a>) &amp;&amp; <a class="code" href="my-sites_8php.html#a57d6fd1200be8dd145a9b57549797d37">$updated</a>-&gt;get_error_message() )</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="my-sites_8php.html#a57d6fd1200be8dd145a9b57549797d37">$updated</a>-&gt;get_error_message() );</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Item not updated.&#39;</span> ) );</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    }</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    $level = 0;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    $parent = $tag-&gt;parent;</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <span class="keywordflow">while</span> ( $parent &gt; 0 ) {</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        $parent_tag = <a class="code" href="wp-includes_2taxonomy_8php.html#a99b6f0c73dd9c512b520be29fa94df3e">get_term</a>( $parent, $taxonomy );</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        $parent = $parent_tag-&gt;parent;</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        $level++;</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    }</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    $wp_list_table-&gt;single_row( $tag, $level );</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;}</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;<span class="comment"> * Ajax handler for querying posts for the Find Posts modal.</span></div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<span class="comment"> * @see window.findPosts</span></div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a821d28653ccedd8af6476382165bd3d8"> 1738</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a821d28653ccedd8af6476382165bd3d8">wp_ajax_find_posts</a>() {</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;find-posts&#39;</span> );</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    $post_types = <a class="code" href="wp-includes_2post_8php.html#a608a82c55bc57d0bc9b34888b92212e1">get_post_types</a>( array( <span class="stringliteral">&#39;public&#39;</span> =&gt; <span class="keyword">true</span> ), <span class="stringliteral">&#39;objects&#39;</span> );</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    unset( $post_types[<span class="stringliteral">&#39;attachment&#39;</span>] );</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a> = <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( $_POST[<span class="stringliteral">&#39;ps&#39;</span>] );</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    $args = array(</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;        <span class="stringliteral">&#39;post_type&#39;</span> =&gt; array_keys( $post_types ),</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;        <span class="stringliteral">&#39;post_status&#39;</span> =&gt; <span class="stringliteral">&#39;any&#39;</span>,</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;        <span class="stringliteral">&#39;posts_per_page&#39;</span> =&gt; 50,</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    );</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;&#39;</span> !== <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a> )</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;        $args[<span class="charliteral">&#39;s&#39;</span>] = <a class="code" href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a>;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    $posts = <a class="code" href="wp-includes_2post_8php.html#a3ece4f854d9d095786e99ec6eaff50fc">get_posts</a>( $args );</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <span class="keywordflow">if</span> ( ! $posts ) {</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;No items found.&#39;</span> ) );</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    }</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    $html = <span class="stringliteral">&#39;&lt;table class=&quot;widefat&quot;&gt;&lt;thead&gt;&lt;tr&gt;&lt;th class=&quot;found-radio&quot;&gt;&lt;br /&gt;&lt;/th&gt;&lt;th&gt;&#39;</span>.__(<span class="stringliteral">&#39;Title&#39;</span>).<span class="stringliteral">&#39;&lt;/th&gt;&lt;th class=&quot;no-break&quot;&gt;&#39;</span>.<a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;Type&#39;</span>).<span class="stringliteral">&#39;&lt;/th&gt;&lt;th class=&quot;no-break&quot;&gt;&#39;</span>.<a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;Date&#39;</span>).<span class="stringliteral">&#39;&lt;/th&gt;&lt;th class=&quot;no-break&quot;&gt;&#39;</span>.<a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;Status&#39;</span>).<span class="stringliteral">&#39;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&#39;</span>;</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <a class="code" href="table-body_8php.html#a6d5e116b218efb8fa2aa69b75ad2b0b5">$alt</a> = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <span class="keywordflow">foreach</span> ( $posts as <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> ) {</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;        <a class="code" href="post__image_8php.html#ada57e7bb7c152edad18fe2f166188691">$title</a> = trim( $post-&gt;post_title ) ? $post-&gt;post_title : <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;(no title)&#39;</span> );</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;        <a class="code" href="table-body_8php.html#a6d5e116b218efb8fa2aa69b75ad2b0b5">$alt</a> = ( <span class="stringliteral">&#39;alternate&#39;</span> == <a class="code" href="table-body_8php.html#a6d5e116b218efb8fa2aa69b75ad2b0b5">$alt</a> ) ? <span class="stringliteral">&#39;&#39;</span> : <span class="stringliteral">&#39;alternate&#39;</span>;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        <span class="keywordflow">switch</span> ( $post-&gt;post_status ) {</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;publish&#39;</span> :</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;private&#39;</span> :</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;                $stat = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;Published&#39;</span>);</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;future&#39;</span> :</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;                $stat = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;Scheduled&#39;</span>);</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;pending&#39;</span> :</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                $stat = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;Pending Review&#39;</span>);</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;draft&#39;</span> :</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;                $stat = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;Draft&#39;</span>);</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;        }</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;0000-00-00 00:00:00&#39;</span> == $post-&gt;post_date ) {</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;            $time = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;            <span class="comment">/* translators: date format in table columns, see http://php.net/date */</span></div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;            $time = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#af7ccbb4fe49b4877219cbdbddecd7f77">mysql2date</a>(<a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;Y/m/d&#39;</span>), $post-&gt;post_date);</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        }</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        $html .= <span class="stringliteral">&#39;&lt;tr class=&quot;&#39;</span> . trim( <span class="stringliteral">&#39;found-posts &#39;</span> . <a class="code" href="table-body_8php.html#a6d5e116b218efb8fa2aa69b75ad2b0b5">$alt</a> ) . <span class="stringliteral">&#39;&quot;&gt;&lt;td class=&quot;found-radio&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;found-&#39;</span>.$post-&gt;ID.<span class="stringliteral">&#39;&quot; name=&quot;found_post_id&quot; value=&quot;&#39;</span> . <a class="code" href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a>($post-&gt;ID) . <span class="stringliteral">&#39;&quot;&gt;&lt;/td&gt;&#39;</span>;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        $html .= <span class="stringliteral">&#39;&lt;td&gt;&lt;label for=&quot;found-&#39;</span>.$post-&gt;ID.<span class="stringliteral">&#39;&quot;&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( <a class="code" href="post__image_8php.html#ada57e7bb7c152edad18fe2f166188691">$title</a> ) . <span class="stringliteral">&#39;&lt;/label&gt;&lt;/td&gt;&lt;td class=&quot;no-break&quot;&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $post_types[$post-&gt;post_type]-&gt;labels-&gt;singular_name ) . <span class="stringliteral">&#39;&lt;/td&gt;&lt;td class=&quot;no-break&quot;&gt;&#39;</span>.esc_html( $time ) . <span class="stringliteral">&#39;&lt;/td&gt;&lt;td class=&quot;no-break&quot;&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $stat ). <span class="stringliteral">&#39; &lt;/td&gt;&lt;/tr&gt;&#39;</span> . <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    }</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    $html .= <span class="stringliteral">&#39;&lt;/tbody&gt;&lt;/table&gt;&#39;</span>;</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( $html );</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;}</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;<span class="comment"> * Ajax handler for saving the widgets order.</span></div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01802"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#af3a0eb496bf2de5db76f8dce4258f52e"> 1802</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#af3a0eb496bf2de5db76f8dce4258f52e">wp_ajax_widgets_order</a>() {</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;save-sidebar-widgets&#39;</span>, <span class="stringliteral">&#39;savewidgets&#39;</span> );</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>(<span class="stringliteral">&#39;edit_theme_options&#39;</span>) )</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    unset( $_POST[<span class="stringliteral">&#39;savewidgets&#39;</span>], $_POST[<span class="stringliteral">&#39;action&#39;</span>] );</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    <span class="comment">// Save widgets order for all sidebars.</span></div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <span class="keywordflow">if</span> ( is_array($_POST[<span class="stringliteral">&#39;sidebars&#39;</span>]) ) {</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;        $sidebars = array();</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        <span class="keywordflow">foreach</span> ( $_POST[<span class="stringliteral">&#39;sidebars&#39;</span>] as $key =&gt; $val ) {</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;            $sb = array();</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;            <span class="keywordflow">if</span> ( !empty($val) ) {</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;                $val = explode(<span class="charliteral">&#39;,&#39;</span>, $val);</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;                <span class="keywordflow">foreach</span> ( $val as $k =&gt; $v ) {</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;                    <span class="keywordflow">if</span> ( strpos($v, <span class="stringliteral">&#39;widget-&#39;</span>) === <span class="keyword">false</span> )</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;                    $sb[$k] = substr($v, strpos($v, <span class="charliteral">&#39;_&#39;</span>) + 1);</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;                }</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;            }</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;            $sidebars[$key] = $sb;</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        }</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        <a class="code" href="wp-includes_2widgets_8php.html#a686371d9e504afdb48e88618d4b7a872">wp_set_sidebars_widgets</a>($sidebars);</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    }</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;}</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;<span class="comment"> * Ajax handler for saving a widget.</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;<span class="comment"> * @global array $wp_registered_widgets</span></div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;<span class="comment"> * @global array $wp_registered_widget_controls</span></div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;<span class="comment"> * @global array $wp_registered_widget_updates</span></div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01842"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a2a4708645625d318d0604408c69e0afb"> 1842</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a2a4708645625d318d0604408c69e0afb">wp_ajax_save_widget</a>() {</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    global <a class="code" href="wp-includes_2widgets_8php.html#a24c1fc3a7e94da5ac9b3846b6d93f2a7">$wp_registered_widgets</a>, <a class="code" href="wp-includes_2widgets_8php.html#a9a26db7ecc0850fcb9879bc5b0a6fc55">$wp_registered_widget_controls</a>, <a class="code" href="wp-includes_2widgets_8php.html#a5c0ec75730a7de92c591102dfec210cc">$wp_registered_widget_updates</a>;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;save-sidebar-widgets&#39;</span>, <span class="stringliteral">&#39;savewidgets&#39;</span> );</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>(<span class="stringliteral">&#39;edit_theme_options&#39;</span>) || !isset($_POST[<span class="stringliteral">&#39;id_base&#39;</span>]) )</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    unset( $_POST[<span class="stringliteral">&#39;savewidgets&#39;</span>], $_POST[<span class="stringliteral">&#39;action&#39;</span>] );</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;<span class="comment">     * Fires early when editing the widgets displayed in sidebars.</span></div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;<span class="comment">     * @since 2.8.0</span></div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;load-widgets.php&#39;</span> );</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;<span class="comment">     * Fires early when editing the widgets displayed in sidebars.</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;<span class="comment">     * @since 2.8.0</span></div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;widgets.php&#39;</span> );</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;<span class="comment">    /** This action is documented in wp-admin/widgets.php */</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;sidebar_admin_setup&#39;</span> );</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    $id_base = $_POST[<span class="stringliteral">&#39;id_base&#39;</span>];</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    $widget_id = $_POST[<span class="stringliteral">&#39;widget-id&#39;</span>];</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    $sidebar_id = $_POST[<span class="stringliteral">&#39;sidebar&#39;</span>];</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    $multi_number = !empty($_POST[<span class="stringliteral">&#39;multi_number&#39;</span>]) ? (int) $_POST[<span class="stringliteral">&#39;multi_number&#39;</span>] : 0;</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    $settings = isset($_POST[<span class="stringliteral">&#39;widget-&#39;</span> . $id_base]) &amp;&amp; is_array($_POST[<span class="stringliteral">&#39;widget-&#39;</span> . $id_base]) ? $_POST[<span class="stringliteral">&#39;widget-&#39;</span> . $id_base] : <span class="keyword">false</span>;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    $error = <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;An error has occurred. Please reload the page and try again.&#39;</span>) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>;</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    $sidebars = <a class="code" href="wp-includes_2widgets_8php.html#a01164ca96ab098d47bd235084bf3a4f6">wp_get_sidebars_widgets</a>();</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    $sidebar = isset($sidebars[$sidebar_id]) ? $sidebars[$sidebar_id] : array();</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    <span class="comment">// Delete.</span></div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    <span class="keywordflow">if</span> ( isset($_POST[<span class="stringliteral">&#39;delete_widget&#39;</span>]) &amp;&amp; $_POST[<span class="stringliteral">&#39;delete_widget&#39;</span>] ) {</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;        <span class="keywordflow">if</span> ( !isset($wp_registered_widgets[$widget_id]) )</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( $error );</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;        $sidebar = array_diff( $sidebar, array($widget_id) );</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;        $_POST = array(<span class="stringliteral">&#39;sidebar&#39;</span> =&gt; $sidebar_id, <span class="stringliteral">&#39;widget-&#39;</span> . $id_base =&gt; array(), <span class="stringliteral">&#39;the-widget-id&#39;</span> =&gt; $widget_id, <span class="stringliteral">&#39;delete_widget&#39;</span> =&gt; <span class="charliteral">&#39;1&#39;</span>);</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;<span class="comment">        /** This action is documented in wp-admin/widgets.php */</span></div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;        <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;delete_widget&#39;</span>, $widget_id, $sidebar_id, $id_base );</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( $settings &amp;&amp; preg_match( <span class="stringliteral">&#39;/__i__|%i%/&#39;</span>, key($settings) ) ) {</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;        <span class="keywordflow">if</span> ( !$multi_number )</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( $error );</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;        $_POST[ <span class="stringliteral">&#39;widget-&#39;</span> . $id_base ] = array( $multi_number =&gt; reset( $settings ) );</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        $widget_id = $id_base . <span class="charliteral">&#39;-&#39;</span> . $multi_number;</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;        $sidebar[] = $widget_id;</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    }</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    $_POST[<span class="stringliteral">&#39;widget-id&#39;</span>] = $sidebar;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    <span class="keywordflow">foreach</span> ( (array) $wp_registered_widget_updates as <a class="code" href="search-field-date__range_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a> =&gt; $control ) {</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="search-field-date__range_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a> == $id_base ) {</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;            <span class="keywordflow">if</span> ( !is_callable( $control[<span class="stringliteral">&#39;callback&#39;</span>] ) )</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;            ob_start();</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;                call_user_func_array( $control[<span class="stringliteral">&#39;callback&#39;</span>], $control[<span class="stringliteral">&#39;params&#39;</span>] );</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;            ob_end_clean();</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;        }</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    }</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    <span class="keywordflow">if</span> ( isset($_POST[<span class="stringliteral">&#39;delete_widget&#39;</span>]) &amp;&amp; $_POST[<span class="stringliteral">&#39;delete_widget&#39;</span>] ) {</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;        $sidebars[$sidebar_id] = $sidebar;</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;        <a class="code" href="wp-includes_2widgets_8php.html#a686371d9e504afdb48e88618d4b7a872">wp_set_sidebars_widgets</a>($sidebars);</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;        echo <span class="stringliteral">&quot;deleted:$widget_id&quot;</span>;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    }</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <span class="keywordflow">if</span> ( !empty($_POST[<span class="stringliteral">&#39;add_new&#39;</span>]) )</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> = $wp_registered_widget_controls[$widget_id] )</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;        call_user_func_array( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;callback&#39;</span>], <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;params&#39;</span>] );</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;}</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;<span class="comment"> * Ajax handler for saving a widget.</span></div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;<span class="comment"> * @since 3.9.0</span></div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;<span class="comment"> * @global WP_Customize_Manager $wp_customize</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01937"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a140833250dbef5a389fb822a3deda305"> 1937</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a140833250dbef5a389fb822a3deda305">wp_ajax_update_widget</a>() {</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    global <a class="code" href="customize_8php.html#ab00f88198c31570dc0a02c6588f39fc5">$wp_customize</a>;</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    $wp_customize-&gt;widgets-&gt;wp_ajax_update_widget();</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;}</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;<span class="comment"> * Ajax handler for removing inactive widgets.</span></div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;<span class="comment"> * @since 4.4.0</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01947"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#ad64bc3494eea89791c0c485812d6c6c3"> 1947</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#ad64bc3494eea89791c0c485812d6c6c3">wp_ajax_delete_inactive_widgets</a>() {</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;remove-inactive-widgets&#39;</span>, <span class="stringliteral">&#39;removeinactivewidgets&#39;</span> );</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_theme_options&#39;</span> ) ) {</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    }</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    unset( $_POST[<span class="stringliteral">&#39;removeinactivewidgets&#39;</span>], $_POST[<span class="stringliteral">&#39;action&#39;</span>] );</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;load-widgets.php&#39;</span> );</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;widgets.php&#39;</span> );</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;sidebar_admin_setup&#39;</span> );</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    <a class="code" href="wp-admin_2widgets_8php.html#a233259fe7379e46b62e0a6d786f8f921">$sidebars_widgets</a> = <a class="code" href="wp-includes_2widgets_8php.html#a01164ca96ab098d47bd235084bf3a4f6">wp_get_sidebars_widgets</a>();</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    <span class="keywordflow">foreach</span> ( <a class="code" href="wp-admin_2widgets_8php.html#a233259fe7379e46b62e0a6d786f8f921">$sidebars_widgets</a>[<span class="stringliteral">&#39;wp_inactive_widgets&#39;</span>] as $key =&gt; $widget_id ) {</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;        $pieces = explode( <span class="charliteral">&#39;-&#39;</span>, $widget_id );</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;        $multi_number = array_pop( $pieces );</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        $id_base = implode( <span class="charliteral">&#39;-&#39;</span>, $pieces );</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;        $widget = <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;widget_&#39;</span> . $id_base );</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        unset( $widget[$multi_number] );</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;        <a class="code" href="option_8php.html#a21f59332d7b293dca17bccd56c8c00eb">update_option</a>( <span class="stringliteral">&#39;widget_&#39;</span> . $id_base, $widget );</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;        unset( <a class="code" href="wp-admin_2widgets_8php.html#a233259fe7379e46b62e0a6d786f8f921">$sidebars_widgets</a>[<span class="stringliteral">&#39;wp_inactive_widgets&#39;</span>][$key] );</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    }</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    <a class="code" href="wp-includes_2widgets_8php.html#a686371d9e504afdb48e88618d4b7a872">wp_set_sidebars_widgets</a>( <a class="code" href="wp-admin_2widgets_8php.html#a233259fe7379e46b62e0a6d786f8f921">$sidebars_widgets</a> );</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;}</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;<span class="comment"> * Ajax handler for uploading attachments</span></div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;<span class="comment"> * @since 3.3.0</span></div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01982"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a0b827b3a380fc33dc655ce4c1e8c2c9f"> 1982</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a0b827b3a380fc33dc655ce4c1e8c2c9f">wp_ajax_upload_attachment</a>() {</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;media-form&#39;</span> );</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;<span class="comment">     * This function does not use wp_send_json_success() / wp_send_json_error()</span></div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;<span class="comment">     * as the html4 Plupload handler requires a text/html content-type for older IE.</span></div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;<span class="comment">     * See https://core.trac.wordpress.org/ticket/31037</span></div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;upload_files&#39;</span> ) ) {</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        echo <a class="code" href="wordpress_2wp-includes_2functions_8php.html#ae7021fd5ae9e6f91ee8a2258d1e30e33">wp_json_encode</a>( array(</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;            <span class="stringliteral">&#39;success&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;            <span class="stringliteral">&#39;data&#39;</span>    =&gt; array(</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;                <span class="stringliteral">&#39;message&#39;</span>  =&gt; <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;You do not have permission to upload files.&#39;</span> ),</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;                <span class="stringliteral">&#39;filename&#39;</span> =&gt; $_FILES[<span class="stringliteral">&#39;async-upload&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>],</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;            )</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;        ) );</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    }</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    <span class="keywordflow">if</span> ( isset( $_REQUEST[<span class="stringliteral">&#39;post_id&#39;</span>] ) ) {</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;        <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> = $_REQUEST[<span class="stringliteral">&#39;post_id&#39;</span>];</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_post&#39;</span>, <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> ) ) {</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;            echo <a class="code" href="wordpress_2wp-includes_2functions_8php.html#ae7021fd5ae9e6f91ee8a2258d1e30e33">wp_json_encode</a>( array(</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;                <span class="stringliteral">&#39;success&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;                <span class="stringliteral">&#39;data&#39;</span>    =&gt; array(</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;                    <span class="stringliteral">&#39;message&#39;</span>  =&gt; <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&quot;You don&#39;t have permission to attach files to this post.&quot;</span> ),</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;                    <span class="stringliteral">&#39;filename&#39;</span> =&gt; $_FILES[<span class="stringliteral">&#39;async-upload&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>],</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;                )</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;            ) );</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;        }</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;        <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>;</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    }</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    $post_data = isset( $_REQUEST[<span class="stringliteral">&#39;post_data&#39;</span>] ) ? $_REQUEST[<span class="stringliteral">&#39;post_data&#39;</span>] : array();</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    <span class="comment">// If the context is custom header or background, make sure the uploaded file is an image.</span></div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <span class="keywordflow">if</span> ( isset( $post_data[<span class="stringliteral">&#39;context&#39;</span>] ) &amp;&amp; in_array( $post_data[<span class="stringliteral">&#39;context&#39;</span>], array( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;custom-background&#39;</span> ) ) ) {</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;        $wp_filetype = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#ad7133b9d8edf539917094b657f8c701e">wp_check_filetype_and_ext</a>( $_FILES[<span class="stringliteral">&#39;async-upload&#39;</span>][<span class="stringliteral">&#39;tmp_name&#39;</span>], $_FILES[<span class="stringliteral">&#39;async-upload&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>] );</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="wp-includes_2post_8php.html#adb0024d9830f32a834cb170d73753ba6">wp_match_mime_types</a>( <span class="stringliteral">&#39;image&#39;</span>, $wp_filetype[<span class="stringliteral">&#39;type&#39;</span>] ) ) {</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;            echo <a class="code" href="wordpress_2wp-includes_2functions_8php.html#ae7021fd5ae9e6f91ee8a2258d1e30e33">wp_json_encode</a>( array(</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                <span class="stringliteral">&#39;success&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                <span class="stringliteral">&#39;data&#39;</span>    =&gt; array(</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;                    <span class="stringliteral">&#39;message&#39;</span>  =&gt; <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;The uploaded file is not a valid image. Please try again.&#39;</span> ),</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                    <span class="stringliteral">&#39;filename&#39;</span> =&gt; $_FILES[<span class="stringliteral">&#39;async-upload&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>],</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;                )</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;            ) );</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;        }</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    }</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    $attachment_id = <a class="code" href="wp-admin_2includes_2media_8php.html#ad208ac9c114d86649b6b1df2e8c91c27">media_handle_upload</a>( <span class="stringliteral">&#39;async-upload&#39;</span>, <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a>, $post_data );</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $attachment_id ) ) {</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;        echo <a class="code" href="wordpress_2wp-includes_2functions_8php.html#ae7021fd5ae9e6f91ee8a2258d1e30e33">wp_json_encode</a>( array(</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;            <span class="stringliteral">&#39;success&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;            <span class="stringliteral">&#39;data&#39;</span>    =&gt; array(</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;                <span class="stringliteral">&#39;message&#39;</span>  =&gt; $attachment_id-&gt;get_error_message(),</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;                <span class="stringliteral">&#39;filename&#39;</span> =&gt; $_FILES[<span class="stringliteral">&#39;async-upload&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>],</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;            )</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        ) );</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    }</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    <span class="keywordflow">if</span> ( isset( $post_data[<span class="stringliteral">&#39;context&#39;</span>] ) &amp;&amp; isset( $post_data[<span class="stringliteral">&#39;theme&#39;</span>] ) ) {</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;        <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;custom-background&#39;</span> === $post_data[<span class="stringliteral">&#39;context&#39;</span>] )</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;            <a class="code" href="wp-includes_2post_8php.html#ac984a204e35272d1a897fedce9a92847">update_post_meta</a>( $attachment_id, <span class="stringliteral">&#39;_wp_attachment_is_custom_background&#39;</span>, $post_data[<span class="stringliteral">&#39;theme&#39;</span>] );</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;        <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;custom-header&#39;</span> === $post_data[<span class="stringliteral">&#39;context&#39;</span>] )</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;            <a class="code" href="wp-includes_2post_8php.html#ac984a204e35272d1a897fedce9a92847">update_post_meta</a>( $attachment_id, <span class="stringliteral">&#39;_wp_attachment_is_custom_header&#39;</span>, $post_data[<span class="stringliteral">&#39;theme&#39;</span>] );</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;    }</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    <span class="keywordflow">if</span> ( ! $attachment = <a class="code" href="wp-includes_2media_8php.html#acbc26715e889ac7379f1ee52ae8666c5">wp_prepare_attachment_for_js</a>( $attachment_id ) )</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;    echo <a class="code" href="wordpress_2wp-includes_2functions_8php.html#ae7021fd5ae9e6f91ee8a2258d1e30e33">wp_json_encode</a>( array(</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;        <span class="stringliteral">&#39;success&#39;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;        <span class="stringliteral">&#39;data&#39;</span>    =&gt; $attachment,</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    ) );</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;}</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;<span class="comment"> * Ajax handler for image editing.</span></div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02075"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a8081673304fa335f5a26de2c0383078e"> 2075</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a8081673304fa335f5a26de2c0383078e">wp_ajax_image_editor</a>() {</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    $attachment_id = intval($_POST[<span class="stringliteral">&#39;postid&#39;</span>]);</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    <span class="keywordflow">if</span> ( empty($attachment_id) || !<a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>(<span class="stringliteral">&#39;edit_post&#39;</span>, $attachment_id) )</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    check_ajax_referer( <span class="stringliteral">&quot;image_editor-$attachment_id&quot;</span> );</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    include_once( <a class="code" href="load-scripts_8php.html#a495f94983b95273ad267511b2411351f">ABSPATH</a> . <span class="stringliteral">&#39;wp-admin/includes/image-edit.php&#39;</span> );</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    <a class="code" href="sites_8php.html#a7403ae1dd22aabdfaf1c54375a124754">$msg</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    <span class="keywordflow">switch</span> ( $_POST[<span class="stringliteral">&#39;do&#39;</span>] ) {</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;        <span class="keywordflow">case</span> <span class="stringliteral">&#39;save&#39;</span> :</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;            <a class="code" href="sites_8php.html#a7403ae1dd22aabdfaf1c54375a124754">$msg</a> = <a class="code" href="image-edit_8php.html#ac1283964ab0299f759c15831ef16c4c6">wp_save_image</a>($attachment_id);</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;            <a class="code" href="sites_8php.html#a7403ae1dd22aabdfaf1c54375a124754">$msg</a> = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#ae7021fd5ae9e6f91ee8a2258d1e30e33">wp_json_encode</a>(<a class="code" href="sites_8php.html#a7403ae1dd22aabdfaf1c54375a124754">$msg</a>);</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="sites_8php.html#a7403ae1dd22aabdfaf1c54375a124754">$msg</a> );</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;        <span class="keywordflow">case</span> <span class="stringliteral">&#39;scale&#39;</span> :</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;            <a class="code" href="sites_8php.html#a7403ae1dd22aabdfaf1c54375a124754">$msg</a> = <a class="code" href="image-edit_8php.html#ac1283964ab0299f759c15831ef16c4c6">wp_save_image</a>($attachment_id);</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;        <span class="keywordflow">case</span> <span class="stringliteral">&#39;restore&#39;</span> :</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;            <a class="code" href="sites_8php.html#a7403ae1dd22aabdfaf1c54375a124754">$msg</a> = <a class="code" href="image-edit_8php.html#a909439c3768827180429b08c32e6771f">wp_restore_image</a>($attachment_id);</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;    }</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    <a class="code" href="image-edit_8php.html#a4f00df01abc362e365954aaf6397788b">wp_image_editor</a>($attachment_id, <a class="code" href="sites_8php.html#a7403ae1dd22aabdfaf1c54375a124754">$msg</a>);</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>();</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;}</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;<span class="comment"> * Ajax handler for setting the featured image.</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02107"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a170b3de0457f00b76f31c1419923b2b2"> 2107</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a170b3de0457f00b76f31c1419923b2b2">wp_ajax_set_post_thumbnail</a>() {</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    $json = ! empty( $_REQUEST[<span class="stringliteral">&#39;json&#39;</span>] ); <span class="comment">// New-style request</span></div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    <a class="code" href="edit-form-advanced_8php.html#a73f2ab6780b6a35ccc55a7693f79b7a8">$post_ID</a> = intval( $_POST[<span class="stringliteral">&#39;post_id&#39;</span>] );</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_post&#39;</span>, <a class="code" href="edit-form-advanced_8php.html#a73f2ab6780b6a35ccc55a7693f79b7a8">$post_ID</a> ) )</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    <a class="code" href="embed-template_8php.html#a436adff102f7e9f88fb37f96dda0e01f">$thumbnail_id</a> = intval( $_POST[<span class="stringliteral">&#39;thumbnail_id&#39;</span>] );</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    <span class="keywordflow">if</span> ( $json )</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;        check_ajax_referer( <span class="stringliteral">&quot;update-post_$post_ID&quot;</span> );</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;        check_ajax_referer( <span class="stringliteral">&quot;set_post_thumbnail-$post_ID&quot;</span> );</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="embed-template_8php.html#a436adff102f7e9f88fb37f96dda0e01f">$thumbnail_id</a> == <span class="stringliteral">&#39;-1&#39;</span> ) {</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2post_8php.html#a44f26880e9463bb720a3ec802cd51f3f">delete_post_thumbnail</a>( <a class="code" href="edit-form-advanced_8php.html#a73f2ab6780b6a35ccc55a7693f79b7a8">$post_ID</a> ) ) {</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;            $return = <a class="code" href="wp-admin_2includes_2post_8php.html#a09d57ea8d751667393fe852d6b584147">_wp_post_thumbnail_html</a>( <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>, <a class="code" href="edit-form-advanced_8php.html#a73f2ab6780b6a35ccc55a7693f79b7a8">$post_ID</a> );</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;            $json ? <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( $return ) : <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( $return );</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;        }</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    }</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2post_8php.html#a4d33bc3fcaf2f12049a0e661c4adcaa7">set_post_thumbnail</a>( <a class="code" href="edit-form-advanced_8php.html#a73f2ab6780b6a35ccc55a7693f79b7a8">$post_ID</a>, <a class="code" href="embed-template_8php.html#a436adff102f7e9f88fb37f96dda0e01f">$thumbnail_id</a> ) ) {</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;        $return = <a class="code" href="wp-admin_2includes_2post_8php.html#a09d57ea8d751667393fe852d6b584147">_wp_post_thumbnail_html</a>( <a class="code" href="embed-template_8php.html#a436adff102f7e9f88fb37f96dda0e01f">$thumbnail_id</a>, <a class="code" href="edit-form-advanced_8php.html#a73f2ab6780b6a35ccc55a7693f79b7a8">$post_ID</a> );</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;        $json ? <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( $return ) : <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( $return );</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    }</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;}</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;<span class="comment"> * AJAX handler for setting the featured image for an attachment.</span></div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;<span class="comment"> * @since 4.0.0</span></div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;<span class="comment"> * @see set_post_thumbnail()</span></div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02145"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a10cc16fa6990163a886e58c9a8e591e8"> 2145</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a10cc16fa6990163a886e58c9a8e591e8">wp_ajax_set_attachment_thumbnail</a>() {</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;    <span class="keywordflow">if</span> ( empty( $_POST[<span class="stringliteral">&#39;urls&#39;</span>] ) || ! is_array( $_POST[<span class="stringliteral">&#39;urls&#39;</span>] ) ) {</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    }</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <a class="code" href="embed-template_8php.html#a436adff102f7e9f88fb37f96dda0e01f">$thumbnail_id</a> = (int) $_POST[<span class="stringliteral">&#39;thumbnail_id&#39;</span>];</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    <span class="keywordflow">if</span> ( empty( <a class="code" href="embed-template_8php.html#a436adff102f7e9f88fb37f96dda0e01f">$thumbnail_id</a> ) ) {</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    }</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    $post_ids = array();</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    <span class="comment">// For each URL, try to find its corresponding post ID.</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <span class="keywordflow">foreach</span> ( $_POST[<span class="stringliteral">&#39;urls&#39;</span>] as <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> ) {</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;        <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> = <a class="code" href="wp-includes_2media_8php.html#a34030e9072818725c7b9b6864508bd19">attachment_url_to_postid</a>( $url );</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;        <span class="keywordflow">if</span> ( ! empty( <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> ) ) {</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;            $post_ids[] = <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a>;</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;        }</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    }</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    <span class="keywordflow">if</span> ( empty( $post_ids ) ) {</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;    }</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    $success = 0;</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    <span class="comment">// For each found attachment, set its thumbnail.</span></div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    <span class="keywordflow">foreach</span> ( $post_ids as <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> ) {</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_post&#39;</span>, $post_id ) ) {</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;        }</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2post_8php.html#a4d33bc3fcaf2f12049a0e661c4adcaa7">set_post_thumbnail</a>( $post_id, <a class="code" href="embed-template_8php.html#a436adff102f7e9f88fb37f96dda0e01f">$thumbnail_id</a> ) ) {</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;            $success++;</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;        }</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    }</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    <span class="keywordflow">if</span> ( 0 === $success ) {</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>();</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    }</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;}</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;<span class="comment"> * Ajax handler for date formatting.</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02194"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#aca41a6a7b92cae19a206f791336a84f5"> 2194</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#aca41a6a7b92cae19a206f791336a84f5">wp_ajax_date_format</a>() {</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a053ff37ae44c85a9bef47cd59328912e">date_i18n</a>( <a class="code" href="formatting_8php.html#aec1146dad5e11a514cf39ac8857fff84">sanitize_option</a>( <span class="stringliteral">&#39;date_format&#39;</span>, <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( $_POST[<span class="stringliteral">&#39;date&#39;</span>] ) ) ) );</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;}</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;<span class="comment"> * Ajax handler for time formatting.</span></div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02203"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#ae92017dd73dd2eed0ce594aec6263fd4"> 2203</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#ae92017dd73dd2eed0ce594aec6263fd4">wp_ajax_time_format</a>() {</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a053ff37ae44c85a9bef47cd59328912e">date_i18n</a>( <a class="code" href="formatting_8php.html#aec1146dad5e11a514cf39ac8857fff84">sanitize_option</a>( <span class="stringliteral">&#39;time_format&#39;</span>, <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( $_POST[<span class="stringliteral">&#39;date&#39;</span>] ) ) ) );</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;}</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;<span class="comment"> * Ajax handler for saving posts from the fullscreen editor.</span></div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;<span class="comment"> * @deprecated 4.3.0</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02213"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#af2c48166fd29f52c484904128c335da6"> 2213</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#af2c48166fd29f52c484904128c335da6">wp_ajax_wp_fullscreen_save_post</a>() {</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> = isset( $_POST[<span class="stringliteral">&#39;post_ID&#39;</span>] ) ? (int) $_POST[<span class="stringliteral">&#39;post_ID&#39;</span>] : 0;</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>;</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> )</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;        <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> );</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    check_ajax_referer(<span class="stringliteral">&#39;update-post_&#39;</span> . <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a>, <span class="stringliteral">&#39;_wpnonce&#39;</span>);</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> = <a class="code" href="wp-admin_2includes_2post_8php.html#a40bd171c0346a1ee42b164a8d9efab30">edit_post</a>();</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> ) ) {</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    }</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> ) {</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;        $last_date = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#af7ccbb4fe49b4877219cbdbddecd7f77">mysql2date</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;F j, Y&#39;</span> ), <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>-&gt;post_modified );</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;        $last_time = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#af7ccbb4fe49b4877219cbdbddecd7f77">mysql2date</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;g:i a&#39;</span> ), <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>-&gt;post_modified );</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;        $last_date = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a053ff37ae44c85a9bef47cd59328912e">date_i18n</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;F j, Y&#39;</span> ) );</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;        $last_time = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a053ff37ae44c85a9bef47cd59328912e">date_i18n</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;g:i a&#39;</span> ) );</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    }</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    <span class="keywordflow">if</span> ( $last_id = <a class="code" href="wp-includes_2post_8php.html#a5ac8d9eefeeb2ac8b45650a335971b81">get_post_meta</a>( <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a>, <span class="stringliteral">&#39;_edit_last&#39;</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;        $last_user = get_userdata( $last_id );</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;        $last_edited = sprintf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;Last edited by %1$s on %2$s at %3$s&#39;</span>), <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $last_user-&gt;display_name ), $last_date, $last_time );</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;        $last_edited = sprintf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;Last edited on %1$s at %2$s&#39;</span>), $last_date, $last_time );</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    }</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( array( <span class="stringliteral">&#39;last_edited&#39;</span> =&gt; $last_edited ) );</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;}</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;<span class="comment"> * Ajax handler for removing a post lock.</span></div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02252"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a87f7263ea18871d5950a7ac7096a58e9"> 2252</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a87f7263ea18871d5950a7ac7096a58e9">wp_ajax_wp_remove_post_lock</a>() {</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;    <span class="keywordflow">if</span> ( empty( $_POST[<span class="stringliteral">&#39;post_ID&#39;</span>] ) || empty( $_POST[<span class="stringliteral">&#39;active_post_lock&#39;</span>] ) )</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> = (int) $_POST[<span class="stringliteral">&#39;post_ID&#39;</span>];</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> ) )</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;update-post_&#39;</span> . <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> );</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_post&#39;</span>, <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> ) )</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( -1 );</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;    $active_lock = array_map( <span class="stringliteral">&#39;absint&#39;</span>, explode( <span class="charliteral">&#39;:&#39;</span>, $_POST[<span class="stringliteral">&#39;active_post_lock&#39;</span>] ) );</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    <span class="keywordflow">if</span> ( $active_lock[1] != <a class="code" href="wp-includes_2user_8php.html#a1359853bbf09cba486c9826f4ab66f7f">get_current_user_id</a>() )</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;<span class="comment">     * Filter the post lock window duration.</span></div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;<span class="comment">     * @since 3.3.0</span></div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;<span class="comment">     * @param int $interval The interval in seconds the post lock duration</span></div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;<span class="comment">     *                      should last, plus 5 seconds. Default 150.</span></div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    $new_lock = ( time() - <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;wp_check_post_lock_window&#39;</span>, 150 ) + 5 ) . <span class="charliteral">&#39;:&#39;</span> . $active_lock[1];</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    <a class="code" href="wp-includes_2post_8php.html#ac984a204e35272d1a897fedce9a92847">update_post_meta</a>( <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a>, <span class="stringliteral">&#39;_edit_lock&#39;</span>, $new_lock, implode( <span class="charliteral">&#39;:&#39;</span>, $active_lock ) );</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;}</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;<span class="comment"> * Ajax handler for dismissing a WordPress pointer.</span></div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02286"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a3fce421f73518d1203ea2c5b9d08206b"> 2286</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a3fce421f73518d1203ea2c5b9d08206b">wp_ajax_dismiss_wp_pointer</a>() {</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    $pointer = $_POST[<span class="stringliteral">&#39;pointer&#39;</span>];</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;    <span class="keywordflow">if</span> ( $pointer != <a class="code" href="formatting_8php.html#a0ebdd3bb5f66266f5302c24c3537fb50">sanitize_key</a>( $pointer ) )</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;<span class="comment">//  check_ajax_referer( &#39;dismiss-pointer_&#39; . $pointer );</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    $dismissed = array_filter( explode( <span class="charliteral">&#39;,&#39;</span>, (<span class="keywordtype">string</span>) <a class="code" href="wp-includes_2user_8php.html#aa867ddb4cac7504b879d2706b939fe5a">get_user_meta</a>( <a class="code" href="wp-includes_2user_8php.html#a1359853bbf09cba486c9826f4ab66f7f">get_current_user_id</a>(), <span class="stringliteral">&#39;dismissed_wp_pointers&#39;</span>, <span class="keyword">true</span> ) ) );</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    <span class="keywordflow">if</span> ( in_array( $pointer, $dismissed ) )</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 0 );</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    $dismissed[] = $pointer;</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    $dismissed = implode( <span class="charliteral">&#39;,&#39;</span>, $dismissed );</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    <a class="code" href="wp-includes_2user_8php.html#a414887490e946c7f6459d886b09e0e5a">update_user_meta</a>( <a class="code" href="wp-includes_2user_8php.html#a1359853bbf09cba486c9826f4ab66f7f">get_current_user_id</a>(), <span class="stringliteral">&#39;dismissed_wp_pointers&#39;</span>, $dismissed );</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( 1 );</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;}</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;<span class="comment"> * Ajax handler for getting an attachment.</span></div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;<span class="comment"> * @since 3.5.0</span></div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02310"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a515b71280f3626784cee85924dbc45a6"> 2310</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a515b71280f3626784cee85924dbc45a6">wp_ajax_get_attachment</a>() {</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    <span class="keywordflow">if</span> ( ! isset( $_REQUEST[<span class="stringliteral">&#39;id&#39;</span>] ) )</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $_REQUEST[<span class="stringliteral">&#39;id&#39;</span>] ) )</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) )</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;attachment&#39;</span> != <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>-&gt;post_type )</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;upload_files&#39;</span> ) )</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <span class="keywordflow">if</span> ( ! $attachment = <a class="code" href="wp-includes_2media_8php.html#acbc26715e889ac7379f1ee52ae8666c5">wp_prepare_attachment_for_js</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) )</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( $attachment );</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;}</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;<span class="comment"> * Ajax handler for querying attachments.</span></div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;<span class="comment"> * @since 3.5.0</span></div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02337"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a076f1ed46bba0b627442c67fa2b2ab09"> 2337</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a076f1ed46bba0b627442c67fa2b2ab09">wp_ajax_query_attachments</a>() {</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;upload_files&#39;</span> ) )</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    $query = isset( $_REQUEST[<span class="stringliteral">&#39;query&#39;</span>] ) ? (array) $_REQUEST[<span class="stringliteral">&#39;query&#39;</span>] : array();</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;    <a class="code" href="wp-cron_8php.html#af20635b6c08e03bfee9e3fc036fa80f3">$keys</a> = array(</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;        <span class="charliteral">&#39;s&#39;</span>, <span class="stringliteral">&#39;order&#39;</span>, <span class="stringliteral">&#39;orderby&#39;</span>, <span class="stringliteral">&#39;posts_per_page&#39;</span>, <span class="stringliteral">&#39;paged&#39;</span>, <span class="stringliteral">&#39;post_mime_type&#39;</span>,</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;        <span class="stringliteral">&#39;post_parent&#39;</span>, <span class="stringliteral">&#39;post__in&#39;</span>, <span class="stringliteral">&#39;post__not_in&#39;</span>, <span class="stringliteral">&#39;year&#39;</span>, <span class="stringliteral">&#39;monthnum&#39;</span></div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;    );</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <span class="keywordflow">foreach</span> ( <a class="code" href="wp-includes_2media_8php.html#a10aa92e72ad93b0bf07d563524756eac">get_taxonomies_for_attachments</a>( <span class="stringliteral">&#39;objects&#39;</span> ) as $t ) {</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;        <span class="keywordflow">if</span> ( $t-&gt;query_var &amp;&amp; isset( $query[ $t-&gt;query_var ] ) ) {</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;            <a class="code" href="wp-cron_8php.html#af20635b6c08e03bfee9e3fc036fa80f3">$keys</a>[] = $t-&gt;query_var;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;        }</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    }</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    $query = array_intersect_key( $query, array_flip( <a class="code" href="wp-cron_8php.html#af20635b6c08e03bfee9e3fc036fa80f3">$keys</a> ) );</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    $query[<span class="stringliteral">&#39;post_type&#39;</span>] = <span class="stringliteral">&#39;attachment&#39;</span>;</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <span class="keywordflow">if</span> ( MEDIA_TRASH</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;        &amp;&amp; ! empty( $_REQUEST[<span class="stringliteral">&#39;query&#39;</span>][<span class="stringliteral">&#39;post_status&#39;</span>] )</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;        &amp;&amp; <span class="stringliteral">&#39;trash&#39;</span> === $_REQUEST[<span class="stringliteral">&#39;query&#39;</span>][<span class="stringliteral">&#39;post_status&#39;</span>] ) {</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;        $query[<span class="stringliteral">&#39;post_status&#39;</span>] = <span class="stringliteral">&#39;trash&#39;</span>;</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;        $query[<span class="stringliteral">&#39;post_status&#39;</span>] = <span class="stringliteral">&#39;inherit&#39;</span>;</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    }</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <a class="code" href="wp-includes_2post_8php.html#a61c47864d25a054d86d7977ed6bc6bed">get_post_type_object</a>( <span class="stringliteral">&#39;attachment&#39;</span> )-&gt;cap-&gt;read_private_posts ) )</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;        $query[<span class="stringliteral">&#39;post_status&#39;</span>] .= <span class="stringliteral">&#39;,private&#39;</span>;</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;<span class="comment">     * Filter the arguments passed to WP_Query during an AJAX</span></div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;<span class="comment">     * call for querying attachments.</span></div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;<span class="comment">     * @since 3.7.0</span></div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;<span class="comment">     * @see WP_Query::parse_query()</span></div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;<span class="comment">     * @param array $query An array of query variables.</span></div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    $query = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;ajax_query_attachments_args&#39;</span>, $query );</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    $query = <span class="keyword">new</span> <a class="code" href="class_w_p___query.html">WP_Query</a>( $query );</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    $posts = array_map( <span class="stringliteral">&#39;wp_prepare_attachment_for_js&#39;</span>, $query-&gt;posts );</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    $posts = array_filter( $posts );</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( $posts );</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;}</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;<span class="comment"> * Ajax handler for updating attachment attributes.</span></div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;<span class="comment"> * @since 3.5.0</span></div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02389"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a9be36fc34826d747ce67db26df4bf448"> 2389</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a9be36fc34826d747ce67db26df4bf448">wp_ajax_save_attachment</a>() {</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    <span class="keywordflow">if</span> ( ! isset( $_REQUEST[<span class="stringliteral">&#39;id&#39;</span>] ) || ! isset( $_REQUEST[<span class="stringliteral">&#39;changes&#39;</span>] ) )</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $_REQUEST[<span class="stringliteral">&#39;id&#39;</span>] ) )</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;update-post_&#39;</span> . <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, <span class="stringliteral">&#39;nonce&#39;</span> );</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_post&#39;</span>, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) )</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;    $changes = $_REQUEST[<span class="stringliteral">&#39;changes&#39;</span>];</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>    = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, <a class="code" href="wp-db_8php.html#abe96a896fb17a28640696071972d1405">ARRAY_A</a> );</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;    <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;attachment&#39;</span> != <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;post_type&#39;</span>] )</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    <span class="keywordflow">if</span> ( isset( $changes[<span class="stringliteral">&#39;parent&#39;</span>] ) )</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;        <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;post_parent&#39;</span>] = $changes[<span class="stringliteral">&#39;parent&#39;</span>];</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    <span class="keywordflow">if</span> ( isset( $changes[<span class="stringliteral">&#39;title&#39;</span>] ) )</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;        <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;post_title&#39;</span>] = $changes[<span class="stringliteral">&#39;title&#39;</span>];</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    <span class="keywordflow">if</span> ( isset( $changes[<span class="stringliteral">&#39;caption&#39;</span>] ) )</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;        <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;post_excerpt&#39;</span>] = $changes[<span class="stringliteral">&#39;caption&#39;</span>];</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    <span class="keywordflow">if</span> ( isset( $changes[<span class="stringliteral">&#39;description&#39;</span>] ) )</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;        <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;post_content&#39;</span>] = $changes[<span class="stringliteral">&#39;description&#39;</span>];</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    <span class="keywordflow">if</span> ( MEDIA_TRASH &amp;&amp; isset( $changes[<span class="stringliteral">&#39;status&#39;</span>] ) )</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;        <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;post_status&#39;</span>] = $changes[<span class="stringliteral">&#39;status&#39;</span>];</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    <span class="keywordflow">if</span> ( isset( $changes[<span class="stringliteral">&#39;alt&#39;</span>] ) ) {</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;        <a class="code" href="table-body_8php.html#a6d5e116b218efb8fa2aa69b75ad2b0b5">$alt</a> = <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( $changes[<span class="stringliteral">&#39;alt&#39;</span>] );</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="table-body_8php.html#a6d5e116b218efb8fa2aa69b75ad2b0b5">$alt</a> != <a class="code" href="wp-includes_2post_8php.html#a5ac8d9eefeeb2ac8b45650a335971b81">get_post_meta</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, <span class="stringliteral">&#39;_wp_attachment_image_alt&#39;</span>, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;            <a class="code" href="table-body_8php.html#a6d5e116b218efb8fa2aa69b75ad2b0b5">$alt</a> = <a class="code" href="formatting_8php.html#a2aa43f1e479af8878251d6697bf84f09">wp_strip_all_tags</a>( <a class="code" href="table-body_8php.html#a6d5e116b218efb8fa2aa69b75ad2b0b5">$alt</a>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;            <a class="code" href="wp-includes_2post_8php.html#ac984a204e35272d1a897fedce9a92847">update_post_meta</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, <span class="stringliteral">&#39;_wp_attachment_image_alt&#39;</span>, <a class="code" href="formatting_8php.html#aa5eab0fce35c72689998f801b8fc7dfe">wp_slash</a>( <a class="code" href="table-body_8php.html#a6d5e116b218efb8fa2aa69b75ad2b0b5">$alt</a> ) );</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;        }</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    }</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2post_8php.html#a97c5001bc5d8b2ef432fd1db4a765d5d">wp_attachment_is</a>( <span class="stringliteral">&#39;audio&#39;</span>, <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;ID&#39;</span>] ) ) {</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;        $changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;        $id3data = <a class="code" href="wp-includes_2post_8php.html#a08a3d66142c2d31d6fdb95b1efac7185">wp_get_attachment_metadata</a>( <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;ID&#39;</span>] );</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;        <span class="keywordflow">if</span> ( ! is_array( $id3data ) ) {</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;            $changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;            $id3data = array();</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;        }</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;        <span class="keywordflow">foreach</span> ( <a class="code" href="wp-includes_2media_8php.html#a9d307f5585bddb91b42c7a6e3502963b">wp_get_attachment_id3_keys</a>( (<span class="keywordtype">object</span>) <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>, <span class="stringliteral">&#39;edit&#39;</span> ) as $key =&gt; <a class="code" href="search-field-date__range_8php.html#a177af2bf70bede02de3d05a425fb8e43">$label</a> ) {</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;            <span class="keywordflow">if</span> ( isset( $changes[ $key ] ) ) {</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;                $changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;                $id3data[ $key ] = <a class="code" href="formatting_8php.html#a7220e1930f7f74f3fafb67ea1d7234f1">sanitize_text_field</a>( <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( $changes[ $key ] ) );</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;            }</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;        }</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;        <span class="keywordflow">if</span> ( $changed ) {</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;            <a class="code" href="wp-includes_2post_8php.html#a563b1dd3f65d7fc81701c99ea3f4d575">wp_update_attachment_metadata</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, $id3data );</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;        }</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    }</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    <span class="keywordflow">if</span> ( MEDIA_TRASH &amp;&amp; isset( $changes[<span class="stringliteral">&#39;status&#39;</span>] ) &amp;&amp; <span class="stringliteral">&#39;trash&#39;</span> === $changes[<span class="stringliteral">&#39;status&#39;</span>] ) {</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;        <a class="code" href="wp-includes_2post_8php.html#affbeae076f02be4fd44a2019f39a6928">wp_delete_post</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;        <a class="code" href="wp-includes_2post_8php.html#ad3601ef99c281038e8e7761393966517">wp_update_post</a>( <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> );</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    }</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>();</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;}</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;<span class="comment"> * Ajax handler for saving backwards compatible attachment attributes.</span></div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;<span class="comment"> * @since 3.5.0</span></div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02463"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a20bca7d9377941baaf46c66f61eed54f"> 2463</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a20bca7d9377941baaf46c66f61eed54f">wp_ajax_save_attachment_compat</a>() {</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    <span class="keywordflow">if</span> ( ! isset( $_REQUEST[<span class="stringliteral">&#39;id&#39;</span>] ) )</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $_REQUEST[<span class="stringliteral">&#39;id&#39;</span>] ) )</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    <span class="keywordflow">if</span> ( empty( $_REQUEST[<span class="stringliteral">&#39;attachments&#39;</span>] ) || empty( $_REQUEST[<span class="stringliteral">&#39;attachments&#39;</span>][ <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ] ) )</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    $attachment_data = $_REQUEST[<span class="stringliteral">&#39;attachments&#39;</span>][ <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ];</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;update-post_&#39;</span> . $id, <span class="stringliteral">&#39;nonce&#39;</span> );</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_post&#39;</span>, $id ) )</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;    <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( $id, <a class="code" href="wp-db_8php.html#abe96a896fb17a28640696071972d1405">ARRAY_A</a> );</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;    <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;attachment&#39;</span> != <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;post_type&#39;</span>] )</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;<span class="comment">    /** This filter is documented in wp-admin/includes/media.php */</span></div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;    <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;attachment_fields_to_save&#39;</span>, <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>, $attachment_data );</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    <span class="keywordflow">if</span> ( isset( <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;errors&#39;</span>] ) ) {</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;        <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a> = <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;errors&#39;</span>]; <span class="comment">// @todo return me and display me!</span></div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;        unset( <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>[<span class="stringliteral">&#39;errors&#39;</span>] );</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    }</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;    <a class="code" href="wp-includes_2post_8php.html#ad3601ef99c281038e8e7761393966517">wp_update_post</a>( <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> );</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    <span class="keywordflow">foreach</span> ( <a class="code" href="wp-includes_2media_8php.html#abcaf611fb00f64c8c72ce37bb920a2e2">get_attachment_taxonomies</a>( <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> ) as $taxonomy ) {</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;        <span class="keywordflow">if</span> ( isset( $attachment_data[ $taxonomy ] ) )</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;            <a class="code" href="wp-includes_2taxonomy_8php.html#a584c2ddd3b03a0a3f9c88b9e50cfc7e4">wp_set_object_terms</a>( $id, array_map( <span class="stringliteral">&#39;trim&#39;</span>, preg_split( <span class="stringliteral">&#39;/,+/&#39;</span>, $attachment_data[ $taxonomy ] ) ), $taxonomy, <span class="keyword">false</span> );</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;    }</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    <span class="keywordflow">if</span> ( ! $attachment = <a class="code" href="wp-includes_2media_8php.html#acbc26715e889ac7379f1ee52ae8666c5">wp_prepare_attachment_for_js</a>( $id ) )</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( $attachment );</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;}</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;<span class="comment"> * Ajax handler for saving the attachment order.</span></div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;<span class="comment"> * @since 3.5.0</span></div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02510"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a0784f355b038e9c3e68f13427c7bd359"> 2510</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a0784f355b038e9c3e68f13427c7bd359">wp_ajax_save_attachment_order</a>() {</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    <span class="keywordflow">if</span> ( ! isset( $_REQUEST[<span class="stringliteral">&#39;post_id&#39;</span>] ) )</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $_REQUEST[<span class="stringliteral">&#39;post_id&#39;</span>] ) )</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;    <span class="keywordflow">if</span> ( empty( $_REQUEST[<span class="stringliteral">&#39;attachments&#39;</span>] ) )</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;update-post_&#39;</span> . <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a>, <span class="stringliteral">&#39;nonce&#39;</span> );</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#aa2f80297e973639eba0f2f8619fe783b">$attachments</a> = $_REQUEST[<span class="stringliteral">&#39;attachments&#39;</span>];</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_post&#39;</span>, <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> ) )</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    <span class="keywordflow">foreach</span> ( <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#aa2f80297e973639eba0f2f8619fe783b">$attachments</a> as $attachment_id =&gt; $menu_order ) {</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_post&#39;</span>, $attachment_id ) )</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;        <span class="keywordflow">if</span> ( ! $attachment = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( $attachment_id ) )</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;        <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;attachment&#39;</span> != $attachment-&gt;post_type )</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;        <a class="code" href="wp-includes_2post_8php.html#ad3601ef99c281038e8e7761393966517">wp_update_post</a>( array( <span class="stringliteral">&#39;ID&#39;</span> =&gt; $attachment_id, <span class="stringliteral">&#39;menu_order&#39;</span> =&gt; $menu_order ) );</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    }</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>();</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;}</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;<span class="comment"> * Ajax handler for sending an attachment to the editor.</span></div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;<span class="comment"> * Generates the HTML to send an attachment to the editor.</span></div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;<span class="comment"> * Backwards compatible with the media_send_to_editor filter</span></div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;<span class="comment"> * and the chain of filters that follow.</span></div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;<span class="comment"> * @since 3.5.0</span></div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02550"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a06006fda28cc6835c305f639a47bda62"> 2550</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a06006fda28cc6835c305f639a47bda62">wp_ajax_send_attachment_to_editor</a>() {</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;media-send-to-editor&#39;</span>, <span class="stringliteral">&#39;nonce&#39;</span> );</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    $attachment = <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( $_POST[<span class="stringliteral">&#39;attachment&#39;</span>] );</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> = intval( $attachment[<span class="stringliteral">&#39;id&#39;</span>] );</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) )</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;    <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;attachment&#39;</span> != <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>-&gt;post_type )</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_post&#39;</span>, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) ) {</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;        <span class="comment">// If this attachment is unattached, attach it. Primarily a back compat thing.</span></div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;        <span class="keywordflow">if</span> ( 0 == <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>-&gt;post_parent &amp;&amp; $insert_into_post_id = intval( $_POST[<span class="stringliteral">&#39;post_id&#39;</span>] ) ) {</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;            <a class="code" href="wp-includes_2post_8php.html#ad3601ef99c281038e8e7761393966517">wp_update_post</a>( array( <span class="stringliteral">&#39;ID&#39;</span> =&gt; <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, <span class="stringliteral">&#39;post_parent&#39;</span> =&gt; $insert_into_post_id ) );</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;        }</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    }</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;    $rel = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> = empty( $attachment[<span class="stringliteral">&#39;url&#39;</span>] ) ? <span class="stringliteral">&#39;&#39;</span> : $attachment[<span class="stringliteral">&#39;url&#39;</span>];</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;    <span class="keywordflow">if</span> ( strpos( <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a>, <span class="stringliteral">&#39;attachment_id&#39;</span>) || <a class="code" href="link-template_8php.html#a5338c142d6cf827c81bbc8a12d73224c">get_attachment_link</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) == <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> ) {</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;        $rel = <span class="stringliteral">&#39;attachment wp-att-&#39;</span> . <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>;</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;    }</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;    <a class="code" href="wp-includes_2plugin_8php.html#a6bfce44737689c4ea3aed89badf40b6d">remove_filter</a>( <span class="stringliteral">&#39;media_send_to_editor&#39;</span>, <span class="stringliteral">&#39;image_media_send_to_editor&#39;</span> );</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;    <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;image&#39;</span> === substr( <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>-&gt;post_mime_type, 0, 5 ) ) {</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;        $align = isset( $attachment[<span class="stringliteral">&#39;align&#39;</span>] ) ? $attachment[<span class="stringliteral">&#39;align&#39;</span>] : <span class="stringliteral">&#39;none&#39;</span>;</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;        <a class="code" href="options-discussion_8php.html#af594986e4618a8d6a5d7566617f583c6">$size</a> = isset( $attachment[<span class="stringliteral">&#39;image-size&#39;</span>] ) ? $attachment[<span class="stringliteral">&#39;image-size&#39;</span>] : <span class="stringliteral">&#39;medium&#39;</span>;</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;        <a class="code" href="table-body_8php.html#a6d5e116b218efb8fa2aa69b75ad2b0b5">$alt</a> = isset( $attachment[<span class="stringliteral">&#39;image_alt&#39;</span>] ) ? $attachment[<span class="stringliteral">&#39;image_alt&#39;</span>] : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;        <span class="comment">// No whitespace-only captions.</span></div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;        <a class="code" href="post__image_8php.html#a4f9340ccb02c5d876a448a1d860f3812">$caption</a> = isset( $attachment[<span class="stringliteral">&#39;post_excerpt&#39;</span>] ) ? $attachment[<span class="stringliteral">&#39;post_excerpt&#39;</span>] : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;        <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;&#39;</span> === trim( <a class="code" href="post__image_8php.html#a4f9340ccb02c5d876a448a1d860f3812">$caption</a> ) ) {</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;            <a class="code" href="post__image_8php.html#a4f9340ccb02c5d876a448a1d860f3812">$caption</a> = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;        }</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;        <a class="code" href="post__image_8php.html#ada57e7bb7c152edad18fe2f166188691">$title</a> = <span class="stringliteral">&#39;&#39;</span>; <span class="comment">// We no longer insert title tags into &lt;img&gt; tags, as they are redundant.</span></div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;        $html = <a class="code" href="wp-admin_2includes_2media_8php.html#a8b490cd782906b4b723676021ad18e4e">get_image_send_to_editor</a>( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, <a class="code" href="post__image_8php.html#a4f9340ccb02c5d876a448a1d860f3812">$caption</a>, <a class="code" href="post__image_8php.html#ada57e7bb7c152edad18fe2f166188691">$title</a>, $align, <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a>, $rel, <a class="code" href="options-discussion_8php.html#af594986e4618a8d6a5d7566617f583c6">$size</a>, <a class="code" href="table-body_8php.html#a6d5e116b218efb8fa2aa69b75ad2b0b5">$alt</a> );</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( <a class="code" href="wp-includes_2post_8php.html#a97c5001bc5d8b2ef432fd1db4a765d5d">wp_attachment_is</a>( <span class="stringliteral">&#39;video&#39;</span>, <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> ) || <a class="code" href="wp-includes_2post_8php.html#a97c5001bc5d8b2ef432fd1db4a765d5d">wp_attachment_is</a>( <span class="stringliteral">&#39;audio&#39;</span>, <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> )  ) {</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;        $html = <a class="code" href="formatting_8php.html#a3b974f63529424e457b55f009a795461">stripslashes_deep</a>( $_POST[<span class="stringliteral">&#39;html&#39;</span>] );</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;        $html = isset( $attachment[<span class="stringliteral">&#39;post_title&#39;</span>] ) ? $attachment[<span class="stringliteral">&#39;post_title&#39;</span>] : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;        <span class="keywordflow">if</span> ( ! empty( <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> ) ) {</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;            $html = <span class="stringliteral">&#39;&lt;a href=&quot;&#39;</span> . <a class="code" href="twentyfifteen_2content-link_8php.html#a4a6fb8865e1ae52faa29662b4087e629">esc_url</a>( <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> ) . <span class="charliteral">&#39;&quot;&#39;</span> . <span class="stringliteral">&#39;rel=&quot;&#39;</span> . <a class="code" href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a>( $rel ) . <span class="stringliteral">&#39;&quot;&gt;&#39;</span> . $html . <span class="stringliteral">&#39;&lt;/a&gt;&#39;</span>;</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;        }</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    }</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;<span class="comment">    /** This filter is documented in wp-admin/includes/media.php */</span></div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    $html = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;media_send_to_editor&#39;</span>, $html, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, $attachment );</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( $html );</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;}</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;<span class="comment"> * Ajax handler for sending a link to the editor.</span></div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;<span class="comment"> * Generates the HTML to send a non-image embed link to the editor.</span></div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;<span class="comment"> * Backwards compatible with the following filters:</span></div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;<span class="comment"> * - file_send_to_editor_url</span></div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;<span class="comment"> * - audio_send_to_editor_url</span></div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;<span class="comment"> * - video_send_to_editor_url</span></div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;<span class="comment"> * @since 3.5.0</span></div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;<span class="comment"> * @global WP_Post  $post</span></div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;<span class="comment"> * @global WP_Embed $wp_embed</span></div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02621"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a5af1a20a80e2340d5825d0b2973908e6"> 2621</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a5af1a20a80e2340d5825d0b2973908e6">wp_ajax_send_link_to_editor</a>() {</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;    global <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>, $wp_embed;</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;media-send-to-editor&#39;</span>, <span class="stringliteral">&#39;nonce&#39;</span> );</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;    <span class="keywordflow">if</span> ( ! $src = <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( $_POST[<span class="stringliteral">&#39;src&#39;</span>] ) )</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;    <span class="keywordflow">if</span> ( ! strpos( $src, <span class="stringliteral">&#39;://&#39;</span> ) )</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;        $src = <span class="stringliteral">&#39;http://&#39;</span> . $src;</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;    <span class="keywordflow">if</span> ( ! $src = <a class="code" href="formatting_8php.html#ad9e809b6901d247527672e11ce5d7368">esc_url_raw</a>( $src ) )</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="delete__link_8php.html#aabe6700a6326424ba662664adce40fa4">$link_text</a> = trim( <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( $_POST[<span class="stringliteral">&#39;link_text&#39;</span>] ) ) )</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;        <a class="code" href="delete__link_8php.html#aabe6700a6326424ba662664adce40fa4">$link_text</a> = <a class="code" href="formatting_8php.html#ae28eba40508a4f90752287b901970816">wp_basename</a>( $src );</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;    $post = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( isset( $_POST[<span class="stringliteral">&#39;post_id&#39;</span>] ) ? $_POST[<span class="stringliteral">&#39;post_id&#39;</span>] : 0 );</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;    <span class="comment">// Ping WordPress for an embed.</span></div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;    $check_embed = $wp_embed-&gt;run_shortcode( <span class="stringliteral">&#39;[embed]&#39;</span>. $src .<span class="stringliteral">&#39;[/embed]&#39;</span> );</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;    <span class="comment">// Fallback that WordPress creates when no oEmbed was found.</span></div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;    $fallback = $wp_embed-&gt;maybe_make_link( $src );</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    <span class="keywordflow">if</span> ( $check_embed !== $fallback ) {</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;        <span class="comment">// TinyMCE view for [embed] will parse this</span></div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;        $html = <span class="stringliteral">&#39;[embed]&#39;</span> . $src . <span class="stringliteral">&#39;[/embed]&#39;</span>;</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;    } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( <a class="code" href="delete__link_8php.html#aabe6700a6326424ba662664adce40fa4">$link_text</a> ) {</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;        $html = <span class="stringliteral">&#39;&lt;a href=&quot;&#39;</span> . <a class="code" href="twentyfifteen_2content-link_8php.html#a4a6fb8865e1ae52faa29662b4087e629">esc_url</a>( $src ) . <span class="stringliteral">&#39;&quot;&gt;&#39;</span> . <a class="code" href="delete__link_8php.html#aabe6700a6326424ba662664adce40fa4">$link_text</a> . <span class="stringliteral">&#39;&lt;/a&gt;&#39;</span>;</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;        $html = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;    }</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;    <span class="comment">// Figure out what filter to run:</span></div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    $type = <span class="stringliteral">&#39;file&#39;</span>;</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;    <span class="keywordflow">if</span> ( ( $ext = preg_replace( <span class="stringliteral">&#39;/^.+?\.([^.]+)$/&#39;</span>, <span class="stringliteral">&#39;$1&#39;</span>, $src ) ) &amp;&amp; ( $ext_type = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a909c834adeba982112569fd4dda895fb">wp_ext2type</a>( $ext ) )</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;        &amp;&amp; ( <span class="stringliteral">&#39;audio&#39;</span> == $ext_type || <span class="stringliteral">&#39;video&#39;</span> == $ext_type ) )</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;            $type = $ext_type;</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;<span class="comment">    /** This filter is documented in wp-admin/includes/media.php */</span></div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;    $html = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( $type . <span class="stringliteral">&#39;_send_to_editor_url&#39;</span>, $html, $src, <a class="code" href="delete__link_8php.html#aabe6700a6326424ba662664adce40fa4">$link_text</a> );</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( $html );</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;}</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;<span class="comment"> * Ajax handler for the Heartbeat API.</span></div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;<span class="comment"> * Runs when the user is logged in.</span></div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;<span class="comment"> * @since 3.6.0</span></div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02674"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a04a0faa159c91a5dcbd711b2d24a3ba1"> 2674</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a04a0faa159c91a5dcbd711b2d24a3ba1">wp_ajax_heartbeat</a>() {</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    <span class="keywordflow">if</span> ( empty( $_POST[<span class="stringliteral">&#39;_nonce&#39;</span>] ) ) {</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    }</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;    $response = $data = array();</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;    $nonce_state = wp_verify_nonce( $_POST[<span class="stringliteral">&#39;_nonce&#39;</span>], <span class="stringliteral">&#39;heartbeat-nonce&#39;</span> );</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    <span class="comment">// screen_id is the same as $current_screen-&gt;id and the JS global &#39;pagenow&#39;.</span></div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;    <span class="keywordflow">if</span> ( ! empty( $_POST[<span class="stringliteral">&#39;screen_id&#39;</span>] ) ) {</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;        $screen_id = <a class="code" href="formatting_8php.html#a0ebdd3bb5f66266f5302c24c3537fb50">sanitize_key</a>($_POST[<span class="stringliteral">&#39;screen_id&#39;</span>]);</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;        $screen_id = <span class="stringliteral">&#39;front&#39;</span>;</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    }</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;    <span class="keywordflow">if</span> ( ! empty( $_POST[<span class="stringliteral">&#39;data&#39;</span>] ) ) {</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;        $data = <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( (array) $_POST[<span class="stringliteral">&#39;data&#39;</span>] );</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;    }</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    <span class="keywordflow">if</span> ( 1 !== $nonce_state ) {</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;        $response = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;wp_refresh_nonces&#39;</span>, $response, $data, $screen_id );</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;        <span class="keywordflow">if</span> ( <span class="keyword">false</span> === $nonce_state ) {</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;            <span class="comment">// User is logged in but nonces have expired.</span></div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;            $response[<span class="stringliteral">&#39;nonces_expired&#39;</span>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a2331e879806fb799da8cb7e20efc2111">wp_send_json</a>( $response );</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;        }</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;    }</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;    <span class="keywordflow">if</span> ( ! empty( $data ) ) {<span class="comment"></span></div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;<span class="comment">        /**</span></div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;<span class="comment">         * Filter the Heartbeat response received.</span></div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;<span class="comment">         * @since 3.6.0</span></div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;<span class="comment">         * @param array  $response  The Heartbeat response.</span></div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;<span class="comment">         * @param array  $data      The $_POST data sent.</span></div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;<span class="comment">         * @param string $screen_id The screen id.</span></div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;        $response = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;heartbeat_received&#39;</span>, $response, $data, $screen_id );</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;    }</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;<span class="comment">     * Filter the Heartbeat response sent.</span></div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;<span class="comment">     * @since 3.6.0</span></div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;<span class="comment">     * @param array  $response  The Heartbeat response.</span></div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;<span class="comment">     * @param string $screen_id The screen id.</span></div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    $response = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;heartbeat_send&#39;</span>, $response, $screen_id );</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;<span class="comment">     * Fires when Heartbeat ticks in logged-in environments.</span></div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;<span class="comment">     * Allows the transport to be easily replaced with long-polling.</span></div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;<span class="comment">     * @since 3.6.0</span></div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;<span class="comment">     * @param array  $response  The Heartbeat response.</span></div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;<span class="comment">     * @param string $screen_id The screen id.</span></div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;    <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;heartbeat_tick&#39;</span>, $response, $screen_id );</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;    <span class="comment">// Send the current time according to the server</span></div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;    $response[<span class="stringliteral">&#39;server_time&#39;</span>] = time();</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a2331e879806fb799da8cb7e20efc2111">wp_send_json</a>( $response );</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;}</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;<span class="comment"> * Ajax handler for getting revision diffs.</span></div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;<span class="comment"> * @since 3.6.0</span></div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02749"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a7fc0b6f51312563a59e3c615373a4186"> 2749</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a7fc0b6f51312563a59e3c615373a4186">wp_ajax_get_revision_diffs</a>() {</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    require <a class="code" href="load-scripts_8php.html#a495f94983b95273ad267511b2411351f">ABSPATH</a> . <span class="stringliteral">&#39;wp-admin/includes/revision.php&#39;</span>;</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a> = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( (<span class="keywordtype">int</span>) $_REQUEST[<span class="stringliteral">&#39;post_id&#39;</span>] ) )</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;read_post&#39;</span>, <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>-&gt;ID ) )</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;    <span class="comment">// Really just pre-loading the cache here.</span></div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    <span class="keywordflow">if</span> ( ! $revisions = <a class="code" href="wp-includes_2revision_8php.html#a8587408831966c0166c1e348d7e9def6">wp_get_post_revisions</a>( <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>-&gt;ID, array( <span class="stringliteral">&#39;check_enabled&#39;</span> =&gt; <span class="keyword">false</span> ) ) )</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;    $return = array();</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;    @set_time_limit( 0 );</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;    <span class="keywordflow">foreach</span> ( $_REQUEST[<span class="stringliteral">&#39;compare&#39;</span>] as $compare_key ) {</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;        <a class="code" href="namespacelist.html">list</a>( $compare_from, $compare_to ) = explode( <span class="charliteral">&#39;:&#39;</span>, $compare_key ); <span class="comment">// from:to</span></div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;        $return[] = array(</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;            <span class="stringliteral">&#39;id&#39;</span> =&gt; $compare_key,</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;            <span class="stringliteral">&#39;fields&#39;</span> =&gt; <a class="code" href="wp-admin_2includes_2revision_8php.html#af502ba022fbc2ffafe0719ec5ed42330">wp_get_revision_ui_diff</a>( <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>, $compare_from, $compare_to ),</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;        );</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;    }</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( $return );</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;}</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;<span class="comment"> * Ajax handler for auto-saving the selected color scheme for</span></div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;<span class="comment"> * a user&#39;s own profile.</span></div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;<span class="comment"> * @since 3.8.0</span></div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;<span class="comment"> * @global array $_wp_admin_css_colors</span></div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02784"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#ad1364df8a7f1ee8af6bb7de107e7274c"> 2784</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#ad1364df8a7f1ee8af6bb7de107e7274c">wp_ajax_save_user_color_scheme</a>() {</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;    global $_wp_admin_css_colors;</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;save-color-scheme&#39;</span>, <span class="stringliteral">&#39;nonce&#39;</span> );</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;    $color_scheme = <a class="code" href="formatting_8php.html#a0ebdd3bb5f66266f5302c24c3537fb50">sanitize_key</a>( $_POST[<span class="stringliteral">&#39;color_scheme&#39;</span>] );</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;    <span class="keywordflow">if</span> ( ! isset( $_wp_admin_css_colors[ $color_scheme ] ) ) {</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;    }</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;    $previous_color_scheme = <a class="code" href="wp-includes_2user_8php.html#aa867ddb4cac7504b879d2706b939fe5a">get_user_meta</a>( <a class="code" href="wp-includes_2user_8php.html#a1359853bbf09cba486c9826f4ab66f7f">get_current_user_id</a>(), <span class="stringliteral">&#39;admin_color&#39;</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    <a class="code" href="wp-includes_2user_8php.html#a414887490e946c7f6459d886b09e0e5a">update_user_meta</a>( <a class="code" href="wp-includes_2user_8php.html#a1359853bbf09cba486c9826f4ab66f7f">get_current_user_id</a>(), <span class="stringliteral">&#39;admin_color&#39;</span>, $color_scheme );</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( array(</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;        <span class="stringliteral">&#39;previousScheme&#39;</span> =&gt; <span class="stringliteral">&#39;admin-color-&#39;</span> . $previous_color_scheme,</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;        <span class="stringliteral">&#39;currentScheme&#39;</span>  =&gt; <span class="stringliteral">&#39;admin-color-&#39;</span> . $color_scheme</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    ) );</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;}</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;<span class="comment"> * Ajax handler for getting themes from themes_api().</span></div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;<span class="comment"> * @since 3.9.0</span></div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;<span class="comment"> * @global array $themes_allowedtags</span></div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;<span class="comment"> * @global array $theme_field_defaults</span></div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02812"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#ad2e2f060f83b2e6af542acbe176a49c6"> 2812</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#ad2e2f060f83b2e6af542acbe176a49c6">wp_ajax_query_themes</a>() {</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;    global <a class="code" href="includes_2theme-install_8php.html#a53d47ff5607b4839cf2d5e1d34906d75">$themes_allowedtags</a>, <a class="code" href="includes_2theme-install_8php.html#aaf4325ee17b7d3e913562a8f4906ec3a">$theme_field_defaults</a>;</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;install_themes&#39;</span> ) ) {</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    }</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;    $args = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa3f6fdf5e7702fdd93e84301ea7987aa">wp_parse_args</a>( <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( $_REQUEST[<span class="stringliteral">&#39;request&#39;</span>] ), array(</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;        <span class="stringliteral">&#39;per_page&#39;</span> =&gt; 20,</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;        <span class="stringliteral">&#39;fields&#39;</span>   =&gt; $theme_field_defaults</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;    ) );</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    <span class="keywordflow">if</span> ( isset( $args[<span class="stringliteral">&#39;browse&#39;</span>] ) &amp;&amp; <span class="stringliteral">&#39;favorites&#39;</span> === $args[<span class="stringliteral">&#39;browse&#39;</span>] &amp;&amp; ! isset( $args[<span class="stringliteral">&#39;user&#39;</span>] ) ) {</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;        <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> = <a class="code" href="wp-includes_2user_8php.html#ab0ff8aaa836799d2cfa09210fad25ae1">get_user_option</a>( <span class="stringliteral">&#39;wporg_favorites&#39;</span> );</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> ) {</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;            $args[<span class="stringliteral">&#39;user&#39;</span>] = <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>;</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;        }</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;    }</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    $old_filter = isset( $args[<span class="stringliteral">&#39;browse&#39;</span>] ) ? $args[<span class="stringliteral">&#39;browse&#39;</span>] : <span class="stringliteral">&#39;search&#39;</span>;</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;<span class="comment">    /** This filter is documented in wp-admin/includes/class-wp-theme-install-list-table.php */</span></div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;    $args = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;install_themes_table_api_args_&#39;</span> . $old_filter, $args );</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;    $api = <a class="code" href="wp-admin_2includes_2theme_8php.html#a802e4cc5b9123da54f1897b9270816f9">themes_api</a>( <span class="stringliteral">&#39;query_themes&#39;</span>, $args );</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $api ) ) {</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    }</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    $update_php = <a class="code" href="link-template_8php.html#a4a32808e319cd6ec587320eaa73b2a96">network_admin_url</a>( <span class="stringliteral">&#39;update.php?action=install-theme&#39;</span> );</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;    <span class="keywordflow">foreach</span> ( $api-&gt;themes as &amp;<a class="code" href="theme-editor_8php.html#a1ae541f7fe1c5e21cb4535f88ec9e9dc">$theme</a> ) {</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;        $theme-&gt;install_url = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a6e348722923afe18808c59773964c162">add_query_arg</a>( array(</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;            <span class="stringliteral">&#39;theme&#39;</span>    =&gt; $theme-&gt;slug,</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;            <span class="stringliteral">&#39;_wpnonce&#39;</span> =&gt; wp_create_nonce( <span class="stringliteral">&#39;install-theme_&#39;</span> . $theme-&gt;slug )</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;        ), $update_php );</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;        $theme-&gt;name        = <a class="code" href="kses_8php.html#a16c90f8f4b5152db3c88044526e28f59">wp_kses</a>( $theme-&gt;name, $themes_allowedtags );</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;        $theme-&gt;author      = <a class="code" href="kses_8php.html#a16c90f8f4b5152db3c88044526e28f59">wp_kses</a>( $theme-&gt;author, $themes_allowedtags );</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;        $theme-&gt;version     = <a class="code" href="kses_8php.html#a16c90f8f4b5152db3c88044526e28f59">wp_kses</a>( $theme-&gt;version, $themes_allowedtags );</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;        $theme-&gt;description = <a class="code" href="kses_8php.html#a16c90f8f4b5152db3c88044526e28f59">wp_kses</a>( $theme-&gt;description, $themes_allowedtags );</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;        $theme-&gt;stars       = <a class="code" href="wp-admin_2includes_2template_8php.html#a3f872d2cde1fac7f2230d264c61e73be">wp_star_rating</a>( array( <span class="stringliteral">&#39;rating&#39;</span> =&gt; $theme-&gt;rating, <span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;percent&#39;</span>, <span class="stringliteral">&#39;number&#39;</span> =&gt; $theme-&gt;num_ratings, <span class="stringliteral">&#39;echo&#39;</span> =&gt; <span class="keyword">false</span> ) );</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;        $theme-&gt;num_ratings = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a49014f78a9cbd2165631fee1e722e2ef">number_format_i18n</a>( $theme-&gt;num_ratings );</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;        $theme-&gt;preview_url = <a class="code" href="link-template_8php.html#ad641ec50e77cc407a60569240c4b7d07">set_url_scheme</a>( $theme-&gt;preview_url );</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;    }</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( $api );</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;}</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;<span class="comment"> * Apply [embed] AJAX handlers to a string.</span></div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;<span class="comment"> * @since 4.0.0</span></div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;<span class="comment"> * @global WP_Post    $post       Global $post.</span></div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;<span class="comment"> * @global WP_Embed   $wp_embed   Embed API instance.</span></div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;<span class="comment"> * @global WP_Scripts $wp_scripts</span></div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02870"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#af86144952c211d5b330c80f9a554ce33"> 2870</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#af86144952c211d5b330c80f9a554ce33">wp_ajax_parse_embed</a>() {</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;    global <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>, $wp_embed;</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;    <span class="keywordflow">if</span> ( ! $post = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( (<span class="keywordtype">int</span>) $_POST[<span class="stringliteral">&#39;post_ID&#39;</span>] ) ) {</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;    }</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;    <span class="keywordflow">if</span> ( empty( $_POST[<span class="stringliteral">&#39;shortcode&#39;</span>] ) || ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_post&#39;</span>, $post-&gt;ID ) ) {</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;    }</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    $shortcode = <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( $_POST[<span class="stringliteral">&#39;shortcode&#39;</span>] );</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;    preg_match( <span class="charliteral">&#39;/&#39;</span> . <a class="code" href="shortcodes_8php.html#a97a445280feb8b874215ec6d6a07573b">get_shortcode_regex</a>() . <span class="stringliteral">&#39;/s&#39;</span>, $shortcode, $matches );</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;    $atts = <a class="code" href="shortcodes_8php.html#a139128d6e87add28692089de8c501ebe">shortcode_parse_atts</a>( $matches[3] );</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;    <span class="keywordflow">if</span> ( ! empty( $matches[5] ) ) {</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;        <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> = $matches[5];</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;    } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( ! empty( $atts[<span class="stringliteral">&#39;src&#39;</span>] ) ) {</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;        <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> = $atts[<span class="stringliteral">&#39;src&#39;</span>];</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;        <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;    }</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;    $parsed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;    <a class="code" href="query_8php.html#a596d0f9a6630806c4de2f476dcc26c6e">setup_postdata</a>( $post );</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;    $wp_embed-&gt;return_false_on_fail = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="wordpress_2wp-includes_2functions_8php.html#ad4a24ba6dbefcab84554fda62013864d">is_ssl</a>() &amp;&amp; 0 === strpos( <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a>, <span class="stringliteral">&#39;http://&#39;</span> ) ) {</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;        <span class="comment">// Admin is ssl and the user pasted non-ssl URL.</span></div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;        <span class="comment">// Check if the provider supports ssl embeds and use that for the preview.</span></div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;        $ssl_shortcode = preg_replace( <span class="stringliteral">&#39;%^(\\[embed[^\\]]*\\])http://%i&#39;</span>, <span class="stringliteral">&#39;$1https://&#39;</span>, $shortcode );</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;        $parsed = $wp_embed-&gt;run_shortcode( $ssl_shortcode );</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;        <span class="keywordflow">if</span> ( ! $parsed ) {</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;            $no_ssl_support = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;        }</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;    }</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> &amp;&amp; ! $parsed ) {</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;        $parsed = $wp_embed-&gt;run_shortcode( $shortcode );</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;    }</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    <span class="keywordflow">if</span> ( ! $parsed ) {</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>( array(</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;            <span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;not-embeddable&#39;</span>,</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;            <span class="stringliteral">&#39;message&#39;</span> =&gt; sprintf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;%s failed to embed.&#39;</span> ), <span class="stringliteral">&#39;&lt;code&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> ) . <span class="stringliteral">&#39;&lt;/code&gt;&#39;</span> ),</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;        ) );</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;    }</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="shortcodes_8php.html#a226fae42856ef99083b4acbfdd30b7dc">has_shortcode</a>( $parsed, <span class="stringliteral">&#39;audio&#39;</span> ) || <a class="code" href="shortcodes_8php.html#a226fae42856ef99083b4acbfdd30b7dc">has_shortcode</a>( $parsed, <span class="stringliteral">&#39;video&#39;</span> ) ) {</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;        <a class="code" href="preview_8php.html#a920c320068535c09e154c6707eb42ded">$styles</a> = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;        $mce_styles = <a class="code" href="wp-includes_2media_8php.html#a893fe063557154bbcafbafd20dbc8a1c">wpview_media_sandbox_styles</a>();</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;        <span class="keywordflow">foreach</span> ( $mce_styles as $style ) {</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;            <a class="code" href="preview_8php.html#a920c320068535c09e154c6707eb42ded">$styles</a> .= sprintf( <span class="stringliteral">&#39;&lt;link rel=&quot;stylesheet&quot; href=&quot;%s&quot;/&gt;&#39;</span>, $style );</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;        }</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;        $html = <a class="code" href="shortcodes_8php.html#aaa19827abd3976c4b6a24136c4c6380f">do_shortcode</a>( $parsed );</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;        global <a class="code" href="customize_8php.html#a8496d200b3360408bc7dc06fffd90713">$wp_scripts</a>;</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $wp_scripts ) ) {</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;            $wp_scripts-&gt;done = array();</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;        }</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;        ob_start();</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;        <a class="code" href="functions_8wp-scripts_8php.html#a68a8548130d867dfc39bfec2acd02bb4">wp_print_scripts</a>( <span class="stringliteral">&#39;wp-mediaelement&#39;</span> );</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;        $scripts = ob_get_clean();</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;        $parsed = <a class="code" href="preview_8php.html#a920c320068535c09e154c6707eb42ded">$styles</a> . $html . $scripts;</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;    }</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    <span class="keywordflow">if</span> ( ! empty( $no_ssl_support ) || ( <a class="code" href="wordpress_2wp-includes_2functions_8php.html#ad4a24ba6dbefcab84554fda62013864d">is_ssl</a>() &amp;&amp; ( preg_match( <span class="stringliteral">&#39;%&lt;(iframe|script|embed) [^&gt;]*src=&quot;http://%&#39;</span>, $parsed ) ||</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;        preg_match( <span class="stringliteral">&#39;%&lt;link [^&gt;]*href=&quot;http://%&#39;</span>, $parsed ) ) ) ) {</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;        <span class="comment">// Admin is ssl and the embed is not. Iframes, scripts, and other &quot;active content&quot; will be blocked.</span></div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>( array(</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;            <span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;not-ssl&#39;</span>,</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;            <span class="stringliteral">&#39;message&#39;</span> =&gt; <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;This preview is unavailable in the editor.&#39;</span> ),</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;        ) );</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;    }</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( array(</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;        <span class="stringliteral">&#39;body&#39;</span> =&gt; $parsed,</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;        <span class="stringliteral">&#39;attr&#39;</span> =&gt; $wp_embed-&gt;last_attr</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;    ) );</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;}</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;<span class="comment"> * @since 4.0.0</span></div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;<span class="comment"> * @global WP_Post    $post</span></div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;<span class="comment"> * @global WP_Scripts $wp_scripts</span></div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02962"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a1850e16ca47448ad2dbd34b997de79e6"> 2962</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a1850e16ca47448ad2dbd34b997de79e6">wp_ajax_parse_media_shortcode</a>() {</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;    global <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>, <a class="code" href="customize_8php.html#a8496d200b3360408bc7dc06fffd90713">$wp_scripts</a>;</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;    <span class="keywordflow">if</span> ( empty( $_POST[<span class="stringliteral">&#39;shortcode&#39;</span>] ) ) {</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;    }</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;    $shortcode = <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( $_POST[<span class="stringliteral">&#39;shortcode&#39;</span>] );</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;    <span class="keywordflow">if</span> ( ! empty( $_POST[<span class="stringliteral">&#39;post_ID&#39;</span>] ) ) {</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;        $post = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( (<span class="keywordtype">int</span>) $_POST[<span class="stringliteral">&#39;post_ID&#39;</span>] );</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;    }</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;    <span class="comment">// the embed shortcode requires a post</span></div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;    <span class="keywordflow">if</span> ( ! $post || ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_post&#39;</span>, $post-&gt;ID ) ) {</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;        <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;embed&#39;</span> === $shortcode ) {</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;        }</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;        <a class="code" href="query_8php.html#a596d0f9a6630806c4de2f476dcc26c6e">setup_postdata</a>( $post );</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;    }</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;    $parsed = <a class="code" href="shortcodes_8php.html#aaa19827abd3976c4b6a24136c4c6380f">do_shortcode</a>( $shortcode  );</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;    <span class="keywordflow">if</span> ( empty( $parsed ) ) {</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>( array(</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;            <span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;no-items&#39;</span>,</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;            <span class="stringliteral">&#39;message&#39;</span> =&gt; <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;No items found.&#39;</span> ),</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;        ) );</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;    }</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;    $head = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;    <a class="code" href="preview_8php.html#a920c320068535c09e154c6707eb42ded">$styles</a> = <a class="code" href="wp-includes_2media_8php.html#a893fe063557154bbcafbafd20dbc8a1c">wpview_media_sandbox_styles</a>();</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    <span class="keywordflow">foreach</span> ( <a class="code" href="preview_8php.html#a920c320068535c09e154c6707eb42ded">$styles</a> as $style ) {</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;        $head .= <span class="stringliteral">&#39;&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;&#39;</span> . $style . <span class="stringliteral">&#39;&quot;&gt;&#39;</span>;</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;    }</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    <span class="keywordflow">if</span> ( ! empty( $wp_scripts ) ) {</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;        $wp_scripts-&gt;done = array();</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;    }</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;    ob_start();</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;    echo $parsed;</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;    <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;playlist&#39;</span> === $_REQUEST[<span class="stringliteral">&#39;type&#39;</span>] ) {</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;        <a class="code" href="wp-includes_2media_8php.html#a6be0a29c096a220f75d8a2b458bdd643">wp_underscore_playlist_templates</a>();</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;        <a class="code" href="functions_8wp-scripts_8php.html#a68a8548130d867dfc39bfec2acd02bb4">wp_print_scripts</a>( <span class="stringliteral">&#39;wp-playlist&#39;</span> );</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;        <a class="code" href="functions_8wp-scripts_8php.html#a68a8548130d867dfc39bfec2acd02bb4">wp_print_scripts</a>( array( <span class="stringliteral">&#39;froogaloop&#39;</span>, <span class="stringliteral">&#39;wp-mediaelement&#39;</span> ) );</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;    }</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( array(</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;        <span class="stringliteral">&#39;head&#39;</span> =&gt; $head,</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;        <span class="stringliteral">&#39;body&#39;</span> =&gt; ob_get_clean()</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;    ) );</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;}</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;<span class="comment"> * AJAX handler for destroying multiple open sessions for a user.</span></div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;<span class="comment"> * @since 4.1.0</span></div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03027"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a125e8f4d7438f044c811bda53664e30d"> 3027</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a125e8f4d7438f044c811bda53664e30d">wp_ajax_destroy_sessions</a>() {</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;    <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> = get_userdata( (<span class="keywordtype">int</span>) $_POST[<span class="stringliteral">&#39;user_id&#39;</span>] );</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> ) {</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_user&#39;</span>, <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>-&gt;ID ) ) {</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;            <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;        } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( ! wp_verify_nonce( $_POST[<span class="stringliteral">&#39;nonce&#39;</span>], <span class="stringliteral">&#39;update-user_&#39;</span> . <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>-&gt;ID ) ) {</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;            <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;        }</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;    }</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> ) {</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>( array(</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;            <span class="stringliteral">&#39;message&#39;</span> =&gt; <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Could not log out user sessions. Please try again.&#39;</span> ),</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;        ) );</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;    }</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;    $sessions = <a class="code" href="class_w_p___session___tokens.html#a89e3b6f7f96d3aec2c38f59a05925c7d">WP_Session_Tokens::get_instance</a>( <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>-&gt;ID );</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>-&gt;ID === <a class="code" href="wp-includes_2user_8php.html#a1359853bbf09cba486c9826f4ab66f7f">get_current_user_id</a>() ) {</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;        $sessions-&gt;destroy_others( <a class="code" href="wp-includes_2user_8php.html#a05c0449624564d09c9a25edf13003945">wp_get_session_token</a>() );</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;        <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;You are now logged out everywhere else.&#39;</span> );</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;        $sessions-&gt;destroy_all();</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;        <span class="comment">/* translators: 1: User&#39;s display name. */</span></div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;        <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> = sprintf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;%s has been logged out.&#39;</span> ), <a class="code" href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>-&gt;display_name );</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;    }</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( array( <span class="stringliteral">&#39;message&#39;</span> =&gt; <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> ) );</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;}</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;<span class="comment"> * AJAX handler for updating a plugin.</span></div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;<span class="comment"> * @since 4.2.0</span></div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;<span class="comment"> * @see Plugin_Upgrader</span></div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03065"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a633b902a7d7cf608afb81a6914100acd"> 3065</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a633b902a7d7cf608afb81a6914100acd">wp_ajax_update_plugin</a>() {</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;    global $wp_filesystem;</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;    <a class="code" href="plugins_8php.html#ada8a7130088351710bb02ed622d6bf65">$plugin</a> = urldecode( $_POST[<span class="stringliteral">&#39;plugin&#39;</span>] );</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;    $status = array(</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;        <span class="stringliteral">&#39;update&#39;</span>     =&gt; <span class="stringliteral">&#39;plugin&#39;</span>,</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;        <span class="stringliteral">&#39;plugin&#39;</span>     =&gt; <a class="code" href="plugins_8php.html#ada8a7130088351710bb02ed622d6bf65">$plugin</a>,</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;        <span class="stringliteral">&#39;slug&#39;</span>       =&gt; <a class="code" href="formatting_8php.html#a0ebdd3bb5f66266f5302c24c3537fb50">sanitize_key</a>( $_POST[<span class="stringliteral">&#39;slug&#39;</span>] ),</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;        <span class="stringliteral">&#39;oldVersion&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;        <span class="stringliteral">&#39;newVersion&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;    );</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    $plugin_data = <a class="code" href="wp-admin_2includes_2plugin_8php.html#aa808dd07ad94a35d54d13023d8d0a54f">get_plugin_data</a>( WP_PLUGIN_DIR . <span class="charliteral">&#39;/&#39;</span> . <a class="code" href="plugins_8php.html#ada8a7130088351710bb02ed622d6bf65">$plugin</a> );</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;    <span class="keywordflow">if</span> ( $plugin_data[<span class="stringliteral">&#39;Version&#39;</span>] ) {</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;        $status[<span class="stringliteral">&#39;oldVersion&#39;</span>] = sprintf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Version %s&#39;</span> ), $plugin_data[<span class="stringliteral">&#39;Version&#39;</span>] );</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;    }</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;update_plugins&#39;</span> ) ) {</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;        $status[<span class="stringliteral">&#39;error&#39;</span>] = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;You do not have sufficient permissions to update plugins for this site.&#39;</span> );</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>( $status );</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;    }</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;updates&#39;</span> );</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;    include_once( <a class="code" href="load-scripts_8php.html#a495f94983b95273ad267511b2411351f">ABSPATH</a> . <span class="stringliteral">&#39;wp-admin/includes/class-wp-upgrader.php&#39;</span> );</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;    <a class="code" href="wordpress_2wp-includes_2update_8php.html#a360285b3b3a90caae33ed49937a01462">wp_update_plugins</a>();</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;    $skin = <span class="keyword">new</span> <a class="code" href="class_automatic___upgrader___skin.html">Automatic_Upgrader_Skin</a>();</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;    $upgrader = <span class="keyword">new</span> <a class="code" href="class_plugin___upgrader.html">Plugin_Upgrader</a>( $skin );</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;    $result = $upgrader-&gt;bulk_upgrade( array( $plugin ) );</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;    <span class="keywordflow">if</span> ( is_array( $result ) &amp;&amp; empty( $result[$plugin] ) &amp;&amp; <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $skin-&gt;result ) ) {</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;        $result = $skin-&gt;result;</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    }</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;    <span class="keywordflow">if</span> ( is_array( $result ) &amp;&amp; !empty( $result[ $plugin ] ) ) {</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;        $plugin_update_data = current( $result );</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;<span class="comment">         * If the `update_plugins` site transient is empty (e.g. when you update</span></div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;<span class="comment">         * two plugins in quick succession before the transient repopulates),</span></div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;<span class="comment">         * this may be the return.</span></div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;<span class="comment">         * Preferably something can be done to ensure `update_plugins` isn&#39;t empty.</span></div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;<span class="comment">         * For now, surface some sort of error here.</span></div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;        <span class="keywordflow">if</span> ( $plugin_update_data === <span class="keyword">true</span> ) {</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;            $status[<span class="stringliteral">&#39;error&#39;</span>] = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Plugin update failed.&#39;</span> );</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>( $status );</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        }</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;        $plugin_data = <a class="code" href="wp-admin_2includes_2plugin_8php.html#ac98eb4b447e19f4df31adaaedc008b0f">get_plugins</a>( <span class="charliteral">&#39;/&#39;</span> . $result[ $plugin ][<span class="stringliteral">&#39;destination_name&#39;</span>] );</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;        $plugin_data = reset( $plugin_data );</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;        <span class="keywordflow">if</span> ( $plugin_data[<span class="stringliteral">&#39;Version&#39;</span>] ) {</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;            $status[<span class="stringliteral">&#39;newVersion&#39;</span>] = sprintf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Version %s&#39;</span> ), $plugin_data[<span class="stringliteral">&#39;Version&#39;</span>] );</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;        }</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( $status );</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $result ) ) {</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;        $status[<span class="stringliteral">&#39;error&#39;</span>] = $result-&gt;get_error_message();</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>( $status );</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( is_bool( $result ) &amp;&amp; ! $result ) {</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;        $status[<span class="stringliteral">&#39;errorCode&#39;</span>] = <span class="stringliteral">&#39;unable_to_connect_to_filesystem&#39;</span>;</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;        $status[<span class="stringliteral">&#39;error&#39;</span>] = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Unable to connect to the filesystem. Please confirm your credentials.&#39;</span> );</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;        <span class="comment">// Pass through the error from WP_Filesystem if one was raised</span></div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $wp_filesystem-&gt;errors ) &amp;&amp; $wp_filesystem-&gt;errors-&gt;get_error_code() ) {</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;            $status[<span class="stringliteral">&#39;error&#39;</span>] = $wp_filesystem-&gt;errors-&gt;get_error_message();</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;        }</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>( $status );</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;        <span class="comment">// An unhandled error occured</span></div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;        $status[<span class="stringliteral">&#39;error&#39;</span>] = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Plugin update failed.&#39;</span> );</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>( $status );</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;    }</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;}</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;<span class="comment"> * AJAX handler for saving a post from Press This.</span></div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;<span class="comment"> * @since 4.2.0</span></div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;<span class="comment"> * @global WP_Press_This $wp_press_this</span></div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03155"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a08726a916c2c471b49a3ed64b8783ee1"> 3155</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a08726a916c2c471b49a3ed64b8783ee1">wp_ajax_press_this_save_post</a>() {</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;    <span class="keywordflow">if</span> ( empty( <a class="code" href="class-wp-press-this_8php.html#aacd3725c798ebf18f0c5a0bae7e30a5a">$GLOBALS</a>[<span class="stringliteral">&#39;wp_press_this&#39;</span>] ) ) {</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;        include( <a class="code" href="load-scripts_8php.html#a495f94983b95273ad267511b2411351f">ABSPATH</a> . <span class="stringliteral">&#39;wp-admin/includes/class-wp-press-this.php&#39;</span> );</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;    }</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;    <a class="code" href="class-wp-press-this_8php.html#aacd3725c798ebf18f0c5a0bae7e30a5a">$GLOBALS</a>[<span class="stringliteral">&#39;wp_press_this&#39;</span>]-&gt;save_post();</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;}</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;<span class="comment"> * AJAX handler for creating new category from Press This.</span></div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;<span class="comment"> * @since 4.2.0</span></div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;<span class="comment"> * @global WP_Press_This $wp_press_this</span></div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03170"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a892d01bea8c425e576c5e3fb0f9f4a35"> 3170</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a892d01bea8c425e576c5e3fb0f9f4a35">wp_ajax_press_this_add_category</a>() {</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;    <span class="keywordflow">if</span> ( empty( <a class="code" href="class-wp-press-this_8php.html#aacd3725c798ebf18f0c5a0bae7e30a5a">$GLOBALS</a>[<span class="stringliteral">&#39;wp_press_this&#39;</span>] ) ) {</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;        include( <a class="code" href="load-scripts_8php.html#a495f94983b95273ad267511b2411351f">ABSPATH</a> . <span class="stringliteral">&#39;wp-admin/includes/class-wp-press-this.php&#39;</span> );</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;    }</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    <a class="code" href="class-wp-press-this_8php.html#aacd3725c798ebf18f0c5a0bae7e30a5a">$GLOBALS</a>[<span class="stringliteral">&#39;wp_press_this&#39;</span>]-&gt;add_category();</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;}</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;<span class="comment"> * AJAX handler for cropping an image.</span></div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;<span class="comment"> * @since 4.3.0</span></div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;<span class="comment"> * @global WP_Site_Icon $wp_site_icon</span></div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03185"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a4abc739201447288373bc89860f9b25b"> 3185</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a4abc739201447288373bc89860f9b25b">wp_ajax_crop_image</a>() {</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;    $attachment_id = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $_POST[<span class="stringliteral">&#39;id&#39;</span>] );</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;    check_ajax_referer( <span class="stringliteral">&#39;image_editor-&#39;</span> . $attachment_id, <span class="stringliteral">&#39;nonce&#39;</span> );</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;customize&#39;</span> ) ) {</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;    }</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;    $context = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="charliteral">&#39;_&#39;</span>, <span class="charliteral">&#39;-&#39;</span>, $_POST[<span class="stringliteral">&#39;context&#39;</span>] );</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;    $data    = array_map( <span class="stringliteral">&#39;absint&#39;</span>, $_POST[<span class="stringliteral">&#39;cropDetails&#39;</span>] );</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;    $cropped = <a class="code" href="wp-admin_2includes_2image_8php.html#a319b5bc3ec2753bad3e397bcd75f9d9e">wp_crop_image</a>( $attachment_id, $data[<span class="stringliteral">&#39;x1&#39;</span>], $data[<span class="stringliteral">&#39;y1&#39;</span>], $data[<span class="stringliteral">&#39;width&#39;</span>], $data[<span class="stringliteral">&#39;height&#39;</span>], $data[<span class="stringliteral">&#39;dst_width&#39;</span>], $data[<span class="stringliteral">&#39;dst_height&#39;</span>] );</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;    <span class="keywordflow">if</span> ( ! $cropped || <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $cropped ) ) {</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>( array( <span class="stringliteral">&#39;message&#39;</span> =&gt; <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Image could not be processed.&#39;</span> ) ) );</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;    }</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;    <span class="keywordflow">switch</span> ( $context ) {</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;        <span class="keywordflow">case</span> <span class="stringliteral">&#39;site-icon&#39;</span>:</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;            require_once <a class="code" href="load-scripts_8php.html#a495f94983b95273ad267511b2411351f">ABSPATH</a> . <span class="stringliteral">&#39;/wp-admin/includes/class-wp-site-icon.php&#39;</span>;</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;            global $wp_site_icon;</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;            <span class="comment">// Skip creating a new attachment if the attachment is a Site Icon.</span></div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2post_8php.html#a5ac8d9eefeeb2ac8b45650a335971b81">get_post_meta</a>( $attachment_id, <span class="stringliteral">&#39;_wp_attachment_context&#39;</span>, <span class="keyword">true</span> ) == $context ) {</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;                <span class="comment">// Delete the temporary cropped file, we don&#39;t need it.</span></div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;                <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a716e6d165f72c602db1cd5a7b4698f4d">wp_delete_file</a>( $cropped );</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;                <span class="comment">// Additional sizes in wp_prepare_attachment_for_js().</span></div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;                <a class="code" href="noop_8php.html#a4df34d0c6ff2b33c5178529f19b82f90">add_filter</a>( <span class="stringliteral">&#39;image_size_names_choose&#39;</span>, array( $wp_site_icon, <span class="stringliteral">&#39;additional_sizes&#39;</span> ) );</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;            }</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;<span class="comment">            /** This filter is documented in wp-admin/custom-header.php */</span></div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;            $cropped = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;wp_create_file_in_uploads&#39;</span>, $cropped, $attachment_id ); <span class="comment">// For replication.</span></div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;            $object  = $wp_site_icon-&gt;create_attachment_object( $cropped, $attachment_id );</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;            unset( $object[<span class="stringliteral">&#39;ID&#39;</span>] );</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;            <span class="comment">// Update the attachment.</span></div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;            <a class="code" href="noop_8php.html#a4df34d0c6ff2b33c5178529f19b82f90">add_filter</a>( <span class="stringliteral">&#39;intermediate_image_sizes_advanced&#39;</span>, array( $wp_site_icon, <span class="stringliteral">&#39;additional_sizes&#39;</span> ) );</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;            $attachment_id = $wp_site_icon-&gt;insert_attachment( $object, $cropped );</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;            <a class="code" href="wp-includes_2plugin_8php.html#a6bfce44737689c4ea3aed89badf40b6d">remove_filter</a>( <span class="stringliteral">&#39;intermediate_image_sizes_advanced&#39;</span>, array( $wp_site_icon, <span class="stringliteral">&#39;additional_sizes&#39;</span> ) );</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;            <span class="comment">// Additional sizes in wp_prepare_attachment_for_js().</span></div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;            <a class="code" href="noop_8php.html#a4df34d0c6ff2b33c5178529f19b82f90">add_filter</a>( <span class="stringliteral">&#39;image_size_names_choose&#39;</span>, array( $wp_site_icon, <span class="stringliteral">&#39;additional_sizes&#39;</span> ) );</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;<span class="comment">            /**</span></div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;<span class="comment">             * Fires before a cropped image is saved.</span></div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;<span class="comment">             *</span></div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;<span class="comment">             * Allows to add filters to modify the way a cropped image is saved.</span></div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;<span class="comment">             *</span></div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;<span class="comment">             * @since 4.3.0</span></div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;<span class="comment">             *</span></div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;<span class="comment">             * @param string $context       The Customizer control requesting the cropped image.</span></div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;<span class="comment">             * @param int    $attachment_id The attachment ID of the original image.</span></div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;<span class="comment">             * @param string $cropped       Path to the cropped image file.</span></div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;            <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;wp_ajax_crop_image_pre_save&#39;</span>, $context, $attachment_id, $cropped );</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;<span class="comment">            /** This filter is documented in wp-admin/custom-header.php */</span></div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;            $cropped = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;wp_create_file_in_uploads&#39;</span>, $cropped, $attachment_id ); <span class="comment">// For replication.</span></div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;            $parent_url = <a class="code" href="wp-includes_2post_8php.html#a4178b3d59d8ab3a058de6e24fa056697">wp_get_attachment_url</a>( $attachment_id );</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;            <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a>        = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( basename( $parent_url ), basename( $cropped ), $parent_url );</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;            <a class="code" href="options-discussion_8php.html#af594986e4618a8d6a5d7566617f583c6">$size</a>       = @getimagesize( $cropped );</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;            $image_type = ( <a class="code" href="options-discussion_8php.html#af594986e4618a8d6a5d7566617f583c6">$size</a> ) ? <a class="code" href="options-discussion_8php.html#af594986e4618a8d6a5d7566617f583c6">$size</a>[<span class="stringliteral">&#39;mime&#39;</span>] : <span class="stringliteral">&#39;image/jpeg&#39;</span>;</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;            $object = array(</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;                <span class="stringliteral">&#39;post_title&#39;</span>     =&gt; basename( $cropped ),</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;                <span class="stringliteral">&#39;post_content&#39;</span>   =&gt; <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a>,</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;                <span class="stringliteral">&#39;post_mime_type&#39;</span> =&gt; $image_type,</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;                <span class="stringliteral">&#39;guid&#39;</span>           =&gt; <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a>,</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;                <span class="stringliteral">&#39;context&#39;</span>        =&gt; $context,</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;            );</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;            $attachment_id = <a class="code" href="wp-includes_2post_8php.html#ae134c72f2a749bd225146b26241f22e3">wp_insert_attachment</a>( $object, $cropped );</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;            <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#ae7fc3682b173ad9d4b1892bdc04d18d9">$metadata</a> = <a class="code" href="wp-admin_2includes_2image_8php.html#a81a49932707fc3690dc80a4ce77c4028">wp_generate_attachment_metadata</a>( $attachment_id, $cropped );</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;<span class="comment">            /**</span></div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;<span class="comment">             * Filter the cropped image attachment metadata.</span></div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;<span class="comment">             *</span></div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;<span class="comment">             * @since 4.3.0</span></div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;<span class="comment">             *</span></div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;<span class="comment">             * @see wp_generate_attachment_metadata()</span></div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;<span class="comment">             *</span></div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;<span class="comment">             * @param array $metadata Attachment metadata.</span></div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;            <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#ae7fc3682b173ad9d4b1892bdc04d18d9">$metadata</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;wp_ajax_cropped_attachment_metadata&#39;</span>, <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#ae7fc3682b173ad9d4b1892bdc04d18d9">$metadata</a> );</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;            <a class="code" href="wp-includes_2post_8php.html#a563b1dd3f65d7fc81701c99ea3f4d575">wp_update_attachment_metadata</a>( $attachment_id, <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#ae7fc3682b173ad9d4b1892bdc04d18d9">$metadata</a> );</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;<span class="comment">            /**</span></div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;<span class="comment">             * Filter the attachment ID for a cropped image.</span></div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;<span class="comment">             *</span></div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;<span class="comment">             * @since 4.3.0</span></div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;<span class="comment">             *</span></div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;<span class="comment">             * @param int    $attachment_id The attachment ID of the cropped image.</span></div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;<span class="comment">             * @param string $context       The Customizer control requesting the cropped image.</span></div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;            $attachment_id = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;wp_ajax_cropped_attachment_id&#39;</span>, $attachment_id, $context );</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;    }</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( <a class="code" href="wp-includes_2media_8php.html#acbc26715e889ac7379f1ee52ae8666c5">wp_prepare_attachment_for_js</a>( $attachment_id ) );</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;}</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;<span class="comment"> * Ajax handler for generating a password.</span></div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;<span class="comment"> * @since 4.4.0</span></div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03297"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a45d44dc7593c9265a40376c4d236dd17"> 3297</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a45d44dc7593c9265a40376c4d236dd17">wp_ajax_generate_password</a>() {</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( wp_generate_password( 24 ) );</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;}</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;<span class="comment"> * Ajax handler for saving the user&#39;s WordPress.org username.</span></div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;<span class="comment"> * @since 4.4.0</span></div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03306"></a><span class="lineno"><a class="line" href="ajax-actions_8php.html#a863afc41711309a1be0f659f774a1cdb"> 3306</a></span>&#160;<span class="keyword">function</span> <a class="code" href="ajax-actions_8php.html#a863afc41711309a1be0f659f774a1cdb">wp_ajax_save_wporg_username</a>() {</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;install_themes&#39;</span> ) &amp;&amp; ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;install_plugins&#39;</span> ) ) {</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;    }</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;    $username = isset( $_REQUEST[<span class="stringliteral">&#39;username&#39;</span>] ) ? <a class="code" href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a>( $_REQUEST[<span class="stringliteral">&#39;username&#39;</span>] ) : <span class="keyword">false</span>;</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;    <span class="keywordflow">if</span> ( ! $username ) {</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;    }</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;    <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( <a class="code" href="wp-includes_2user_8php.html#a414887490e946c7f6459d886b09e0e5a">update_user_meta</a>( <a class="code" href="wp-includes_2user_8php.html#a1359853bbf09cba486c9826f4ab66f7f">get_current_user_id</a>(), <span class="stringliteral">&#39;wporg_favorites&#39;</span>, $username ) );</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;}</div>
<div class="ttc" id="ms-functions_8php_html_af8744a9eea4abee621215d9ae6348c68"><div class="ttname"><a href="ms-functions_8php.html#af8744a9eea4abee621215d9ae6348c68">wp_is_large_network</a></div><div class="ttdeci">wp_is_large_network($using= 'sites')</div><div class="ttdoc">Whether or not we have a large network. </div><div class="ttdef"><b>Definition:</b> <a href="ms-functions_8php_source.html#l02386">ms-functions.php:2386</a></div></div>
<div class="ttc" id="shortcodes_8php_html_a97a445280feb8b874215ec6d6a07573b"><div class="ttname"><a href="shortcodes_8php.html#a97a445280feb8b874215ec6d6a07573b">get_shortcode_regex</a></div><div class="ttdeci">get_shortcode_regex($tagnames=null)</div><div class="ttdoc">Retrieve the shortcode regular expression for searching. </div><div class="ttdef"><b>Definition:</b> <a href="shortcodes_8php_source.html#l00253">shortcodes.php:253</a></div></div>
<div class="ttc" id="meta_8php_html_abbc8c66e89b6d7d45cd4d990e998bdb4"><div class="ttname"><a href="meta_8php.html#abbc8c66e89b6d7d45cd4d990e998bdb4">update_metadata_by_mid</a></div><div class="ttdeci">update_metadata_by_mid($meta_type, $meta_id, $meta_value, $meta_key=false)</div><div class="ttdoc">Update meta data by meta ID. </div><div class="ttdef"><b>Definition:</b> <a href="meta_8php_source.html#l00607">meta.php:607</a></div></div>
<div class="ttc" id="link-add_8php_html_a5d346e31b75d916e3bac9cb193bfc97f"><div class="ttname"><a href="link-add_8php.html#a5d346e31b75d916e3bac9cb193bfc97f">$link</a></div><div class="ttdeci">$link</div><div class="ttdef"><b>Definition:</b> <a href="link-add_8php_source.html#l00026">link-add.php:26</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a237dc496b5169a5a37e48e3409238c61"><div class="ttname"><a href="ajax-actions_8php.html#a237dc496b5169a5a37e48e3409238c61">wp_ajax_sample_permalink</a></div><div class="ttdeci">wp_ajax_sample_permalink()</div><div class="ttdoc">Ajax handler to retrieve a sample permalink. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01573">ajax-actions.php:1573</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a10cc16fa6990163a886e58c9a8e591e8"><div class="ttname"><a href="ajax-actions_8php.html#a10cc16fa6990163a886e58c9a8e591e8">wp_ajax_set_attachment_thumbnail</a></div><div class="ttdeci">wp_ajax_set_attachment_thumbnail()</div><div class="ttdoc">AJAX handler for setting the featured image for an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02145">ajax-actions.php:2145</a></div></div>
<div class="ttc" id="post__image_8php_html_acf215f34a917d014776ce684a9ee8909"><div class="ttname"><a href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a></div><div class="ttdeci">$url</div><div class="ttdef"><b>Definition:</b> <a href="post__image_8php_source.html#l00025">post_image.php:25</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_af20ad6d8461a5a8b33b5574062294a4c"><div class="ttname"><a href="ajax-actions_8php.html#af20ad6d8461a5a8b33b5574062294a4c">wp_ajax_get_tagcloud</a></div><div class="ttdeci">wp_ajax_get_tagcloud()</div><div class="ttdoc">Ajax handler for getting a tagcloud. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00872">ajax-actions.php:872</a></div></div>
<div class="ttc" id="formatting_8php_html_a3b974f63529424e457b55f009a795461"><div class="ttname"><a href="formatting_8php.html#a3b974f63529424e457b55f009a795461">stripslashes_deep</a></div><div class="ttdeci">stripslashes_deep($value)</div><div class="ttdoc">Navigates through an array, object, or scalar, and removes slashes from the values. </div><div class="ttdef"><b>Definition:</b> <a href="formatting_8php_source.html#l02024">formatting.php:2024</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a7fc0b6f51312563a59e3c615373a4186"><div class="ttname"><a href="ajax-actions_8php.html#a7fc0b6f51312563a59e3c615373a4186">wp_ajax_get_revision_diffs</a></div><div class="ttdeci">wp_ajax_get_revision_diffs()</div><div class="ttdoc">Ajax handler for getting revision diffs. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02749">ajax-actions.php:2749</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a4178b3d59d8ab3a058de6e24fa056697"><div class="ttname"><a href="wp-includes_2post_8php.html#a4178b3d59d8ab3a058de6e24fa056697">wp_get_attachment_url</a></div><div class="ttdeci">wp_get_attachment_url($post_id=0)</div><div class="ttdoc">Retrieve the URL for an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l04866">wp-includes/post.php:4866</a></div></div>
<div class="ttc" id="wp-admin_2widgets_8php_html_a233259fe7379e46b62e0a6d786f8f921"><div class="ttname"><a href="wp-admin_2widgets_8php.html#a233259fe7379e46b62e0a6d786f8f921">$sidebars_widgets</a></div><div class="ttdeci">if(!current_theme_supports( 'widgets')) $sidebars_widgets</div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2widgets_8php_source.html#l00083">wp-admin/widgets.php:83</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_ae92017dd73dd2eed0ce594aec6263fd4"><div class="ttname"><a href="ajax-actions_8php.html#ae92017dd73dd2eed0ce594aec6263fd4">wp_ajax_time_format</a></div><div class="ttdeci">wp_ajax_time_format()</div><div class="ttdoc">Ajax handler for time formatting. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02203">ajax-actions.php:2203</a></div></div>
<div class="ttc" id="wp-admin_2includes_2media_8php_html_ad208ac9c114d86649b6b1df2e8c91c27"><div class="ttname"><a href="wp-admin_2includes_2media_8php.html#ad208ac9c114d86649b6b1df2e8c91c27">media_handle_upload</a></div><div class="ttdeci">media_handle_upload($file_id, $post_id, $post_data=array(), $overrides=array( 'test_form'=&gt; false))</div><div class="ttdoc">Save a file submitted from a POST request and create an attachment post for it. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2media_8php_source.html#l00269">wp-admin/includes/media.php:269</a></div></div>
<div class="ttc" id="shortcodes_8php_html_aaa19827abd3976c4b6a24136c4c6380f"><div class="ttname"><a href="shortcodes_8php.html#aaa19827abd3976c4b6a24136c4c6380f">do_shortcode</a></div><div class="ttdeci">do_shortcode($content, $ignore_html=false)</div><div class="ttdoc">Search content for shortcodes and filter shortcodes through their hooks. </div><div class="ttdef"><b>Definition:</b> <a href="shortcodes_8php_source.html#l00202">shortcodes.php:202</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_ac984a204e35272d1a897fedce9a92847"><div class="ttname"><a href="wp-includes_2post_8php.html#ac984a204e35272d1a897fedce9a92847">update_post_meta</a></div><div class="ttdeci">update_post_meta($post_id, $meta_key, $meta_value, $prev_value= '')</div><div class="ttdoc">Update post meta field based on post ID. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l01733">wp-includes/post.php:1733</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a0b827b3a380fc33dc655ce4c1e8c2c9f"><div class="ttname"><a href="ajax-actions_8php.html#a0b827b3a380fc33dc655ce4c1e8c2c9f">wp_ajax_upload_attachment</a></div><div class="ttdeci">wp_ajax_upload_attachment()</div><div class="ttdoc">Ajax handler for uploading attachments. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01982">ajax-actions.php:1982</a></div></div>
<div class="ttc" id="customize_8php_html_ab00f88198c31570dc0a02c6588f39fc5"><div class="ttname"><a href="customize_8php.html#ab00f88198c31570dc0a02c6588f39fc5">$wp_customize</a></div><div class="ttdeci">if(!empty($url)) if(!empty($return)) if(!empty($autofocus)&amp;&amp;is_array($autofocus)) global $wp_customize</div><div class="ttdef"><b>Definition:</b> <a href="customize_8php_source.html#l00030">customize.php:30</a></div></div>
<div class="ttc" id="delete__link_8php_html_aabe6700a6326424ba662664adce40fa4"><div class="ttname"><a href="delete__link_8php.html#aabe6700a6326424ba662664adce40fa4">$link_text</a></div><div class="ttdeci">if(!GravityView_Delete_Entry::check_user_cap_delete_entry($entry, $field_settings)) $link_text</div><div class="ttdef"><b>Definition:</b> <a href="delete__link_8php_source.html#l00014">delete_link.php:14</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a9be36fc34826d747ce67db26df4bf448"><div class="ttname"><a href="ajax-actions_8php.html#a9be36fc34826d747ce67db26df4bf448">wp_ajax_save_attachment</a></div><div class="ttdeci">wp_ajax_save_attachment()</div><div class="ttdoc">Ajax handler for updating attachment attributes. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02389">ajax-actions.php:2389</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a1850e16ca47448ad2dbd34b997de79e6"><div class="ttname"><a href="ajax-actions_8php.html#a1850e16ca47448ad2dbd34b997de79e6">wp_ajax_parse_media_shortcode</a></div><div class="ttdeci">wp_ajax_parse_media_shortcode()</div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02962">ajax-actions.php:2962</a></div></div>
<div class="ttc" id="post__image_8php_html_a4f9340ccb02c5d876a448a1d860f3812"><div class="ttname"><a href="post__image_8php.html#a4f9340ccb02c5d876a448a1d860f3812">$caption</a></div><div class="ttdeci">$caption</div><div class="ttdef"><b>Definition:</b> <a href="post__image_8php_source.html#l00027">post_image.php:27</a></div></div>
<div class="ttc" id="wp-includes_2media_8php_html_a10aa92e72ad93b0bf07d563524756eac"><div class="ttname"><a href="wp-includes_2media_8php.html#a10aa92e72ad93b0bf07d563524756eac">get_taxonomies_for_attachments</a></div><div class="ttdeci">get_taxonomies_for_attachments($output= 'names')</div><div class="ttdoc">Retrieves all of the taxonomy names that are registered for attachments. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2media_8php_source.html#l02724">wp-includes/media.php:2724</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a08a3d66142c2d31d6fdb95b1efac7185"><div class="ttname"><a href="wp-includes_2post_8php.html#a08a3d66142c2d31d6fdb95b1efac7185">wp_get_attachment_metadata</a></div><div class="ttdeci">wp_get_attachment_metadata($post_id=0, $unfiltered=false)</div><div class="ttdoc">Retrieve attachment meta field for attachment ID. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l04806">wp-includes/post.php:4806</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a2331e879806fb799da8cb7e20efc2111"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a2331e879806fb799da8cb7e20efc2111">wp_send_json</a></div><div class="ttdeci">wp_send_json($response)</div><div class="ttdoc">Send a JSON response back to an Ajax request. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l02972">wordpress/wp-includes/functions.php:2972</a></div></div>
<div class="ttc" id="image-edit_8php_html_ac1283964ab0299f759c15831ef16c4c6"><div class="ttname"><a href="image-edit_8php.html#ac1283964ab0299f759c15831ef16c4c6">wp_save_image</a></div><div class="ttdeci">wp_save_image($post_id)</div><div class="ttdoc">Saves image to post along with enqueued changes in $_REQUEST[&#39;history&#39;]. </div><div class="ttdef"><b>Definition:</b> <a href="image-edit_8php_source.html#l00710">image-edit.php:710</a></div></div>
<div class="ttc" id="wp-includes_2plugin_8php_html_aed75045b0b4572e55462b37b063a77cc"><div class="ttname"><a href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a></div><div class="ttdeci">do_action($tag, $arg= '')</div><div class="ttdoc">Execute functions hooked on a specific action hook. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2plugin_8php_source.html#l00482">wp-includes/plugin.php:482</a></div></div>
<div class="ttc" id="wp-comments-post_8php_html_a536677acc0163c53c067316a97456e6c"><div class="ttname"><a href="wp-comments-post_8php.html#a536677acc0163c53c067316a97456e6c">$comment</a></div><div class="ttdeci">$comment</div><div class="ttdef"><b>Definition:</b> <a href="wp-comments-post_8php_source.html#l00020">wp-comments-post.php:20</a></div></div>
<div class="ttc" id="wp-includes_2widgets_8php_html_a9a26db7ecc0850fcb9879bc5b0a6fc55"><div class="ttname"><a href="wp-includes_2widgets_8php.html#a9a26db7ecc0850fcb9879bc5b0a6fc55">$wp_registered_widget_controls</a></div><div class="ttdeci">global $wp_registered_widget_controls</div><div class="ttdoc">Stores the registered widget control (options). </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2widgets_8php_source.html#l00026">wp-includes/widgets.php:26</a></div></div>
<div class="ttc" id="wp-includes_2comment_8php_html_aea1c4f43ccdafd6389e3188637844128"><div class="ttname"><a href="wp-includes_2comment_8php.html#aea1c4f43ccdafd6389e3188637844128">wp_trash_comment</a></div><div class="ttdeci">wp_trash_comment($comment_id)</div><div class="ttdoc">Moves a comment to the Trash. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2comment_8php_source.html#l01172">wp-includes/comment.php:1172</a></div></div>
<div class="ttc" id="user-edit_8php_html_af0fcd925f00973e32f7214859dfb3c6b"><div class="ttname"><a href="user-edit_8php.html#af0fcd925f00973e32f7214859dfb3c6b">$user_id</a></div><div class="ttdeci">$user_id</div><div class="ttdef"><b>Definition:</b> <a href="user-edit_8php_source.html#l00014">user-edit.php:14</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a140833250dbef5a389fb822a3deda305"><div class="ttname"><a href="ajax-actions_8php.html#a140833250dbef5a389fb822a3deda305">wp_ajax_update_widget</a></div><div class="ttdeci">wp_ajax_update_widget()</div><div class="ttdoc">Ajax handler for saving a widget. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01937">ajax-actions.php:1937</a></div></div>
<div class="ttc" id="customize_8php_html_a8496d200b3360408bc7dc06fffd90713"><div class="ttname"><a href="customize_8php.html#a8496d200b3360408bc7dc06fffd90713">$wp_scripts</a></div><div class="ttdeci">if(!empty($url)) if(!empty($return)) if(!empty($autofocus)&amp;&amp;is_array($autofocus)) global $wp_scripts</div><div class="ttdoc">WP_Scripts $wp_scripts  WP_Customize_Manager $wp_customize </div><div class="ttdef"><b>Definition:</b> <a href="customize_8php_source.html#l00030">customize.php:30</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a125e8f4d7438f044c811bda53664e30d"><div class="ttname"><a href="ajax-actions_8php.html#a125e8f4d7438f044c811bda53664e30d">wp_ajax_destroy_sessions</a></div><div class="ttdeci">wp_ajax_destroy_sessions()</div><div class="ttdoc">AJAX handler for destroying multiple open sessions for a user. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l03027">ajax-actions.php:3027</a></div></div>
<div class="ttc" id="wp-cron_8php_html_af20635b6c08e03bfee9e3fc036fa80f3"><div class="ttname"><a href="wp-cron_8php.html#af20635b6c08e03bfee9e3fc036fa80f3">$keys</a></div><div class="ttdeci">$keys</div><div class="ttdef"><b>Definition:</b> <a href="wp-cron_8php_source.html#l00061">wp-cron.php:61</a></div></div>
<div class="ttc" id="class-wp-press-this_8php_html_aacd3725c798ebf18f0c5a0bae7e30a5a"><div class="ttname"><a href="class-wp-press-this_8php.html#aacd3725c798ebf18f0c5a0bae7e30a5a">$GLOBALS</a></div><div class="ttdeci">$GLOBALS['wp_press_this']</div><div class="ttdoc">WP_Press_This $wp_press_this </div><div class="ttdef"><b>Definition:</b> <a href="class-wp-press-this_8php_source.html#l01535">class-wp-press-this.php:1535</a></div></div>
<div class="ttc" id="functions_8wp-scripts_8php_html_a68a8548130d867dfc39bfec2acd02bb4"><div class="ttname"><a href="functions_8wp-scripts_8php.html#a68a8548130d867dfc39bfec2acd02bb4">wp_print_scripts</a></div><div class="ttdeci">wp_print_scripts($handles=false)</div><div class="ttdoc">Print scripts in document head that are in the $handles queue. </div><div class="ttdef"><b>Definition:</b> <a href="functions_8wp-scripts_8php_source.html#l00065">functions.wp-scripts.php:65</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_adbbff8530ecf449911e25793078f0148"><div class="ttname"><a href="ajax-actions_8php.html#adbbff8530ecf449911e25793078f0148">wp_ajax_add_tag</a></div><div class="ttdeci">wp_ajax_add_tag()</div><div class="ttdoc">Ajax handler to add a tag. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00815">ajax-actions.php:815</a></div></div>
<div class="ttc" id="admin-header_8php_html_a226a8c35ebe8d3d1d1cc57b01677223b"><div class="ttname"><a href="admin-header_8php.html#a226a8c35ebe8d3d1d1cc57b01677223b">$pagenow</a></div><div class="ttdeci">global $pagenow</div><div class="ttdef"><b>Definition:</b> <a href="admin-header_8php_source.html#l00026">admin-header.php:26</a></div></div>
<div class="ttc" id="wp-includes_2media_8php_html_a6be0a29c096a220f75d8a2b458bdd643"><div class="ttname"><a href="wp-includes_2media_8php.html#a6be0a29c096a220f75d8a2b458bdd643">wp_underscore_playlist_templates</a></div><div class="ttdeci">wp_underscore_playlist_templates()</div><div class="ttdoc">Outputs the templates used by playlists. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2media_8php_source.html#l01771">wp-includes/media.php:1771</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_af3a0eb496bf2de5db76f8dce4258f52e"><div class="ttname"><a href="ajax-actions_8php.html#af3a0eb496bf2de5db76f8dce4258f52e">wp_ajax_widgets_order</a></div><div class="ttdeci">wp_ajax_widgets_order()</div><div class="ttdoc">Ajax handler for saving the widgets order. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01802">ajax-actions.php:1802</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a937aef348b489a0cb87b259ce2ef4287"><div class="ttname"><a href="ajax-actions_8php.html#a937aef348b489a0cb87b259ce2ef4287">wp_ajax_untrash_post</a></div><div class="ttdeci">wp_ajax_untrash_post($action)</div><div class="ttdoc">Ajax handler to restore a post from the trash. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00698">ajax-actions.php:698</a></div></div>
<div class="ttc" id="capabilities_8php_html_a99845439f6f1db111622e0b684512ba7"><div class="ttname"><a href="capabilities_8php.html#a99845439f6f1db111622e0b684512ba7">is_super_admin</a></div><div class="ttdeci">is_super_admin($user_id=false)</div><div class="ttdoc">Determine if user is a site admin. </div><div class="ttdef"><b>Definition:</b> <a href="capabilities_8php_source.html#l00598">capabilities.php:598</a></div></div>
<div class="ttc" id="wp-admin_2includes_2template_8php_html_a3f872d2cde1fac7f2230d264c61e73be"><div class="ttname"><a href="wp-admin_2includes_2template_8php.html#a3f872d2cde1fac7f2230d264c61e73be">wp_star_rating</a></div><div class="ttdeci">wp_star_rating($args=array())</div><div class="ttdoc">Output a HTML element with a star rating for a given rating. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2template_8php_source.html#l02026">wp-admin/includes/template.php:2026</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_aa7d184c754099ce519c4d8d108e59529"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a></div><div class="ttdeci">wp_send_json_error($data=null)</div><div class="ttdoc">Send a JSON response back to an Ajax request, indicating failure. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l03011">wordpress/wp-includes/functions.php:3011</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_aff52dbe3c6413e76482e7cd539b630bf"><div class="ttname"><a href="ajax-actions_8php.html#aff52dbe3c6413e76482e7cd539b630bf">wp_ajax_oembed_cache</a></div><div class="ttdeci">wp_ajax_oembed_cache()</div><div class="ttdoc">Ajax handler for oEmbed caching. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00235">ajax-actions.php:235</a></div></div>
<div class="ttc" id="wp-includes_2widgets_8php_html_a686371d9e504afdb48e88618d4b7a872"><div class="ttname"><a href="wp-includes_2widgets_8php.html#a686371d9e504afdb48e88618d4b7a872">wp_set_sidebars_widgets</a></div><div class="ttdeci">wp_set_sidebars_widgets($sidebars_widgets)</div><div class="ttdoc">Set the sidebar widget option to update sidebars. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2widgets_8php_source.html#l00924">wp-includes/widgets.php:924</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_aacc9836c7634d19e85127866e165d2f4"><div class="ttname"><a href="ajax-actions_8php.html#aacc9836c7634d19e85127866e165d2f4">wp_ajax_inline_save</a></div><div class="ttdeci">wp_ajax_inline_save()</div><div class="ttdoc">Ajax handler for Quick Edit saving a post from a list table. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01588">ajax-actions.php:1588</a></div></div>
<div class="ttc" id="kses_8php_html_abfa52cf1353d843015ff87062d3e341f"><div class="ttname"><a href="kses_8php.html#abfa52cf1353d843015ff87062d3e341f">kses_remove_filters</a></div><div class="ttdeci">kses_remove_filters()</div><div class="ttdoc">Removes all Kses input form content filters. </div><div class="ttdef"><b>Definition:</b> <a href="kses_8php_source.html#l01635">kses.php:1635</a></div></div>
<div class="ttc" id="wp-includes_2taxonomy_8php_html_a85dd27198696fc266a731792fd32abcb"><div class="ttname"><a href="wp-includes_2taxonomy_8php.html#a85dd27198696fc266a731792fd32abcb">term_exists</a></div><div class="ttdeci">term_exists($term, $taxonomy= '', $parent=null)</div><div class="ttdoc">Check if Term exists. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2taxonomy_8php_source.html#l01772">wp-includes/taxonomy.php:1772</a></div></div>
<div class="ttc" id="class___w_p___editors_html_ae4292743784fade94ba344034a45c04c"><div class="ttname"><a href="class___w_p___editors.html#ae4292743784fade94ba344034a45c04c">_WP_Editors\wp_link_query</a></div><div class="ttdeci">static wp_link_query($args=array())</div><div class="ttdoc">Performs post queries for internal linking. </div><div class="ttdef"><b>Definition:</b> <a href="class-wp-editor_8php_source.html#l01310">class-wp-editor.php:1310</a></div></div>
<div class="ttc" id="wp-admin_2includes_2template_8php_html_ae06137f852b3d9652ce772760e297626"><div class="ttname"><a href="wp-admin_2includes_2template_8php.html#ae06137f852b3d9652ce772760e297626">wp_terms_checklist</a></div><div class="ttdeci">wp_terms_checklist($post_id=0, $args=array())</div><div class="ttdoc">Output an unordered list of checkbox input elements labelled with term names. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2template_8php_source.html#l00077">wp-admin/includes/template.php:77</a></div></div>
<div class="ttc" id="image-edit_8php_html_a4f00df01abc362e365954aaf6397788b"><div class="ttname"><a href="image-edit_8php.html#a4f00df01abc362e365954aaf6397788b">wp_image_editor</a></div><div class="ttdeci">wp_image_editor($post_id, $msg=false)</div><div class="ttdoc">Loads the WP image-editing interface. </div><div class="ttdef"><b>Definition:</b> <a href="image-edit_8php_source.html#l00016">image-edit.php:16</a></div></div>
<div class="ttc" id="formatting_8php_html_aec1146dad5e11a514cf39ac8857fff84"><div class="ttname"><a href="formatting_8php.html#aec1146dad5e11a514cf39ac8857fff84">sanitize_option</a></div><div class="ttdeci">sanitize_option($option, $value)</div><div class="ttdoc">Sanitises various option values based on the nature of the option. </div><div class="ttdef"><b>Definition:</b> <a href="formatting_8php_source.html#l03642">formatting.php:3642</a></div></div>
<div class="ttc" id="async-upload_8php_html_a2717aea9720d8d0b37b32fede52333b6"><div class="ttname"><a href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a></div><div class="ttdeci">$post_id</div><div class="ttdef"><b>Definition:</b> <a href="async-upload_8php_source.html#l00084">async-upload.php:84</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_ab1d93e99f97bdd2456e922a5c3011661"><div class="ttname"><a href="ajax-actions_8php.html#ab1d93e99f97bdd2456e922a5c3011661">wp_ajax_nopriv_heartbeat</a></div><div class="ttdeci">wp_ajax_nopriv_heartbeat()</div><div class="ttdoc">Ajax handler for the Heartbeat API in the no-privilege context. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00022">ajax-actions.php:22</a></div></div>
<div class="ttc" id="wp-includes_2comment_8php_html_a7754633416dca78a36ef5b4722e654b5"><div class="ttname"><a href="wp-includes_2comment_8php.html#a7754633416dca78a36ef5b4722e654b5">wp_delete_comment</a></div><div class="ttdeci">wp_delete_comment($comment_id, $force_delete=false)</div><div class="ttdoc">Trashes or deletes a comment. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2comment_8php_source.html#l01108">wp-includes/comment.php:1108</a></div></div>
<div class="ttc" id="image-edit_8php_html_a909439c3768827180429b08c32e6771f"><div class="ttname"><a href="image-edit_8php.html#a909439c3768827180429b08c32e6771f">wp_restore_image</a></div><div class="ttdeci">wp_restore_image($post_id)</div><div class="ttdoc">Restores the metadata for a given attachment. </div><div class="ttdef"><b>Definition:</b> <a href="image-edit_8php_source.html#l00625">image-edit.php:625</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_ab023bcb2055f950c1ed7aa272908b6f0"><div class="ttname"><a href="ajax-actions_8php.html#ab023bcb2055f950c1ed7aa272908b6f0">wp_ajax_inline_save_tax</a></div><div class="ttdeci">wp_ajax_inline_save_tax()</div><div class="ttdoc">Ajax handler for quick edit saving for a term. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01686">ajax-actions.php:1686</a></div></div>
<div class="ttc" id="wp-admin_2includes_2post_8php_html_a09d57ea8d751667393fe852d6b584147"><div class="ttname"><a href="wp-admin_2includes_2post_8php.html#a09d57ea8d751667393fe852d6b584147">_wp_post_thumbnail_html</a></div><div class="ttdeci">_wp_post_thumbnail_html($thumbnail_id=null, $post=null)</div><div class="ttdoc">Output HTML for the post thumbnail meta-box. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2post_8php_source.html#l01378">wp-admin/includes/post.php:1378</a></div></div>
<div class="ttc" id="wp-content_2themes_2twentyeleven_2image_8php_html_aa2f80297e973639eba0f2f8619fe783b"><div class="ttname"><a href="wp-content_2themes_2twentyeleven_2image_8php.html#aa2f80297e973639eba0f2f8619fe783b">$attachments</a></div><div class="ttdeci">$attachments</div><div class="ttdef"><b>Definition:</b> <a href="wp-content_2themes_2twentyeleven_2image_8php_source.html#l00055">wp-content/themes/twentyeleven/image.php:55</a></div></div>
<div class="ttc" id="class_plugin___upgrader_html"><div class="ttname"><a href="class_plugin___upgrader.html">Plugin_Upgrader</a></div><div class="ttdoc">Core class used for upgrading/installing plugins. </div><div class="ttdef"><b>Definition:</b> <a href="class-wp-upgrader_8php_source.html#l00766">class-wp-upgrader.php:766</a></div></div>
<div class="ttc" id="load-scripts_8php_html_a495f94983b95273ad267511b2411351f"><div class="ttname"><a href="load-scripts_8php.html#a495f94983b95273ad267511b2411351f">ABSPATH</a></div><div class="ttdeci">const ABSPATH</div><div class="ttdoc">Set ABSPATH for execution. </div><div class="ttdef"><b>Definition:</b> <a href="load-scripts_8php_source.html#l00011">load-scripts.php:11</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a4dacfef72ebe1c7276f7d94fdbe93554"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a4dacfef72ebe1c7276f7d94fdbe93554">current_time</a></div><div class="ttdeci">current_time($type, $gmt=0)</div><div class="ttdoc">Retrieve the current time based on specified type. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l00061">wordpress/wp-includes/functions.php:61</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_ad64bc3494eea89791c0c485812d6c6c3"><div class="ttname"><a href="ajax-actions_8php.html#ad64bc3494eea89791c0c485812d6c6c3">wp_ajax_delete_inactive_widgets</a></div><div class="ttdeci">wp_ajax_delete_inactive_widgets()</div><div class="ttdoc">Ajax handler for removing inactive widgets. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01947">ajax-actions.php:1947</a></div></div>
<div class="ttc" id="wp-includes_2nav-menu_8php_html_ab677367f6b21a0846da6af660371026b"><div class="ttname"><a href="wp-includes_2nav-menu_8php.html#ab677367f6b21a0846da6af660371026b">wp_setup_nav_menu_item</a></div><div class="ttdeci">wp_setup_nav_menu_item($menu_item)</div><div class="ttdoc">Decorates a menu item object with the shared navigation menu item properties. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2nav-menu_8php_source.html#l00721">wp-includes/nav-menu.php:721</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a06d38a93c806c187fd21200c1baa9f53"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a></div><div class="ttdeci">wp_die($message= '', $title= '', $args=array())</div><div class="ttdoc">Kill WordPress execution and display HTML message with error message. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l02477">wordpress/wp-includes/functions.php:2477</a></div></div>
<div class="ttc" id="wp-admin_2includes_2revision_8php_html_af502ba022fbc2ffafe0719ec5ed42330"><div class="ttname"><a href="wp-admin_2includes_2revision_8php.html#af502ba022fbc2ffafe0719ec5ed42330">wp_get_revision_ui_diff</a></div><div class="ttdeci">wp_get_revision_ui_diff($post, $compare_from, $compare_to)</div><div class="ttdoc">Get the revision UI diff. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2revision_8php_source.html#l00022">wp-admin/includes/revision.php:22</a></div></div>
<div class="ttc" id="search-field-date_8php_html_ab0fb235c4acb6fcb8c0d565d101505a4"><div class="ttname"><a href="search-field-date_8php.html#ab0fb235c4acb6fcb8c0d565d101505a4">if</a></div><div class="ttdeci">if(!gv_empty($search_field['label'], false))</div><div class="ttdoc">Install global terms. </div><div class="ttdef"><b>Definition:</b> <a href="search-field-date_8php_source.html#l00014">search-field-date.php:14</a></div></div>
<div class="ttc" id="table-body_8php_html_a6d5e116b218efb8fa2aa69b75ad2b0b5"><div class="ttname"><a href="table-body_8php.html#a6d5e116b218efb8fa2aa69b75ad2b0b5">$alt</a></div><div class="ttdeci">$alt</div><div class="ttdef"><b>Definition:</b> <a href="table-body_8php_source.html#l00035">table-body.php:35</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a97c5001bc5d8b2ef432fd1db4a765d5d"><div class="ttname"><a href="wp-includes_2post_8php.html#a97c5001bc5d8b2ef432fd1db4a765d5d">wp_attachment_is</a></div><div class="ttdeci">wp_attachment_is($type, $post_id=0)</div><div class="ttdoc">Verifies an attachment is of a given type. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l04997">wp-includes/post.php:4997</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_ada8efad85a9cd028503cbe55c37c890a"><div class="ttname"><a href="edit-form-advanced_8php.html#ada8efad85a9cd028503cbe55c37c890a">_x</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv' _x( 'Format', 'post format')</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00244">edit-form-advanced.php:244</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_ae134c72f2a749bd225146b26241f22e3"><div class="ttname"><a href="wp-includes_2post_8php.html#ae134c72f2a749bd225146b26241f22e3">wp_insert_attachment</a></div><div class="ttdeci">wp_insert_attachment($args, $file=false, $parent=0)</div><div class="ttdoc">Insert an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l04664">wp-includes/post.php:4664</a></div></div>
<div class="ttc" id="search-field-date__range_8php_html_a177af2bf70bede02de3d05a425fb8e43"><div class="ttname"><a href="search-field-date__range_8php.html#a177af2bf70bede02de3d05a425fb8e43">$label</a></div><div class="ttdeci">$label</div><div class="ttdef"><b>Definition:</b> <a href="search-field-date__range_8php_source.html#l00011">search-field-date_range.php:11</a></div></div>
<div class="ttc" id="list-table_8php_html_a9623ca4c4d39a43ceb4b356dfde7a195"><div class="ttname"><a href="list-table_8php.html#a9623ca4c4d39a43ceb4b356dfde7a195">_get_list_table</a></div><div class="ttdeci">_get_list_table($class, $args=array())</div><div class="ttdoc">Fetch an instance of a WP_List_Table class. </div><div class="ttdef"><b>Definition:</b> <a href="list-table_8php_source.html#l00022">list-table.php:22</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a28b90382a34687e525493508c081b662"><div class="ttname"><a href="ajax-actions_8php.html#a28b90382a34687e525493508c081b662">wp_ajax_delete_meta</a></div><div class="ttdeci">wp_ajax_delete_meta()</div><div class="ttdoc">Ajax handler for deleting meta. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00622">ajax-actions.php:622</a></div></div>
<div class="ttc" id="l10n_8php_html_abf087b3109e1ee5f1bbe14b72c3705ae"><div class="ttname"><a href="l10n_8php.html#abf087b3109e1ee5f1bbe14b72c3705ae">_n</a></div><div class="ttdeci">_n($single, $plural, $number, $domain= 'default')</div><div class="ttdoc">Translates and retrieves the singular or plural form based on the supplied number. </div><div class="ttdef"><b>Definition:</b> <a href="l10n_8php_source.html#l00332">l10n.php:332</a></div></div>
<div class="ttc" id="preview_8php_html_a1a4fda4c28a9ee5f91102c023b9501f4"><div class="ttname"><a href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a></div><div class="ttdeci">$form</div><div class="ttdef"><b>Definition:</b> <a href="preview_8php_source.html#l00052">preview.php:52</a></div></div>
<div class="ttc" id="admin_8php_html_af1c9ecf26c0cfd247c0760dd4b594a6d"><div class="ttname"><a href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a></div><div class="ttdeci">if(get_option('db_upgraded')) elseif(get_option('db_version')!=$wp_db_version &amp;&amp;empty($_POST))</div><div class="ttdef"><b>Definition:</b> <a href="admin_8php_source.html#l00045">admin.php:45</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a67daa9c1bc1c137f82f30794164e7760"><div class="ttname"><a href="ajax-actions_8php.html#a67daa9c1bc1c137f82f30794164e7760">wp_ajax_replyto_comment</a></div><div class="ttdeci">wp_ajax_replyto_comment($action)</div><div class="ttdoc">Ajax handler for replying to a comment. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00973">ajax-actions.php:973</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_ad3601ef99c281038e8e7761393966517"><div class="ttname"><a href="wp-includes_2post_8php.html#ad3601ef99c281038e8e7761393966517">wp_update_post</a></div><div class="ttdeci">wp_update_post($postarr=array(), $wp_error=false)</div><div class="ttdoc">Update a post with new post data. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l03419">wp-includes/post.php:3419</a></div></div>
<div class="ttc" id="wp-includes_2taxonomy_8php_html_a3ae2e65e7c8e1a377a73f52e680b9346"><div class="ttname"><a href="wp-includes_2taxonomy_8php.html#a3ae2e65e7c8e1a377a73f52e680b9346">wp_update_term</a></div><div class="ttdeci">wp_update_term($term_id, $taxonomy, $args=array())</div><div class="ttdoc">Update term based on arguments provided. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2taxonomy_8php_source.html#l03189">wp-includes/taxonomy.php:3189</a></div></div>
<div class="ttc" id="formatting_8php_html_a2aa43f1e479af8878251d6697bf84f09"><div class="ttname"><a href="formatting_8php.html#a2aa43f1e479af8878251d6697bf84f09">wp_strip_all_tags</a></div><div class="ttdeci">wp_strip_all_tags($string, $remove_breaks=false)</div><div class="ttdoc">Properly strip all HTML tags including script and style. </div><div class="ttdef"><b>Definition:</b> <a href="formatting_8php_source.html#l04233">formatting.php:4233</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a6e348722923afe18808c59773964c162"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a6e348722923afe18808c59773964c162">add_query_arg</a></div><div class="ttdeci">add_query_arg()</div><div class="ttdoc">Retrieves a modified URL query string. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l00770">wordpress/wp-includes/functions.php:770</a></div></div>
<div class="ttc" id="wp-includes_2user_8php_html_ab0ff8aaa836799d2cfa09210fad25ae1"><div class="ttname"><a href="wp-includes_2user_8php.html#ab0ff8aaa836799d2cfa09210fad25ae1">get_user_option</a></div><div class="ttdeci">get_user_option($option, $user=0, $deprecated= '')</div><div class="ttdoc">Retrieve user option that can be either per Site or per Network. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2user_8php_source.html#l00377">wp-includes/user.php:377</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a563b1dd3f65d7fc81701c99ea3f4d575"><div class="ttname"><a href="wp-includes_2post_8php.html#a563b1dd3f65d7fc81701c99ea3f4d575">wp_update_attachment_metadata</a></div><div class="ttdeci">wp_update_attachment_metadata($post_id, $data)</div><div class="ttdoc">Update metadata for an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l04837">wp-includes/post.php:4837</a></div></div>
<div class="ttc" id="wp-admin_2includes_2image_8php_html_a81a49932707fc3690dc80a4ce77c4028"><div class="ttname"><a href="wp-admin_2includes_2image_8php.html#a81a49932707fc3690dc80a4ce77c4028">wp_generate_attachment_metadata</a></div><div class="ttdeci">wp_generate_attachment_metadata($attachment_id, $file)</div><div class="ttdoc">Generate post thumbnail attachment meta data. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2image_8php_source.html#l00076">wp-admin/includes/image.php:76</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a01758e5a91788dbef73bba2fce7e83f0"><div class="ttname"><a href="ajax-actions_8php.html#a01758e5a91788dbef73bba2fce7e83f0">wp_ajax_dashboard_widgets</a></div><div class="ttdeci">wp_ajax_dashboard_widgets()</div><div class="ttdoc">Ajax handler for dashboard widgets. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00305">ajax-actions.php:305</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_aec4a7b1d2fe28186a7f3010007f96cc3"><div class="ttname"><a href="ajax-actions_8php.html#aec4a7b1d2fe28186a7f3010007f96cc3">wp_ajax_logged_in</a></div><div class="ttdeci">wp_ajax_logged_in()</div><div class="ttdoc">Ajax handler for Customizer preview logged-in status. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00326">ajax-actions.php:326</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a06006fda28cc6835c305f639a47bda62"><div class="ttname"><a href="ajax-actions_8php.html#a06006fda28cc6835c305f639a47bda62">wp_ajax_send_attachment_to_editor</a></div><div class="ttdeci">wp_ajax_send_attachment_to_editor()</div><div class="ttdoc">Ajax handler for sending an attachment to the editor. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02550">ajax-actions.php:2550</a></div></div>
<div class="ttc" id="formatting_8php_html_aa5eab0fce35c72689998f801b8fc7dfe"><div class="ttname"><a href="formatting_8php.html#aa5eab0fce35c72689998f801b8fc7dfe">wp_slash</a></div><div class="ttdeci">wp_slash($value)</div><div class="ttdoc">Add slashes to a string or array of strings. </div><div class="ttdef"><b>Definition:</b> <a href="formatting_8php_source.html#l04393">formatting.php:4393</a></div></div>
<div class="ttc" id="wp-includes_2taxonomy_8php_html_a2564bddeb1e0131321dbaf7e14087265"><div class="ttname"><a href="wp-includes_2taxonomy_8php.html#a2564bddeb1e0131321dbaf7e14087265">get_taxonomies</a></div><div class="ttdeci">get_taxonomies($args=array(), $output= 'names', $operator= 'and')</div><div class="ttdoc">Retrieves a list of registered taxonomy names or objects. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2taxonomy_8php_source.html#l00150">wp-includes/taxonomy.php:150</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_aba22a1757906917106c85aaaf43a5ba1"><div class="ttname"><a href="ajax-actions_8php.html#aba22a1757906917106c85aaaf43a5ba1">wp_ajax_add_menu_item</a></div><div class="ttdeci">wp_ajax_add_menu_item()</div><div class="ttdoc">Ajax handler for adding a menu item. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01139">ajax-actions.php:1139</a></div></div>
<div class="ttc" id="wp-includes_2media_8php_html_acbc26715e889ac7379f1ee52ae8666c5"><div class="ttname"><a href="wp-includes_2media_8php.html#acbc26715e889ac7379f1ee52ae8666c5">wp_prepare_attachment_for_js</a></div><div class="ttdeci">wp_prepare_attachment_for_js($attachment)</div><div class="ttdoc">Prepares an attachment post object for JS, where it is expected to be JSON-encoded and fit into an At...</div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2media_8php_source.html#l03007">wp-includes/media.php:3007</a></div></div>
<div class="ttc" id="wp-includes_2media_8php_html_a893fe063557154bbcafbafd20dbc8a1c"><div class="ttname"><a href="wp-includes_2media_8php.html#a893fe063557154bbcafbafd20dbc8a1c">wpview_media_sandbox_styles</a></div><div class="ttdeci">wpview_media_sandbox_styles()</div><div class="ttdoc">Returns the URLs for CSS files used in an iframe-sandbox&#39;d TinyMCE media view. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2media_8php_source.html#l03783">wp-includes/media.php:3783</a></div></div>
<div class="ttc" id="noop_8php_html_a54639394aa645a2277ea41f3cbd23247"><div class="ttname"><a href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a></div><div class="ttdeci">apply_filters()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00026">noop.php:26</a></div></div>
<div class="ttc" id="link-template_8php_html_a5338c142d6cf827c81bbc8a12d73224c"><div class="ttname"><a href="link-template_8php.html#a5338c142d6cf827c81bbc8a12d73224c">get_attachment_link</a></div><div class="ttdeci">get_attachment_link($post=null, $leavename=false)</div><div class="ttdoc">Retrieve permalink for attachment. </div><div class="ttdef"><b>Definition:</b> <a href="link-template_8php_source.html#l00387">link-template.php:387</a></div></div>
<div class="ttc" id="formatting_8php_html_ae28eba40508a4f90752287b901970816"><div class="ttname"><a href="formatting_8php.html#ae28eba40508a4f90752287b901970816">wp_basename</a></div><div class="ttdeci">wp_basename($path, $suffix= '')</div><div class="ttdoc">i18n friendly version of basename() </div><div class="ttdef"><b>Definition:</b> <a href="formatting_8php_source.html#l04299">formatting.php:4299</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_ad2e2f060f83b2e6af542acbe176a49c6"><div class="ttname"><a href="ajax-actions_8php.html#ad2e2f060f83b2e6af542acbe176a49c6">wp_ajax_query_themes</a></div><div class="ttdeci">wp_ajax_query_themes()</div><div class="ttdoc">Ajax handler for getting themes from themes_api(). </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02812">ajax-actions.php:2812</a></div></div>
<div class="ttc" id="meta_8php_html_ad3d9d6ac672b7ab0599cdbe08195aef5"><div class="ttname"><a href="meta_8php.html#ad3d9d6ac672b7ab0599cdbe08195aef5">get_metadata_by_mid</a></div><div class="ttdeci">get_metadata_by_mid($meta_type, $meta_id)</div><div class="ttdoc">Get meta data by meta ID. </div><div class="ttdef"><b>Definition:</b> <a href="meta_8php_source.html#l00564">meta.php:564</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a82898c4034aa5ec0e1c34590c72e0015"><div class="ttname"><a href="ajax-actions_8php.html#a82898c4034aa5ec0e1c34590c72e0015">wp_ajax_fetch_list</a></div><div class="ttdeci">wp_ajax_fetch_list()</div><div class="ttdoc">Ajax handler for fetching a list table. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00085">ajax-actions.php:85</a></div></div>
<div class="ttc" id="wp-includes_2media_8php_html_a34030e9072818725c7b9b6864508bd19"><div class="ttname"><a href="wp-includes_2media_8php.html#a34030e9072818725c7b9b6864508bd19">attachment_url_to_postid</a></div><div class="ttdeci">attachment_url_to_postid($url)</div><div class="ttdoc">Tries to convert an attachment URL into a post ID. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2media_8php_source.html#l03739">wp-includes/media.php:3739</a></div></div>
<div class="ttc" id="wordpress_2wp-admin_2network_2settings_8php_html_a603ebf2df9caeca1a319ecbd9b409e76"><div class="ttname"><a href="wordpress_2wp-admin_2network_2settings_8php.html#a603ebf2df9caeca1a319ecbd9b409e76">$menu_items</a></div><div class="ttdeci">Add New page Banned Names illegal_names Users are not allowed to register these sites Separate names by spaces Limited Email Registrations limited_email_domains If you want to limit site registrations to certain domains One domain per line Banned Email Domains banned_email_domains banned_email_domains If you want to ban domains from site registrations One domain per line New Site Settings Welcome Email welcome_email The welcome email sent to new site owners Welcome User Email welcome_user_email The welcome email sent to new users First Post first_post The first post on a new site First Page first_page The first page on a new site First Comment first_comment The first comment on a new site First Comment Author first_comment_author The author of the first comment on a new site First Comment URL first_comment_url The URL for the first comment on a new site Upload Settings Site upload space upload_space_check_disabled Limit total size of files uploaded to s MB&lt;/label &gt;&lt; label &gt;&lt; input name=&quot;blog_upload_space&quot;type=&quot;number&quot;min=&quot;0&quot;style=&quot;width: 100px&quot;id=&quot;blog_upload_space&quot;aria-describedby=&quot;blog-upload-space-desc&quot;value=&quot;' . esc_attr( get_site_option('blog_upload_space', 100) ) . '&quot;/&gt; Size in megabytes Upload file types upload_filetypes jpg jpeg png gif Allowed file types Separate types by spaces Max upload file size s KB File size in kilobytes&lt; input name=&quot;fileupload_maxk&quot;type=&quot;number&quot;min=&quot;0&quot;style=&quot;width: 100px&quot;id=&quot;fileupload_maxk&quot;aria-describedby=&quot;fileupload-maxk-desc&quot;value=&quot;' . esc_attr( get_site_option( 'fileupload_maxk', 300 ) ) . '&quot;/&gt; Size in kilobytes Language Settings Default Language WPLANG name WPLANG id WPLANG selected languages translations show_available_translations Menu Settings Enable administration menus menu_items plugins dashboards **since MU **param array $admin_menus The menu items available * $menu_items</div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-admin_2network_2settings_8php_source.html#l00364">wordpress/wp-admin/network/settings.php:364</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_adb0ab0c2f2c447ee2f6505d6e8487b2b"><div class="ttname"><a href="wp-includes_2post_8php.html#adb0ab0c2f2c447ee2f6505d6e8487b2b">wp_untrash_post</a></div><div class="ttdeci">wp_untrash_post($post_id=0)</div><div class="ttdoc">Restore a post or page from the Trash. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l02569">wp-includes/post.php:2569</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a135b323d63a3baf705d0d971266bc159"><div class="ttname"><a href="ajax-actions_8php.html#a135b323d63a3baf705d0d971266bc159">wp_ajax_add_meta</a></div><div class="ttdeci">wp_ajax_add_meta()</div><div class="ttdoc">Ajax handler for adding meta. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01220">ajax-actions.php:1220</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_aed0388080c80d833e5b81b6e0bae6c97"><div class="ttname"><a href="ajax-actions_8php.html#aed0388080c80d833e5b81b6e0bae6c97">wp_ajax_trash_post</a></div><div class="ttdeci">wp_ajax_trash_post($action)</div><div class="ttdoc">Ajax handler for sending a post to the trash. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00668">ajax-actions.php:668</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_affbeae076f02be4fd44a2019f39a6928"><div class="ttname"><a href="wp-includes_2post_8php.html#affbeae076f02be4fd44a2019f39a6928">wp_delete_post</a></div><div class="ttdeci">wp_delete_post($postid=0, $force_delete=false)</div><div class="ttdoc">Trash or delete a post or page. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l02359">wp-includes/post.php:2359</a></div></div>
<div class="ttc" id="async-upload_8php_html_ad69de186eb69f332f105ae157136192e"><div class="ttname"><a href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a></div><div class="ttdeci">if(isset($_REQUEST['post_id'])) $id</div><div class="ttdef"><b>Definition:</b> <a href="async-upload_8php_source.html#l00091">async-upload.php:91</a></div></div>
<div class="ttc" id="wp-includes_2user_8php_html_aa867ddb4cac7504b879d2706b939fe5a"><div class="ttname"><a href="wp-includes_2user_8php.html#aa867ddb4cac7504b879d2706b939fe5a">get_user_meta</a></div><div class="ttdeci">get_user_meta($user_id, $key= '', $single=false)</div><div class="ttdoc">Retrieve user meta field for a user. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2user_8php_source.html#l00703">wp-includes/user.php:703</a></div></div>
<div class="ttc" id="noop_8php_html_aaf1220eff85fdd291725eabf743b2ed3"><div class="ttname"><a href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a></div><div class="ttdeci">get_option()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00031">noop.php:31</a></div></div>
<div class="ttc" id="wp-includes_2user_8php_html_aa414164c348c21e38980eb95ebb0d541"><div class="ttname"><a href="wp-includes_2user_8php.html#aa414164c348c21e38980eb95ebb0d541">get_users</a></div><div class="ttdeci">get_users($args=array())</div><div class="ttdoc">Retrieve list of users matching criteria. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2user_8php_source.html#l00477">wp-includes/user.php:477</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a3244e55e03af2a2b283562dbd2f2bf10"><div class="ttname"><a href="ajax-actions_8php.html#a3244e55e03af2a2b283562dbd2f2bf10">wp_ajax_wp_link_ajax</a></div><div class="ttdeci">wp_ajax_wp_link_ajax()</div><div class="ttdoc">Ajax handler for internal linking. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01475">ajax-actions.php:1475</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a053ff37ae44c85a9bef47cd59328912e"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a053ff37ae44c85a9bef47cd59328912e">date_i18n</a></div><div class="ttdeci">date_i18n($dateformatstring, $unixtimestamp=false, $gmt=false)</div><div class="ttdoc">Retrieve the date in localized format, based on timestamp. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l00089">wordpress/wp-includes/functions.php:89</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_af4079f9ff14a4b7b2a830af70e6ebce5"><div class="ttname"><a href="ajax-actions_8php.html#af4079f9ff14a4b7b2a830af70e6ebce5">wp_ajax_delete_tag</a></div><div class="ttdeci">wp_ajax_delete_tag()</div><div class="ttdoc">Ajax handler for deleting a tag. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00575">ajax-actions.php:575</a></div></div>
<div class="ttc" id="class-wp-error_8php_html_a741b5ec807dbba8d2a0851e32e7d926c"><div class="ttname"><a href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a></div><div class="ttdeci">is_wp_error($thing)</div><div class="ttdoc">Check whether variable is a WordPress Error. </div><div class="ttdef"><b>Definition:</b> <a href="class-wp-error_8php_source.html#l00216">class-wp-error.php:216</a></div></div>
<div class="ttc" id="wp-content_2themes_2twentyeleven_2header_8php_html_a0e2dd2aed1e3361c3aec57e7f7170f73"><div class="ttname"><a href="wp-content_2themes_2twentyeleven_2header_8php.html#a0e2dd2aed1e3361c3aec57e7f7170f73">$page</a></div><div class="ttdeci">global $page</div><div class="ttdef"><b>Definition:</b> <a href="wp-content_2themes_2twentyeleven_2header_8php_source.html#l00029">wp-content/themes/twentyeleven/header.php:29</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a6af0ccade45b009de36f8840810757f3"><div class="ttname"><a href="ajax-actions_8php.html#a6af0ccade45b009de36f8840810757f3">wp_ajax_delete_link</a></div><div class="ttdeci">wp_ajax_delete_link()</div><div class="ttdoc">Ajax handler for deleting a link. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00600">ajax-actions.php:600</a></div></div>
<div class="ttc" id="wp-content_2themes_2twentyeleven_2image_8php_html_ae7fc3682b173ad9d4b1892bdc04d18d9"><div class="ttname"><a href="wp-content_2themes_2twentyeleven_2image_8php.html#ae7fc3682b173ad9d4b1892bdc04d18d9">$metadata</a></div><div class="ttdeci">$metadata</div><div class="ttdef"><b>Definition:</b> <a href="wp-content_2themes_2twentyeleven_2image_8php_source.html#l00029">wp-content/themes/twentyeleven/image.php:29</a></div></div>
<div class="ttc" id="wp-includes_2comment_8php_html_a41289828663eca63f8655541c55ceacf"><div class="ttname"><a href="wp-includes_2comment_8php.html#a41289828663eca63f8655541c55ceacf">wp_unspam_comment</a></div><div class="ttdeci">wp_unspam_comment($comment_id)</div><div class="ttdoc">Removes a comment from the Spam. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2comment_8php_source.html#l01302">wp-includes/comment.php:1302</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a49014f78a9cbd2165631fee1e722e2ef"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a49014f78a9cbd2165631fee1e722e2ef">number_format_i18n</a></div><div class="ttdeci">number_format_i18n($number, $decimals=0)</div><div class="ttdoc">Convert integer number to format based on the locale. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l00218">wordpress/wp-includes/functions.php:218</a></div></div>
<div class="ttc" id="wp-includes_2media_8php_html_a9d307f5585bddb91b42c7a6e3502963b"><div class="ttname"><a href="wp-includes_2media_8php.html#a9d307f5585bddb91b42c7a6e3502963b">wp_get_attachment_id3_keys</a></div><div class="ttdeci">wp_get_attachment_id3_keys($attachment, $context= 'display')</div><div class="ttdoc">Returns useful keys to use to lookup data from an attachment&#39;s stored metadata. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2media_8php_source.html#l02124">wp-includes/media.php:2124</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a3ece4f854d9d095786e99ec6eaff50fc"><div class="ttname"><a href="wp-includes_2post_8php.html#a3ece4f854d9d095786e99ec6eaff50fc">get_posts</a></div><div class="ttdeci">get_posts($args=null)</div><div class="ttdoc">Retrieve list of latest posts or posts matching criteria. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l01618">wp-includes/post.php:1618</a></div></div>
<div class="ttc" id="load-scripts_8php_html_a48cb304902320d173a4eaa41543327b9"><div class="ttname"><a href="load-scripts_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a></div><div class="ttdeci">$out</div><div class="ttdef"><b>Definition:</b> <a href="load-scripts_8php_source.html#l00031">load-scripts.php:31</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a8e6df85dac0b77a87b3bd9b26e82fe72"><div class="ttname"><a href="wp-includes_2post_8php.html#a8e6df85dac0b77a87b3bd9b26e82fe72">wp_unique_post_slug</a></div><div class="ttdeci">wp_unique_post_slug($slug, $post_ID, $post_status, $post_type, $post_parent)</div><div class="ttdoc">Computes a unique slug for the post, when given the desired slug and some post details. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l03552">wp-includes/post.php:3552</a></div></div>
<div class="ttc" id="wp-includes_2taxonomy_8php_html_aa491ab8e62a9a11b6a3aa62e015f75dd"><div class="ttname"><a href="wp-includes_2taxonomy_8php.html#aa491ab8e62a9a11b6a3aa62e015f75dd">get_terms</a></div><div class="ttdeci">get_terms($taxonomies, $args= '')</div><div class="ttdoc">Retrieve the terms in a given taxonomy or list of taxonomies. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2taxonomy_8php_source.html#l01126">wp-includes/taxonomy.php:1126</a></div></div>
<div class="ttc" id="wp-admin_2includes_2plugin_8php_html_ac98eb4b447e19f4df31adaaedc008b0f"><div class="ttname"><a href="wp-admin_2includes_2plugin_8php.html#ac98eb4b447e19f4df31adaaedc008b0f">get_plugins</a></div><div class="ttdeci">get_plugins($plugin_folder= '')</div><div class="ttdoc">Check the plugins directory and retrieve all plugin files with plugin data. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2plugin_8php_source.html#l00237">wp-admin/includes/plugin.php:237</a></div></div>
<div class="ttc" id="shortcodes_8php_html_a139128d6e87add28692089de8c501ebe"><div class="ttname"><a href="shortcodes_8php.html#a139128d6e87add28692089de8c501ebe">shortcode_parse_atts</a></div><div class="ttdeci">shortcode_parse_atts($text)</div><div class="ttdoc">Retrieve all attributes from the shortcodes tag. </div><div class="ttdef"><b>Definition:</b> <a href="shortcodes_8php_source.html#l00481">shortcodes.php:481</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a3fce421f73518d1203ea2c5b9d08206b"><div class="ttname"><a href="ajax-actions_8php.html#a3fce421f73518d1203ea2c5b9d08206b">wp_ajax_dismiss_wp_pointer</a></div><div class="ttdeci">wp_ajax_dismiss_wp_pointer()</div><div class="ttdoc">Ajax handler for dismissing a WordPress pointer. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02286">ajax-actions.php:2286</a></div></div>
<div class="ttc" id="wp-includes_2comment_8php_html_afe01dce5c3f3e7d1f4586252df709e08"><div class="ttname"><a href="wp-includes_2comment_8php.html#afe01dce5c3f3e7d1f4586252df709e08">wp_set_comment_status</a></div><div class="ttdeci">wp_set_comment_status($comment_id, $comment_status, $wp_error=false)</div><div class="ttdoc">Sets the status of a comment. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2comment_8php_source.html#l01864">wp-includes/comment.php:1864</a></div></div>
<div class="ttc" id="wp-db_8php_html_abe96a896fb17a28640696071972d1405"><div class="ttname"><a href="wp-db_8php.html#abe96a896fb17a28640696071972d1405">ARRAY_A</a></div><div class="ttdeci">const ARRAY_A</div><div class="ttdef"><b>Definition:</b> <a href="wp-db_8php_source.html#l00031">wp-db.php:31</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a4d499fa89c9cb5fb7f3bea60c2368c37"><div class="ttname"><a href="wp-includes_2post_8php.html#a4d499fa89c9cb5fb7f3bea60c2368c37">wp_trash_post</a></div><div class="ttdeci">wp_trash_post($post_id=0)</div><div class="ttdoc">Move a post or page to the Trash. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l02522">wp-includes/post.php:2522</a></div></div>
<div class="ttc" id="wp-admin_2includes_2post_8php_html_a97ebb7325ac6a2fbacebe0f055e66756"><div class="ttname"><a href="wp-admin_2includes_2post_8php.html#a97ebb7325ac6a2fbacebe0f055e66756">wp_check_post_lock</a></div><div class="ttdeci">wp_check_post_lock($post_id)</div><div class="ttdoc">Check to see if the post is currently being edited by another user. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2post_8php_source.html#l01445">wp-admin/includes/post.php:1445</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a39e30b5bbefa3b21d828591673150b89"><div class="ttname"><a href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a></div><div class="ttdeci">get_post($post=null, $output=OBJECT, $filter= 'raw')</div><div class="ttdoc">Retrieves post data given a post ID or post object. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l00426">wp-includes/post.php:426</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a2a4708645625d318d0604408c69e0afb"><div class="ttname"><a href="ajax-actions_8php.html#a2a4708645625d318d0604408c69e0afb">wp_ajax_save_widget</a></div><div class="ttdeci">wp_ajax_save_widget()</div><div class="ttdoc">Ajax handler for saving a widget. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01842">ajax-actions.php:1842</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a5ef59f22feb8d70a3d998f57931a4053"><div class="ttname"><a href="ajax-actions_8php.html#a5ef59f22feb8d70a3d998f57931a4053">wp_ajax_meta_box_order</a></div><div class="ttdeci">wp_ajax_meta_box_order()</div><div class="ttdoc">Ajax handler for saving the meta box order. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01516">ajax-actions.php:1516</a></div></div>
<div class="ttc" id="wp-admin_2includes_2bookmark_8php_html_a6f5ecff74333cbdccebc568f669e61d0"><div class="ttname"><a href="wp-admin_2includes_2bookmark_8php.html#a6f5ecff74333cbdccebc568f669e61d0">wp_delete_link</a></div><div class="ttdeci">wp_delete_link($link_id)</div><div class="ttdoc">Deletes a specified link from the database. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2bookmark_8php_source.html#l00087">wp-admin/includes/bookmark.php:87</a></div></div>
<div class="ttc" id="wp-admin_2includes_2comment_8php_html_a8f745e9a594108b17bd45516efbf76f5"><div class="ttname"><a href="wp-admin_2includes_2comment_8php.html#a8f745e9a594108b17bd45516efbf76f5">edit_comment</a></div><div class="ttdeci">edit_comment()</div><div class="ttdoc">Update a comment with values provided in $_POST. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2comment_8php_source.html#l00047">wp-admin/includes/comment.php:47</a></div></div>
<div class="ttc" id="kses_8php_html_a0b821c489422f75b2d9746b1ea6d8437"><div class="ttname"><a href="kses_8php.html#a0b821c489422f75b2d9746b1ea6d8437">kses_init_filters</a></div><div class="ttdeci">kses_init_filters()</div><div class="ttdoc">Adds all Kses input form content filters. </div><div class="ttdef"><b>Definition:</b> <a href="kses_8php_source.html#l01607">kses.php:1607</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a892d01bea8c425e576c5e3fb0f9f4a35"><div class="ttname"><a href="ajax-actions_8php.html#a892d01bea8c425e576c5e3fb0f9f4a35">wp_ajax_press_this_add_category</a></div><div class="ttdeci">wp_ajax_press_this_add_category()</div><div class="ttdoc">AJAX handler for creating new category from Press This. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l03170">ajax-actions.php:3170</a></div></div>
<div class="ttc" id="wp-includes_2taxonomy_8php_html_ad28d62c01fc8952379351022b765987e"><div class="ttname"><a href="wp-includes_2taxonomy_8php.html#ad28d62c01fc8952379351022b765987e">wp_delete_term</a></div><div class="ttdeci">wp_delete_term($term, $taxonomy, $args=array())</div><div class="ttdoc">Removes a term from the database. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2taxonomy_8php_source.html#l02139">wp-includes/taxonomy.php:2139</a></div></div>
<div class="ttc" id="wp-includes_2revision_8php_html_a8587408831966c0166c1e348d7e9def6"><div class="ttname"><a href="wp-includes_2revision_8php.html#a8587408831966c0166c1e348d7e9def6">wp_get_post_revisions</a></div><div class="ttdeci">wp_get_post_revisions($post_id=0, $args=null)</div><div class="ttdoc">Returns all revisions of specified post. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2revision_8php_source.html#l00420">wp-includes/revision.php:420</a></div></div>
<div class="ttc" id="formatting_8php_html_a7220e1930f7f74f3fafb67ea1d7234f1"><div class="ttname"><a href="formatting_8php.html#a7220e1930f7f74f3fafb67ea1d7234f1">sanitize_text_field</a></div><div class="ttdeci">sanitize_text_field($str)</div><div class="ttdoc">Sanitize a string from user input or from the db. </div><div class="ttdef"><b>Definition:</b> <a href="formatting_8php_source.html#l04257">formatting.php:4257</a></div></div>
<div class="ttc" id="class_automatic___upgrader___skin_html"><div class="ttname"><a href="class_automatic___upgrader___skin.html">Automatic_Upgrader_Skin</a></div><div class="ttdef"><b>Definition:</b> <a href="class-wp-upgrader-skins_8php_source.html#l00861">class-wp-upgrader-skins.php:861</a></div></div>
<div class="ttc" id="wp-includes_2taxonomy_8php_html_ad905a6910c87bb55f7d9b1092f747fb5"><div class="ttname"><a href="wp-includes_2taxonomy_8php.html#ad905a6910c87bb55f7d9b1092f747fb5">wp_insert_term</a></div><div class="ttdeci">wp_insert_term($term, $taxonomy, $args=array())</div><div class="ttdoc">Add a new term to the database. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2taxonomy_8php_source.html#l02608">wp-includes/taxonomy.php:2608</a></div></div>
<div class="ttc" id="embed-template_8php_html_a436adff102f7e9f88fb37f96dda0e01f"><div class="ttname"><a href="embed-template_8php.html#a436adff102f7e9f88fb37f96dda0e01f">$thumbnail_id</a></div><div class="ttdeci">$thumbnail_id</div><div class="ttdef"><b>Definition:</b> <a href="embed-template_8php_source.html#l00037">embed-template.php:37</a></div></div>
<div class="ttc" id="formatting_8php_html_ad9e809b6901d247527672e11ce5d7368"><div class="ttname"><a href="formatting_8php.html#ad9e809b6901d247527672e11ce5d7368">esc_url_raw</a></div><div class="ttdeci">esc_url_raw($url, $protocols=null)</div><div class="ttdoc">Performs esc_url() for database usage. </div><div class="ttdef"><b>Definition:</b> <a href="formatting_8php_source.html#l03468">formatting.php:3468</a></div></div>
<div class="ttc" id="dashboard_8php_html_a5fe09a9ce7f1d04e1c83ab29747fcc43"><div class="ttname"><a href="dashboard_8php.html#a5fe09a9ce7f1d04e1c83ab29747fcc43">_wp_dashboard_recent_comments_row</a></div><div class="ttdeci">_wp_dashboard_recent_comments_row(&amp;$comment, $show_date=true)</div><div class="ttdoc">WP_Comment $comment </div><div class="ttdef"><b>Definition:</b> <a href="dashboard_8php_source.html#l00574">dashboard.php:574</a></div></div>
<div class="ttc" id="options-discussion_8php_html_af594986e4618a8d6a5d7566617f583c6"><div class="ttname"><a href="options-discussion_8php.html#af594986e4618a8d6a5d7566617f583c6">$size</a></div><div class="ttdeci">$size</div><div class="ttdef"><b>Definition:</b> <a href="options-discussion_8php_source.html#l00243">options-discussion.php:243</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a6ec11f9b2c86f3c0b39e175f1cc4a21a"><div class="ttname"><a href="ajax-actions_8php.html#a6ec11f9b2c86f3c0b39e175f1cc4a21a">wp_ajax_update_welcome_panel</a></div><div class="ttdeci">wp_ajax_update_welcome_panel()</div><div class="ttdoc">Ajax handler for updating whether to display the welcome panel. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01411">ajax-actions.php:1411</a></div></div>
<div class="ttc" id="edit-tags_8php_html_a889a2afc68d4bc472eeed20fd267a583"><div class="ttname"><a href="edit-tags_8php.html#a889a2afc68d4bc472eeed20fd267a583">$tax</a></div><div class="ttdeci">$tax</div><div class="ttdef"><b>Definition:</b> <a href="edit-tags_8php_source.html#l00015">edit-tags.php:15</a></div></div>
<div class="ttc" id="preview_8php_html_a920c320068535c09e154c6707eb42ded"><div class="ttname"><a href="preview_8php.html#a920c320068535c09e154c6707eb42ded">$styles</a></div><div class="ttdeci">$styles</div><div class="ttdef"><b>Definition:</b> <a href="preview_8php_source.html#l00056">preview.php:56</a></div></div>
<div class="ttc" id="wp-includes_2user_8php_html_a414887490e946c7f6459d886b09e0e5a"><div class="ttname"><a href="wp-includes_2user_8php.html#a414887490e946c7f6459d886b09e0e5a">update_user_meta</a></div><div class="ttdeci">update_user_meta($user_id, $meta_key, $meta_value, $prev_value= '')</div><div class="ttdoc">Update user meta field based on user ID. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2user_8php_source.html#l00724">wp-includes/user.php:724</a></div></div>
<div class="ttc" id="theme-editor_8php_html_a1ae541f7fe1c5e21cb4535f88ec9e9dc"><div class="ttname"><a href="theme-editor_8php.html#a1ae541f7fe1c5e21cb4535f88ec9e9dc">$theme</a></div><div class="ttdeci">$theme</div><div class="ttdef"><b>Definition:</b> <a href="theme-editor_8php_source.html#l00054">theme-editor.php:54</a></div></div>
<div class="ttc" id="namespacelist_html"><div class="ttname"><a href="namespacelist.html">list</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a863afc41711309a1be0f659f774a1cdb"><div class="ttname"><a href="ajax-actions_8php.html#a863afc41711309a1be0f659f774a1cdb">wp_ajax_save_wporg_username</a></div><div class="ttdeci">wp_ajax_save_wporg_username()</div><div class="ttdoc">Ajax handler for saving the user&#39;s WordPress.org username. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l03306">ajax-actions.php:3306</a></div></div>
<div class="ttc" id="category-template_8php_html_ae49cb876bff40964321072d7be006a9c"><div class="ttname"><a href="category-template_8php.html#ae49cb876bff40964321072d7be006a9c">wp_dropdown_categories</a></div><div class="ttdeci">wp_dropdown_categories($args= '')</div><div class="ttdoc">Display or retrieve the HTML dropdown list of categories. </div><div class="ttdef"><b>Definition:</b> <a href="category-template_8php_source.html#l00357">category-template.php:357</a></div></div>
<div class="ttc" id="wp-admin_2includes_2nav-menu_8php_html_abef127dda5896ac75ab6111787c3fb05"><div class="ttname"><a href="wp-admin_2includes_2nav-menu_8php.html#abef127dda5896ac75ab6111787c3fb05">wp_save_nav_menu_items</a></div><div class="ttdeci">wp_save_nav_menu_items($menu_id=0, $menu_data=array())</div><div class="ttdoc">Save posted nav menu item data. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2nav-menu_8php_source.html#l00768">wp-admin/includes/nav-menu.php:768</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_af935895be7531a761425c2f71732cd96"><div class="ttname"><a href="edit-form-advanced_8php.html#af935895be7531a761425c2f71732cd96">$user_ID</a></div><div class="ttdeci">$user_ID</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00050">edit-form-advanced.php:50</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a4d33bc3fcaf2f12049a0e661c4adcaa7"><div class="ttname"><a href="wp-includes_2post_8php.html#a4d33bc3fcaf2f12049a0e661c4adcaa7">set_post_thumbnail</a></div><div class="ttdeci">set_post_thumbnail($post, $thumbnail_id)</div><div class="ttdoc">Set a post thumbnail. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l05814">wp-includes/post.php:5814</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a8081673304fa335f5a26de2c0383078e"><div class="ttname"><a href="ajax-actions_8php.html#a8081673304fa335f5a26de2c0383078e">wp_ajax_image_editor</a></div><div class="ttdeci">wp_ajax_image_editor()</div><div class="ttdoc">Ajax handler for image editing. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02075">ajax-actions.php:2075</a></div></div>
<div class="ttc" id="wordpress_2wp-admin_2upload_8php_html_a3aaf40baac36e278c7d7c9139df1750c"><div class="ttname"><a href="wordpress_2wp-admin_2upload_8php.html#a3aaf40baac36e278c7d7c9139df1750c">$mode</a></div><div class="ttdeci">$mode</div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-admin_2upload_8php_source.html#l00015">wordpress/wp-admin/upload.php:15</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a2db1f93c7f31eb62728aa7a24613d13e"><div class="ttname"><a href="ajax-actions_8php.html#a2db1f93c7f31eb62728aa7a24613d13e">wp_ajax_edit_comment</a></div><div class="ttdeci">wp_ajax_edit_comment()</div><div class="ttdoc">Ajax handler for editing a comment. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01094">ajax-actions.php:1094</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a3d7a104473382e834a5310e451fc933b"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a></div><div class="ttdeci">wp_send_json_success($data=null)</div><div class="ttdoc">Send a JSON response back to an Ajax request, indicating success. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l02988">wordpress/wp-includes/functions.php:2988</a></div></div>
<div class="ttc" id="admin-ajax_8php_html_a7e2b5c5f59b53e18d1dc6bf6ff251ed2"><div class="ttname"><a href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a></div><div class="ttdeci">if(!empty($_GET['action'])&amp;&amp;in_array($_GET['action'], $core_actions_get)) add_action( 'wp_ajax_'.$_GET['action'] str_replace( '-', '_', $_GET['action'])</div><div class="ttdef"><b>Definition:</b> <a href="admin-ajax_8php_source.html#l00073">admin-ajax.php:73</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a1d3eb00c9fe92a90149ac06ca6c28132"><div class="ttname"><a href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv'foreach(get_object_taxonomies($post) as $tax_name) if($thumbnail_support &amp;&amp;current_user_can( 'upload_files')) add_meta_box('postimagediv' esc_html($post_type_object-&gt;labels-&gt;featured_image)</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00266">edit-form-advanced.php:266</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a5ac8d9eefeeb2ac8b45650a335971b81"><div class="ttname"><a href="wp-includes_2post_8php.html#a5ac8d9eefeeb2ac8b45650a335971b81">get_post_meta</a></div><div class="ttdeci">get_post_meta($post_id, $key= '', $single=false)</div><div class="ttdoc">Retrieve post meta field for a post. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l01711">wp-includes/post.php:1711</a></div></div>
<div class="ttc" id="wp-admin_2includes_2post_8php_html_aaa6130670385de3c63511b4c96bed33f"><div class="ttname"><a href="wp-admin_2includes_2post_8php.html#aaa6130670385de3c63511b4c96bed33f">delete_meta</a></div><div class="ttdeci">delete_meta($mid)</div><div class="ttdoc">Delete post meta data by meta ID. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2post_8php_source.html#l00837">wp-admin/includes/post.php:837</a></div></div>
<div class="ttc" id="wp-admin_2includes_2template_8php_html_af1dfa47eba57f9f63fdc16a76c2fbeef"><div class="ttname"><a href="wp-admin_2includes_2template_8php.html#af1dfa47eba57f9f63fdc16a76c2fbeef">wp_popular_terms_checklist</a></div><div class="ttdeci">wp_popular_terms_checklist($taxonomy, $default=0, $number=10, $echo=true)</div><div class="ttdoc">Retrieve a list of the most popular terms from the specified taxonomy. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2template_8php_source.html#l00191">wp-admin/includes/template.php:191</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_aa98d72fd07903600ae74d7a78989d943"><div class="ttname"><a href="ajax-actions_8php.html#aa98d72fd07903600ae74d7a78989d943">_wp_ajax_delete_comment_response</a></div><div class="ttdeci">_wp_ajax_delete_comment_response($comment_id, $delta=-1)</div><div class="ttdoc">Sends back current comment total and new page links if they need to be updated. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00344">ajax-actions.php:344</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a633b902a7d7cf608afb81a6914100acd"><div class="ttname"><a href="ajax-actions_8php.html#a633b902a7d7cf608afb81a6914100acd">wp_ajax_update_plugin</a></div><div class="ttdeci">wp_ajax_update_plugin()</div><div class="ttdoc">AJAX handler for updating a plugin. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l03065">ajax-actions.php:3065</a></div></div>
<div class="ttc" id="wp-admin_2includes_2plugin_8php_html_aa808dd07ad94a35d54d13023d8d0a54f"><div class="ttname"><a href="wp-admin_2includes_2plugin_8php.html#aa808dd07ad94a35d54d13023d8d0a54f">get_plugin_data</a></div><div class="ttdeci">get_plugin_data($plugin_file, $markup=true, $translate=true)</div><div class="ttdoc">Parses the plugin contents to retrieve plugin&#39;s metadata. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2plugin_8php_source.html#l00068">wp-admin/includes/plugin.php:68</a></div></div>
<div class="ttc" id="load_8php_html_a49b99067b44a28b2df04dcbd50569624"><div class="ttname"><a href="load_8php.html#a49b99067b44a28b2df04dcbd50569624">get_current_blog_id</a></div><div class="ttdeci">get_current_blog_id()</div><div class="ttdoc">Retrieve the current blog ID. </div><div class="ttdef"><b>Definition:</b> <a href="load_8php_source.html#l00772">load.php:772</a></div></div>
<div class="ttc" id="options-general_8php_html_af1d5ccdee975b8f4d20aaffc5b28557c"><div class="ttname"><a href="options-general_8php.html#af1d5ccdee975b8f4d20aaffc5b28557c">$now</a></div><div class="ttdeci">$now</div><div class="ttdef"><b>Definition:</b> <a href="options-general_8php_source.html#l00174">options-general.php:174</a></div></div>
<div class="ttc" id="wp-includes_2comment_8php_html_a98326ce8f0babf67e0b178d863263f67"><div class="ttname"><a href="wp-includes_2comment_8php.html#a98326ce8f0babf67e0b178d863263f67">get_comment</a></div><div class="ttdeci">get_comment(&amp;$comment=null, $output=OBJECT)</div><div class="ttdoc">Retrieves comment data given a comment ID or comment object. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2comment_8php_source.html#l00170">wp-includes/comment.php:170</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a20bca7d9377941baaf46c66f61eed54f"><div class="ttname"><a href="ajax-actions_8php.html#a20bca7d9377941baaf46c66f61eed54f">wp_ajax_save_attachment_compat</a></div><div class="ttdeci">wp_ajax_save_attachment_compat()</div><div class="ttdoc">Ajax handler for saving backwards compatible attachment attributes. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02463">ajax-actions.php:2463</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a608a82c55bc57d0bc9b34888b92212e1"><div class="ttname"><a href="wp-includes_2post_8php.html#a608a82c55bc57d0bc9b34888b92212e1">get_post_types</a></div><div class="ttdeci">get_post_types($args=array(), $output= 'names', $operator= 'and')</div><div class="ttdoc">Get a list of all registered post type objects. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l00870">wp-includes/post.php:870</a></div></div>
<div class="ttc" id="ms-delete-site_8php_html_a598ca4e71b15a1313ec95f0df1027ca5"><div class="ttname"><a href="ms-delete-site_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a></div><div class="ttdeci">$user</div><div class="ttdef"><b>Definition:</b> <a href="ms-delete-site_8php_source.html#l00028">ms-delete-site.php:28</a></div></div>
<div class="ttc" id="load-scripts_8php_html_a10daeac5d6abc9109d6a9a8e8d8ba2e2"><div class="ttname"><a href="load-scripts_8php.html#a10daeac5d6abc9109d6a9a8e8d8ba2e2">WPINC</a></div><div class="ttdeci">const WPINC</div><div class="ttdef"><b>Definition:</b> <a href="load-scripts_8php_source.html#l00012">load-scripts.php:12</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a61c47864d25a054d86d7977ed6bc6bed"><div class="ttname"><a href="wp-includes_2post_8php.html#a61c47864d25a054d86d7977ed6bc6bed">get_post_type_object</a></div><div class="ttdeci">get_post_type_object($post_type)</div><div class="ttdoc">Retrieve a post type object by name. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l00842">wp-includes/post.php:842</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a030765aeba8dead9b875f014d2b3d576"><div class="ttname"><a href="ajax-actions_8php.html#a030765aeba8dead9b875f014d2b3d576">wp_ajax_delete_page</a></div><div class="ttdeci">wp_ajax_delete_page($action)</div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00709">ajax-actions.php:709</a></div></div>
<div class="ttc" id="wp-includes_2plugin_8php_html_a6bfce44737689c4ea3aed89badf40b6d"><div class="ttname"><a href="wp-includes_2plugin_8php.html#a6bfce44737689c4ea3aed89badf40b6d">remove_filter</a></div><div class="ttdeci">remove_filter($tag, $function_to_remove, $priority=10)</div><div class="ttdoc">Removes a function from a specified filter hook. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2plugin_8php_source.html#l00321">wp-includes/plugin.php:321</a></div></div>
<div class="ttc" id="search-field-date__range_8php_html_a1334d61bbc340f973c09c7031f3c21f2"><div class="ttname"><a href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a></div><div class="ttdeci">$value</div><div class="ttdef"><b>Definition:</b> <a href="search-field-date__range_8php_source.html#l00010">search-field-date_range.php:10</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a8184ff8faa494ee050392d58978fd256"><div class="ttname"><a href="ajax-actions_8php.html#a8184ff8faa494ee050392d58978fd256">wp_ajax_add_link_category</a></div><div class="ttdeci">wp_ajax_add_link_category($action)</div><div class="ttdoc">Ajax handler for deleting a link category. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00777">ajax-actions.php:777</a></div></div>
<div class="ttc" id="link-template_8php_html_a7c79474868c42888bb84a7be39048dad"><div class="ttname"><a href="link-template_8php.html#a7c79474868c42888bb84a7be39048dad">get_preview_post_link</a></div><div class="ttdeci">get_preview_post_link($post=null, $query_args=array(), $preview_link= '')</div><div class="ttdoc">Retrieve URL used for the post preview. </div><div class="ttdef"><b>Definition:</b> <a href="link-template_8php_source.html#l01215">link-template.php:1215</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a4b16794f0eb389704c55cb6b9a7ffadf"><div class="ttname"><a href="ajax-actions_8php.html#a4b16794f0eb389704c55cb6b9a7ffadf">wp_ajax_menu_quick_search</a></div><div class="ttdeci">wp_ajax_menu_quick_search()</div><div class="ttdoc">Ajax handler for menu quick searching. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01546">ajax-actions.php:1546</a></div></div>
<div class="ttc" id="wp-includes_2comment_8php_html_af157bfcf71c9a2c3829ab7249742de78"><div class="ttname"><a href="wp-includes_2comment_8php.html#af157bfcf71c9a2c3829ab7249742de78">wp_count_comments</a></div><div class="ttdeci">wp_count_comments($post_id=0)</div><div class="ttdoc">Retrieve total comments for blog or single post. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2comment_8php_source.html#l01060">wp-includes/comment.php:1060</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_ad1364df8a7f1ee8af6bb7de107e7274c"><div class="ttname"><a href="ajax-actions_8php.html#ad1364df8a7f1ee8af6bb7de107e7274c">wp_ajax_save_user_color_scheme</a></div><div class="ttdeci">wp_ajax_save_user_color_scheme()</div><div class="ttdoc">Ajax handler for auto-saving the selected color scheme for a user&#39;s own profile. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02784">ajax-actions.php:2784</a></div></div>
<div class="ttc" id="class_w_p___ajax___response_html"><div class="ttname"><a href="class_w_p___ajax___response.html">WP_Ajax_Response</a></div><div class="ttdef"><b>Definition:</b> <a href="class-wp-ajax-response_8php_source.html#l00008">class-wp-ajax-response.php:8</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_af2188083d94c9d1fe10a857274bec3ef"><div class="ttname"><a href="ajax-actions_8php.html#af2188083d94c9d1fe10a857274bec3ef">wp_ajax_menu_locations_save</a></div><div class="ttdeci">wp_ajax_menu_locations_save()</div><div class="ttdoc">Ajax handler for menu locations save. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01501">ajax-actions.php:1501</a></div></div>
<div class="ttc" id="includes_2theme-install_8php_html_a53d47ff5607b4839cf2d5e1d34906d75"><div class="ttname"><a href="includes_2theme-install_8php.html#a53d47ff5607b4839cf2d5e1d34906d75">$themes_allowedtags</a></div><div class="ttdeci">$themes_allowedtags</div><div class="ttdef"><b>Definition:</b> <a href="includes_2theme-install_8php_source.html#l00009">includes/theme-install.php:9</a></div></div>
<div class="ttc" id="shortcodes_8php_html_a226fae42856ef99083b4acbfdd30b7dc"><div class="ttname"><a href="shortcodes_8php.html#a226fae42856ef99083b4acbfdd30b7dc">has_shortcode</a></div><div class="ttdeci">has_shortcode($content, $tag)</div><div class="ttdoc">Whether the passed content contains the specified shortcode. </div><div class="ttdef"><b>Definition:</b> <a href="shortcodes_8php_source.html#l00166">shortcodes.php:166</a></div></div>
<div class="ttc" id="my-sites_8php_html_a57d6fd1200be8dd145a9b57549797d37"><div class="ttname"><a href="my-sites_8php.html#a57d6fd1200be8dd145a9b57549797d37">$updated</a></div><div class="ttdeci">$updated</div><div class="ttdef"><b>Definition:</b> <a href="my-sites_8php_source.html#l00022">my-sites.php:22</a></div></div>
<div class="ttc" id="wp-admin_2includes_2image_8php_html_a319b5bc3ec2753bad3e397bcd75f9d9e"><div class="ttname"><a href="wp-admin_2includes_2image_8php.html#a319b5bc3ec2753bad3e397bcd75f9d9e">wp_crop_image</a></div><div class="ttdeci">wp_crop_image($src, $src_x, $src_y, $src_w, $src_h, $dst_w, $dst_h, $src_abs=false, $dst_file=false)</div><div class="ttdoc">Crop an Image to a given size. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2image_8php_source.html#l00025">wp-admin/includes/image.php:25</a></div></div>
<div class="ttc" id="kses_8php_html_a16c90f8f4b5152db3c88044526e28f59"><div class="ttname"><a href="kses_8php.html#a16c90f8f4b5152db3c88044526e28f59">wp_kses</a></div><div class="ttdeci">wp_kses($string, $allowed_html, $allowed_protocols=array())</div><div class="ttdoc">Filters content and keeps only allowable HTML elements. </div><div class="ttdef"><b>Definition:</b> <a href="kses_8php_source.html#l00525">kses.php:525</a></div></div>
<div class="ttc" id="class_w_p___error_html"><div class="ttname"><a href="class_w_p___error.html">WP_Error</a></div><div class="ttdef"><b>Definition:</b> <a href="class-wp-error_8php_source.html#l00021">class-wp-error.php:21</a></div></div>
<div class="ttc" id="options-permalink_8php_html_a642d4aa9cec81e63ddf673048f68132d"><div class="ttname"><a href="options-permalink_8php.html#a642d4aa9cec81e63ddf673048f68132d">date</a></div><div class="ttdeci">hence the name permalink&lt;/p &gt;&lt; p &gt; This screen allows you to choose your permalink structure You can choose from common settings or create custom URL structures&lt;/p &gt;&lt; p &gt; You must click the Save Changes button at the bottom of the screen for new settings to take effect&lt;/p &gt; id permalink settings title Permalink Settings content&lt; p &gt; Permalinks can contain useful such as the post date</div><div class="ttdef"><b>Definition:</b> <a href="options-permalink_8php_source.html#l00029">options-permalink.php:29</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_aa3f6fdf5e7702fdd93e84301ea7987aa"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#aa3f6fdf5e7702fdd93e84301ea7987aa">wp_parse_args</a></div><div class="ttdeci">wp_parse_args($args, $defaults= '')</div><div class="ttdoc">Merge user defined arguments into defaults array. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l03238">wordpress/wp-includes/functions.php:3238</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a7ae2df754250282b3f729c110dc354b8"><div class="ttname"><a href="ajax-actions_8php.html#a7ae2df754250282b3f729c110dc354b8">wp_ajax_delete_comment</a></div><div class="ttdeci">wp_ajax_delete_comment()</div><div class="ttdoc">Ajax handler for deleting a comment. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00527">ajax-actions.php:527</a></div></div>
<div class="ttc" id="search-field-date__range_8php_html_ab2fc40d43824ea3e1ce5d86dee0d763b"><div class="ttname"><a href="search-field-date__range_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a></div><div class="ttdeci">$name</div><div class="ttdef"><b>Definition:</b> <a href="search-field-date__range_8php_source.html#l00012">search-field-date_range.php:12</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a076f1ed46bba0b627442c67fa2b2ab09"><div class="ttname"><a href="ajax-actions_8php.html#a076f1ed46bba0b627442c67fa2b2ab09">wp_ajax_query_attachments</a></div><div class="ttdeci">wp_ajax_query_attachments()</div><div class="ttdoc">Ajax handler for querying attachments. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02337">ajax-actions.php:2337</a></div></div>
<div class="ttc" id="sites_8php_html_a7403ae1dd22aabdfaf1c54375a124754"><div class="ttname"><a href="sites_8php.html#a7403ae1dd22aabdfaf1c54375a124754">$msg</a></div><div class="ttdeci">if(isset($_GET['action'])) $msg</div><div class="ttdef"><b>Definition:</b> <a href="sites_8php_source.html#l00224">sites.php:224</a></div></div>
<div class="ttc" id="dashboard_8php_html_a4757da1e14317b7db04035d2fcaea1ea"><div class="ttname"><a href="dashboard_8php.html#a4757da1e14317b7db04035d2fcaea1ea">wp_dashboard_primary</a></div><div class="ttdeci">wp_dashboard_primary()</div><div class="ttdoc">WordPress News dashboard widget. </div><div class="ttdef"><b>Definition:</b> <a href="dashboard_8php_source.html#l01027">dashboard.php:1027</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a08726a916c2c471b49a3ed64b8783ee1"><div class="ttname"><a href="ajax-actions_8php.html#a08726a916c2c471b49a3ed64b8783ee1">wp_ajax_press_this_save_post</a></div><div class="ttdeci">wp_ajax_press_this_save_post()</div><div class="ttdoc">AJAX handler for saving a post from Press This. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l03155">ajax-actions.php:3155</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_adb0024d9830f32a834cb170d73753ba6"><div class="ttname"><a href="wp-includes_2post_8php.html#adb0024d9830f32a834cb170d73753ba6">wp_match_mime_types</a></div><div class="ttdeci">wp_match_mime_types($wildcard_mime_types, $real_mime_types)</div><div class="ttdoc">Check a MIME-Type against a list. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l02250">wp-includes/post.php:2250</a></div></div>
<div class="ttc" id="formatting_8php_html_ac6495c47468fb816d78bb2d2b326d808"><div class="ttname"><a href="formatting_8php.html#ac6495c47468fb816d78bb2d2b326d808">sanitize_title</a></div><div class="ttdeci">sanitize_title($title, $fallback_title= '', $context= 'save')</div><div class="ttdoc">Sanitizes a title, or returns a fallback title. </div><div class="ttdef"><b>Definition:</b> <a href="formatting_8php_source.html#l01520">formatting.php:1520</a></div></div>
<div class="ttc" id="option_8php_html_a7ffd65e258601322158dc39ee84b3121"><div class="ttname"><a href="option_8php.html#a7ffd65e258601322158dc39ee84b3121">update_site_option</a></div><div class="ttdeci">update_site_option($option, $value)</div><div class="ttdoc">Update the value of an option that was already added for the current network. </div><div class="ttdef"><b>Definition:</b> <a href="option_8php_source.html#l01057">option.php:1057</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a45d44dc7593c9265a40376c4d236dd17"><div class="ttname"><a href="ajax-actions_8php.html#a45d44dc7593c9265a40376c4d236dd17">wp_ajax_generate_password</a></div><div class="ttdeci">wp_ajax_generate_password()</div><div class="ttdoc">Ajax handler for generating a password. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l03297">ajax-actions.php:3297</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a4205fb9bb221c4f60047548ab185a4fa"><div class="ttname"><a href="ajax-actions_8php.html#a4205fb9bb221c4f60047548ab185a4fa">_wp_ajax_add_hierarchical_term</a></div><div class="ttdeci">_wp_ajax_add_hierarchical_term()</div><div class="ttdoc">Ajax handler for adding a hierarchical term. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00435">ajax-actions.php:435</a></div></div>
<div class="ttc" id="wp-includes_2taxonomy_8php_html_a7c7f560ba5e5d169307cdda1c7873b9b"><div class="ttname"><a href="wp-includes_2taxonomy_8php.html#a7c7f560ba5e5d169307cdda1c7873b9b">get_ancestors</a></div><div class="ttdeci">get_ancestors($object_id=0, $object_type= '', $resource_type= '')</div><div class="ttdoc">Get an array of ancestor IDs for a given object. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2taxonomy_8php_source.html#l04675">wp-includes/taxonomy.php:4675</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a04a0faa159c91a5dcbd711b2d24a3ba1"><div class="ttname"><a href="ajax-actions_8php.html#a04a0faa159c91a5dcbd711b2d24a3ba1">wp_ajax_heartbeat</a></div><div class="ttdeci">wp_ajax_heartbeat()</div><div class="ttdoc">Ajax handler for the Heartbeat API. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02674">ajax-actions.php:2674</a></div></div>
<div class="ttc" id="option_8php_html_a21f59332d7b293dca17bccd56c8c00eb"><div class="ttname"><a href="option_8php.html#a21f59332d7b293dca17bccd56c8c00eb">update_option</a></div><div class="ttdeci">update_option($option, $value, $autoload=null)</div><div class="ttdoc">Update the value of an option that was already added. </div><div class="ttdef"><b>Definition:</b> <a href="option_8php_source.html#l00253">option.php:253</a></div></div>
<div class="ttc" id="load_8php_html_a72e5386fcd7a5ce7526d208d0b03a0af"><div class="ttname"><a href="load_8php.html#a72e5386fcd7a5ce7526d208d0b03a0af">is_multisite</a></div><div class="ttdeci">is_multisite()</div><div class="ttdoc">If Multisite is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="load_8php_source.html#l00753">load.php:753</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a646c0471bc2510170f7f0581b8144688"><div class="ttname"><a href="ajax-actions_8php.html#a646c0471bc2510170f7f0581b8144688">wp_ajax_menu_get_metabox</a></div><div class="ttdeci">wp_ajax_menu_get_metabox()</div><div class="ttdoc">Ajax handler for retrieving menu meta boxes. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01427">ajax-actions.php:1427</a></div></div>
<div class="ttc" id="wp-includes_2taxonomy_8php_html_a17ad0f2ad8a5f0b72d2c8221b02ab84c"><div class="ttname"><a href="wp-includes_2taxonomy_8php.html#a17ad0f2ad8a5f0b72d2c8221b02ab84c">is_taxonomy_hierarchical</a></div><div class="ttdeci">is_taxonomy_hierarchical($taxonomy)</div><div class="ttdoc">Whether the taxonomy object is hierarchical. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2taxonomy_8php_source.html#l00253">wp-includes/taxonomy.php:253</a></div></div>
<div class="ttc" id="wp-admin_2includes_2theme_8php_html_a802e4cc5b9123da54f1897b9270816f9"><div class="ttname"><a href="wp-admin_2includes_2theme_8php.html#a802e4cc5b9123da54f1897b9270816f9">themes_api</a></div><div class="ttdeci">themes_api($action, $args=array())</div><div class="ttdoc">Retrieves theme installer pages from the WordPress.org Themes API. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2theme_8php_source.html#l00381">wp-admin/includes/theme.php:381</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_af86144952c211d5b330c80f9a554ce33"><div class="ttname"><a href="ajax-actions_8php.html#af86144952c211d5b330c80f9a554ce33">wp_ajax_parse_embed</a></div><div class="ttdeci">wp_ajax_parse_embed()</div><div class="ttdoc">Apply [embed] AJAX handlers to a string. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02870">ajax-actions.php:2870</a></div></div>
<div class="ttc" id="nav-menu-template_8php_html_afb965e927149ce0599bea943bb2f3394"><div class="ttname"><a href="nav-menu-template_8php.html#afb965e927149ce0599bea943bb2f3394">walk_nav_menu_tree</a></div><div class="ttdeci">walk_nav_menu_tree($items, $depth, $r)</div><div class="ttdoc">Retrieve the HTML list content for nav menu items. </div><div class="ttdef"><b>Definition:</b> <a href="nav-menu-template_8php_source.html#l00702">nav-menu-template.php:702</a></div></div>
<div class="ttc" id="admin-post_8php_html_aa698a3e72116e8e778be0e95d908ee30"><div class="ttname"><a href="admin-post_8php.html#aa698a3e72116e8e778be0e95d908ee30">$action</a></div><div class="ttdeci">$action</div><div class="ttdef"><b>Definition:</b> <a href="admin-post_8php_source.html#l00031">admin-post.php:31</a></div></div>
<div class="ttc" id="wp-includes_2comment_8php_html_ad1516694f994fb605a8aa218ac0fafcf"><div class="ttname"><a href="wp-includes_2comment_8php.html#ad1516694f994fb605a8aa218ac0fafcf">wp_get_comment_status</a></div><div class="ttdeci">wp_get_comment_status($comment_id)</div><div class="ttdoc">The status of a comment by ID. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2comment_8php_source.html#l01346">wp-includes/comment.php:1346</a></div></div>
<div class="ttc" id="wp-includes_2bookmark_8php_html_a944dca9670f9a99ea1f1cee75ee0f48f"><div class="ttname"><a href="wp-includes_2bookmark_8php.html#a944dca9670f9a99ea1f1cee75ee0f48f">get_bookmark</a></div><div class="ttdeci">get_bookmark($bookmark, $output=OBJECT, $filter= 'raw')</div><div class="ttdoc">Retrieve Bookmark data. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2bookmark_8php_source.html#l00021">wp-includes/bookmark.php:21</a></div></div>
<div class="ttc" id="wp-includes_2comment_8php_html_a6aa515b002d44b79277dfd22d2f1488f"><div class="ttname"><a href="wp-includes_2comment_8php.html#a6aa515b002d44b79277dfd22d2f1488f">wp_untrash_comment</a></div><div class="ttdeci">wp_untrash_comment($comment_id)</div><div class="ttdoc">Removes a comment from the Trash. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2comment_8php_source.html#l01216">wp-includes/comment.php:1216</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a38ddbb5bed3a03da26b64c1916ad9e1f"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a></div><div class="ttdeci">absint($maybeint)</div><div class="ttdoc">Convert a value to non-negative integer. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l03551">wordpress/wp-includes/functions.php:3551</a></div></div>
<div class="ttc" id="includes_2theme-install_8php_html_aaf4325ee17b7d3e913562a8f4906ec3a"><div class="ttname"><a href="includes_2theme-install_8php.html#aaf4325ee17b7d3e913562a8f4906ec3a">$theme_field_defaults</a></div><div class="ttdeci">$theme_field_defaults</div><div class="ttdef"><b>Definition:</b> <a href="includes_2theme-install_8php_source.html#l00017">includes/theme-install.php:17</a></div></div>
<div class="ttc" id="wp-includes_2widgets_8php_html_a5c0ec75730a7de92c591102dfec210cc"><div class="ttname"><a href="wp-includes_2widgets_8php.html#a5c0ec75730a7de92c591102dfec210cc">$wp_registered_widget_updates</a></div><div class="ttdeci">global $wp_registered_widget_updates</div><div class="ttdoc">array $wp_registered_widget_updates </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2widgets_8php_source.html#l00026">wp-includes/widgets.php:26</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_aa4a7f5a3dbca296bf34976077b16d220"><div class="ttname"><a href="ajax-actions_8php.html#aa4a7f5a3dbca296bf34976077b16d220">wp_ajax_wp_compression_test</a></div><div class="ttdeci">wp_ajax_wp_compression_test()</div><div class="ttdoc">Ajax handler for compression testing. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00164">ajax-actions.php:164</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a7259baae276fef3d04d79ecebbb926c8"><div class="ttname"><a href="ajax-actions_8php.html#a7259baae276fef3d04d79ecebbb926c8">wp_ajax_add_user</a></div><div class="ttdeci">wp_ajax_add_user($action)</div><div class="ttdoc">Ajax handler for adding a user. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01314">ajax-actions.php:1314</a></div></div>
<div class="ttc" id="twentyfifteen_2content-link_8php_html_a4a6fb8865e1ae52faa29662b4087e629"><div class="ttname"><a href="twentyfifteen_2content-link_8php.html#a4a6fb8865e1ae52faa29662b4087e629">esc_url</a></div><div class="ttdeci">else esc_url(twentyfifteen_get_link_url()))</div><div class="ttdef"><b>Definition:</b> <a href="twentyfifteen_2content-link_8php_source.html#l00021">twentyfifteen/content-link.php:21</a></div></div>
<div class="ttc" id="wp-includes_2taxonomy_8php_html_aa73d2fdc1c00f823e31ca7e90f904a5e"><div class="ttname"><a href="wp-includes_2taxonomy_8php.html#aa73d2fdc1c00f823e31ca7e90f904a5e">get_taxonomy</a></div><div class="ttdeci">get_taxonomy($taxonomy)</div><div class="ttdoc">Retrieves the taxonomy object of $taxonomy. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2taxonomy_8php_source.html#l00213">wp-includes/taxonomy.php:213</a></div></div>
<div class="ttc" id="wp-includes_2media_8php_html_abcaf611fb00f64c8c72ce37bb920a2e2"><div class="ttname"><a href="wp-includes_2media_8php.html#abcaf611fb00f64c8c72ce37bb920a2e2">get_attachment_taxonomies</a></div><div class="ttdeci">get_attachment_taxonomies($attachment)</div><div class="ttdoc">Retrieves taxonomies attached to given the attachment. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2media_8php_source.html#l02679">wp-includes/media.php:2679</a></div></div>
<div class="ttc" id="wp-admin_2includes_2user_8php_html_aadbd7df2f4f267fe7d491d1adb6d2c62"><div class="ttname"><a href="wp-admin_2includes_2user_8php.html#aadbd7df2f4f267fe7d491d1adb6d2c62">edit_user</a></div><div class="ttdeci">edit_user($user_id=0)</div><div class="ttdoc">Edit user settings based on contents of $_POST. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2user_8php_source.html#l00030">wp-admin/includes/user.php:30</a></div></div>
<div class="ttc" id="formatting_8php_html_a0ebdd3bb5f66266f5302c24c3537fb50"><div class="ttname"><a href="formatting_8php.html#a0ebdd3bb5f66266f5302c24c3537fb50">sanitize_key</a></div><div class="ttdeci">sanitize_key($key)</div><div class="ttdoc">Sanitizes a string key. </div><div class="ttdef"><b>Definition:</b> <a href="formatting_8php_source.html#l01490">formatting.php:1490</a></div></div>
<div class="ttc" id="wp-includes_2user_8php_html_a1359853bbf09cba486c9826f4ab66f7f"><div class="ttname"><a href="wp-includes_2user_8php.html#a1359853bbf09cba486c9826f4ab66f7f">get_current_user_id</a></div><div class="ttdeci">get_current_user_id()</div><div class="ttdoc">Get the current user&#39;s ID. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2user_8php_source.html#l00351">wp-includes/user.php:351</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_ac7822daecffd987bf169955c722cc4c2"><div class="ttname"><a href="ajax-actions_8php.html#ac7822daecffd987bf169955c722cc4c2">wp_ajax_dim_comment</a></div><div class="ttdeci">wp_ajax_dim_comment()</div><div class="ttdoc">Ajax handler to dim a comment. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00732">ajax-actions.php:732</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_aac619fea8ee3fa5038657f209c806137"><div class="ttname"><a href="ajax-actions_8php.html#aac619fea8ee3fa5038657f209c806137">wp_ajax_get_comments</a></div><div class="ttdeci">wp_ajax_get_comments($action)</div><div class="ttdoc">Ajax handler for getting comments. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00921">ajax-actions.php:921</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_af2c48166fd29f52c484904128c335da6"><div class="ttname"><a href="ajax-actions_8php.html#af2c48166fd29f52c484904128c335da6">wp_ajax_wp_fullscreen_save_post</a></div><div class="ttdeci">wp_ajax_wp_fullscreen_save_post()</div><div class="ttdoc">Ajax handler for saving posts from the fullscreen editor. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02213">ajax-actions.php:2213</a></div></div>
<div class="ttc" id="wp-includes_2taxonomy_8php_html_a584c2ddd3b03a0a3f9c88b9e50cfc7e4"><div class="ttname"><a href="wp-includes_2taxonomy_8php.html#a584c2ddd3b03a0a3f9c88b9e50cfc7e4">wp_set_object_terms</a></div><div class="ttdeci">wp_set_object_terms($object_id, $terms, $taxonomy, $append=false)</div><div class="ttdoc">Create Term and Taxonomy Relationships. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2taxonomy_8php_source.html#l02854">wp-includes/taxonomy.php:2854</a></div></div>
<div class="ttc" id="edit-tags_8php_html_aed6d7b9acff0b9518917d3b0573bc636"><div class="ttname"><a href="edit-tags_8php.html#aed6d7b9acff0b9518917d3b0573bc636">$_SERVER</a></div><div class="ttdeci">$_SERVER['REQUEST_URI']</div><div class="ttdef"><b>Definition:</b> <a href="edit-tags_8php_source.html#l00320">edit-tags.php:320</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_ab5ced6af2767bd4586c00b4c61d2061e"><div class="ttname"><a href="ajax-actions_8php.html#ab5ced6af2767bd4586c00b4c61d2061e">wp_ajax_get_permalink</a></div><div class="ttdeci">wp_ajax_get_permalink()</div><div class="ttdoc">Ajax handler to retrieve a permalink. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01562">ajax-actions.php:1562</a></div></div>
<div class="ttc" id="formatting_8php_html_a6dba609f82ebf662ef06615fac81a032"><div class="ttname"><a href="formatting_8php.html#a6dba609f82ebf662ef06615fac81a032">wp_unslash</a></div><div class="ttdeci">wp_unslash($value)</div><div class="ttdoc">Remove slashes from a string or array of strings. </div><div class="ttdef"><b>Definition:</b> <a href="formatting_8php_source.html#l04420">formatting.php:4420</a></div></div>
<div class="ttc" id="screen_8php_html_af69de8ef8ce8a4ffad17e9ee2a4fb1d8"><div class="ttname"><a href="screen_8php.html#af69de8ef8ce8a4ffad17e9ee2a4fb1d8">set_current_screen</a></div><div class="ttdeci">set_current_screen($hook_name= '')</div><div class="ttdoc">Set the current screen object. </div><div class="ttdef"><b>Definition:</b> <a href="screen_8php_source.html#l00222">screen.php:222</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a515b71280f3626784cee85924dbc45a6"><div class="ttname"><a href="ajax-actions_8php.html#a515b71280f3626784cee85924dbc45a6">wp_ajax_get_attachment</a></div><div class="ttdeci">wp_ajax_get_attachment()</div><div class="ttdoc">Ajax handler for getting an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02310">ajax-actions.php:2310</a></div></div>
<div class="ttc" id="wp-includes_2user_8php_html_a51c82c9257936dea066761047d2dddba"><div class="ttname"><a href="wp-includes_2user_8php.html#a51c82c9257936dea066761047d2dddba">update_user_option</a></div><div class="ttdeci">update_user_option($user_id, $option_name, $newvalue, $global=false)</div><div class="ttdoc">Update user option with global blog capability. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2user_8php_source.html#l00432">wp-includes/user.php:432</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a170b3de0457f00b76f31c1419923b2b2"><div class="ttname"><a href="ajax-actions_8php.html#a170b3de0457f00b76f31c1419923b2b2">wp_ajax_set_post_thumbnail</a></div><div class="ttdeci">wp_ajax_set_post_thumbnail()</div><div class="ttdoc">Ajax handler for setting the featured image. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02107">ajax-actions.php:2107</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a46b3622ccc6d393dfd97e355b7bd0bd6"><div class="ttname"><a href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv' null</div><div class="ttdoc">When displaying the single entry we should always know to which View it belongs (the context is every...</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00244">edit-form-advanced.php:244</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a73f2ab6780b6a35ccc55a7693f79b7a8"><div class="ttname"><a href="edit-form-advanced_8php.html#a73f2ab6780b6a35ccc55a7693f79b7a8">$post_ID</a></div><div class="ttdeci">$post_ID</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00049">edit-form-advanced.php:49</a></div></div>
<div class="ttc" id="wp-includes_2user_8php_html_a05c0449624564d09c9a25edf13003945"><div class="ttname"><a href="wp-includes_2user_8php.html#a05c0449624564d09c9a25edf13003945">wp_get_session_token</a></div><div class="ttdeci">wp_get_session_token()</div><div class="ttdoc">Retrieve the current session token from the logged_in cookie. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2user_8php_source.html#l02256">wp-includes/user.php:2256</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_abf17cb2dba2ed17cb28aa5f37deb5293"><div class="ttname"><a href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a></div><div class="ttdeci">$message</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00174">edit-form-advanced.php:174</a></div></div>
<div class="ttc" id="wp-includes_2comment_8php_html_a14572adcc56c214d6a337ffb30bc2bfa"><div class="ttname"><a href="wp-includes_2comment_8php.html#a14572adcc56c214d6a337ffb30bc2bfa">wp_new_comment</a></div><div class="ttdeci">wp_new_comment($commentdata)</div><div class="ttdoc">Adds a new comment to the database. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2comment_8php_source.html#l01698">wp-includes/comment.php:1698</a></div></div>
<div class="ttc" id="noop_8php_html_a0cf0f358a47f49ebdba78be2ed10a41c"><div class="ttname"><a href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a></div><div class="ttdeci">esc_attr()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00021">noop.php:21</a></div></div>
<div class="ttc" id="noop_8php_html_a4df34d0c6ff2b33c5178529f19b82f90"><div class="ttname"><a href="noop_8php.html#a4df34d0c6ff2b33c5178529f19b82f90">add_filter</a></div><div class="ttdeci">add_filter()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00016">noop.php:16</a></div></div>
<div class="ttc" id="select-template_8php_html_a77c8faa27a630e0cfbe0fa5507c1a538"><div class="ttname"><a href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a></div><div class="ttdeci">global $post</div><div class="ttdef"><b>Definition:</b> <a href="select-template_8php_source.html#l00009">select-template.php:9</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_ad7133b9d8edf539917094b657f8c701e"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#ad7133b9d8edf539917094b657f8c701e">wp_check_filetype_and_ext</a></div><div class="ttdeci">wp_check_filetype_and_ext($file, $filename, $mimes=null)</div><div class="ttdoc">Attempt to determine the real file type of a file. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l02197">wordpress/wp-includes/functions.php:2197</a></div></div>
<div class="ttc" id="edit-comments_8php_html_a0abf38733b389a685a48be096cd47fbc"><div class="ttname"><a href="edit-comments_8php.html#a0abf38733b389a685a48be096cd47fbc">$wp_list_table</a></div><div class="ttdeci">if(!current_user_can( 'edit_posts')) $wp_list_table</div><div class="ttdoc">WordPress Administration Bootstrap. </div><div class="ttdef"><b>Definition:</b> <a href="edit-comments_8php_source.html#l00019">edit-comments.php:19</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a4abc739201447288373bc89860f9b25b"><div class="ttname"><a href="ajax-actions_8php.html#a4abc739201447288373bc89860f9b25b">wp_ajax_crop_image</a></div><div class="ttdeci">wp_ajax_crop_image()</div><div class="ttdoc">AJAX handler for cropping an image. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l03185">ajax-actions.php:3185</a></div></div>
<div class="ttc" id="wp-includes_2comment_8php_html_a79953ca35c2c790df12b3bb3cc1755f9"><div class="ttname"><a href="wp-includes_2comment_8php.html#a79953ca35c2c790df12b3bb3cc1755f9">wp_spam_comment</a></div><div class="ttdeci">wp_spam_comment($comment_id)</div><div class="ttdoc">Marks a comment as Spam. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2comment_8php_source.html#l01260">wp-includes/comment.php:1260</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a65ab2385ec321353131e78099e0503cc"><div class="ttname"><a href="ajax-actions_8php.html#a65ab2385ec321353131e78099e0503cc">wp_ajax_autocomplete_user</a></div><div class="ttdeci">wp_ajax_autocomplete_user()</div><div class="ttdoc">Ajax handler for user autocomplete. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00245">ajax-actions.php:245</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a821d28653ccedd8af6476382165bd3d8"><div class="ttname"><a href="ajax-actions_8php.html#a821d28653ccedd8af6476382165bd3d8">wp_ajax_find_posts</a></div><div class="ttdeci">wp_ajax_find_posts()</div><div class="ttdoc">Ajax handler for querying posts for the Find Posts modal. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01738">ajax-actions.php:1738</a></div></div>
<div class="ttc" id="wp-admin_2includes_2template_8php_html_ac6618af35f5e6e072da3e6a459637bd4"><div class="ttname"><a href="wp-admin_2includes_2template_8php.html#ac6618af35f5e6e072da3e6a459637bd4">_list_meta_row</a></div><div class="ttdeci">_list_meta_row($entry, &amp;$count)</div><div class="ttdoc">Outputs a single row of public meta data in the Custom Fields meta box. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2template_8php_source.html#l00527">wp-admin/includes/template.php:527</a></div></div>
<div class="ttc" id="load-scripts_8php_html_a0962d0e9eb6aa0b2309589ab476e1f15"><div class="ttname"><a href="load-scripts_8php.html#a0962d0e9eb6aa0b2309589ab476e1f15">$force_gzip</a></div><div class="ttdeci">$force_gzip</div><div class="ttdef"><b>Definition:</b> <a href="load-scripts_8php_source.html#l00029">load-scripts.php:29</a></div></div>
<div class="ttc" id="wp-admin_2includes_2post_8php_html_a91b35b20a950ab0c939b36183a9047e2"><div class="ttname"><a href="wp-admin_2includes_2post_8php.html#a91b35b20a950ab0c939b36183a9047e2">get_sample_permalink_html</a></div><div class="ttdeci">get_sample_permalink_html($id, $new_title=null, $new_slug=null)</div><div class="ttdoc">Returns the HTML of the sample permalink slug editor. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2post_8php_source.html#l01285">wp-admin/includes/post.php:1285</a></div></div>
<div class="ttc" id="image-edit_8php_html_a092f70ecf7f6a44955b2aee867851b5f"><div class="ttname"><a href="image-edit_8php.html#a092f70ecf7f6a44955b2aee867851b5f">stream_preview_image</a></div><div class="ttdeci">stream_preview_image($post_id)</div><div class="ttdoc">Streams image in post to browser, along with enqueued changes in $_REQUEST[&#39;history&#39;]. </div><div class="ttdef"><b>Definition:</b> <a href="image-edit_8php_source.html#l00586">image-edit.php:586</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_afa1002e46ff52ab99a353e83b4c3a5e9"><div class="ttname"><a href="ajax-actions_8php.html#afa1002e46ff52ab99a353e83b4c3a5e9">wp_ajax_delete_post</a></div><div class="ttdeci">wp_ajax_delete_post($action)</div><div class="ttdoc">Ajax handler for deleting a post. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00643">ajax-actions.php:643</a></div></div>
<div class="ttc" id="wp-admin_2includes_2media_8php_html_a8b490cd782906b4b723676021ad18e4e"><div class="ttname"><a href="wp-admin_2includes_2media_8php.html#a8b490cd782906b4b723676021ad18e4e">get_image_send_to_editor</a></div><div class="ttdeci">get_image_send_to_editor($id, $caption, $title, $align, $url= '', $rel= '', $size= 'medium', $alt= '')</div><div class="ttdoc">Retrieves the image HTML to send to the editor. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2media_8php_source.html#l00120">wp-admin/includes/media.php:120</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_ae7021fd5ae9e6f91ee8a2258d1e30e33"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#ae7021fd5ae9e6f91ee8a2258d1e30e33">wp_json_encode</a></div><div class="ttdeci">wp_json_encode($data, $options=0, $depth=512)</div><div class="ttdoc">Encode a variable into JSON, with some sanity checks. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l02784">wordpress/wp-includes/functions.php:2784</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a44f26880e9463bb720a3ec802cd51f3f"><div class="ttname"><a href="wp-includes_2post_8php.html#a44f26880e9463bb720a3ec802cd51f3f">delete_post_thumbnail</a></div><div class="ttdeci">delete_post_thumbnail($post)</div><div class="ttdoc">Remove a post thumbnail. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l05834">wp-includes/post.php:5834</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a716e6d165f72c602db1cd5a7b4698f4d"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a716e6d165f72c602db1cd5a7b4698f4d">wp_delete_file</a></div><div class="ttdeci">wp_delete_file($file)</div><div class="ttdoc">Delete a file. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l05132">wordpress/wp-includes/functions.php:5132</a></div></div>
<div class="ttc" id="namespacephp_html"><div class="ttname"><a href="namespacephp.html">php</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_ab0e59dc720f3d4a2362e1689adef0aeb"><div class="ttname"><a href="ajax-actions_8php.html#ab0e59dc720f3d4a2362e1689adef0aeb">wp_ajax_closed_postboxes</a></div><div class="ttdeci">wp_ajax_closed_postboxes()</div><div class="ttdoc">Ajax handler for closed post boxes. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01358">ajax-actions.php:1358</a></div></div>
<div class="ttc" id="class_w_p___session___tokens_html_a89e3b6f7f96d3aec2c38f59a05925c7d"><div class="ttname"><a href="class_w_p___session___tokens.html#a89e3b6f7f96d3aec2c38f59a05925c7d">WP_Session_Tokens\get_instance</a></div><div class="ttdeci">static get_instance($user_id)</div><div class="ttdoc">Get a session token manager instance for a user. </div><div class="ttdef"><b>Definition:</b> <a href="session_8php_source.html#l00041">session.php:41</a></div></div>
<div class="ttc" id="meta_8php_html_a5fc1c8123ec9618ddec9206f3324432d"><div class="ttname"><a href="meta_8php.html#a5fc1c8123ec9618ddec9206f3324432d">is_protected_meta</a></div><div class="ttdeci">is_protected_meta($meta_key, $meta_type=null)</div><div class="ttdoc">Determine whether a meta key is protected. </div><div class="ttdef"><b>Definition:</b> <a href="meta_8php_source.html#l00900">meta.php:900</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a578845871d8a21cd76e4b64722a5e070"><div class="ttname"><a href="ajax-actions_8php.html#a578845871d8a21cd76e4b64722a5e070">wp_ajax_hidden_columns</a></div><div class="ttdeci">wp_ajax_hidden_columns()</div><div class="ttdoc">Ajax handler for hidden columns. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l01390">ajax-actions.php:1390</a></div></div>
<div class="ttc" id="wp-includes_2widgets_8php_html_a24c1fc3a7e94da5ac9b3846b6d93f2a7"><div class="ttname"><a href="wp-includes_2widgets_8php.html#a24c1fc3a7e94da5ac9b3846b6d93f2a7">$wp_registered_widgets</a></div><div class="ttdeci">global $wp_registered_widgets</div><div class="ttdoc">Stores the registered widgets. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2widgets_8php_source.html#l00026">wp-includes/widgets.php:26</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a87f7263ea18871d5950a7ac7096a58e9"><div class="ttname"><a href="ajax-actions_8php.html#a87f7263ea18871d5950a7ac7096a58e9">wp_ajax_wp_remove_post_lock</a></div><div class="ttdeci">wp_ajax_wp_remove_post_lock()</div><div class="ttdoc">Ajax handler for removing a post lock. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02252">ajax-actions.php:2252</a></div></div>
<div class="ttc" id="class_w_p___query_html"><div class="ttname"><a href="class_w_p___query.html">WP_Query</a></div><div class="ttdoc">The WordPress Query class. </div><div class="ttdef"><b>Definition:</b> <a href="query_8php_source.html#l00847">query.php:847</a></div></div>
<div class="ttc" id="site-themes_8php_html_a50b05cf2e02ef0b67fcad97106dd7634"><div class="ttname"><a href="site-themes_8php.html#a50b05cf2e02ef0b67fcad97106dd7634">$s</a></div><div class="ttdeci">$s</div><div class="ttdef"><b>Definition:</b> <a href="site-themes_8php_source.html#l00046">site-themes.php:46</a></div></div>
<div class="ttc" id="link-template_8php_html_ad641ec50e77cc407a60569240c4b7d07"><div class="ttname"><a href="link-template_8php.html#ad641ec50e77cc407a60569240c4b7d07">set_url_scheme</a></div><div class="ttdeci">set_url_scheme($url, $scheme=null)</div><div class="ttdoc">Sets the scheme for a URL. </div><div class="ttdef"><b>Definition:</b> <a href="link-template_8php_source.html#l03383">link-template.php:3383</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a909c834adeba982112569fd4dda895fb"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a909c834adeba982112569fd4dda895fb">wp_ext2type</a></div><div class="ttdeci">wp_ext2type($ext)</div><div class="ttdoc">Retrieve the file type based on the extension name. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l02119">wordpress/wp-includes/functions.php:2119</a></div></div>
<div class="ttc" id="tools_8php_html_a475a6a63b85186663d34151bcbd21590"><div class="ttname"><a href="tools_8php.html#a475a6a63b85186663d34151bcbd21590">$tags</a></div><div class="ttdeci">$tags</div><div class="ttdef"><b>Definition:</b> <a href="tools_8php_source.html#l00100">tools.php:100</a></div></div>
<div class="ttc" id="wp-admin_2includes_2nav-menu_8php_html_af0c11c54f540ef25063389c2b0f19256"><div class="ttname"><a href="wp-admin_2includes_2nav-menu_8php.html#af0c11c54f540ef25063389c2b0f19256">_wp_ajax_menu_quick_search</a></div><div class="ttdeci">_wp_ajax_menu_quick_search($request=array())</div><div class="ttdoc">Walker_Nav_Menu_Edit class. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2nav-menu_8php_source.html#l00023">wp-admin/includes/nav-menu.php:23</a></div></div>
<div class="ttc" id="post__image_8php_html_ada57e7bb7c152edad18fe2f166188691"><div class="ttname"><a href="post__image_8php.html#ada57e7bb7c152edad18fe2f166188691">$title</a></div><div class="ttdeci">$title</div><div class="ttdef"><b>Definition:</b> <a href="post__image_8php_source.html#l00026">post_image.php:26</a></div></div>
<div class="ttc" id="l10n_8php_html_a886a0fa23c3318d0172ef3489f97939b"><div class="ttname"><a href="l10n_8php.html#a886a0fa23c3318d0172ef3489f97939b">_nx</a></div><div class="ttdeci">_nx($single, $plural, $number, $context, $domain= 'default')</div><div class="ttdoc">Translates and retrieves the singular or plural form based on the supplied number, with gettext context. </div><div class="ttdef"><b>Definition:</b> <a href="l10n_8php_source.html#l00372">l10n.php:372</a></div></div>
<div class="ttc" id="wp-admin_2widgets_8php_html_ab24faf4aa647cdcee494fc48524ad4ff"><div class="ttname"><a href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a></div><div class="ttdeci">$errors</div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2widgets_8php_source.html#l00339">wp-admin/widgets.php:339</a></div></div>
<div class="ttc" id="wp-includes_2widgets_8php_html_a01164ca96ab098d47bd235084bf3a4f6"><div class="ttname"><a href="wp-includes_2widgets_8php.html#a01164ca96ab098d47bd235084bf3a4f6">wp_get_sidebars_widgets</a></div><div class="ttdeci">wp_get_sidebars_widgets($deprecated=true)</div><div class="ttdoc">Retrieve full list of sidebars and their widget instance IDs. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2widgets_8php_source.html#l00886">wp-includes/widgets.php:886</a></div></div>
<div class="ttc" id="wp-includes_2theme_8php_html_a4d6498454d40a2c245452c1ba2b4ef59"><div class="ttname"><a href="wp-includes_2theme_8php.html#a4d6498454d40a2c245452c1ba2b4ef59">set_theme_mod</a></div><div class="ttdeci">set_theme_mod($name, $value)</div><div class="ttdoc">Update theme modification value for the current theme. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2theme_8php_source.html#l00885">wp-includes/theme.php:885</a></div></div>
<div class="ttc" id="plugins_8php_html_ada8a7130088351710bb02ed622d6bf65"><div class="ttname"><a href="plugins_8php.html#ada8a7130088351710bb02ed622d6bf65">$plugin</a></div><div class="ttdeci">$plugin</div><div class="ttdef"><b>Definition:</b> <a href="plugins_8php_source.html#l00020">plugins.php:20</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a28a0d3d106627d2eb405de4f4266012f"><div class="ttname"><a href="ajax-actions_8php.html#a28a0d3d106627d2eb405de4f4266012f">wp_ajax_imgedit_preview</a></div><div class="ttdeci">wp_ajax_imgedit_preview()</div><div class="ttdoc">Ajax handler for image editor previews. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00214">ajax-actions.php:214</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a0784f355b038e9c3e68f13427c7bd359"><div class="ttname"><a href="ajax-actions_8php.html#a0784f355b038e9c3e68f13427c7bd359">wp_ajax_save_attachment_order</a></div><div class="ttdeci">wp_ajax_save_attachment_order()</div><div class="ttdoc">Ajax handler for saving the attachment order. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02510">ajax-actions.php:2510</a></div></div>
<div class="ttc" id="wp-includes_2taxonomy_8php_html_a99b6f0c73dd9c512b520be29fa94df3e"><div class="ttname"><a href="wp-includes_2taxonomy_8php.html#a99b6f0c73dd9c512b520be29fa94df3e">get_term</a></div><div class="ttdeci">get_term($term, $taxonomy= '', $output=OBJECT, $filter= 'raw')</div><div class="ttdoc">Get all Term data from database by Term ID. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2taxonomy_8php_source.html#l00807">wp-includes/taxonomy.php:807</a></div></div>
<div class="ttc" id="link-template_8php_html_a4a32808e319cd6ec587320eaa73b2a96"><div class="ttname"><a href="link-template_8php.html#a4a32808e319cd6ec587320eaa73b2a96">network_admin_url</a></div><div class="ttdeci">network_admin_url($path= '', $scheme= 'admin')</div><div class="ttdoc">Retrieve the url to the admin area for the network. </div><div class="ttdef"><b>Definition:</b> <a href="link-template_8php_source.html#l03306">link-template.php:3306</a></div></div>
<div class="ttc" id="query_8php_html_a596d0f9a6630806c4de2f476dcc26c6e"><div class="ttname"><a href="query_8php.html#a596d0f9a6630806c4de2f476dcc26c6e">setup_postdata</a></div><div class="ttdeci">setup_postdata($post)</div><div class="ttdoc">Set up global post data. </div><div class="ttdef"><b>Definition:</b> <a href="query_8php_source.html#l05052">query.php:5052</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a5dbc2fb460cf9fee69e473eb8f8a794c"><div class="ttname"><a href="ajax-actions_8php.html#a5dbc2fb460cf9fee69e473eb8f8a794c">wp_ajax_ajax_tag_search</a></div><div class="ttdeci">wp_ajax_ajax_tag_search()</div><div class="ttdoc">Ajax handler for tag search. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l00108">ajax-actions.php:108</a></div></div>
<div class="ttc" id="wp-admin_2includes_2post_8php_html_aff82f0f18e5a6f0fe68d279c56044d4d"><div class="ttname"><a href="wp-admin_2includes_2post_8php.html#aff82f0f18e5a6f0fe68d279c56044d4d">add_meta</a></div><div class="ttdeci">add_meta($post_ID)</div><div class="ttdoc">Add post meta data defined in $_POST superglobal for post with given ID. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2post_8php_source.html#l00798">wp-admin/includes/post.php:798</a></div></div>
<div class="ttc" id="category-template_8php_html_aef0ef4cafaeef225886f521ccdde06d9"><div class="ttname"><a href="category-template_8php.html#aef0ef4cafaeef225886f521ccdde06d9">wp_generate_tag_cloud</a></div><div class="ttdeci">wp_generate_tag_cloud($tags, $args= '')</div><div class="ttdoc">Generates a tag cloud (heatmap) from provided data. </div><div class="ttdef"><b>Definition:</b> <a href="category-template_8php_source.html#l00791">category-template.php:791</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_af7ccbb4fe49b4877219cbdbddecd7f77"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#af7ccbb4fe49b4877219cbdbddecd7f77">mysql2date</a></div><div class="ttdeci">mysql2date($format, $date, $translate=true)</div><div class="ttdoc">Convert given date string into a different format. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l00026">wordpress/wp-includes/functions.php:26</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_ad4a24ba6dbefcab84554fda62013864d"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#ad4a24ba6dbefcab84554fda62013864d">is_ssl</a></div><div class="ttdeci">is_ssl()</div><div class="ttdoc">Determine if SSL is used. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l03943">wordpress/wp-includes/functions.php:3943</a></div></div>
<div class="ttc" id="gquiz__grade_8php_html_a83e4d6721f3491a4fd780dbd3ce1a3c0"><div class="ttname"><a href="gquiz__grade_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a></div><div class="ttdeci">$field</div><div class="ttdef"><b>Definition:</b> <a href="gquiz__grade_8php_source.html#l00011">gquiz_grade.php:11</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a866e7f0f003101850a78f372dd07bd2a"><div class="ttname"><a href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv'foreach(get_object_taxonomies($post) as $tax_name) if($thumbnail_support &amp;&amp;current_user_can( 'upload_files')) add_meta_box('postimagediv'if(post_type_supports($post_type, 'excerpt')) add_meta_box('postexcerpt' __('Excerpt')</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00269">edit-form-advanced.php:269</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2update_8php_html_a360285b3b3a90caae33ed49937a01462"><div class="ttname"><a href="wordpress_2wp-includes_2update_8php.html#a360285b3b3a90caae33ed49937a01462">wp_update_plugins</a></div><div class="ttdeci">wp_update_plugins($extra_stats=array())</div><div class="ttdoc">Check plugin versions against the latest versions hosted on WordPress.org. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2update_8php_source.html#l00190">wordpress/wp-includes/update.php:190</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_a5af1a20a80e2340d5825d0b2973908e6"><div class="ttname"><a href="ajax-actions_8php.html#a5af1a20a80e2340d5825d0b2973908e6">wp_ajax_send_link_to_editor</a></div><div class="ttdeci">wp_ajax_send_link_to_editor()</div><div class="ttdoc">Ajax handler for sending a link to the editor. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02621">ajax-actions.php:2621</a></div></div>
<div class="ttc" id="capabilities_8php_html_a3cea61656956bc24826e04276a5847fc"><div class="ttname"><a href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a></div><div class="ttdeci">current_user_can($capability)</div><div class="ttdoc">Whether the current user has a specific capability. </div><div class="ttdef"><b>Definition:</b> <a href="capabilities_8php_source.html#l00423">capabilities.php:423</a></div></div>
<div class="ttc" id="ajax-actions_8php_html_aca41a6a7b92cae19a206f791336a84f5"><div class="ttname"><a href="ajax-actions_8php.html#aca41a6a7b92cae19a206f791336a84f5">wp_ajax_date_format</a></div><div class="ttdeci">wp_ajax_date_format()</div><div class="ttdoc">Ajax handler for date formatting. </div><div class="ttdef"><b>Definition:</b> <a href="ajax-actions_8php_source.html#l02194">ajax-actions.php:2194</a></div></div>
<div class="ttc" id="wp-admin_2includes_2post_8php_html_a40bd171c0346a1ee42b164a8d9efab30"><div class="ttname"><a href="wp-admin_2includes_2post_8php.html#a40bd171c0346a1ee42b164a8d9efab30">edit_post</a></div><div class="ttdeci">edit_post($post_data=null)</div><div class="ttdoc">Update an existing post with values provided in $_POST. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2post_8php_source.html#l00181">wp-admin/includes/post.php:181</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/>
<script type="text/javascript">
    jQuery( document ).ready( function( $ ) {
        $( 'a.anchor[id^=_filters],a.anchor[id^=_actions]' ).each( function() {
            $( this )
                .text('#')
                .attr( 'href', function() {
                    return '#' + $( this ).attr( 'id' );
                }).prependTo( $( this ).parent('dt' ).next('dd') );
        });
    });
</script>
</body>
</html>
