<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>GravityView: custom-header.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom-doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GravityView
   &#160;<span id="projectnumber">1.16.1</span>
   </div>
   <div id="projectbrief">Beautifully display your Gravity Forms data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_f202f45fd139109afdc6cee542e9540d.html">tmp</a></li><li class="navelem"><a class="el" href="dir_bab4839c1ebfd97cab4362c92e1efb01.html">wordpress</a></li><li class="navelem"><a class="el" href="dir_6befe1ce5953e76db4cf235d50144e4d.html">wp-admin</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">wp-admin/custom-header.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="wp-admin_2custom-header_8php.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a><span class="comment"></span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * The custom header image script.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * @package WordPress</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * @subpackage Administration</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * The custom header image class.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * @since 2.1.0</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * @package WordPress</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * @subpackage Administration</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="class_custom___image___header.html">   16</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_custom___image___header.html">Custom_Image_Header</a> {</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">     * Callback for administration header.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">     * @var callable</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">     * @since 2.1.0</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#ab2109cfb8fa5eb275e56c47564ac8207">   24</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="class_custom___image___header.html#ab2109cfb8fa5eb275e56c47564ac8207">$admin_header_callback</a>;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">     * Callback for header div.</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">     * @var callable</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">     * @since 3.0.0</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#aadf3be8e052a282e67b90018316eed88">   32</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="class_custom___image___header.html#aadf3be8e052a282e67b90018316eed88">$admin_image_div_callback</a>;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">     * Holds default headers.</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">     * @var array</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">     * @since 3.0.0</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">     * @access private</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a31630d393a942cb3cc99f7d3a1160736">   41</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="class_custom___image___header.html#a31630d393a942cb3cc99f7d3a1160736">$default_headers</a> = array();</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">     * Used to trigger a success message when settings updated and set to true.</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">     * @since 3.0.0</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">     * @access private</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">     * @var bool</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a57d6fd1200be8dd145a9b57549797d37">   50</a></span>&#160;    <span class="keyword">private</span> <a class="code" href="class_custom___image___header.html#a57d6fd1200be8dd145a9b57549797d37">$updated</a>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">     * Constructor - Register administration header callback.</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">     * @since 2.1.0</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">     * @param callable $admin_header_callback</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">     * @param callable $admin_image_div_callback Optional custom image div output callback.</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a8eb795060a1fc81cab6c9bdd25557a7e">   59</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a8eb795060a1fc81cab6c9bdd25557a7e">__construct</a>(<a class="code" href="class_custom___image___header.html#ab2109cfb8fa5eb275e56c47564ac8207">$admin_header_callback</a>, <a class="code" href="class_custom___image___header.html#aadf3be8e052a282e67b90018316eed88">$admin_image_div_callback</a> = <span class="stringliteral">&#39;&#39;</span>) {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        $this-&gt;admin_header_callback = <a class="code" href="class_custom___image___header.html#ab2109cfb8fa5eb275e56c47564ac8207">$admin_header_callback</a>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        $this-&gt;admin_image_div_callback = <a class="code" href="class_custom___image___header.html#aadf3be8e052a282e67b90018316eed88">$admin_image_div_callback</a>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&#39;admin_menu&#39;</span>, array( $this, <span class="stringliteral">&#39;init&#39;</span> ) );</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&#39;customize_save_after&#39;</span>,         array( $this, <span class="stringliteral">&#39;customize_set_last_used&#39;</span> ) );</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&#39;wp_ajax_custom-header-crop&#39;</span>,   array( $this, <span class="stringliteral">&#39;ajax_header_crop&#39;</span>        ) );</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&#39;wp_ajax_custom-header-add&#39;</span>,    array( $this, <span class="stringliteral">&#39;ajax_header_add&#39;</span>         ) );</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&#39;wp_ajax_custom-header-remove&#39;</span>, array( $this, <span class="stringliteral">&#39;ajax_header_remove&#39;</span>      ) );</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">     * Set up the hooks for the Custom Header admin page.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">     * @since 2.1.0</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a4be4055f3361d4800e16bc2e2e38cda6">   76</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a4be4055f3361d4800e16bc2e2e38cda6">init</a>() {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <a class="code" href="wp-content_2themes_2twentyeleven_2header_8php.html#a0e2dd2aed1e3361c3aec57e7f7170f73">$page</a> = <a class="code" href="wp-admin_2includes_2plugin_8php.html#aca0dc75ff5eeceb18e06a8d27de85863">add_theme_page</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Header&#39;</span> ), <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Header&#39;</span> ), <span class="stringliteral">&#39;edit_theme_options&#39;</span>, <span class="stringliteral">&#39;custom-header&#39;</span>, array( $this, <span class="stringliteral">&#39;admin_page&#39;</span> ) );</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="wp-content_2themes_2twentyeleven_2header_8php.html#a0e2dd2aed1e3361c3aec57e7f7170f73">$page</a> ) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&quot;admin_print_scripts-$page&quot;</span>, array( $this, <span class="stringliteral">&#39;js_includes&#39;</span> ) );</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&quot;admin_print_styles-$page&quot;</span>, array( $this, <span class="stringliteral">&#39;css_includes&#39;</span> ) );</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&quot;admin_head-$page&quot;</span>, array( $this, <span class="stringliteral">&#39;help&#39;</span> ) );</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&quot;admin_head-$page&quot;</span>, array( $this, <span class="stringliteral">&#39;take_action&#39;</span> ), 50 );</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&quot;admin_head-$page&quot;</span>, array( $this, <span class="stringliteral">&#39;js&#39;</span> ), 50 );</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keywordflow">if</span> ( $this-&gt;admin_header_callback ) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <a class="code" href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a>( <span class="stringliteral">&quot;admin_head-$page&quot;</span>, $this-&gt;admin_header_callback, 51 );</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">     * Adds contextual help.</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">     * @since 3.0.0</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a91482c4db18186b33acbaf1528a50ddc">   97</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a91482c4db18186b33acbaf1528a50ddc">help</a>() {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="screen_8php.html#aa2536d3fe4b68dea313b1523ea606f10">get_current_screen</a>()-&gt;add_help_tab( array(</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            <span class="stringliteral">&#39;id&#39;</span>      =&gt; <span class="stringliteral">&#39;overview&#39;</span>,</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="stringliteral">&#39;title&#39;</span>   =&gt; <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;Overview&#39;</span>),</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            <span class="stringliteral">&#39;content&#39;</span> =&gt;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;This screen is used to customize the header section of your theme.&#39;</span>) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span> .</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;You can choose from the theme&amp;#8217;s default header images, or use one of your own. You can also customize how your Site Title and Tagline are displayed.&#39;</span>) . <span class="stringliteral">&#39;&lt;p&gt;&#39;</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        ) );</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <a class="code" href="screen_8php.html#aa2536d3fe4b68dea313b1523ea606f10">get_current_screen</a>()-&gt;add_help_tab( array(</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            <span class="stringliteral">&#39;id&#39;</span>      =&gt; <span class="stringliteral">&#39;set-header-image&#39;</span>,</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            <span class="stringliteral">&#39;title&#39;</span>   =&gt; <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;Header Image&#39;</span>),</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <span class="stringliteral">&#39;content&#39;</span> =&gt;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;You can set a custom image header for your site. Simply upload the image and crop it, and the new header will go live immediately. Alternatively, you can use an image that has already been uploaded to your Media Library by clicking the &amp;#8220;Choose Image&amp;#8221; button.&#39;</span> ) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span> .</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Some themes come with additional header images bundled. If you see multiple images displayed, select the one you&amp;#8217;d like and click the &amp;#8220;Save Changes&amp;#8221; button.&#39;</span> ) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span> .</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;If your theme has more than one default header image, or you have uploaded more than one custom header image, you have the option of having WordPress display a randomly different image on each page of your site. Click the &amp;#8220;Random&amp;#8221; radio button next to the Uploaded Images or Default Images section to enable this feature.&#39;</span>) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span> .</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;If you don&amp;#8217;t want a header image to be displayed on your site at all, click the &amp;#8220;Remove Header Image&amp;#8221; button at the bottom of the Header Image section of this page. If you want to re-enable the header image later, you just have to select one of the other image options and click &amp;#8220;Save Changes&amp;#8221;.&#39;</span>) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        ) );</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <a class="code" href="screen_8php.html#aa2536d3fe4b68dea313b1523ea606f10">get_current_screen</a>()-&gt;add_help_tab( array(</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="stringliteral">&#39;id&#39;</span>      =&gt; <span class="stringliteral">&#39;set-header-text&#39;</span>,</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="stringliteral">&#39;title&#39;</span>   =&gt; <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;Header Text&#39;</span>),</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <span class="stringliteral">&#39;content&#39;</span> =&gt;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> . sprintf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;For most themes, the header text is your Site Title and Tagline, as defined in the &lt;a href=&quot;%1$s&quot;&gt;General Settings&lt;/a&gt; section.&#39;</span> ), <a class="code" href="noop_8php.html#a01815a0502df2442bbb063f4055c2194">admin_url</a>( <span class="stringliteral">&#39;options-general.php&#39;</span> ) ) . <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> .</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;In the Header Text section of this page, you can choose whether to display this text or hide it. You can also choose a color for the text by clicking the Select Color button and either typing in a legitimate HTML hex value, e.g. &amp;#8220;#ff0000&amp;#8221; for red, or by choosing a color using the color picker.&#39;</span> ) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span> .</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Don&amp;#8217;t forget to click &amp;#8220;Save Changes&amp;#8221; when you&amp;#8217;re done!&#39;</span>) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        ) );</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <a class="code" href="screen_8php.html#aa2536d3fe4b68dea313b1523ea606f10">get_current_screen</a>()-&gt;set_help_sidebar(</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="stringliteral">&#39;&lt;p&gt;&lt;strong&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;For more information:&#39;</span> ) . <span class="stringliteral">&#39;&lt;/strong&gt;&lt;/p&gt;&#39;</span> .</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;&lt;a href=&quot;https://codex.wordpress.org/Appearance_Header_Screen&quot; target=&quot;_blank&quot;&gt;Documentation on Custom Header&lt;/a&gt;&#39;</span> ) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span> .</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;&lt;a href=&quot;https://wordpress.org/support/&quot; target=&quot;_blank&quot;&gt;Support Forums&lt;/a&gt;&#39;</span> ) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        );</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">     * Get the current step.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">     * @since 2.6.0</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">     * @return int Current step</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a8c68cd3f12f49fdc81f73f17192bb825">  139</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a8c68cd3f12f49fdc81f73f17192bb825">step</a>() {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">if</span> ( ! isset( $_GET[<span class="stringliteral">&#39;step&#39;</span>] ) )</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> = (int) $_GET[<span class="stringliteral">&#39;step&#39;</span>];</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> &lt; 1 || 3 &lt; <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> ||</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            ( 2 == <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> &amp;&amp; ! wp_verify_nonce( $_REQUEST[<span class="stringliteral">&#39;_wpnonce-custom-header-upload&#39;</span>], <span class="stringliteral">&#39;custom-header-upload&#39;</span> ) ) ||</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            ( 3 == <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> &amp;&amp; ! wp_verify_nonce( $_REQUEST[<span class="stringliteral">&#39;_wpnonce&#39;</span>], <span class="stringliteral">&#39;custom-header-crop-image&#39;</span> ) )</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        )</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">     * Set up the enqueue for the JavaScript files.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">     * @since 2.1.0</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#aa2e332fc40150d0e752ed7609a2f8b3b">  158</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#aa2e332fc40150d0e752ed7609a2f8b3b">js_includes</a>() {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> = $this-&gt;<a class="code" href="class_custom___image___header.html#a8c68cd3f12f49fdc81f73f17192bb825">step</a>();</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">if</span> ( ( 1 == <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> || 3 == <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> ) ) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <a class="code" href="wp-includes_2media_8php.html#a2cbdb038003b470c797affd8a91592ad">wp_enqueue_media</a>();</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <a class="code" href="functions_8wp-scripts_8php.html#ac7df944536184efa854f298abe6f334b">wp_enqueue_script</a>( <span class="stringliteral">&#39;custom-header&#39;</span> );</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;header-text&#39;</span> ) )</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                <a class="code" href="functions_8wp-scripts_8php.html#ac7df944536184efa854f298abe6f334b">wp_enqueue_script</a>( <span class="stringliteral">&#39;wp-color-picker&#39;</span> );</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( 2 == <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> ) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <a class="code" href="functions_8wp-scripts_8php.html#ac7df944536184efa854f298abe6f334b">wp_enqueue_script</a>(<span class="stringliteral">&#39;imgareaselect&#39;</span>);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">     * Set up the enqueue for the CSS files</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">     * @since 2.7.0</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#aead477e96706ed6a438419cbf60a061f">  176</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#aead477e96706ed6a438419cbf60a061f">css_includes</a>() {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> = $this-&gt;<a class="code" href="class_custom___image___header.html#a8c68cd3f12f49fdc81f73f17192bb825">step</a>();</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">if</span> ( ( 1 == <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> || 3 == <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> ) &amp;&amp; <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;header-text&#39;</span> ) )</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <a class="code" href="functions_8wp-styles_8php.html#a5877de47bfb773d66a3534674f900882">wp_enqueue_style</a>( <span class="stringliteral">&#39;wp-color-picker&#39;</span> );</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( 2 == <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> )</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <a class="code" href="functions_8wp-styles_8php.html#a5877de47bfb773d66a3534674f900882">wp_enqueue_style</a>(<span class="stringliteral">&#39;imgareaselect&#39;</span>);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">     * Execute custom header modification.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">     * @since 2.6.0</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a2d54eef99c94638aa069b1a4443f0467">  190</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a2d54eef99c94638aa069b1a4443f0467">take_action</a>() {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>(<span class="stringliteral">&#39;edit_theme_options&#39;</span>) )</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">if</span> ( empty( $_POST ) )</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        $this-&gt;updated = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">if</span> ( isset( $_POST[<span class="stringliteral">&#39;resetheader&#39;</span>] ) ) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            check_admin_referer( <span class="stringliteral">&#39;custom-header-options&#39;</span>, <span class="stringliteral">&#39;_wpnonce-custom-header-options&#39;</span> );</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            $this-&gt;<a class="code" href="class_custom___image___header.html#aeea4251403e3c66b74f554f9ba49bdf5">reset_header_image</a>();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordflow">if</span> ( isset( $_POST[<span class="stringliteral">&#39;removeheader&#39;</span>] ) ) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            check_admin_referer( <span class="stringliteral">&#39;custom-header-options&#39;</span>, <span class="stringliteral">&#39;_wpnonce-custom-header-options&#39;</span> );</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            $this-&gt;<a class="code" href="class_custom___image___header.html#a1271ba79dab368a6b1881e11b6e2d016">remove_header_image</a>();</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">if</span> ( isset( $_POST[<span class="stringliteral">&#39;text-color&#39;</span>] ) &amp;&amp; ! isset( $_POST[<span class="stringliteral">&#39;display-header-text&#39;</span>] ) ) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            check_admin_referer( <span class="stringliteral">&#39;custom-header-options&#39;</span>, <span class="stringliteral">&#39;_wpnonce-custom-header-options&#39;</span> );</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <a class="code" href="wp-includes_2theme_8php.html#a4d6498454d40a2c245452c1ba2b4ef59">set_theme_mod</a>( <span class="stringliteral">&#39;header_textcolor&#39;</span>, <span class="stringliteral">&#39;blank&#39;</span> );</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( isset( $_POST[<span class="stringliteral">&#39;text-color&#39;</span>] ) ) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            check_admin_referer( <span class="stringliteral">&#39;custom-header-options&#39;</span>, <span class="stringliteral">&#39;_wpnonce-custom-header-options&#39;</span> );</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            $_POST[<span class="stringliteral">&#39;text-color&#39;</span>] = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="charliteral">&#39;#&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, $_POST[<span class="stringliteral">&#39;text-color&#39;</span>] );</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            $color = preg_replace(<span class="stringliteral">&#39;/[^0-9a-fA-F]/&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, $_POST[<span class="stringliteral">&#39;text-color&#39;</span>]);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="keywordflow">if</span> ( strlen($color) == 6 || strlen($color) == 3 )</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                <a class="code" href="wp-includes_2theme_8php.html#a4d6498454d40a2c245452c1ba2b4ef59">set_theme_mod</a>(<span class="stringliteral">&#39;header_textcolor&#39;</span>, $color);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( ! $color )</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                <a class="code" href="wp-includes_2theme_8php.html#a4d6498454d40a2c245452c1ba2b4ef59">set_theme_mod</a>( <span class="stringliteral">&#39;header_textcolor&#39;</span>, <span class="stringliteral">&#39;blank&#39;</span> );</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">if</span> ( isset( $_POST[<span class="stringliteral">&#39;default-header&#39;</span>] ) ) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            check_admin_referer( <span class="stringliteral">&#39;custom-header-options&#39;</span>, <span class="stringliteral">&#39;_wpnonce-custom-header-options&#39;</span> );</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            $this-&gt;<a class="code" href="class_custom___image___header.html#a3b0726562cc2d58bd3b46cbc7b10df68">set_header_image</a>( $_POST[<span class="stringliteral">&#39;default-header&#39;</span>] );</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">     * Process the default headers</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">     * @since 3.0.0</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">     * @global array $_wp_default_headers</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a5b67c2a9e67409fd073d9689014eaa33">  238</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a5b67c2a9e67409fd073d9689014eaa33">process_default_headers</a>() {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        global $_wp_default_headers;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordflow">if</span> ( !isset($_wp_default_headers) )</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $this-&gt;default_headers ) ) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        $this-&gt;default_headers = $_wp_default_headers;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        $template_directory_uri = <a class="code" href="wp-includes_2theme_8php.html#a39342df15893fdd8e811652c9a194123">get_template_directory_uri</a>();</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        $stylesheet_directory_uri = <a class="code" href="wp-includes_2theme_8php.html#a20e8d2b5ee7de6a42990d6e4cdc3c592">get_stylesheet_directory_uri</a>();</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">foreach</span> ( array_keys($this-&gt;default_headers) as $header ) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            $this-&gt;default_headers[$header][<span class="stringliteral">&#39;url&#39;</span>] =  sprintf( $this-&gt;default_headers[$header][<span class="stringliteral">&#39;url&#39;</span>], $template_directory_uri, $stylesheet_directory_uri );</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            $this-&gt;default_headers[$header][<span class="stringliteral">&#39;thumbnail_url&#39;</span>] =  sprintf( $this-&gt;default_headers[$header][<span class="stringliteral">&#39;thumbnail_url&#39;</span>], $template_directory_uri, $stylesheet_directory_uri );</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">     * Display UI for selecting one of several default headers.</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">     * Show the random image option if this theme has multiple header images.</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">     * Random image option is on by default if no header has been set.</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">     * @since 3.0.0</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">     * @param string $type The header type. One of &#39;default&#39; (for the Uploaded Images control)</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">     *                     or &#39;uploaded&#39; (for the Uploaded Images control).</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a11261ff360c81ed389044015ec1444be">  268</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a11261ff360c81ed389044015ec1444be">show_header_selector</a>( $type = <span class="stringliteral">&#39;default&#39;</span> ) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;default&#39;</span> == $type ) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            $headers = <a class="code" href="class_custom___image___header.html#a31630d393a942cb3cc99f7d3a1160736">$this-&gt;default_headers</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            $headers = <a class="code" href="class_custom___image___header.html#a19ca3de195fb9681c67da43fb94b1d96">get_uploaded_header_images</a>();</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            $type = <span class="stringliteral">&#39;uploaded&#39;</span>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordflow">if</span> ( 1 &lt; count( $headers ) ) {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            echo <span class="stringliteral">&#39;&lt;div class=&quot;random-header&quot;&gt;&#39;</span>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            echo <span class="stringliteral">&#39;&lt;label&gt;&lt;input name=&quot;default-header&quot; type=&quot;radio&quot; value=&quot;random-&#39;</span> . $type . <span class="stringliteral">&#39;-image&quot;&#39;</span> . <a class="code" href="general-template_8php.html#ac5a8cddc08f21085ba0939cda4f64766">checked</a>( <a class="code" href="wp-includes_2theme_8php.html#a8d30b9b4ad3eb2ba7b85d1b91a1688af">is_random_header_image</a>( $type ), <span class="keyword">true</span>, <span class="keyword">false</span> ) . <span class="stringliteral">&#39; /&gt;&#39;</span>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;&lt;strong&gt;Random:&lt;/strong&gt; Show a different image on each page.&#39;</span> );</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            echo <span class="stringliteral">&#39;&lt;/label&gt;&#39;</span>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            echo <span class="stringliteral">&#39;&lt;/div&gt;&#39;</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        echo <span class="stringliteral">&#39;&lt;div class=&quot;available-headers&quot;&gt;&#39;</span>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">foreach</span> ( $headers as $header_key =&gt; $header ) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            $header_thumbnail = $header[<span class="stringliteral">&#39;thumbnail_url&#39;</span>];</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            $header_url = $header[<span class="stringliteral">&#39;url&#39;</span>];</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            $header_alt_text = empty( $header[<span class="stringliteral">&#39;alt_text&#39;</span>] ) ? <span class="stringliteral">&#39;&#39;</span> : $header[<span class="stringliteral">&#39;alt_text&#39;</span>];</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            echo <span class="stringliteral">&#39;&lt;div class=&quot;default-header&quot;&gt;&#39;</span>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            echo <span class="stringliteral">&#39;&lt;label&gt;&lt;input name=&quot;default-header&quot; type=&quot;radio&quot; value=&quot;&#39;</span> . <a class="code" href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a>( $header_key ) . <span class="stringliteral">&#39;&quot; &#39;</span> . <a class="code" href="general-template_8php.html#ac5a8cddc08f21085ba0939cda4f64766">checked</a>( $header_url, <a class="code" href="wp-includes_2theme_8php.html#a4c3486e66730d9c0f77be28199f63069">get_theme_mod</a>( <span class="stringliteral">&#39;header_image&#39;</span> ), <span class="keyword">false</span> ) . <span class="stringliteral">&#39; /&gt;&#39;</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            $width = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="keywordflow">if</span> ( !empty( $header[<span class="stringliteral">&#39;attachment_id&#39;</span>] ) )</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                $width = <span class="stringliteral">&#39; width=&quot;230&quot;&#39;</span>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            echo <span class="stringliteral">&#39;&lt;img src=&quot;&#39;</span> . <a class="code" href="link-template_8php.html#ad641ec50e77cc407a60569240c4b7d07">set_url_scheme</a>( $header_thumbnail ) . <span class="stringliteral">&#39;&quot; alt=&quot;&#39;</span> . <a class="code" href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a>( $header_alt_text ) .<span class="charliteral">&#39;&quot;&#39;</span> . $width . <span class="stringliteral">&#39; /&gt;&lt;/label&gt;&#39;</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            echo <span class="stringliteral">&#39;&lt;/div&gt;&#39;</span>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        echo <span class="stringliteral">&#39;&lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;&lt;/div&gt;&#39;</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">     * Execute JavaScript depending on step.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">     * @since 2.1.0</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a231d52e00b64fc39ee1e9780e686cb37">  305</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a231d52e00b64fc39ee1e9780e686cb37">js</a>() {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> = $this-&gt;<a class="code" href="class_custom___image___header.html#a8c68cd3f12f49fdc81f73f17192bb825">step</a>();</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">if</span> ( ( 1 == <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> || 3 == <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> ) &amp;&amp; <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;header-text&#39;</span> ) )</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            $this-&gt;<a class="code" href="class_custom___image___header.html#ae6dab955e8ca973f9a7791bcc1554784">js_1</a>();</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( 2 == <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> )</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            $this-&gt;<a class="code" href="class_custom___image___header.html#aa660799a9359b150d9cf9d59be2096b6">js_2</a>();</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">     * Display JavaScript based on Step 1 and 3.</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">     * @since 2.6.0</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#ae6dab955e8ca973f9a7791bcc1554784">  318</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#ae6dab955e8ca973f9a7791bcc1554784">js_1</a>() {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        $default_color = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;default-text-color&#39;</span> ) ) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            $default_color = <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;default-text-color&#39;</span> );</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <span class="keywordflow">if</span> ( $default_color &amp;&amp; <span class="keyword">false</span> === strpos( $default_color, <span class="charliteral">&#39;#&#39;</span> ) ) {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                $default_color = <span class="charliteral">&#39;#&#39;</span> . $default_color;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        ?&gt;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;&lt;script <a class="code" href="namespacetype.html">type</a>=<span class="stringliteral">&quot;text/javascript&quot;</span>&gt;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;(<span class="keyword">function</span>($){</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    var default_color = <span class="stringliteral">&#39;&lt;?php echo $default_color; ?&gt;&#39;</span>,</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        header_text_fields;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keyword">function</span> pickColor(<a class="code" href="wordpress_2wp-content_2themes_2twentyeleven_2functions_8php.html#aee0174667653000761904b9bea00878d">color</a>) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        $(<span class="stringliteral">&#39;#name&#39;</span>).css(<span class="stringliteral">&#39;color&#39;</span>, <a class="code" href="wordpress_2wp-content_2themes_2twentyeleven_2functions_8php.html#aee0174667653000761904b9bea00878d">color</a>);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        $(<span class="stringliteral">&#39;#desc&#39;</span>).css(<span class="stringliteral">&#39;color&#39;</span>, <a class="code" href="wordpress_2wp-content_2themes_2twentyeleven_2functions_8php.html#aee0174667653000761904b9bea00878d">color</a>);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        $(<span class="stringliteral">&#39;#text-color&#39;</span>).val(<a class="code" href="wordpress_2wp-content_2themes_2twentyeleven_2functions_8php.html#aee0174667653000761904b9bea00878d">color</a>);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keyword">function</span> toggle_text() {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        var <a class="code" href="general-template_8php.html#ac5a8cddc08f21085ba0939cda4f64766">checked</a> = $(<span class="stringliteral">&#39;#display-header-text&#39;</span>).prop(<span class="stringliteral">&#39;checked&#39;</span>),</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            text_color;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        header_text_fields.toggle( checked );</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">if</span> ( ! checked )</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        text_color = $(<span class="stringliteral">&#39;#text-color&#39;</span>);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;&#39;</span> == text_color.val().replace(<span class="charliteral">&#39;#&#39;</span>, <span class="stringliteral">&#39;&#39;</span>) ) {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            text_color.val( default_color );</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            pickColor( default_color );</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            pickColor( text_color.val() );</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    $(document).ready(<span class="keyword">function</span>() {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        var text_color = $(<span class="stringliteral">&#39;#text-color&#39;</span>);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        header_text_fields = $(<span class="stringliteral">&#39;.displaying-header-text&#39;</span>);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        text_color.wpColorPicker({</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <a class="code" href="namespacechange.html">change</a>: <span class="keyword">function</span>( event, ui ) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                pickColor( text_color.wpColorPicker(<span class="stringliteral">&#39;color&#39;</span>) );</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            },</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            clear: <span class="keyword">function</span>() {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                pickColor( <span class="stringliteral">&#39;&#39;</span> );</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        });</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        $(<span class="stringliteral">&#39;#display-header-text&#39;</span>).<a class="code" href="namespaceclick.html">click</a>( toggle_text );</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">if</span> ( ! <a class="code" href="wp-includes_2theme_8php.html#a32648f64a46cac8e465689aa87e70f7b">display_header_text</a>() ) : ?&gt;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        toggle_text();</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="api-core_2wp-includes_2compat_8php.html#a69ce1131cd2c65fd147aa7b1de9ed7ee">endif</a>; ?&gt;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    });</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;})(jQuery);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;&lt;/script&gt;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">     * Display JavaScript based on Step 2.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">     * @since 2.6.0</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00379"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#aa660799a9359b150d9cf9d59be2096b6">  379</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#aa660799a9359b150d9cf9d59be2096b6">js_2</a>() { ?&gt;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;&lt;script <a class="code" href="namespacetype.html">type</a>=<span class="stringliteral">&quot;text/javascript&quot;</span>&gt;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keyword">function</span> onEndCrop( coords ) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        jQuery( <span class="stringliteral">&#39;#x1&#39;</span> ).val(coords.x);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        jQuery( <span class="stringliteral">&#39;#y1&#39;</span> ).val(coords.y);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        jQuery( <span class="stringliteral">&#39;#width&#39;</span> ).val(coords.w);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        jQuery( <span class="stringliteral">&#39;#height&#39;</span> ).val(coords.h);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    jQuery(document).ready(<span class="keyword">function</span>() {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        var xinit = &lt;?<a class="code" href="namespacephp.html">php</a> echo <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;width&#39;</span> ) ); ?&gt;;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        var yinit = &lt;?<a class="code" href="namespacephp.html">php</a> echo <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;height&#39;</span> ) ); ?&gt;;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        var ratio = xinit / yinit;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        var ximg = jQuery(<span class="stringliteral">&#39;img#upload&#39;</span>).width();</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        var yimg = jQuery(<span class="stringliteral">&#39;img#upload&#39;</span>).height();</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordflow">if</span> ( yimg &lt; yinit || ximg &lt; xinit ) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="keywordflow">if</span> ( ximg / yimg &gt; ratio ) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                yinit = yimg;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                xinit = yinit * ratio;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                xinit = ximg;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                yinit = xinit / ratio;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        jQuery(<span class="stringliteral">&#39;img#upload&#39;</span>).imgAreaSelect({</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            handles: <span class="keyword">true</span>,</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            keys: <span class="keyword">true</span>,</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <a class="code" href="namespaceshow.html">show</a>: <span class="keyword">true</span>,</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            x1: 0,</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            y1: 0,</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            x2: xinit,</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            y2: yinit,</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordflow">if</span> ( ! <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-height&#39;</span> ) &amp;&amp; ! <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-width&#39;</span> ) ) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            ?&gt;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            aspectRatio: xinit + <span class="charliteral">&#39;:&#39;</span> + yinit,</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            <span class="keywordflow">if</span> ( ! <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-height&#39;</span> ) ) {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            ?&gt;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            maxHeight: &lt;?<a class="code" href="namespacephp.html">php</a> echo <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;height&#39;</span> ); ?&gt;,</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="keywordflow">if</span> ( ! <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-width&#39;</span> ) ) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            ?&gt;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            maxWidth: &lt;?<a class="code" href="namespacephp.html">php</a> echo <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;width&#39;</span> ); ?&gt;,</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            ?&gt;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            onInit: <span class="keyword">function</span> () {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                jQuery(<span class="stringliteral">&#39;#width&#39;</span>).val(xinit);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                jQuery(<span class="stringliteral">&#39;#height&#39;</span>).val(yinit);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            },</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            onSelectChange: <span class="keyword">function</span>(img, c) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                jQuery(<span class="stringliteral">&#39;#x1&#39;</span>).val(c.x1);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                jQuery(<span class="stringliteral">&#39;#y1&#39;</span>).val(c.y1);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                jQuery(<span class="stringliteral">&#39;#width&#39;</span>).val(c.width);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                jQuery(<span class="stringliteral">&#39;#height&#39;</span>).val(c.height);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        });</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    });</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;&lt;/script&gt;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">     * Display first step of custom header image page.</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">     * @since 2.1.0</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00451"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#aab8905692893ee20a236980679e91684">  451</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#aab8905692893ee20a236980679e91684">step_1</a>() {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        $this-&gt;<a class="code" href="class_custom___image___header.html#a5b67c2a9e67409fd073d9689014eaa33">process_default_headers</a>();</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;?&gt;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;&lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;wrap&quot;</span>&gt;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;&lt;h1&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Custom Header&#39;</span> ); ?&gt;&lt;/h1&gt;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">if</span> ( <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;customize&#39;</span> ) ) { ?&gt;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;&lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;notice notice-info hide-if-no-customize&quot;</span>&gt;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        printf(</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;You can now manage and live-preview Custom Header in the &lt;a href=&quot;%1$s&quot;&gt;Customizer&lt;/a&gt;.&#39;</span> ),</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <a class="code" href="noop_8php.html#a01815a0502df2442bbb063f4055c2194">admin_url</a>( <span class="stringliteral">&#39;customize.php?autofocus[control]=header_image&#39;</span> )</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        );</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        ?&gt;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    &lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;&lt;/div&gt;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a> } ?&gt;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">if</span> ( ! empty( $this-&gt;updated ) ) { ?&gt;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;&lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;message&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;updated&quot;</span>&gt;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;&lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> printf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Header updated. &lt;a href=&quot;%s&quot;&gt;Visit your site&lt;/a&gt; to see how it looks.&#39;</span> ), <a class="code" href="noop_8php.html#a2d2cbc03d92d4736569cab661c417c22">home_url</a>( <span class="charliteral">&#39;/&#39;</span> ) ); ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;&lt;/div&gt;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a> } ?&gt;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;&lt;h3&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Header Image&#39;</span> ); ?&gt;&lt;/h3&gt;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;&lt;<a class="code" href="namespacetable.html">table</a> <span class="keyword">class</span>=<span class="stringliteral">&quot;form-table&quot;</span>&gt;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;&lt;tbody&gt;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2theme_8php.html#a7462b911fde17d89fe5c7fe162de29de">get_custom_header</a>() || <a class="code" href="wp-includes_2theme_8php.html#a32648f64a46cac8e465689aa87e70f7b">display_header_text</a>() ) : ?&gt;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;&lt;tr&gt;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;&lt;th scope=<span class="stringliteral">&quot;row&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Preview&#39;</span> ); ?&gt;&lt;/th&gt;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;&lt;td&gt;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordflow">if</span> ( $this-&gt;admin_image_div_callback ) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        call_user_func( $this-&gt;admin_image_div_callback );</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        $custom_header = <a class="code" href="wp-includes_2theme_8php.html#a7462b911fde17d89fe5c7fe162de29de">get_custom_header</a>();</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <a class="code" href="wp-content_2themes_2twentyeleven_2header_8php.html#acfaa5419847361da570a835c2681f6d4">$header_image</a> = <a class="code" href="wp-includes_2theme_8php.html#aeb6c356a325550b6b27077e895197263">get_header_image</a>();</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="wp-content_2themes_2twentyeleven_2header_8php.html#acfaa5419847361da570a835c2681f6d4">$header_image</a> ) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            $header_image_style = <span class="stringliteral">&#39;background-image:url(&#39;</span> . <a class="code" href="twentyfifteen_2content-link_8php.html#a4a6fb8865e1ae52faa29662b4087e629">esc_url</a>( <a class="code" href="wp-content_2themes_2twentyeleven_2header_8php.html#acfaa5419847361da570a835c2681f6d4">$header_image</a> ) . <span class="stringliteral">&#39;);&#39;</span>;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        }  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            $header_image_style = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="keywordflow">if</span> ( $custom_header-&gt;width )</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            $header_image_style .= <span class="stringliteral">&#39;max-width:&#39;</span> . $custom_header-&gt;width . <span class="stringliteral">&#39;px;&#39;</span>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="keywordflow">if</span> ( $custom_header-&gt;height )</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            $header_image_style .= <span class="stringliteral">&#39;height:&#39;</span> . $custom_header-&gt;height . <span class="stringliteral">&#39;px;&#39;</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    ?&gt;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;headimg&quot;</span> style=<span class="stringliteral">&quot;&lt;?php echo $header_image_style; ?&gt;&quot;</span>&gt;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2theme_8php.html#a32648f64a46cac8e465689aa87e70f7b">display_header_text</a>() )</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            $style = <span class="stringliteral">&#39; style=&quot;color:#&#39;</span> . <a class="code" href="wp-includes_2theme_8php.html#a72537b81cbe22bc1500e2c1dba0e05b6">get_header_textcolor</a>() . <span class="stringliteral">&#39;;&quot;&#39;</span>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            $style = <span class="stringliteral">&#39; style=&quot;display:none;&quot;&#39;</span>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        ?&gt;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        &lt;h1&gt;&lt;<a class="code" href="namespacea.html">a</a> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;name&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;displaying-header-text&quot;</span> &lt;?<a class="code" href="namespacephp.html">php</a> echo $style; ?&gt; onclick=<span class="stringliteral">&quot;return false;&quot;</span> <a class="code" href="namespacehref.html">href</a>=<span class="stringliteral">&quot;&lt;?php bloginfo(&#39;url&#39;); ?&gt;&quot;</span> tabindex=<span class="stringliteral">&quot;-1&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="general-template_8php.html#a6dc0ecb299e67b1f45caa067789d86e8">bloginfo</a>( <span class="stringliteral">&#39;name&#39;</span> ); ?&gt;&lt;/<a class="code" href="namespacea.html">a</a>&gt;&lt;/h1&gt;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;desc&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;displaying-header-text&quot;</span> &lt;?<a class="code" href="namespacephp.html">php</a> echo $style; ?&gt;&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="general-template_8php.html#a6dc0ecb299e67b1f45caa067789d86e8">bloginfo</a>( <span class="stringliteral">&#39;description&#39;</span> ); ?&gt;&lt;/div&gt;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    &lt;/div&gt;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> } ?&gt;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;&lt;/td&gt;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;&lt;/tr&gt;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="api-core_2wp-includes_2compat_8php.html#a69ce1131cd2c65fd147aa7b1de9ed7ee">endif</a>; ?&gt;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">if</span> ( <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;upload_files&#39;</span> ) &amp;&amp; <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;uploads&#39;</span> ) ) : ?&gt;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;&lt;tr&gt;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;&lt;th scope=<span class="stringliteral">&quot;row&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Select Image&#39;</span> ); ?&gt;&lt;/th&gt;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;&lt;td&gt;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;You can select an image to be shown at the top of your site by uploading from your computer or choosing from your media library. After selecting an image you will be able to crop it.&#39;</span> ); ?&gt;&lt;br /&gt;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-height&#39;</span> ) &amp;&amp; ! <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-width&#39;</span> ) ) {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        printf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Images of exactly &lt;strong&gt;%1$d &amp;times; %2$d pixels&lt;/strong&gt; will be used as-is.&#39;</span> ) . <span class="stringliteral">&#39;&lt;br /&gt;&#39;</span>, <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;width&#39;</span> ), <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;height&#39;</span> ) );</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-height&#39;</span> ) ) {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-width&#39;</span> ) )</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            printf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Images should be at least &lt;strong&gt;%1$d pixels&lt;/strong&gt; wide.&#39;</span> ) . <span class="charliteral">&#39; &#39;</span>, <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;width&#39;</span> ) );</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-width&#39;</span> ) ) {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-height&#39;</span> ) )</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            printf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Images should be at least &lt;strong&gt;%1$d pixels&lt;/strong&gt; tall.&#39;</span> ) . <span class="charliteral">&#39; &#39;</span>, <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;height&#39;</span> ) );</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-height&#39;</span> ) || <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-width&#39;</span> ) ) {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;width&#39;</span> ) )</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            printf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Suggested width is &lt;strong&gt;%1$d pixels&lt;/strong&gt;.&#39;</span> ) . <span class="charliteral">&#39; &#39;</span>, <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;width&#39;</span> ) );</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;height&#39;</span> ) )</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            printf( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Suggested height is &lt;strong&gt;%1$d pixels&lt;/strong&gt;.&#39;</span> ) . <span class="charliteral">&#39; &#39;</span>, <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;height&#39;</span> ) );</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    &lt;form enctype=<span class="stringliteral">&quot;multipart/form-data&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;upload-form&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;wp-upload-form&quot;</span> method=<span class="stringliteral">&quot;post&quot;</span> <a class="code" href="namespaceaction.html">action</a>=<span class="stringliteral">&quot;&lt;?php echo esc_url( add_query_arg( &#39;step&#39;, 2 ) ) ?&gt;&quot;</span>&gt;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        &lt;<a class="code" href="form__list_8php.html#a75c7d6fef8f2fc1b14944df043dd5690">label</a> <span class="keywordflow">for</span>=<span class="stringliteral">&quot;upload&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Choose an image from your computer:&#39;</span> ); ?&gt;&lt;/label&gt;&lt;br /&gt;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> <a class="code" href="namespacetype.html">type</a>=<span class="stringliteral">&quot;file&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;upload&quot;</span> <a class="code" href="edit-comments_8php.html#a01a5ac2afed3a262528186f4ba5f9693">name</a>=<span class="stringliteral">&quot;import&quot;</span> /&gt;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> type=<span class="stringliteral">&quot;hidden&quot;</span> <a class="code" href="edit-comments_8php.html#a01a5ac2afed3a262528186f4ba5f9693">name</a>=<span class="stringliteral">&quot;action&quot;</span> value=<span class="stringliteral">&quot;save&quot;</span> /&gt;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a68f0b952d066b096228913409d3da4bb">wp_nonce_field</a>( <span class="stringliteral">&#39;custom-header-upload&#39;</span>, <span class="stringliteral">&#39;_wpnonce-custom-header-upload&#39;</span> ); ?&gt;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wp-admin_2includes_2template_8php.html#ae57d23d839676b8d98097c939e863f0f">submit_button</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Upload&#39;</span> ), <span class="stringliteral">&#39;button&#39;</span>, <span class="stringliteral">&#39;submit&#39;</span>, <span class="keyword">false</span> ); ?&gt;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    &lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        $modal_update_href = <a class="code" href="twentyfifteen_2content-link_8php.html#a4a6fb8865e1ae52faa29662b4087e629">esc_url</a>( <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a6e348722923afe18808c59773964c162">add_query_arg</a>( array(</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <span class="stringliteral">&#39;page&#39;</span> =&gt; <span class="stringliteral">&#39;custom-header&#39;</span>,</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            <span class="stringliteral">&#39;step&#39;</span> =&gt; 2,</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="stringliteral">&#39;_wpnonce-custom-header-upload&#39;</span> =&gt; wp_create_nonce(<span class="stringliteral">&#39;custom-header-upload&#39;</span>),</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        ), <a class="code" href="noop_8php.html#a01815a0502df2442bbb063f4055c2194">admin_url</a>(<span class="stringliteral">&#39;themes.php&#39;</span>) ) );</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    ?&gt;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        &lt;label <span class="keywordflow">for</span>=<span class="stringliteral">&quot;choose-from-library-link&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Or choose an image from your media library:&#39;</span> ); ?&gt;&lt;/label&gt;&lt;br /&gt;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        &lt;<a class="code" href="namespacebutton.html">button</a> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;choose-from-library-link&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;button&quot;</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            data-update-<a class="code" href="namespacelink.html">link</a>=<span class="stringliteral">&quot;&lt;?php echo esc_attr( $modal_update_href ); ?&gt;&quot;</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            data-choose=<span class="stringliteral">&quot;&lt;?php esc_attr_e( &#39;Choose a Custom Header&#39; ); ?&gt;&quot;</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            data-update=<span class="stringliteral">&quot;&lt;?php esc_attr_e( &#39;Set as header&#39; ); ?&gt;&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Choose Image&#39;</span> ); ?&gt;&lt;/<a class="code" href="namespacebutton.html">button</a>&gt;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    &lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    &lt;/form&gt;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;&lt;/td&gt;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;&lt;/tr&gt;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="api-core_2wp-includes_2compat_8php.html#a69ce1131cd2c65fd147aa7b1de9ed7ee">endif</a>; ?&gt;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;&lt;/tbody&gt;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;&lt;/table&gt;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;&lt;form method=<span class="stringliteral">&quot;post&quot;</span> <a class="code" href="namespaceaction.html">action</a>=<span class="stringliteral">&quot;&lt;?php echo esc_url( add_query_arg( &#39;step&#39;, 1 ) ) ?&gt;&quot;</span>&gt;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wp-admin_2includes_2template_8php.html#ae57d23d839676b8d98097c939e863f0f">submit_button</a>( <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>, <span class="stringliteral">&#39;screen-reader-text&#39;</span>, <span class="stringliteral">&#39;save-header-options&#39;</span>, <span class="keyword">false</span> ); ?&gt;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;&lt;table <span class="keyword">class</span>=<span class="stringliteral">&quot;form-table&quot;</span>&gt;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;&lt;tbody&gt;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">if</span> ( <a class="code" href="class_custom___image___header.html#a19ca3de195fb9681c67da43fb94b1d96">get_uploaded_header_images</a>() ) : ?&gt;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;&lt;tr&gt;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;&lt;th scope=<span class="stringliteral">&quot;row&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Uploaded Images&#39;</span> ); ?&gt;&lt;/th&gt;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;&lt;td&gt;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;You can choose one of your previously uploaded headers, or show a random one.&#39;</span> ) ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        $this-&gt;<a class="code" href="class_custom___image___header.html#a11261ff360c81ed389044015ec1444be">show_header_selector</a>( <span class="stringliteral">&#39;uploaded&#39;</span> );</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    ?&gt;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;&lt;/td&gt;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;&lt;/tr&gt;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="api-core_2wp-includes_2compat_8php.html#a69ce1131cd2c65fd147aa7b1de9ed7ee">endif</a>;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">if</span> ( ! empty( $this-&gt;default_headers ) ) : ?&gt;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;&lt;tr&gt;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;&lt;th scope=<span class="stringliteral">&quot;row&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Default Images&#39;</span> ); ?&gt;&lt;/th&gt;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;&lt;td&gt;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;uploads&#39;</span> ) ) : ?&gt;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;If you don&amp;lsquo;t want to upload your own image, you can use one of these cool headers, or show a random one.&#39;</span> ) ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">else</span>: ?&gt;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;You can use one of these cool headers or show a random one on each page.&#39;</span> ) ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="api-core_2wp-includes_2compat_8php.html#a69ce1131cd2c65fd147aa7b1de9ed7ee">endif</a>; ?&gt;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        $this-&gt;<a class="code" href="class_custom___image___header.html#a11261ff360c81ed389044015ec1444be">show_header_selector</a>( <span class="stringliteral">&#39;default&#39;</span> );</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    ?&gt;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;&lt;/td&gt;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;&lt;/tr&gt;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="api-core_2wp-includes_2compat_8php.html#a69ce1131cd2c65fd147aa7b1de9ed7ee">endif</a>;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2theme_8php.html#aeb6c356a325550b6b27077e895197263">get_header_image</a>() ) : ?&gt;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;&lt;tr&gt;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;&lt;th scope=<span class="stringliteral">&quot;row&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Remove Image&#39;</span> ); ?&gt;&lt;/th&gt;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;&lt;td&gt;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;This will remove the header image. You will not be able to restore any customizations.&#39;</span> ) ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wp-admin_2includes_2template_8php.html#ae57d23d839676b8d98097c939e863f0f">submit_button</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Remove Header Image&#39;</span> ), <span class="stringliteral">&#39;button&#39;</span>, <span class="stringliteral">&#39;removeheader&#39;</span>, <span class="keyword">false</span> ); ?&gt;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;&lt;/td&gt;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;&lt;/tr&gt;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="api-core_2wp-includes_2compat_8php.html#a69ce1131cd2c65fd147aa7b1de9ed7ee">endif</a>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    $default_image = <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;default-image&#39;</span> );</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">if</span> ( $default_image &amp;&amp; <a class="code" href="wp-includes_2theme_8php.html#aeb6c356a325550b6b27077e895197263">get_header_image</a>() != $default_image ) : ?&gt;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;&lt;tr&gt;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;&lt;th scope=<span class="stringliteral">&quot;row&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Reset Image&#39;</span> ); ?&gt;&lt;/th&gt;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;&lt;td&gt;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;This will restore the original header image. You will not be able to restore any customizations.&#39;</span> ) ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wp-admin_2includes_2template_8php.html#ae57d23d839676b8d98097c939e863f0f">submit_button</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Restore Original Header Image&#39;</span> ), <span class="stringliteral">&#39;button&#39;</span>, <span class="stringliteral">&#39;resetheader&#39;</span>, <span class="keyword">false</span> ); ?&gt;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;&lt;/td&gt;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;&lt;/tr&gt;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="api-core_2wp-includes_2compat_8php.html#a69ce1131cd2c65fd147aa7b1de9ed7ee">endif</a>; ?&gt;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;&lt;/tbody&gt;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;&lt;/table&gt;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;header-text&#39;</span> ) ) : ?&gt;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;&lt;h3&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Header Text&#39;</span> ); ?&gt;&lt;/h3&gt;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;&lt;table <span class="keyword">class</span>=<span class="stringliteral">&quot;form-table&quot;</span>&gt;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;&lt;tbody&gt;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;&lt;tr&gt;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;&lt;th scope=<span class="stringliteral">&quot;row&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Header Text&#39;</span> ); ?&gt;&lt;/th&gt;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;&lt;td&gt;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    &lt;label&gt;&lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> type=<span class="stringliteral">&quot;checkbox&quot;</span> <a class="code" href="edit-comments_8php.html#a01a5ac2afed3a262528186f4ba5f9693">name</a>=<span class="stringliteral">&quot;display-header-text&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;display-header-text&quot;</span>&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="general-template_8php.html#ac5a8cddc08f21085ba0939cda4f64766">checked</a>( <a class="code" href="wp-includes_2theme_8php.html#a32648f64a46cac8e465689aa87e70f7b">display_header_text</a>() ); ?&gt; /&gt; &lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Show header text with your image.&#39;</span> ); ?&gt;&lt;/label&gt;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    &lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;&lt;/td&gt;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;&lt;/tr&gt;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;&lt;tr <span class="keyword">class</span>=<span class="stringliteral">&quot;displaying-header-text&quot;</span>&gt;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;&lt;th scope=<span class="stringliteral">&quot;row&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Text Color&#39;</span> ); ?&gt;&lt;/th&gt;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;&lt;td&gt;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    $default_color = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;default-text-color&#39;</span> ) ) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        $default_color = <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;default-text-color&#39;</span> );</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keywordflow">if</span> ( $default_color &amp;&amp; <span class="keyword">false</span> === strpos( $default_color, <span class="charliteral">&#39;#&#39;</span> ) ) {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            $default_color = <span class="charliteral">&#39;#&#39;</span> . $default_color;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        }</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    $default_color_attr = $default_color ? <span class="stringliteral">&#39; data-default-color=&quot;&#39;</span> . <a class="code" href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a>( $default_color ) . <span class="charliteral">&#39;&quot;&#39;</span> : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    $header_textcolor = <a class="code" href="wp-includes_2theme_8php.html#a32648f64a46cac8e465689aa87e70f7b">display_header_text</a>() ? <a class="code" href="wp-includes_2theme_8php.html#a72537b81cbe22bc1500e2c1dba0e05b6">get_header_textcolor</a>() : <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;default-text-color&#39;</span> );</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">if</span> ( $header_textcolor &amp;&amp; <span class="keyword">false</span> === strpos( $header_textcolor, <span class="charliteral">&#39;#&#39;</span> ) ) {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        $header_textcolor = <span class="charliteral">&#39;#&#39;</span> . $header_textcolor;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    echo <span class="stringliteral">&#39;&lt;input type=&quot;text&quot; name=&quot;text-color&quot; id=&quot;text-color&quot; value=&quot;&#39;</span> . <a class="code" href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a>( $header_textcolor ) . <span class="charliteral">&#39;&quot;&#39;</span> . $default_color_attr . <span class="stringliteral">&#39; /&gt;&#39;</span>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">if</span> ( $default_color ) {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        echo <span class="stringliteral">&#39; &lt;span class=&quot;description hide-if-js&quot;&gt;&#39;</span> . sprintf( <a class="code" href="edit-form-advanced_8php.html#ada8efad85a9cd028503cbe55c37c890a">_x</a>( <span class="stringliteral">&#39;Default: %s&#39;</span>, <span class="stringliteral">&#39;color&#39;</span> ), <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $default_color ) ) . <span class="stringliteral">&#39;&lt;/span&gt;&#39;</span>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    }</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    ?&gt;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    &lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;&lt;/td&gt;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;&lt;/tr&gt;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;&lt;/tbody&gt;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;&lt;/table&gt;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="api-core_2wp-includes_2compat_8php.html#a69ce1131cd2c65fd147aa7b1de9ed7ee">endif</a>;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment"> * Fires just before the submit button in the custom header options form.</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment"> * @since 3.1.0</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;custom_header_options&#39;</span> );</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<a class="code" href="wordpress_2wp-includes_2functions_8php.html#a68f0b952d066b096228913409d3da4bb">wp_nonce_field</a>( <span class="stringliteral">&#39;custom-header-options&#39;</span>, <span class="stringliteral">&#39;_wpnonce-custom-header-options&#39;</span> ); ?&gt;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wp-admin_2includes_2template_8php.html#ae57d23d839676b8d98097c939e863f0f">submit_button</a>( <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>, <span class="stringliteral">&#39;primary&#39;</span>, <span class="stringliteral">&#39;save-header-options&#39;</span> ); ?&gt;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;&lt;/form&gt;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;&lt;/div&gt;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a> }</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">     * Display second step of custom header image page.</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">     * @since 2.1.0</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00690"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#ac8cde79ff301b51093133a64ecd45f65">  690</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#ac8cde79ff301b51093133a64ecd45f65">step_2</a>() {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        check_admin_referer(<span class="stringliteral">&#39;custom-header-upload&#39;</span>, <span class="stringliteral">&#39;_wpnonce-custom-header-upload&#39;</span>);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;uploads&#39;</span> ) ) {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>(</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                <span class="stringliteral">&#39;&lt;h1&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Cheatin&amp;#8217; uh?&#39;</span> ) . <span class="stringliteral">&#39;&lt;/h1&gt;&#39;</span> .</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;The current theme does not support uploading a custom header image.&#39;</span> ) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>,</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                403</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            );</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">if</span> ( empty( $_POST ) &amp;&amp; isset( $_GET[<span class="stringliteral">&#39;file&#39;</span>] ) ) {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            $attachment_id = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $_GET[<span class="stringliteral">&#39;file&#39;</span>] );</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> = <a class="code" href="wp-includes_2post_8php.html#a2fbf261bc95d1c62b001c630e19c07d8">get_attached_file</a>( $attachment_id, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> = <a class="code" href="wp-includes_2media_8php.html#adc3e512380a7336cfc8dd3417892a65b">wp_get_attachment_image_src</a>( $attachment_id, <span class="stringliteral">&#39;full&#39;</span> );</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> = <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a>[0];</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( isset( $_POST ) ) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            $data = $this-&gt;<a class="code" href="class_custom___image___header.html#aae01cfad48e09d88db94736fe3b2435d">step_2_manage_upload</a>();</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            $attachment_id = $data[<span class="stringliteral">&#39;attachment_id&#39;</span>];</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> = $data[<span class="stringliteral">&#39;file&#39;</span>];</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> = $data[<span class="stringliteral">&#39;url&#39;</span>];</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        }</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <span class="keywordflow">if</span> ( file_exists( <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> ) ) {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            <a class="code" href="namespacelist.html">list</a>( $width, $height, $type, $attr ) = getimagesize( <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> );</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            $data = <a class="code" href="wp-includes_2post_8php.html#a08a3d66142c2d31d6fdb95b1efac7185">wp_get_attachment_metadata</a>( $attachment_id );</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            $height = isset( $data[ <span class="stringliteral">&#39;height&#39;</span> ] ) ? $data[ <span class="stringliteral">&#39;height&#39;</span> ] : 0;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            $width = isset( $data[ <span class="stringliteral">&#39;width&#39;</span> ] ) ? $data[ <span class="stringliteral">&#39;width&#39;</span> ] : 0;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            unset( $data );</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        }</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        $max_width = 0;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="comment">// For flex, limit size of image displayed to 1500px unless theme says otherwise</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-width&#39;</span> ) )</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            $max_width = 1500;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;max-width&#39;</span> ) )</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;            $max_width = max( $max_width, <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;max-width&#39;</span> ) );</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        $max_width = max( $max_width, <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;width&#39;</span> ) );</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="comment">// If flexible height isn&#39;t supported and the image is the exact right size</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-height&#39;</span> ) &amp;&amp; ! <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-width&#39;</span> )</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            &amp;&amp; $width == <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;width&#39;</span> ) &amp;&amp; $height == <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;height&#39;</span> ) )</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <span class="comment">// Add the meta-data</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            <span class="keywordflow">if</span> ( file_exists( <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> ) )</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                <a class="code" href="wp-includes_2post_8php.html#a563b1dd3f65d7fc81701c99ea3f4d575">wp_update_attachment_metadata</a>( $attachment_id, <a class="code" href="wp-admin_2includes_2image_8php.html#a81a49932707fc3690dc80a4ce77c4028">wp_generate_attachment_metadata</a>( $attachment_id, <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> ) );</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            $this-&gt;<a class="code" href="class_custom___image___header.html#a3b0726562cc2d58bd3b46cbc7b10df68">set_header_image</a>( compact( <span class="stringliteral">&#39;url&#39;</span>, <span class="stringliteral">&#39;attachment_id&#39;</span>, <span class="stringliteral">&#39;width&#39;</span>, <span class="stringliteral">&#39;height&#39;</span> ) );</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment">            /**</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment">             * Fires after the header image is set or an error is returned.</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">             *</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">             * @since 2.1.0</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">             *</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment">             * @param string $file          Path to the file.</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment">             * @param int    $attachment_id Attachment ID.</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;wp_create_file_in_uploads&#39;</span>, <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>, $attachment_id ); <span class="comment">// For replication</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_custom___image___header.html#ae75d2f5188d66f189718b8dbd9a03b07">finished</a>();</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( $width &gt; $max_width ) {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            $oitar = $width / $max_width;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            <a class="code" href="post__image_8php.html#aac6146b4cdec66c94263ddb55afd5946">$image</a> = <a class="code" href="wp-admin_2includes_2image_8php.html#a319b5bc3ec2753bad3e397bcd75f9d9e">wp_crop_image</a>($attachment_id, 0, 0, $width, $height, $max_width, $height / $oitar, <span class="keyword">false</span>, <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>(basename(<a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>), <span class="stringliteral">&#39;midsize-&#39;</span>.basename(<a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>), <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>));</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            <span class="keywordflow">if</span> ( ! <a class="code" href="post__image_8php.html#aac6146b4cdec66c94263ddb55afd5946">$image</a> || <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( <a class="code" href="post__image_8php.html#aac6146b4cdec66c94263ddb55afd5946">$image</a> ) )</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Image could not be processed. Please go back and try again.&#39;</span> ), <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Image Processing Error&#39;</span> ) );</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">            /** This filter is documented in wp-admin/custom-header.php */</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            <a class="code" href="post__image_8php.html#aac6146b4cdec66c94263ddb55afd5946">$image</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;wp_create_file_in_uploads&#39;</span>, <a class="code" href="post__image_8php.html#aac6146b4cdec66c94263ddb55afd5946">$image</a>, $attachment_id ); <span class="comment">// For replication</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>(basename(<a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a>), basename(<a class="code" href="post__image_8php.html#aac6146b4cdec66c94263ddb55afd5946">$image</a>), <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a>);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            $width = $width / $oitar;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            $height = $height / $oitar;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            $oitar = 1;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        }</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        ?&gt;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;&lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;wrap&quot;</span>&gt;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;&lt;h1&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;Crop Header Image&#39;</span> ); ?&gt;&lt;/h1&gt;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;&lt;form method=<span class="stringliteral">&quot;post&quot;</span> <a class="code" href="namespaceaction.html">action</a>=<span class="stringliteral">&quot;&lt;?php echo esc_url(add_query_arg(&#39;step&#39;, 3)); ?&gt;&quot;</span>&gt;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a> <span class="keyword">class</span>=<span class="stringliteral">&quot;hide-if-no-js&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>(<span class="stringliteral">&#39;Choose the part of the image you want to use as your header.&#39;</span>); ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    &lt;<a class="code" href="namespacep.html">p</a> <span class="keyword">class</span>=<span class="stringliteral">&quot;hide-if-js&quot;</span>&gt;&lt;<a class="code" href="namespacestrong.html">strong</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a>( <span class="stringliteral">&#39;You need JavaScript to choose a part of the image.&#39;</span>); ?&gt;&lt;/<a class="code" href="namespacestrong.html">strong</a>&gt;&lt;/p&gt;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;crop_image&quot;</span> style=<span class="stringliteral">&quot;position: relative&quot;</span>&gt;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        &lt;img src=<span class="stringliteral">&quot;&lt;?php echo esc_url( $url ); ?&gt;&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;upload&quot;</span> <a class="code" href="wp-content_2themes_2twentythirteen_2inc_2custom-header_8php.html#ab1b1d44a8c4dbcaeff449be6b5e19935">width</a>=<span class="stringliteral">&quot;&lt;?php echo $width; ?&gt;&quot;</span> <a class="code" href="wordpress_2wp-content_2themes_2twentyeleven_2functions_8php.html#ad6d040b79093a1652d3e3a0f02172d83">height</a>=<span class="stringliteral">&quot;&lt;?php echo $height; ?&gt;&quot;</span> alt=<span class="stringliteral">&quot;&quot;</span> /&gt;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    &lt;/div&gt;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> <a class="code" href="namespacetype.html">type</a>=<span class="stringliteral">&quot;hidden&quot;</span> <a class="code" href="edit-comments_8php.html#a01a5ac2afed3a262528186f4ba5f9693">name</a>=<span class="stringliteral">&quot;x1&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;x1&quot;</span> value=<span class="stringliteral">&quot;0&quot;</span>/&gt;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> type=<span class="stringliteral">&quot;hidden&quot;</span> <a class="code" href="edit-comments_8php.html#a01a5ac2afed3a262528186f4ba5f9693">name</a>=<span class="stringliteral">&quot;y1&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;y1&quot;</span> value=<span class="stringliteral">&quot;0&quot;</span>/&gt;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> type=<span class="stringliteral">&quot;hidden&quot;</span> <a class="code" href="edit-comments_8php.html#a01a5ac2afed3a262528186f4ba5f9693">name</a>=<span class="stringliteral">&quot;width&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;width&quot;</span> value=<span class="stringliteral">&quot;&lt;?php echo esc_attr( $width ); ?&gt;&quot;</span>/&gt;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> type=<span class="stringliteral">&quot;hidden&quot;</span> <a class="code" href="edit-comments_8php.html#a01a5ac2afed3a262528186f4ba5f9693">name</a>=<span class="stringliteral">&quot;height&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;height&quot;</span> value=<span class="stringliteral">&quot;&lt;?php echo esc_attr( $height ); ?&gt;&quot;</span>/&gt;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> type=<span class="stringliteral">&quot;hidden&quot;</span> <a class="code" href="edit-comments_8php.html#a01a5ac2afed3a262528186f4ba5f9693">name</a>=<span class="stringliteral">&quot;attachment_id&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;attachment_id&quot;</span> value=<span class="stringliteral">&quot;&lt;?php echo esc_attr( $attachment_id ); ?&gt;&quot;</span> /&gt;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> type=<span class="stringliteral">&quot;hidden&quot;</span> <a class="code" href="edit-comments_8php.html#a01a5ac2afed3a262528186f4ba5f9693">name</a>=<span class="stringliteral">&quot;oitar&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;oitar&quot;</span> value=<span class="stringliteral">&quot;&lt;?php echo esc_attr( $oitar ); ?&gt;&quot;</span> /&gt;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">if</span> ( empty( $_POST ) &amp;&amp; isset( $_GET[<span class="stringliteral">&#39;file&#39;</span>] ) ) { ?&gt;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    &lt;<a class="code" href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a> type=<span class="stringliteral">&quot;hidden&quot;</span> <a class="code" href="edit-comments_8php.html#a01a5ac2afed3a262528186f4ba5f9693">name</a>=<span class="stringliteral">&quot;create-new-attachment&quot;</span> value=<span class="stringliteral">&quot;true&quot;</span> /&gt;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> } ?&gt;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a68f0b952d066b096228913409d3da4bb">wp_nonce_field</a>( <span class="stringliteral">&#39;custom-header-crop-image&#39;</span> ) ?&gt;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    &lt;p <span class="keyword">class</span>=<span class="stringliteral">&quot;submit&quot;</span>&gt;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="wp-admin_2includes_2template_8php.html#ae57d23d839676b8d98097c939e863f0f">submit_button</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Crop and Publish&#39;</span> ), <span class="stringliteral">&#39;primary&#39;</span>, <span class="stringliteral">&#39;submit&#39;</span>, <span class="keyword">false</span> ); ?&gt;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">if</span> ( isset( $oitar ) &amp;&amp; 1 == $oitar &amp;&amp; ( <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-height&#39;</span> ) || <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-width&#39;</span> ) ) )</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <a class="code" href="wp-admin_2includes_2template_8php.html#ae57d23d839676b8d98097c939e863f0f">submit_button</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Skip Cropping, Publish Image as Is&#39;</span> ), <span class="stringliteral">&#39;secondary&#39;</span>, <span class="stringliteral">&#39;skip-cropping&#39;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    ?&gt;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    &lt;/p&gt;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;&lt;/form&gt;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;&lt;/div&gt;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    }</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">     * Upload the file to be cropped in the second step.</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">     * @since 3.4.0</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00808"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#aae01cfad48e09d88db94736fe3b2435d">  808</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#aae01cfad48e09d88db94736fe3b2435d">step_2_manage_upload</a>() {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        $overrides = array(<span class="stringliteral">&#39;test_form&#39;</span> =&gt; <span class="keyword">false</span>);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        $uploaded_file = $_FILES[<span class="stringliteral">&#39;import&#39;</span>];</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        $wp_filetype = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#ad7133b9d8edf539917094b657f8c701e">wp_check_filetype_and_ext</a>( $uploaded_file[<span class="stringliteral">&#39;tmp_name&#39;</span>], $uploaded_file[<span class="stringliteral">&#39;name&#39;</span>] );</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="wp-includes_2post_8php.html#adb0024d9830f32a834cb170d73753ba6">wp_match_mime_types</a>( <span class="stringliteral">&#39;image&#39;</span>, $wp_filetype[<span class="stringliteral">&#39;type&#39;</span>] ) )</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;The uploaded file is not a valid image. Please try again.&#39;</span> ) );</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> = <a class="code" href="wp-admin_2includes_2file_8php.html#aff843f7f5421086d58b20f035ff208b4">wp_handle_upload</a>($uploaded_file, $overrides);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <span class="keywordflow">if</span> ( isset(<a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>[<span class="stringliteral">&#39;error&#39;</span>]) )</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>[<span class="stringliteral">&#39;error&#39;</span>],  <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Image Upload Error&#39;</span> ) );</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> = <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>[<span class="stringliteral">&#39;url&#39;</span>];</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        $type = <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>[<span class="stringliteral">&#39;type&#39;</span>];</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> = <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>[<span class="stringliteral">&#39;file&#39;</span>];</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        $filename = basename(<a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <span class="comment">// Construct the object array</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        $object = array(</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            <span class="stringliteral">&#39;post_title&#39;</span>     =&gt; $filename,</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            <span class="stringliteral">&#39;post_content&#39;</span>   =&gt; <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a>,</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            <span class="stringliteral">&#39;post_mime_type&#39;</span> =&gt; $type,</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            <span class="stringliteral">&#39;guid&#39;</span>           =&gt; <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a>,</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            <span class="stringliteral">&#39;context&#39;</span>        =&gt; <span class="stringliteral">&#39;custom-header&#39;</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        );</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="comment">// Save the data</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        $attachment_id = <a class="code" href="wp-includes_2post_8php.html#ae134c72f2a749bd225146b26241f22e3">wp_insert_attachment</a>( $object, <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> );</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <span class="keywordflow">return</span> compact( <span class="stringliteral">&#39;attachment_id&#39;</span>, <span class="stringliteral">&#39;file&#39;</span>, <span class="stringliteral">&#39;filename&#39;</span>, <span class="stringliteral">&#39;url&#39;</span>, <span class="stringliteral">&#39;type&#39;</span> );</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment">     * Display third step of custom header image page.</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment">     * @since 2.1.0</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment">     * @since 4.4.0 Switched to using wp_get_attachment_url() instead of the guid</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment">     *              for retrieving the header image URL.</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00847"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a46a1de65a24cd25932980e3ead2518cb">  847</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a46a1de65a24cd25932980e3ead2518cb">step_3</a>() {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        check_admin_referer( <span class="stringliteral">&#39;custom-header-crop-image&#39;</span> );</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;uploads&#39;</span> ) ) {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>(</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                <span class="stringliteral">&#39;&lt;h1&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Cheatin&amp;#8217; uh?&#39;</span> ) . <span class="stringliteral">&#39;&lt;/h1&gt;&#39;</span> .</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;The current theme does not support uploading a custom header image.&#39;</span> ) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>,</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                403</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            );</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        }</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $_POST[<span class="stringliteral">&#39;skip-cropping&#39;</span>] ) &amp;&amp; ! ( <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-height&#39;</span> ) || <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-width&#39;</span> ) ) ) {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>(</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                <span class="stringliteral">&#39;&lt;h1&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Cheatin&amp;#8217; uh?&#39;</span> ) . <span class="stringliteral">&#39;&lt;/h1&gt;&#39;</span> .</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;The current theme does not support a flexible sized header image.&#39;</span> ) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>,</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                403</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            );</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        }</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <span class="keywordflow">if</span> ( $_POST[<span class="stringliteral">&#39;oitar&#39;</span>] &gt; 1 ) {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            $_POST[<span class="stringliteral">&#39;x1&#39;</span>] = $_POST[<span class="stringliteral">&#39;x1&#39;</span>] * $_POST[<span class="stringliteral">&#39;oitar&#39;</span>];</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            $_POST[<span class="stringliteral">&#39;y1&#39;</span>] = $_POST[<span class="stringliteral">&#39;y1&#39;</span>] * $_POST[<span class="stringliteral">&#39;oitar&#39;</span>];</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            $_POST[<span class="stringliteral">&#39;width&#39;</span>] = $_POST[<span class="stringliteral">&#39;width&#39;</span>] * $_POST[<span class="stringliteral">&#39;oitar&#39;</span>];</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            $_POST[<span class="stringliteral">&#39;height&#39;</span>] = $_POST[<span class="stringliteral">&#39;height&#39;</span>] * $_POST[<span class="stringliteral">&#39;oitar&#39;</span>];</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        }</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        $attachment_id = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $_POST[<span class="stringliteral">&#39;attachment_id&#39;</span>] );</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        $original = <a class="code" href="wp-includes_2post_8php.html#a2fbf261bc95d1c62b001c630e19c07d8">get_attached_file</a>($attachment_id);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        $dimensions = $this-&gt;<a class="code" href="class_custom___image___header.html#a17b427cd8756c8aeccd66e0a89beb1c3">get_header_dimensions</a>( array(</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            <span class="stringliteral">&#39;height&#39;</span> =&gt; $_POST[<span class="stringliteral">&#39;height&#39;</span>],</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            <span class="stringliteral">&#39;width&#39;</span>  =&gt; $_POST[<span class="stringliteral">&#39;width&#39;</span>],</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        ) );</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        $height = $dimensions[<span class="stringliteral">&#39;dst_height&#39;</span>];</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        $width = $dimensions[<span class="stringliteral">&#39;dst_width&#39;</span>];</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keywordflow">if</span> ( empty( $_POST[<span class="stringliteral">&#39;skip-cropping&#39;</span>] ) )</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            $cropped = <a class="code" href="wp-admin_2includes_2image_8php.html#a319b5bc3ec2753bad3e397bcd75f9d9e">wp_crop_image</a>( $attachment_id, (<span class="keywordtype">int</span>) $_POST[<span class="stringliteral">&#39;x1&#39;</span>], (<span class="keywordtype">int</span>) $_POST[<span class="stringliteral">&#39;y1&#39;</span>], (<span class="keywordtype">int</span>) $_POST[<span class="stringliteral">&#39;width&#39;</span>], (<span class="keywordtype">int</span>) $_POST[<span class="stringliteral">&#39;height&#39;</span>], $width, $height );</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( ! empty( $_POST[<span class="stringliteral">&#39;create-new-attachment&#39;</span>] ) )</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            $cropped = <a class="code" href="wp-admin_2includes_2image_8php.html#a470c4e04f3d906c179afbd2e53da206a">_copy_image_file</a>( $attachment_id );</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;            $cropped = <a class="code" href="wp-includes_2post_8php.html#a2fbf261bc95d1c62b001c630e19c07d8">get_attached_file</a>( $attachment_id );</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <span class="keywordflow">if</span> ( ! $cropped || <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $cropped ) )</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>( <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Image could not be processed. Please go back and try again.&#39;</span> ), <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Image Processing Error&#39;</span> ) );</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">        /** This filter is documented in wp-admin/custom-header.php */</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        $cropped = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;wp_create_file_in_uploads&#39;</span>, $cropped, $attachment_id ); <span class="comment">// For replication</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        $object = $this-&gt;<a class="code" href="class_custom___image___header.html#a8855430a93e14fe0c74fbaf892553ee9">create_attachment_object</a>( $cropped, $attachment_id );</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $_POST[<span class="stringliteral">&#39;create-new-attachment&#39;</span>] ) )</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;            unset( $object[<span class="stringliteral">&#39;ID&#39;</span>] );</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="comment">// Update the attachment</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        $attachment_id = $this-&gt;<a class="code" href="class_custom___image___header.html#a3d3f701ec13794e71e0343c673d2f1a0">insert_attachment</a>( $object, $cropped );</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> = <a class="code" href="wp-includes_2post_8php.html#a4178b3d59d8ab3a058de6e24fa056697">wp_get_attachment_url</a>( $attachment_id );</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        $this-&gt;<a class="code" href="class_custom___image___header.html#a3b0726562cc2d58bd3b46cbc7b10df68">set_header_image</a>( compact( <span class="stringliteral">&#39;url&#39;</span>, <span class="stringliteral">&#39;attachment_id&#39;</span>, <span class="stringliteral">&#39;width&#39;</span>, <span class="stringliteral">&#39;height&#39;</span> ) );</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <span class="comment">// Cleanup.</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        $medium = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( basename( $original ), <span class="stringliteral">&#39;midsize-&#39;</span> . basename( $original ), $original );</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <span class="keywordflow">if</span> ( file_exists( $medium ) ) {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a716e6d165f72c602db1cd5a7b4698f4d">wp_delete_file</a>( $medium );</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        }</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <span class="keywordflow">if</span> ( empty( $_POST[<span class="stringliteral">&#39;create-new-attachment&#39;</span>] ) &amp;&amp; empty( $_POST[<span class="stringliteral">&#39;skip-cropping&#39;</span>] ) ) {</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a716e6d165f72c602db1cd5a7b4698f4d">wp_delete_file</a>( $original );</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        }</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_custom___image___header.html#ae75d2f5188d66f189718b8dbd9a03b07">finished</a>();</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment">     * Display last step of custom header image page.</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment">     * @since 2.1.0</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00925"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#ae75d2f5188d66f189718b8dbd9a03b07">  925</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#ae75d2f5188d66f189718b8dbd9a03b07">finished</a>() {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        $this-&gt;updated = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        $this-&gt;<a class="code" href="class_custom___image___header.html#aab8905692893ee20a236980679e91684">step_1</a>();</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    }</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment">     * Display the page based on the current step.</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment">     * @since 2.1.0</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00935"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#ac8f270a0f690e191178aac812f262ea3">  935</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#ac8f270a0f690e191178aac812f262ea3">admin_page</a>() {</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>(<span class="stringliteral">&#39;edit_theme_options&#39;</span>) )</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a>(<a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>(<span class="stringliteral">&#39;You do not have permission to customize headers.&#39;</span>));</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> = $this-&gt;<a class="code" href="class_custom___image___header.html#a8c68cd3f12f49fdc81f73f17192bb825">step</a>();</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <span class="keywordflow">if</span> ( 2 == <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> )</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            $this-&gt;<a class="code" href="class_custom___image___header.html#ac8cde79ff301b51093133a64ecd45f65">step_2</a>();</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( 3 == <a class="code" href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a> )</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            $this-&gt;<a class="code" href="class_custom___image___header.html#a46a1de65a24cd25932980e3ead2518cb">step_3</a>();</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            $this-&gt;<a class="code" href="class_custom___image___header.html#aab8905692893ee20a236980679e91684">step_1</a>();</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment">     * Unused since 3.5.0.</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment">     * @since 3.4.0</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">     * @param array $form_fields</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment">     * @return array $form_fields</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00955"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a793d3c98ad7fb7008e2e04962d195102">  955</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a793d3c98ad7fb7008e2e04962d195102">attachment_fields_to_edit</a>( $form_fields ) {</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <span class="keywordflow">return</span> $form_fields;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    }</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">     * Unused since 3.5.0.</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment">     * @since 3.4.0</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="comment">     * @param array $tabs</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment">     * @return array $tabs</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00967"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a370b2299fe56f44b8ca714fede20e924">  967</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a370b2299fe56f44b8ca714fede20e924">filter_upload_tabs</a>( <a class="code" href="site-info_8php.html#ab6ac9b33076d715d3f1376b426e25da0">$tabs</a> ) {</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="site-info_8php.html#ab6ac9b33076d715d3f1376b426e25da0">$tabs</a>;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    }</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment">     * Choose a header image, selected from existing uploaded and default headers,</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment">     * or provide an array of uploaded header data (either new, or from media library).</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment">     * @since 3.4.0</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">     * @param mixed $choice Which header image to select. Allows for values of &#39;random-default-image&#39;,</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment">     *  for randomly cycling among the default images; &#39;random-uploaded-image&#39;, for randomly cycling</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment">     *  among the uploaded images; the key of a default image registered for that theme; and</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment">     *  the key of an image uploaded for that theme (the basename of the URL).</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment">     *  Or an array of arguments: attachment_id, url, width, height. All are required.</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00983"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a3b0726562cc2d58bd3b46cbc7b10df68">  983</a></span>&#160;    <span class="keyword">final</span> <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a3b0726562cc2d58bd3b46cbc7b10df68">set_header_image</a>( $choice ) {</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        <span class="keywordflow">if</span> ( is_array( $choice ) || is_object( $choice ) ) {</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;            $choice = (array) $choice;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;            <span class="keywordflow">if</span> ( ! isset( $choice[<span class="stringliteral">&#39;attachment_id&#39;</span>] ) || ! isset( $choice[<span class="stringliteral">&#39;url&#39;</span>] ) )</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            $choice[<span class="stringliteral">&#39;url&#39;</span>] = <a class="code" href="formatting_8php.html#ad9e809b6901d247527672e11ce5d7368">esc_url_raw</a>( $choice[<span class="stringliteral">&#39;url&#39;</span>] );</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            $header_image_data = (<a class="code" href="wp-db_8php.html#ad03408aabe16bb53c780fae6cf3910f9">object</a>) array(</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                <span class="stringliteral">&#39;attachment_id&#39;</span> =&gt; $choice[<span class="stringliteral">&#39;attachment_id&#39;</span>],</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                <span class="stringliteral">&#39;url&#39;</span>           =&gt; $choice[<span class="stringliteral">&#39;url&#39;</span>],</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                <span class="stringliteral">&#39;thumbnail_url&#39;</span> =&gt; $choice[<span class="stringliteral">&#39;url&#39;</span>],</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                <span class="stringliteral">&#39;height&#39;</span>        =&gt; $choice[<span class="stringliteral">&#39;height&#39;</span>],</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                <span class="stringliteral">&#39;width&#39;</span>         =&gt; $choice[<span class="stringliteral">&#39;width&#39;</span>],</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            );</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;            <a class="code" href="wp-includes_2post_8php.html#ac984a204e35272d1a897fedce9a92847">update_post_meta</a>( $choice[<span class="stringliteral">&#39;attachment_id&#39;</span>], <span class="stringliteral">&#39;_wp_attachment_is_custom_header&#39;</span>, <a class="code" href="wp-includes_2theme_8php.html#a6d9dd71b2ef87985d6a908cdcbf99f9a">get_stylesheet</a>() );</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;            <a class="code" href="wp-includes_2theme_8php.html#a4d6498454d40a2c245452c1ba2b4ef59">set_theme_mod</a>( <span class="stringliteral">&#39;header_image&#39;</span>, $choice[<span class="stringliteral">&#39;url&#39;</span>] );</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            <a class="code" href="wp-includes_2theme_8php.html#a4d6498454d40a2c245452c1ba2b4ef59">set_theme_mod</a>( <span class="stringliteral">&#39;header_image_data&#39;</span>, $header_image_data );</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        }</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <span class="keywordflow">if</span> ( in_array( $choice, array( <span class="stringliteral">&#39;remove-header&#39;</span>, <span class="stringliteral">&#39;random-default-image&#39;</span>, <span class="stringliteral">&#39;random-uploaded-image&#39;</span> ) ) ) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            <a class="code" href="wp-includes_2theme_8php.html#a4d6498454d40a2c245452c1ba2b4ef59">set_theme_mod</a>( <span class="stringliteral">&#39;header_image&#39;</span>, $choice );</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            <a class="code" href="wp-includes_2theme_8php.html#ad614e6c66f3f9623fef2bf3d738dcb27">remove_theme_mod</a>( <span class="stringliteral">&#39;header_image_data&#39;</span> );</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        }</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        $uploaded = <a class="code" href="class_custom___image___header.html#a19ca3de195fb9681c67da43fb94b1d96">get_uploaded_header_images</a>();</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">if</span> ( $uploaded &amp;&amp; isset( $uploaded[ $choice ] ) ) {</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            $header_image_data = $uploaded[ $choice ];</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            $this-&gt;<a class="code" href="class_custom___image___header.html#a5b67c2a9e67409fd073d9689014eaa33">process_default_headers</a>();</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            <span class="keywordflow">if</span> ( isset( $this-&gt;default_headers[ $choice ] ) )</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                $header_image_data = $this-&gt;default_headers[ $choice ];</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        }</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <a class="code" href="wp-includes_2theme_8php.html#a4d6498454d40a2c245452c1ba2b4ef59">set_theme_mod</a>( <span class="stringliteral">&#39;header_image&#39;</span>, <a class="code" href="formatting_8php.html#ad9e809b6901d247527672e11ce5d7368">esc_url_raw</a>( $header_image_data[<span class="stringliteral">&#39;url&#39;</span>] ) );</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <a class="code" href="wp-includes_2theme_8php.html#a4d6498454d40a2c245452c1ba2b4ef59">set_theme_mod</a>( <span class="stringliteral">&#39;header_image_data&#39;</span>, $header_image_data );</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    }</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment">     * Remove a header image.</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment">     * @since 3.4.0</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a1271ba79dab368a6b1881e11b6e2d016"> 1032</a></span>&#160;    <span class="keyword">final</span> <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a1271ba79dab368a6b1881e11b6e2d016">remove_header_image</a>() {</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        $this-&gt;<a class="code" href="class_custom___image___header.html#a3b0726562cc2d58bd3b46cbc7b10df68">set_header_image</a>( <span class="stringliteral">&#39;remove-header&#39;</span> );</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    }</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="comment">     * Reset a header image to the default image for the theme.</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment">     * This method does not do anything if the theme does not have a default header image.</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment">     * @since 3.4.0</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#aeea4251403e3c66b74f554f9ba49bdf5"> 1043</a></span>&#160;    <span class="keyword">final</span> <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#aeea4251403e3c66b74f554f9ba49bdf5">reset_header_image</a>() {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        $this-&gt;<a class="code" href="class_custom___image___header.html#a5b67c2a9e67409fd073d9689014eaa33">process_default_headers</a>();</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        <a class="code" href="options-discussion_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a> = <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;default-image&#39;</span> );</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="options-discussion_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a> ) {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            $this-&gt;<a class="code" href="class_custom___image___header.html#a1271ba79dab368a6b1881e11b6e2d016">remove_header_image</a>();</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        }</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        <a class="code" href="options-discussion_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a> = sprintf( <a class="code" href="options-discussion_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a>, <a class="code" href="wp-includes_2theme_8php.html#a39342df15893fdd8e811652c9a194123">get_template_directory_uri</a>(), <a class="code" href="wp-includes_2theme_8php.html#a20e8d2b5ee7de6a42990d6e4cdc3c592">get_stylesheet_directory_uri</a>() );</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        $default_data = array();</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        <span class="keywordflow">foreach</span> ( $this-&gt;default_headers as $header =&gt; <a class="code" href="site-info_8php.html#a7112f7e99b579c61b7e3040a9d7cff66">$details</a> ) {</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="site-info_8php.html#a7112f7e99b579c61b7e3040a9d7cff66">$details</a>[<span class="stringliteral">&#39;url&#39;</span>] == <a class="code" href="options-discussion_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a> ) {</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                $default_data = <a class="code" href="site-info_8php.html#a7112f7e99b579c61b7e3040a9d7cff66">$details</a>;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;            }</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        }</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        <a class="code" href="wp-includes_2theme_8php.html#a4d6498454d40a2c245452c1ba2b4ef59">set_theme_mod</a>( <span class="stringliteral">&#39;header_image&#39;</span>, <a class="code" href="options-discussion_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a> );</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        <a class="code" href="wp-includes_2theme_8php.html#a4d6498454d40a2c245452c1ba2b4ef59">set_theme_mod</a>( <span class="stringliteral">&#39;header_image_data&#39;</span>, (<span class="keywordtype">object</span>) $default_data );</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    }</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment">     * Calculate width and height based on what the currently selected theme supports.</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment">     * @param array $dimensions</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment">     * @return array dst_height and dst_width of header image.</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a17b427cd8756c8aeccd66e0a89beb1c3"> 1071</a></span>&#160;    <span class="keyword">final</span> <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a17b427cd8756c8aeccd66e0a89beb1c3">get_header_dimensions</a>( $dimensions ) {</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        $max_width = 0;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        $width = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $dimensions[<span class="stringliteral">&#39;width&#39;</span>] );</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        $height = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $dimensions[<span class="stringliteral">&#39;height&#39;</span>] );</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        $theme_height = <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;height&#39;</span> );</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        $theme_width = <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;width&#39;</span> );</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        $has_flex_width = <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-width&#39;</span> );</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        $has_flex_height = <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;flex-height&#39;</span> );</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        $has_max_width = <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;max-width&#39;</span> ) ;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        $dst = array( <span class="stringliteral">&#39;dst_height&#39;</span> =&gt; <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>, <span class="stringliteral">&#39;dst_width&#39;</span> =&gt; <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> );</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        <span class="comment">// For flex, limit size of image displayed to 1500px unless theme says otherwise</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <span class="keywordflow">if</span> ( $has_flex_width ) {</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;            $max_width = 1500;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        }</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <span class="keywordflow">if</span> ( $has_max_width ) {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;            $max_width = max( $max_width, <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;max-width&#39;</span> ) );</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        }</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        $max_width = max( $max_width, $theme_width );</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        <span class="keywordflow">if</span> ( $has_flex_height &amp;&amp; ( ! $has_flex_width || $width &gt; $max_width ) ) {</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            $dst[<span class="stringliteral">&#39;dst_height&#39;</span>] = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $height * ( $max_width / $width ) );</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        }</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( $has_flex_height &amp;&amp; $has_flex_width ) {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            $dst[<span class="stringliteral">&#39;dst_height&#39;</span>] = $height;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        }</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            $dst[<span class="stringliteral">&#39;dst_height&#39;</span>] = $theme_height;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        }</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <span class="keywordflow">if</span> ( $has_flex_width &amp;&amp; ( ! $has_flex_height || $width &gt; $max_width ) ) {</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;            $dst[<span class="stringliteral">&#39;dst_width&#39;</span>] = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $width * ( $max_width / $width ) );</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( $has_flex_width &amp;&amp; $has_flex_height ) {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            $dst[<span class="stringliteral">&#39;dst_width&#39;</span>] = $width;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        }</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            $dst[<span class="stringliteral">&#39;dst_width&#39;</span>] = $theme_width;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        }</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <span class="keywordflow">return</span> $dst;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    }</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">     * Create an attachment &#39;object&#39;.</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment">     * @param string $cropped              Cropped image URL.</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment">     * @param int    $parent_attachment_id Attachment ID of parent image.</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment">     * @return array Attachment object.</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a8855430a93e14fe0c74fbaf892553ee9"> 1123</a></span>&#160;    <span class="keyword">final</span> <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a8855430a93e14fe0c74fbaf892553ee9">create_attachment_object</a>( $cropped, $parent_attachment_id ) {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        $parent = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( $parent_attachment_id );</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        $parent_url = <a class="code" href="wp-includes_2post_8php.html#a4178b3d59d8ab3a058de6e24fa056697">wp_get_attachment_url</a>( $parent-&gt;ID );</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( basename( $parent_url ), basename( $cropped ), $parent_url );</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <a class="code" href="options-discussion_8php.html#af594986e4618a8d6a5d7566617f583c6">$size</a> = @getimagesize( $cropped );</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        $image_type = ( <a class="code" href="options-discussion_8php.html#af594986e4618a8d6a5d7566617f583c6">$size</a> ) ? <a class="code" href="options-discussion_8php.html#af594986e4618a8d6a5d7566617f583c6">$size</a>[<span class="stringliteral">&#39;mime&#39;</span>] : <span class="stringliteral">&#39;image/jpeg&#39;</span>;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        $object = array(</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;            <span class="stringliteral">&#39;ID&#39;</span> =&gt; $parent_attachment_id,</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;            <span class="stringliteral">&#39;post_title&#39;</span> =&gt; basename($cropped),</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;            <span class="stringliteral">&#39;post_mime_type&#39;</span> =&gt; $image_type,</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;            <span class="stringliteral">&#39;guid&#39;</span> =&gt; <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a>,</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;            <span class="stringliteral">&#39;context&#39;</span> =&gt; <span class="stringliteral">&#39;custom-header&#39;</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        );</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        <span class="keywordflow">return</span> $object;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    }</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="comment">     * Insert an attachment and its metadata.</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="comment">     * @param array  $object  Attachment object.</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment">     * @param string $cropped Cropped image URL.</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment">     * @return int Attachment ID.</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a3d3f701ec13794e71e0343c673d2f1a0"> 1150</a></span>&#160;    <span class="keyword">final</span> <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a3d3f701ec13794e71e0343c673d2f1a0">insert_attachment</a>( $object, $cropped ) {</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        $attachment_id = <a class="code" href="wp-includes_2post_8php.html#ae134c72f2a749bd225146b26241f22e3">wp_insert_attachment</a>( $object, $cropped );</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#ae7fc3682b173ad9d4b1892bdc04d18d9">$metadata</a> = <a class="code" href="wp-admin_2includes_2image_8php.html#a81a49932707fc3690dc80a4ce77c4028">wp_generate_attachment_metadata</a>( $attachment_id, $cropped );<span class="comment"></span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="comment">        /**</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment">         * Filter the header image attachment metadata.</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="comment">         * @since 3.9.0</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment">         * @see wp_generate_attachment_metadata()</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment">         * @param array $metadata Attachment metadata.</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#ae7fc3682b173ad9d4b1892bdc04d18d9">$metadata</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;wp_header_image_attachment_metadata&#39;</span>, <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#ae7fc3682b173ad9d4b1892bdc04d18d9">$metadata</a> );</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        <a class="code" href="wp-includes_2post_8php.html#a563b1dd3f65d7fc81701c99ea3f4d575">wp_update_attachment_metadata</a>( $attachment_id, <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#ae7fc3682b173ad9d4b1892bdc04d18d9">$metadata</a> );</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        <span class="keywordflow">return</span> $attachment_id;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment">     * Gets attachment uploaded by Media Manager, crops it, then saves it as a</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment">     * new object. Returns JSON-encoded object details.</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#aea588c6fba40834b3f65f67c846b0cba"> 1171</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#aea588c6fba40834b3f65f67c846b0cba">ajax_header_crop</a>() {</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        check_ajax_referer( <span class="stringliteral">&#39;image_editor-&#39;</span> . $_POST[<span class="stringliteral">&#39;id&#39;</span>], <span class="stringliteral">&#39;nonce&#39;</span> );</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_theme_options&#39;</span> ) ) {</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        }</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;uploads&#39;</span> ) ) {</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        }</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        $crop_details = $_POST[<span class="stringliteral">&#39;cropDetails&#39;</span>];</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        $dimensions = $this-&gt;<a class="code" href="class_custom___image___header.html#a17b427cd8756c8aeccd66e0a89beb1c3">get_header_dimensions</a>( array(</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            <span class="stringliteral">&#39;height&#39;</span> =&gt; $crop_details[<span class="stringliteral">&#39;height&#39;</span>],</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;            <span class="stringliteral">&#39;width&#39;</span>  =&gt; $crop_details[<span class="stringliteral">&#39;width&#39;</span>],</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        ) );</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        $attachment_id = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $_POST[<span class="stringliteral">&#39;id&#39;</span>] );</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        $cropped = <a class="code" href="wp-admin_2includes_2image_8php.html#a319b5bc3ec2753bad3e397bcd75f9d9e">wp_crop_image</a>(</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;            $attachment_id,</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;            (<span class="keywordtype">int</span>) $crop_details[<span class="stringliteral">&#39;x1&#39;</span>],</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            (<span class="keywordtype">int</span>) $crop_details[<span class="stringliteral">&#39;y1&#39;</span>],</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;            (<span class="keywordtype">int</span>) $crop_details[<span class="stringliteral">&#39;width&#39;</span>],</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;            (<span class="keywordtype">int</span>) $crop_details[<span class="stringliteral">&#39;height&#39;</span>],</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            (<span class="keywordtype">int</span>) $dimensions[<span class="stringliteral">&#39;dst_width&#39;</span>],</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;            (<span class="keywordtype">int</span>) $dimensions[<span class="stringliteral">&#39;dst_height&#39;</span>]</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        );</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        <span class="keywordflow">if</span> ( ! $cropped || <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $cropped ) ) {</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>( array( <span class="stringliteral">&#39;message&#39;</span> =&gt; <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Image could not be processed. Please go back and try again.&#39;</span> ) ) );</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        }</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment">        /** This filter is documented in wp-admin/custom-header.php */</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;        $cropped = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;wp_create_file_in_uploads&#39;</span>, $cropped, $attachment_id ); <span class="comment">// For replication</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        $object = $this-&gt;<a class="code" href="class_custom___image___header.html#a8855430a93e14fe0c74fbaf892553ee9">create_attachment_object</a>( $cropped, $attachment_id );</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        unset( $object[<span class="stringliteral">&#39;ID&#39;</span>] );</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        $new_attachment_id = $this-&gt;<a class="code" href="class_custom___image___header.html#a3d3f701ec13794e71e0343c673d2f1a0">insert_attachment</a>( $object, $cropped );</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        $object[<span class="stringliteral">&#39;attachment_id&#39;</span>] = $new_attachment_id;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        $object[<span class="stringliteral">&#39;url&#39;</span>]           = <a class="code" href="wp-includes_2post_8php.html#a4178b3d59d8ab3a058de6e24fa056697">wp_get_attachment_url</a>( $new_attachment_id );;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        $object[<span class="stringliteral">&#39;width&#39;</span>]         = $dimensions[<span class="stringliteral">&#39;dst_width&#39;</span>];</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        $object[<span class="stringliteral">&#39;height&#39;</span>]        = $dimensions[<span class="stringliteral">&#39;dst_height&#39;</span>];</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>( $object );</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    }</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="comment">     * Given an attachment ID for a header image, updates its &quot;last used&quot;</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="comment">     * timestamp to now.</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="comment">     * Triggered when the user tries adds a new header image from the</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<span class="comment">     * Media Manager, even if s/he doesn&#39;t save that change.</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#ad8363e6502b032f93f7e1582b8ff05ff"> 1229</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#ad8363e6502b032f93f7e1582b8ff05ff">ajax_header_add</a>() {</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        check_ajax_referer( <span class="stringliteral">&#39;header-add&#39;</span>, <span class="stringliteral">&#39;nonce&#39;</span> );</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_theme_options&#39;</span> ) ) {</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        }</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        $attachment_id = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $_POST[<span class="stringliteral">&#39;attachment_id&#39;</span>] );</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        <span class="keywordflow">if</span> ( $attachment_id &lt; 1 ) {</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        }</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        $key = <span class="stringliteral">&#39;_wp_attachment_custom_header_last_used_&#39;</span> . <a class="code" href="wp-includes_2theme_8php.html#a6d9dd71b2ef87985d6a908cdcbf99f9a">get_stylesheet</a>();</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        <a class="code" href="wp-includes_2post_8php.html#ac984a204e35272d1a897fedce9a92847">update_post_meta</a>( $attachment_id, $key, time() );</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        <a class="code" href="wp-includes_2post_8php.html#ac984a204e35272d1a897fedce9a92847">update_post_meta</a>( $attachment_id, <span class="stringliteral">&#39;_wp_attachment_is_custom_header&#39;</span>, <a class="code" href="wp-includes_2theme_8php.html#a6d9dd71b2ef87985d6a908cdcbf99f9a">get_stylesheet</a>() );</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>();</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    }</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">     * Given an attachment ID for a header image, unsets it as a user-uploaded</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="comment">     * header image for the current theme.</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="comment">     * Triggered when the user clicks the overlay &quot;X&quot; button next to each image</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment">     * choice in the Customizer&#39;s Header tool.</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#ab338fd7b0728bfc3860a561e25419b78"> 1255</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#ab338fd7b0728bfc3860a561e25419b78">ajax_header_remove</a>() {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        check_ajax_referer( <span class="stringliteral">&#39;header-remove&#39;</span>, <span class="stringliteral">&#39;nonce&#39;</span> );</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;edit_theme_options&#39;</span> ) ) {</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        }</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        $attachment_id = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $_POST[<span class="stringliteral">&#39;attachment_id&#39;</span>] );</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;        <span class="keywordflow">if</span> ( $attachment_id &lt; 1 ) {</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            <a class="code" href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a>();</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        }</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        $key = <span class="stringliteral">&#39;_wp_attachment_custom_header_last_used_&#39;</span> . <a class="code" href="wp-includes_2theme_8php.html#a6d9dd71b2ef87985d6a908cdcbf99f9a">get_stylesheet</a>();</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <a class="code" href="wp-includes_2post_8php.html#a138c55d0c3508741575e1f3fad256f65">delete_post_meta</a>( $attachment_id, $key );</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <a class="code" href="wp-includes_2post_8php.html#a138c55d0c3508741575e1f3fad256f65">delete_post_meta</a>( $attachment_id, <span class="stringliteral">&#39;_wp_attachment_is_custom_header&#39;</span>, <a class="code" href="wp-includes_2theme_8php.html#a6d9dd71b2ef87985d6a908cdcbf99f9a">get_stylesheet</a>() );</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a>();</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    }</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="comment">     * @param WP_Customize_Manager $wp_customize</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a44926652f0e88caf7e15eca4e5bf5b21"> 1278</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a44926652f0e88caf7e15eca4e5bf5b21">customize_set_last_used</a>( <a class="code" href="customize_8php.html#ab00f88198c31570dc0a02c6588f39fc5">$wp_customize</a> ) {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        $data = <a class="code" href="customize_8php.html#ab00f88198c31570dc0a02c6588f39fc5">$wp_customize</a>-&gt;get_setting( <span class="stringliteral">&#39;header_image_data&#39;</span> )-&gt;post_value();</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        <span class="keywordflow">if</span> ( ! isset( $data[<span class="stringliteral">&#39;attachment_id&#39;</span>] ) ) {</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        }</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        $attachment_id = $data[<span class="stringliteral">&#39;attachment_id&#39;</span>];</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        $key = <span class="stringliteral">&#39;_wp_attachment_custom_header_last_used_&#39;</span> . <a class="code" href="wp-includes_2theme_8php.html#a6d9dd71b2ef87985d6a908cdcbf99f9a">get_stylesheet</a>();</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        <a class="code" href="wp-includes_2post_8php.html#ac984a204e35272d1a897fedce9a92847">update_post_meta</a>( $attachment_id, $key, time() );</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    }</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="comment">     * @return array</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a3891e4aa257af5ae9526c951cc9ecb89"> 1294</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a3891e4aa257af5ae9526c951cc9ecb89">get_default_header_images</a>() {</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        $this-&gt;<a class="code" href="class_custom___image___header.html#a5b67c2a9e67409fd073d9689014eaa33">process_default_headers</a>();</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        <span class="comment">// Get the default image if there is one.</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        <a class="code" href="options-discussion_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a> = <a class="code" href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a>( <span class="stringliteral">&#39;custom-header&#39;</span>, <span class="stringliteral">&#39;default-image&#39;</span> );</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="options-discussion_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a> ) { <span class="comment">// If not,</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_custom___image___header.html#a31630d393a942cb3cc99f7d3a1160736">$this-&gt;default_headers</a>; <span class="comment">// easy peasy.</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        }</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        <a class="code" href="options-discussion_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a> = sprintf( <a class="code" href="options-discussion_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a>, <a class="code" href="wp-includes_2theme_8php.html#a39342df15893fdd8e811652c9a194123">get_template_directory_uri</a>(), <a class="code" href="wp-includes_2theme_8php.html#a20e8d2b5ee7de6a42990d6e4cdc3c592">get_stylesheet_directory_uri</a>() );</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        $already_has_default = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        <span class="keywordflow">foreach</span> ( $this-&gt;default_headers as $k =&gt; $h ) {</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;            <span class="keywordflow">if</span> ( $h[<span class="stringliteral">&#39;url&#39;</span>] === <a class="code" href="options-discussion_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a> ) {</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                $already_has_default = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;            }</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        }</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        <span class="keywordflow">if</span> ( $already_has_default ) {</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_custom___image___header.html#a31630d393a942cb3cc99f7d3a1160736">$this-&gt;default_headers</a>;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        }</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        <span class="comment">// If the one true image isn&#39;t included in the default set, prepend it.</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        $header_images = array();</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        $header_images[<span class="stringliteral">&#39;default&#39;</span>] = array(</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;            <span class="stringliteral">&#39;url&#39;</span>           =&gt; <a class="code" href="options-discussion_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a>,</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            <span class="stringliteral">&#39;thumbnail_url&#39;</span> =&gt; <a class="code" href="options-discussion_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a>,</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;            <span class="stringliteral">&#39;description&#39;</span>   =&gt; <span class="stringliteral">&#39;Default&#39;</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        );</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        <span class="comment">// The rest of the set comes after.</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        <span class="keywordflow">return</span> array_merge( $header_images, $this-&gt;default_headers );</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    }</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="comment">     * @return array</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"><a class="line" href="class_custom___image___header.html#a19ca3de195fb9681c67da43fb94b1d96"> 1334</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_custom___image___header.html#a19ca3de195fb9681c67da43fb94b1d96">get_uploaded_header_images</a>() {</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        $header_images = <a class="code" href="class_custom___image___header.html#a19ca3de195fb9681c67da43fb94b1d96">get_uploaded_header_images</a>();</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        $timestamp_key = <span class="stringliteral">&#39;_wp_attachment_custom_header_last_used_&#39;</span> . <a class="code" href="wp-includes_2theme_8php.html#a6d9dd71b2ef87985d6a908cdcbf99f9a">get_stylesheet</a>();</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        $alt_text_key = <span class="stringliteral">&#39;_wp_attachment_image_alt&#39;</span>;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        <span class="keywordflow">foreach</span> ( $header_images as &amp;<a class="code" href="wp-content_2themes_2twentyeleven_2header_8php.html#acfaa5419847361da570a835c2681f6d4">$header_image</a> ) {</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            $header_meta = <a class="code" href="wp-includes_2post_8php.html#a5ac8d9eefeeb2ac8b45650a335971b81">get_post_meta</a>( $header_image[<span class="stringliteral">&#39;attachment_id&#39;</span>] );</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            $header_image[<span class="stringliteral">&#39;timestamp&#39;</span>] = isset( $header_meta[ $timestamp_key ] ) ? $header_meta[ $timestamp_key ] : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;            $header_image[<span class="stringliteral">&#39;alt_text&#39;</span>] = isset( $header_meta[ $alt_text_key ] ) ? $header_meta[ $alt_text_key ] : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        }</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        <span class="keywordflow">return</span> $header_images;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    }</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;}</div>
<div class="ttc" id="namespaceshow_html"><div class="ttname"><a href="namespaceshow.html">show</a></div></div>
<div class="ttc" id="class_custom___image___header_html_ab2109cfb8fa5eb275e56c47564ac8207"><div class="ttname"><a href="class_custom___image___header.html#ab2109cfb8fa5eb275e56c47564ac8207">Custom_Image_Header\$admin_header_callback</a></div><div class="ttdeci">$admin_header_callback</div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00024">wp-admin/custom-header.php:24</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a8855430a93e14fe0c74fbaf892553ee9"><div class="ttname"><a href="class_custom___image___header.html#a8855430a93e14fe0c74fbaf892553ee9">Custom_Image_Header\create_attachment_object</a></div><div class="ttdeci">create_attachment_object($cropped, $parent_attachment_id)</div><div class="ttdoc">Create an attachment &#39;object&#39;. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l01123">wp-admin/custom-header.php:1123</a></div></div>
<div class="ttc" id="post__image_8php_html_acf215f34a917d014776ce684a9ee8909"><div class="ttname"><a href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a></div><div class="ttdeci">$url</div><div class="ttdef"><b>Definition:</b> <a href="post__image_8php_source.html#l00025">post_image.php:25</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a3b0726562cc2d58bd3b46cbc7b10df68"><div class="ttname"><a href="class_custom___image___header.html#a3b0726562cc2d58bd3b46cbc7b10df68">Custom_Image_Header\set_header_image</a></div><div class="ttdeci">set_header_image($choice)</div><div class="ttdoc">Choose a header image, selected from existing uploaded and default headers, or provide an array of up...</div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00983">wp-admin/custom-header.php:983</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a4178b3d59d8ab3a058de6e24fa056697"><div class="ttname"><a href="wp-includes_2post_8php.html#a4178b3d59d8ab3a058de6e24fa056697">wp_get_attachment_url</a></div><div class="ttdeci">wp_get_attachment_url($post_id=0)</div><div class="ttdoc">Retrieve the URL for an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l04866">wp-includes/post.php:4866</a></div></div>
<div class="ttc" id="post__image_8php_html_aac6146b4cdec66c94263ddb55afd5946"><div class="ttname"><a href="post__image_8php.html#aac6146b4cdec66c94263ddb55afd5946">$image</a></div><div class="ttdeci">$image</div><div class="ttdef"><b>Definition:</b> <a href="post__image_8php_source.html#l00099">post_image.php:99</a></div></div>
<div class="ttc" id="wp-admin_2includes_2template_8php_html_ae57d23d839676b8d98097c939e863f0f"><div class="ttname"><a href="wp-admin_2includes_2template_8php.html#ae57d23d839676b8d98097c939e863f0f">submit_button</a></div><div class="ttdeci">submit_button($text=null, $type= 'primary', $name= 'submit', $wrap=true, $other_attributes=null)</div><div class="ttdoc">Echoes a submit button, with provided text and appropriate class(es). </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2template_8php_source.html#l01858">wp-admin/includes/template.php:1858</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_ac984a204e35272d1a897fedce9a92847"><div class="ttname"><a href="wp-includes_2post_8php.html#ac984a204e35272d1a897fedce9a92847">update_post_meta</a></div><div class="ttdeci">update_post_meta($post_id, $meta_key, $meta_value, $prev_value= '')</div><div class="ttdoc">Update post meta field based on post ID. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l01733">wp-includes/post.php:1733</a></div></div>
<div class="ttc" id="class_custom___image___header_html_aa660799a9359b150d9cf9d59be2096b6"><div class="ttname"><a href="class_custom___image___header.html#aa660799a9359b150d9cf9d59be2096b6">Custom_Image_Header\js_2</a></div><div class="ttdeci">js_2()</div><div class="ttdoc">Display JavaScript based on Step 2. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00379">wp-admin/custom-header.php:379</a></div></div>
<div class="ttc" id="customize_8php_html_ab00f88198c31570dc0a02c6588f39fc5"><div class="ttname"><a href="customize_8php.html#ab00f88198c31570dc0a02c6588f39fc5">$wp_customize</a></div><div class="ttdeci">if(!empty($url)) if(!empty($return)) if(!empty($autofocus)&amp;&amp;is_array($autofocus)) global $wp_customize</div><div class="ttdef"><b>Definition:</b> <a href="customize_8php_source.html#l00030">customize.php:30</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a68f0b952d066b096228913409d3da4bb"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a68f0b952d066b096228913409d3da4bb">wp_nonce_field</a></div><div class="ttdeci">wp_nonce_field($action=-1, $name=&quot;_wpnonce&quot;, $referer=true, $echo=true)</div><div class="ttdoc">Retrieve or display nonce hidden field for forms. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l01457">wordpress/wp-includes/functions.php:1457</a></div></div>
<div class="ttc" id="namespaceaction_html"><div class="ttname"><a href="namespaceaction.html">action</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a08a3d66142c2d31d6fdb95b1efac7185"><div class="ttname"><a href="wp-includes_2post_8php.html#a08a3d66142c2d31d6fdb95b1efac7185">wp_get_attachment_metadata</a></div><div class="ttdeci">wp_get_attachment_metadata($post_id=0, $unfiltered=false)</div><div class="ttdoc">Retrieve attachment meta field for attachment ID. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l04806">wp-includes/post.php:4806</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a793d3c98ad7fb7008e2e04962d195102"><div class="ttname"><a href="class_custom___image___header.html#a793d3c98ad7fb7008e2e04962d195102">Custom_Image_Header\attachment_fields_to_edit</a></div><div class="ttdeci">attachment_fields_to_edit($form_fields)</div><div class="ttdoc">Unused since 3.5.0. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00955">wp-admin/custom-header.php:955</a></div></div>
<div class="ttc" id="wp-includes_2plugin_8php_html_aed75045b0b4572e55462b37b063a77cc"><div class="ttname"><a href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a></div><div class="ttdeci">do_action($tag, $arg= '')</div><div class="ttdoc">Execute functions hooked on a specific action hook. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2plugin_8php_source.html#l00482">wp-includes/plugin.php:482</a></div></div>
<div class="ttc" id="class_custom___image___header_html_aae01cfad48e09d88db94736fe3b2435d"><div class="ttname"><a href="class_custom___image___header.html#aae01cfad48e09d88db94736fe3b2435d">Custom_Image_Header\step_2_manage_upload</a></div><div class="ttdeci">step_2_manage_upload()</div><div class="ttdoc">Upload the file to be cropped in the second step. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00808">wp-admin/custom-header.php:808</a></div></div>
<div class="ttc" id="wp-includes_2theme_8php_html_a7462b911fde17d89fe5c7fe162de29de"><div class="ttname"><a href="wp-includes_2theme_8php.html#a7462b911fde17d89fe5c7fe162de29de">get_custom_header</a></div><div class="ttdeci">get_custom_header()</div><div class="ttdoc">Get the header image data. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2theme_8php_source.html#l01233">wp-includes/theme.php:1233</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a231d52e00b64fc39ee1e9780e686cb37"><div class="ttname"><a href="class_custom___image___header.html#a231d52e00b64fc39ee1e9780e686cb37">Custom_Image_Header\js</a></div><div class="ttdeci">js()</div><div class="ttdoc">Execute JavaScript depending on step. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00305">wp-admin/custom-header.php:305</a></div></div>
<div class="ttc" id="screen_8php_html_aa2536d3fe4b68dea313b1523ea606f10"><div class="ttname"><a href="screen_8php.html#aa2536d3fe4b68dea313b1523ea606f10">get_current_screen</a></div><div class="ttdeci">get_current_screen()</div><div class="ttdoc">Get the current screen object. </div><div class="ttdef"><b>Definition:</b> <a href="screen_8php_source.html#l00205">screen.php:205</a></div></div>
<div class="ttc" id="wp-content_2themes_2twentythirteen_2inc_2custom-header_8php_html_ab1b1d44a8c4dbcaeff449be6b5e19935"><div class="ttname"><a href="wp-content_2themes_2twentythirteen_2inc_2custom-header_8php.html#ab1b1d44a8c4dbcaeff449be6b5e19935">width</a></div><div class="ttdeci">max width</div><div class="ttdef"><b>Definition:</b> <a href="wp-content_2themes_2twentythirteen_2inc_2custom-header_8php_source.html#l00172">wp-content/themes/twentythirteen/inc/custom-header.php:172</a></div></div>
<div class="ttc" id="wp-includes_2theme_8php_html_ac78c15d12b005b7fadebcf1fb76263df"><div class="ttname"><a href="wp-includes_2theme_8php.html#ac78c15d12b005b7fadebcf1fb76263df">get_theme_support</a></div><div class="ttdeci">get_theme_support($feature)</div><div class="ttdoc">Gets the theme support arguments passed when registering that support. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2theme_8php_source.html#l01741">wp-includes/theme.php:1741</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_aa7d184c754099ce519c4d8d108e59529"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#aa7d184c754099ce519c4d8d108e59529">wp_send_json_error</a></div><div class="ttdeci">wp_send_json_error($data=null)</div><div class="ttdoc">Send a JSON response back to an Ajax request, indicating failure. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l03011">wordpress/wp-includes/functions.php:3011</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a3891e4aa257af5ae9526c951cc9ecb89"><div class="ttname"><a href="class_custom___image___header.html#a3891e4aa257af5ae9526c951cc9ecb89">Custom_Image_Header\get_default_header_images</a></div><div class="ttdeci">get_default_header_images()</div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l01294">wp-admin/custom-header.php:1294</a></div></div>
<div class="ttc" id="wp-content_2themes_2twentyeleven_2header_8php_html_acfaa5419847361da570a835c2681f6d4"><div class="ttname"><a href="wp-content_2themes_2twentyeleven_2header_8php.html#acfaa5419847361da570a835c2681f6d4">$header_image</a></div><div class="ttdeci">$header_image</div><div class="ttdef"><b>Definition:</b> <a href="wp-content_2themes_2twentyeleven_2header_8php_source.html#l00080">wp-content/themes/twentyeleven/header.php:80</a></div></div>
<div class="ttc" id="noop_8php_html_a2d2cbc03d92d4736569cab661c417c22"><div class="ttname"><a href="noop_8php.html#a2d2cbc03d92d4736569cab661c417c22">home_url</a></div><div class="ttdeci">home_url()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00076">noop.php:76</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a8eb795060a1fc81cab6c9bdd25557a7e"><div class="ttname"><a href="class_custom___image___header.html#a8eb795060a1fc81cab6c9bdd25557a7e">Custom_Image_Header\__construct</a></div><div class="ttdeci">__construct($admin_header_callback, $admin_image_div_callback= '')</div><div class="ttdoc">Constructor - Register administration header callback. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00059">wp-admin/custom-header.php:59</a></div></div>
<div class="ttc" id="namespacelink_html"><div class="ttname"><a href="namespacelink.html">link</a></div></div>
<div class="ttc" id="class_custom___image___header_html_aa2e332fc40150d0e752ed7609a2f8b3b"><div class="ttname"><a href="class_custom___image___header.html#aa2e332fc40150d0e752ed7609a2f8b3b">Custom_Image_Header\js_includes</a></div><div class="ttdeci">js_includes()</div><div class="ttdoc">Set up the enqueue for the JavaScript files. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00158">wp-admin/custom-header.php:158</a></div></div>
<div class="ttc" id="wp-db_8php_html_ad03408aabe16bb53c780fae6cf3910f9"><div class="ttname"><a href="wp-db_8php.html#ad03408aabe16bb53c780fae6cf3910f9">object</a></div><div class="ttdeci">const object</div><div class="ttdoc">The current screen. </div><div class="ttdef"><b>Definition:</b> <a href="wp-db_8php_source.html#l00021">wp-db.php:21</a></div></div>
<div class="ttc" id="class_custom___image___header_html"><div class="ttname"><a href="class_custom___image___header.html">Custom_Image_Header</a></div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00016">wp-admin/custom-header.php:16</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a06d38a93c806c187fd21200c1baa9f53"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a06d38a93c806c187fd21200c1baa9f53">wp_die</a></div><div class="ttdeci">wp_die($message= '', $title= '', $args=array())</div><div class="ttdoc">Kill WordPress execution and display HTML message with error message. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l02477">wordpress/wp-includes/functions.php:2477</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a3d3f701ec13794e71e0343c673d2f1a0"><div class="ttname"><a href="class_custom___image___header.html#a3d3f701ec13794e71e0343c673d2f1a0">Custom_Image_Header\insert_attachment</a></div><div class="ttdeci">insert_attachment($object, $cropped)</div><div class="ttdoc">Insert an attachment and its metadata. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l01150">wp-admin/custom-header.php:1150</a></div></div>
<div class="ttc" id="namespacea_html"><div class="ttname"><a href="namespacea.html">a</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a2d54eef99c94638aa069b1a4443f0467"><div class="ttname"><a href="class_custom___image___header.html#a2d54eef99c94638aa069b1a4443f0467">Custom_Image_Header\take_action</a></div><div class="ttdeci">take_action()</div><div class="ttdoc">Execute custom header modification. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00190">wp-admin/custom-header.php:190</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_ada8efad85a9cd028503cbe55c37c890a"><div class="ttname"><a href="edit-form-advanced_8php.html#ada8efad85a9cd028503cbe55c37c890a">_x</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv' _x( 'Format', 'post format')</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00244">edit-form-advanced.php:244</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_ae134c72f2a749bd225146b26241f22e3"><div class="ttname"><a href="wp-includes_2post_8php.html#ae134c72f2a749bd225146b26241f22e3">wp_insert_attachment</a></div><div class="ttdeci">wp_insert_attachment($args, $file=false, $parent=0)</div><div class="ttdoc">Insert an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l04664">wp-includes/post.php:4664</a></div></div>
<div class="ttc" id="wp-admin_2includes_2image_8php_html_a470c4e04f3d906c179afbd2e53da206a"><div class="ttname"><a href="wp-admin_2includes_2image_8php.html#a470c4e04f3d906c179afbd2e53da206a">_copy_image_file</a></div><div class="ttdeci">_copy_image_file($attachment_id)</div><div class="ttdoc">Copy an existing image file. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2image_8php_source.html#l00591">wp-admin/includes/image.php:591</a></div></div>
<div class="ttc" id="admin_8php_html_af1c9ecf26c0cfd247c0760dd4b594a6d"><div class="ttname"><a href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a></div><div class="ttdeci">if(get_option('db_upgraded')) elseif(get_option('db_version')!=$wp_db_version &amp;&amp;empty($_POST))</div><div class="ttdef"><b>Definition:</b> <a href="admin_8php_source.html#l00045">admin.php:45</a></div></div>
<div class="ttc" id="wp-admin_2install_8php_html_a8734bbce7774e01990aa0ac749fc398d"><div class="ttname"><a href="wp-admin_2install_8php.html#a8734bbce7774e01990aa0ac749fc398d">$step</a></div><div class="ttdeci">$step</div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2install_8php_source.html#l00049">wp-admin/install.php:49</a></div></div>
<div class="ttc" id="class_custom___image___header_html_ab338fd7b0728bfc3860a561e25419b78"><div class="ttname"><a href="class_custom___image___header.html#ab338fd7b0728bfc3860a561e25419b78">Custom_Image_Header\ajax_header_remove</a></div><div class="ttdeci">ajax_header_remove()</div><div class="ttdoc">Given an attachment ID for a header image, unsets it as a user-uploaded header image for the current ...</div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l01255">wp-admin/custom-header.php:1255</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a6e348722923afe18808c59773964c162"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a6e348722923afe18808c59773964c162">add_query_arg</a></div><div class="ttdeci">add_query_arg()</div><div class="ttdoc">Retrieves a modified URL query string. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l00770">wordpress/wp-includes/functions.php:770</a></div></div>
<div class="ttc" id="namespacestrong_html"><div class="ttname"><a href="namespacestrong.html">strong</a></div></div>
<div class="ttc" id="namespacep_html"><div class="ttname"><a href="namespacep.html">p</a></div></div>
<div class="ttc" id="class_custom___image___header_html_aeea4251403e3c66b74f554f9ba49bdf5"><div class="ttname"><a href="class_custom___image___header.html#aeea4251403e3c66b74f554f9ba49bdf5">Custom_Image_Header\reset_header_image</a></div><div class="ttdeci">reset_header_image()</div><div class="ttdoc">Reset a header image to the default image for the theme. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l01043">wp-admin/custom-header.php:1043</a></div></div>
<div class="ttc" id="noop_8php_html_a16e782f4694432817e6f06d12b269704"><div class="ttname"><a href="noop_8php.html#a16e782f4694432817e6f06d12b269704">add_action</a></div><div class="ttdeci">add_action()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00041">noop.php:41</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a563b1dd3f65d7fc81701c99ea3f4d575"><div class="ttname"><a href="wp-includes_2post_8php.html#a563b1dd3f65d7fc81701c99ea3f4d575">wp_update_attachment_metadata</a></div><div class="ttdeci">wp_update_attachment_metadata($post_id, $data)</div><div class="ttdoc">Update metadata for an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l04837">wp-includes/post.php:4837</a></div></div>
<div class="ttc" id="wp-admin_2includes_2image_8php_html_a81a49932707fc3690dc80a4ce77c4028"><div class="ttname"><a href="wp-admin_2includes_2image_8php.html#a81a49932707fc3690dc80a4ce77c4028">wp_generate_attachment_metadata</a></div><div class="ttdeci">wp_generate_attachment_metadata($attachment_id, $file)</div><div class="ttdoc">Generate post thumbnail attachment meta data. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2image_8php_source.html#l00076">wp-admin/includes/image.php:76</a></div></div>
<div class="ttc" id="wp-admin_2includes_2plugin_8php_html_aca0dc75ff5eeceb18e06a8d27de85863"><div class="ttname"><a href="wp-admin_2includes_2plugin_8php.html#aca0dc75ff5eeceb18e06a8d27de85863">add_theme_page</a></div><div class="ttdeci">add_theme_page($page_title, $menu_title, $capability, $menu_slug, $function= '')</div><div class="ttdoc">Add submenu page to the Appearance main menu. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2plugin_8php_source.html#l01225">wp-admin/includes/plugin.php:1225</a></div></div>
<div class="ttc" id="noop_8php_html_a54639394aa645a2277ea41f3cbd23247"><div class="ttname"><a href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a></div><div class="ttdeci">apply_filters()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00026">noop.php:26</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a44926652f0e88caf7e15eca4e5bf5b21"><div class="ttname"><a href="class_custom___image___header.html#a44926652f0e88caf7e15eca4e5bf5b21">Custom_Image_Header\customize_set_last_used</a></div><div class="ttdeci">customize_set_last_used($wp_customize)</div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l01278">wp-admin/custom-header.php:1278</a></div></div>
<div class="ttc" id="namespacetable_html"><div class="ttname"><a href="namespacetable.html">table</a></div></div>
<div class="ttc" id="class-wp-error_8php_html_a741b5ec807dbba8d2a0851e32e7d926c"><div class="ttname"><a href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a></div><div class="ttdeci">is_wp_error($thing)</div><div class="ttdoc">Check whether variable is a WordPress Error. </div><div class="ttdef"><b>Definition:</b> <a href="class-wp-error_8php_source.html#l00216">class-wp-error.php:216</a></div></div>
<div class="ttc" id="wp-content_2themes_2twentyeleven_2header_8php_html_a0e2dd2aed1e3361c3aec57e7f7170f73"><div class="ttname"><a href="wp-content_2themes_2twentyeleven_2header_8php.html#a0e2dd2aed1e3361c3aec57e7f7170f73">$page</a></div><div class="ttdeci">global $page</div><div class="ttdef"><b>Definition:</b> <a href="wp-content_2themes_2twentyeleven_2header_8php_source.html#l00029">wp-content/themes/twentyeleven/header.php:29</a></div></div>
<div class="ttc" id="class_custom___image___header_html_ae6dab955e8ca973f9a7791bcc1554784"><div class="ttname"><a href="class_custom___image___header.html#ae6dab955e8ca973f9a7791bcc1554784">Custom_Image_Header\js_1</a></div><div class="ttdeci">js_1()</div><div class="ttdoc">Display JavaScript based on Step 1 and 3. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00318">wp-admin/custom-header.php:318</a></div></div>
<div class="ttc" id="wp-content_2themes_2twentyeleven_2image_8php_html_ae7fc3682b173ad9d4b1892bdc04d18d9"><div class="ttname"><a href="wp-content_2themes_2twentyeleven_2image_8php.html#ae7fc3682b173ad9d4b1892bdc04d18d9">$metadata</a></div><div class="ttdeci">$metadata</div><div class="ttdef"><b>Definition:</b> <a href="wp-content_2themes_2twentyeleven_2image_8php_source.html#l00029">wp-content/themes/twentyeleven/image.php:29</a></div></div>
<div class="ttc" id="class_custom___image___header_html_aead477e96706ed6a438419cbf60a061f"><div class="ttname"><a href="class_custom___image___header.html#aead477e96706ed6a438419cbf60a061f">Custom_Image_Header\css_includes</a></div><div class="ttdeci">css_includes()</div><div class="ttdoc">Set up the enqueue for the CSS files. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00176">wp-admin/custom-header.php:176</a></div></div>
<div class="ttc" id="wp-includes_2theme_8php_html_a72537b81cbe22bc1500e2c1dba0e05b6"><div class="ttname"><a href="wp-includes_2theme_8php.html#a72537b81cbe22bc1500e2c1dba0e05b6">get_header_textcolor</a></div><div class="ttdeci">get_header_textcolor()</div><div class="ttdoc">Retrieve text color for custom header. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2theme_8php_source.html#l00955">wp-includes/theme.php:955</a></div></div>
<div class="ttc" id="class_custom___image___header_html_aadf3be8e052a282e67b90018316eed88"><div class="ttname"><a href="class_custom___image___header.html#aadf3be8e052a282e67b90018316eed88">Custom_Image_Header\$admin_image_div_callback</a></div><div class="ttdeci">$admin_image_div_callback</div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00032">wp-admin/custom-header.php:32</a></div></div>
<div class="ttc" id="wordpress_2wp-content_2themes_2twentyeleven_2functions_8php_html_ad6d040b79093a1652d3e3a0f02172d83"><div class="ttname"><a href="wordpress_2wp-content_2themes_2twentyeleven_2functions_8php.html#ad6d040b79093a1652d3e3a0f02172d83">height</a></div><div class="ttdeci">line height</div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-content_2themes_2twentyeleven_2functions_8php_source.html#l00295">wordpress/wp-content/themes/twentyeleven/functions.php:295</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a39e30b5bbefa3b21d828591673150b89"><div class="ttname"><a href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a></div><div class="ttdeci">get_post($post=null, $output=OBJECT, $filter= 'raw')</div><div class="ttdoc">Retrieves post data given a post ID or post object. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l00426">wp-includes/post.php:426</a></div></div>
<div class="ttc" id="form__list_8php_html_a37ec3c0e38c16262d3ff05971a91c276"><div class="ttname"><a href="form__list_8php.html#a37ec3c0e38c16262d3ff05971a91c276">input</a></div><div class="ttdeci">gf_new_form_modal_container setting row input</div><div class="ttdef"><b>Definition:</b> <a href="form__list_8php_source.html#l00157">form_list.php:157</a></div></div>
<div class="ttc" id="formatting_8php_html_ad9e809b6901d247527672e11ce5d7368"><div class="ttname"><a href="formatting_8php.html#ad9e809b6901d247527672e11ce5d7368">esc_url_raw</a></div><div class="ttdeci">esc_url_raw($url, $protocols=null)</div><div class="ttdoc">Performs esc_url() for database usage. </div><div class="ttdef"><b>Definition:</b> <a href="formatting_8php_source.html#l03468">formatting.php:3468</a></div></div>
<div class="ttc" id="wordpress_2wp-admin_2network_2settings_8php_html_af850206ec47fb9a5348fb5b666662c18"><div class="ttname"><a href="wordpress_2wp-admin_2network_2settings_8php.html#af850206ec47fb9a5348fb5b666662c18">_e</a></div><div class="ttdeci">_e( 'Network Title')?&gt;&lt;/label &gt;&lt;/th &gt;&lt; td &gt;&lt; input name</div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-admin_2network_2settings_8php_source.html#l00107">wordpress/wp-admin/network/settings.php:107</a></div></div>
<div class="ttc" id="wp-admin_2includes_2file_8php_html_aff843f7f5421086d58b20f035ff208b4"><div class="ttname"><a href="wp-admin_2includes_2file_8php.html#aff843f7f5421086d58b20f035ff208b4">wp_handle_upload</a></div><div class="ttdeci">wp_handle_upload(&amp;$file, $overrides=false, $time=null)</div><div class="ttdoc">Wrapper for _wp_handle_upload(), passes &#39;wp_handle_upload&#39; action. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2file_8php_source.html#l00429">wp-admin/includes/file.php:429</a></div></div>
<div class="ttc" id="options-discussion_8php_html_af594986e4618a8d6a5d7566617f583c6"><div class="ttname"><a href="options-discussion_8php.html#af594986e4618a8d6a5d7566617f583c6">$size</a></div><div class="ttdeci">$size</div><div class="ttdef"><b>Definition:</b> <a href="options-discussion_8php_source.html#l00243">options-discussion.php:243</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a57d6fd1200be8dd145a9b57549797d37"><div class="ttname"><a href="class_custom___image___header.html#a57d6fd1200be8dd145a9b57549797d37">Custom_Image_Header\$updated</a></div><div class="ttdeci">$updated</div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00050">wp-admin/custom-header.php:50</a></div></div>
<div class="ttc" id="namespacelist_html"><div class="ttname"><a href="namespacelist.html">list</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a17b427cd8756c8aeccd66e0a89beb1c3"><div class="ttname"><a href="class_custom___image___header.html#a17b427cd8756c8aeccd66e0a89beb1c3">Custom_Image_Header\get_header_dimensions</a></div><div class="ttdeci">get_header_dimensions($dimensions)</div><div class="ttdoc">Calculate width and height based on what the currently selected theme supports. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l01071">wp-admin/custom-header.php:1071</a></div></div>
<div class="ttc" id="functions_8wp-scripts_8php_html_ac7df944536184efa854f298abe6f334b"><div class="ttname"><a href="functions_8wp-scripts_8php.html#ac7df944536184efa854f298abe6f334b">wp_enqueue_script</a></div><div class="ttdeci">wp_enqueue_script($handle, $src=false, $deps=array(), $ver=false, $in_footer=false)</div><div class="ttdoc">Enqueue a script. </div><div class="ttdef"><b>Definition:</b> <a href="functions_8wp-scripts_8php_source.html#l00224">functions.wp-scripts.php:224</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a3d7a104473382e834a5310e451fc933b"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a3d7a104473382e834a5310e451fc933b">wp_send_json_success</a></div><div class="ttdeci">wp_send_json_success($data=null)</div><div class="ttdoc">Send a JSON response back to an Ajax request, indicating success. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l02988">wordpress/wp-includes/functions.php:2988</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a2fbf261bc95d1c62b001c630e19c07d8"><div class="ttname"><a href="wp-includes_2post_8php.html#a2fbf261bc95d1c62b001c630e19c07d8">get_attached_file</a></div><div class="ttdeci">get_attached_file($attachment_id, $unfiltered=false)</div><div class="ttdoc">Retrieve attached file path based on attachment ID. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l00187">wp-includes/post.php:187</a></div></div>
<div class="ttc" id="admin-ajax_8php_html_a7e2b5c5f59b53e18d1dc6bf6ff251ed2"><div class="ttname"><a href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a></div><div class="ttdeci">if(!empty($_GET['action'])&amp;&amp;in_array($_GET['action'], $core_actions_get)) add_action( 'wp_ajax_'.$_GET['action'] str_replace( '-', '_', $_GET['action'])</div><div class="ttdef"><b>Definition:</b> <a href="admin-ajax_8php_source.html#l00073">admin-ajax.php:73</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a1d3eb00c9fe92a90149ac06ca6c28132"><div class="ttname"><a href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv'foreach(get_object_taxonomies($post) as $tax_name) if($thumbnail_support &amp;&amp;current_user_can( 'upload_files')) add_meta_box('postimagediv' esc_html($post_type_object-&gt;labels-&gt;featured_image)</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00266">edit-form-advanced.php:266</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a5ac8d9eefeeb2ac8b45650a335971b81"><div class="ttname"><a href="wp-includes_2post_8php.html#a5ac8d9eefeeb2ac8b45650a335971b81">get_post_meta</a></div><div class="ttdeci">get_post_meta($post_id, $key= '', $single=false)</div><div class="ttdoc">Retrieve post meta field for a post. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l01711">wp-includes/post.php:1711</a></div></div>
<div class="ttc" id="namespaceclick_html"><div class="ttname"><a href="namespaceclick.html">click</a></div></div>
<div class="ttc" id="plugin-editor_8php_html_aa1bfbd27060176201b271918dff57e8f"><div class="ttname"><a href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a></div><div class="ttdeci">$file</div><div class="ttdef"><b>Definition:</b> <a href="plugin-editor_8php_source.html#l00051">plugin-editor.php:51</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a370b2299fe56f44b8ca714fede20e924"><div class="ttname"><a href="class_custom___image___header.html#a370b2299fe56f44b8ca714fede20e924">Custom_Image_Header\filter_upload_tabs</a></div><div class="ttdeci">filter_upload_tabs($tabs)</div><div class="ttdoc">Unused since 3.5.0. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00967">wp-admin/custom-header.php:967</a></div></div>
<div class="ttc" id="general-template_8php_html_ac5a8cddc08f21085ba0939cda4f64766"><div class="ttname"><a href="general-template_8php.html#ac5a8cddc08f21085ba0939cda4f64766">checked</a></div><div class="ttdeci">checked($checked, $current=true, $echo=true)</div><div class="ttdoc">Outputs the html checked attribute. </div><div class="ttdef"><b>Definition:</b> <a href="general-template_8php_source.html#l03396">general-template.php:3396</a></div></div>
<div class="ttc" id="wp-includes_2media_8php_html_adc3e512380a7336cfc8dd3417892a65b"><div class="ttname"><a href="wp-includes_2media_8php.html#adc3e512380a7336cfc8dd3417892a65b">wp_get_attachment_image_src</a></div><div class="ttdeci">wp_get_attachment_image_src($attachment_id, $size= 'thumbnail', $icon=false)</div><div class="ttdoc">Retrieve an image to represent an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2media_8php_source.html#l00751">wp-includes/media.php:751</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a5b67c2a9e67409fd073d9689014eaa33"><div class="ttname"><a href="class_custom___image___header.html#a5b67c2a9e67409fd073d9689014eaa33">Custom_Image_Header\process_default_headers</a></div><div class="ttdeci">process_default_headers()</div><div class="ttdoc">Process the default headers. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00238">wp-admin/custom-header.php:238</a></div></div>
<div class="ttc" id="wp-includes_2theme_8php_html_a4c3486e66730d9c0f77be28199f63069"><div class="ttname"><a href="wp-includes_2theme_8php.html#a4c3486e66730d9c0f77be28199f63069">get_theme_mod</a></div><div class="ttdeci">get_theme_mod($name, $default=false)</div><div class="ttdoc">Retrieve theme modification value for the current theme. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2theme_8php_source.html#l00851">wp-includes/theme.php:851</a></div></div>
<div class="ttc" id="class_custom___image___header_html_aea588c6fba40834b3f65f67c846b0cba"><div class="ttname"><a href="class_custom___image___header.html#aea588c6fba40834b3f65f67c846b0cba">Custom_Image_Header\ajax_header_crop</a></div><div class="ttdeci">ajax_header_crop()</div><div class="ttdoc">Gets attachment uploaded by Media Manager, crops it, then saves it as a new object. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l01171">wp-admin/custom-header.php:1171</a></div></div>
<div class="ttc" id="api-core_2wp-includes_2compat_8php_html_a69ce1131cd2c65fd147aa7b1de9ed7ee"><div class="ttname"><a href="api-core_2wp-includes_2compat_8php.html#a69ce1131cd2c65fd147aa7b1de9ed7ee">endif</a></div><div class="ttdeci">if(!function_exists( 'json_last_error_msg'))() endif</div><div class="ttdef"><b>Definition:</b> <a href="api-core_2wp-includes_2compat_8php_source.html#l00011">api-core/wp-includes/compat.php:11</a></div></div>
<div class="ttc" id="edit-comments_8php_html_a01a5ac2afed3a262528186f4ba5f9693"><div class="ttname"><a href="edit-comments_8php.html#a01a5ac2afed3a262528186f4ba5f9693">name</a></div><div class="ttdeci">s name</div><div class="ttdef"><b>Definition:</b> <a href="edit-comments_8php_source.html#l00156">edit-comments.php:156</a></div></div>
<div class="ttc" id="wp-includes_2theme_8php_html_a32648f64a46cac8e465689aa87e70f7b"><div class="ttname"><a href="wp-includes_2theme_8php.html#a32648f64a46cac8e465689aa87e70f7b">display_header_text</a></div><div class="ttdeci">display_header_text()</div><div class="ttdoc">Whether to display the header text. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2theme_8php_source.html#l00975">wp-includes/theme.php:975</a></div></div>
<div class="ttc" id="wp-admin_2includes_2image_8php_html_a319b5bc3ec2753bad3e397bcd75f9d9e"><div class="ttname"><a href="wp-admin_2includes_2image_8php.html#a319b5bc3ec2753bad3e397bcd75f9d9e">wp_crop_image</a></div><div class="ttdeci">wp_crop_image($src, $src_x, $src_y, $src_w, $src_h, $dst_w, $dst_h, $src_abs=false, $dst_file=false)</div><div class="ttdoc">Crop an Image to a given size. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2image_8php_source.html#l00025">wp-admin/includes/image.php:25</a></div></div>
<div class="ttc" id="wordpress_2wp-content_2themes_2twentyeleven_2functions_8php_html_aee0174667653000761904b9bea00878d"><div class="ttname"><a href="wordpress_2wp-content_2themes_2twentyeleven_2functions_8php.html#aee0174667653000761904b9bea00878d">color</a></div><div class="ttdeci">if(!function_exists( 'twentyeleven_header_style'))() color</div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-content_2themes_2twentyeleven_2functions_8php_source.html#l00232">wordpress/wp-content/themes/twentyeleven/functions.php:232</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_adb0024d9830f32a834cb170d73753ba6"><div class="ttname"><a href="wp-includes_2post_8php.html#adb0024d9830f32a834cb170d73753ba6">wp_match_mime_types</a></div><div class="ttdeci">wp_match_mime_types($wildcard_mime_types, $real_mime_types)</div><div class="ttdoc">Check a MIME-Type against a list. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l02250">wp-includes/post.php:2250</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a138c55d0c3508741575e1f3fad256f65"><div class="ttname"><a href="wp-includes_2post_8php.html#a138c55d0c3508741575e1f3fad256f65">delete_post_meta</a></div><div class="ttdeci">delete_post_meta($post_id, $meta_key, $meta_value= '')</div><div class="ttdoc">Remove metadata matching criteria from a post. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l01691">wp-includes/post.php:1691</a></div></div>
<div class="ttc" id="wp-includes_2theme_8php_html_aeb6c356a325550b6b27077e895197263"><div class="ttname"><a href="wp-includes_2theme_8php.html#aeb6c356a325550b6b27077e895197263">get_header_image</a></div><div class="ttdeci">get_header_image()</div><div class="ttdoc">Retrieve header image for custom header. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2theme_8php_source.html#l01003">wp-includes/theme.php:1003</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a1271ba79dab368a6b1881e11b6e2d016"><div class="ttname"><a href="class_custom___image___header.html#a1271ba79dab368a6b1881e11b6e2d016">Custom_Image_Header\remove_header_image</a></div><div class="ttdeci">remove_header_image()</div><div class="ttdoc">Remove a header image. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l01032">wp-admin/custom-header.php:1032</a></div></div>
<div class="ttc" id="class_custom___image___header_html_ae75d2f5188d66f189718b8dbd9a03b07"><div class="ttname"><a href="class_custom___image___header.html#ae75d2f5188d66f189718b8dbd9a03b07">Custom_Image_Header\finished</a></div><div class="ttdeci">finished()</div><div class="ttdoc">Display last step of custom header image page. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00925">wp-admin/custom-header.php:925</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a46a1de65a24cd25932980e3ead2518cb"><div class="ttname"><a href="class_custom___image___header.html#a46a1de65a24cd25932980e3ead2518cb">Custom_Image_Header\step_3</a></div><div class="ttdeci">step_3()</div><div class="ttdoc">Display third step of custom header image page. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00847">wp-admin/custom-header.php:847</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a38ddbb5bed3a03da26b64c1916ad9e1f"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a></div><div class="ttdeci">absint($maybeint)</div><div class="ttdoc">Convert a value to non-negative integer. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l03551">wordpress/wp-includes/functions.php:3551</a></div></div>
<div class="ttc" id="twentyfifteen_2content-link_8php_html_a4a6fb8865e1ae52faa29662b4087e629"><div class="ttname"><a href="twentyfifteen_2content-link_8php.html#a4a6fb8865e1ae52faa29662b4087e629">esc_url</a></div><div class="ttdeci">else esc_url(twentyfifteen_get_link_url()))</div><div class="ttdef"><b>Definition:</b> <a href="twentyfifteen_2content-link_8php_source.html#l00021">twentyfifteen/content-link.php:21</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a11261ff360c81ed389044015ec1444be"><div class="ttname"><a href="class_custom___image___header.html#a11261ff360c81ed389044015ec1444be">Custom_Image_Header\show_header_selector</a></div><div class="ttdeci">show_header_selector($type= 'default')</div><div class="ttdoc">Display UI for selecting one of several default headers. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00268">wp-admin/custom-header.php:268</a></div></div>
<div class="ttc" id="wp-includes_2theme_8php_html_a39342df15893fdd8e811652c9a194123"><div class="ttname"><a href="wp-includes_2theme_8php.html#a39342df15893fdd8e811652c9a194123">get_template_directory_uri</a></div><div class="ttdeci">get_template_directory_uri()</div><div class="ttdoc">Retrieve theme directory URI. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2theme_8php_source.html#l00326">wp-includes/theme.php:326</a></div></div>
<div class="ttc" id="form__list_8php_html_a75c7d6fef8f2fc1b14944df043dd5690"><div class="ttname"><a href="form__list_8php.html#a75c7d6fef8f2fc1b14944df043dd5690">label</a></div><div class="ttdeci">gf_new_form_modal_container setting row label</div><div class="ttdef"><b>Definition:</b> <a href="form__list_8php_source.html#l00153">form_list.php:153</a></div></div>
<div class="ttc" id="functions_8wp-styles_8php_html_a5877de47bfb773d66a3534674f900882"><div class="ttname"><a href="functions_8wp-styles_8php.html#a5877de47bfb773d66a3534674f900882">wp_enqueue_style</a></div><div class="ttdeci">wp_enqueue_style($handle, $src=false, $deps=array(), $ver=false, $media= 'all')</div><div class="ttdoc">Enqueue a CSS stylesheet. </div><div class="ttdef"><b>Definition:</b> <a href="functions_8wp-styles_8php_source.html#l00155">functions.wp-styles.php:155</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a46b3622ccc6d393dfd97e355b7bd0bd6"><div class="ttname"><a href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv' null</div><div class="ttdoc">When displaying the single entry we should always know to which View it belongs (the context is every...</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00244">edit-form-advanced.php:244</a></div></div>
<div class="ttc" id="namespacechange_html"><div class="ttname"><a href="namespacechange.html">change</a></div></div>
<div class="ttc" id="noop_8php_html_a0cf0f358a47f49ebdba78be2ed10a41c"><div class="ttname"><a href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a></div><div class="ttdeci">esc_attr()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00021">noop.php:21</a></div></div>
<div class="ttc" id="wp-includes_2theme_8php_html_a20e8d2b5ee7de6a42990d6e4cdc3c592"><div class="ttname"><a href="wp-includes_2theme_8php.html#a20e8d2b5ee7de6a42990d6e4cdc3c592">get_stylesheet_directory_uri</a></div><div class="ttdeci">get_stylesheet_directory_uri()</div><div class="ttdoc">Retrieve stylesheet directory URI. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2theme_8php_source.html#l00194">wp-includes/theme.php:194</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a19ca3de195fb9681c67da43fb94b1d96"><div class="ttname"><a href="class_custom___image___header.html#a19ca3de195fb9681c67da43fb94b1d96">Custom_Image_Header\get_uploaded_header_images</a></div><div class="ttdeci">get_uploaded_header_images()</div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l01334">wp-admin/custom-header.php:1334</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_ad7133b9d8edf539917094b657f8c701e"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#ad7133b9d8edf539917094b657f8c701e">wp_check_filetype_and_ext</a></div><div class="ttdeci">wp_check_filetype_and_ext($file, $filename, $mimes=null)</div><div class="ttdoc">Attempt to determine the real file type of a file. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l02197">wordpress/wp-includes/functions.php:2197</a></div></div>
<div class="ttc" id="general-template_8php_html_a6dc0ecb299e67b1f45caa067789d86e8"><div class="ttname"><a href="general-template_8php.html#a6dc0ecb299e67b1f45caa067789d86e8">bloginfo</a></div><div class="ttdeci">bloginfo($show='')</div><div class="ttdoc">Display information about the blog. </div><div class="ttdef"><b>Definition:</b> <a href="general-template_8php_source.html#l00597">general-template.php:597</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a8c68cd3f12f49fdc81f73f17192bb825"><div class="ttname"><a href="class_custom___image___header.html#a8c68cd3f12f49fdc81f73f17192bb825">Custom_Image_Header\step</a></div><div class="ttdeci">step()</div><div class="ttdoc">Get the current step. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00139">wp-admin/custom-header.php:139</a></div></div>
<div class="ttc" id="class_custom___image___header_html_aab8905692893ee20a236980679e91684"><div class="ttname"><a href="class_custom___image___header.html#aab8905692893ee20a236980679e91684">Custom_Image_Header\step_1</a></div><div class="ttdeci">step_1()</div><div class="ttdoc">Display first step of custom header image page. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00451">wp-admin/custom-header.php:451</a></div></div>
<div class="ttc" id="noop_8php_html_a01815a0502df2442bbb063f4055c2194"><div class="ttname"><a href="noop_8php.html#a01815a0502df2442bbb063f4055c2194">admin_url</a></div><div class="ttdeci">admin_url()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00071">noop.php:71</a></div></div>
<div class="ttc" id="wp-includes_2theme_8php_html_a8d30b9b4ad3eb2ba7b85d1b91a1688af"><div class="ttname"><a href="wp-includes_2theme_8php.html#a8d30b9b4ad3eb2ba7b85d1b91a1688af">is_random_header_image</a></div><div class="ttdeci">is_random_header_image($type= 'any')</div><div class="ttdoc">Check if random header image is in use. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2theme_8php_source.html#l01160">wp-includes/theme.php:1160</a></div></div>
<div class="ttc" id="class_custom___image___header_html_ac8f270a0f690e191178aac812f262ea3"><div class="ttname"><a href="class_custom___image___header.html#ac8f270a0f690e191178aac812f262ea3">Custom_Image_Header\admin_page</a></div><div class="ttdeci">admin_page()</div><div class="ttdoc">Display the page based on the current step. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00935">wp-admin/custom-header.php:935</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a4be4055f3361d4800e16bc2e2e38cda6"><div class="ttname"><a href="class_custom___image___header.html#a4be4055f3361d4800e16bc2e2e38cda6">Custom_Image_Header\init</a></div><div class="ttdeci">init()</div><div class="ttdoc">Set up the hooks for the Custom Header admin page. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00076">wp-admin/custom-header.php:76</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a716e6d165f72c602db1cd5a7b4698f4d"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a716e6d165f72c602db1cd5a7b4698f4d">wp_delete_file</a></div><div class="ttdeci">wp_delete_file($file)</div><div class="ttdoc">Delete a file. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l05132">wordpress/wp-includes/functions.php:5132</a></div></div>
<div class="ttc" id="namespacephp_html"><div class="ttname"><a href="namespacephp.html">php</a></div></div>
<div class="ttc" id="wp-includes_2media_8php_html_a2cbdb038003b470c797affd8a91592ad"><div class="ttname"><a href="wp-includes_2media_8php.html#a2cbdb038003b470c797affd8a91592ad">wp_enqueue_media</a></div><div class="ttdeci">wp_enqueue_media($args=array())</div><div class="ttdoc">Enqueues all scripts, styles, settings, and templates necessary to use all media JS APIs...</div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2media_8php_source.html#l03216">wp-includes/media.php:3216</a></div></div>
<div class="ttc" id="namespacehref_html"><div class="ttname"><a href="namespacehref.html">href</a></div></div>
<div class="ttc" id="site-info_8php_html_ab6ac9b33076d715d3f1376b426e25da0"><div class="ttname"><a href="site-info_8php.html#ab6ac9b33076d715d3f1376b426e25da0">$tabs</a></div><div class="ttdeci">$tabs</div><div class="ttdef"><b>Definition:</b> <a href="site-info_8php_source.html#l00143">site-info.php:143</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a31630d393a942cb3cc99f7d3a1160736"><div class="ttname"><a href="class_custom___image___header.html#a31630d393a942cb3cc99f7d3a1160736">Custom_Image_Header\$default_headers</a></div><div class="ttdeci">$default_headers</div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00041">wp-admin/custom-header.php:41</a></div></div>
<div class="ttc" id="class_custom___image___header_html_a91482c4db18186b33acbaf1528a50ddc"><div class="ttname"><a href="class_custom___image___header.html#a91482c4db18186b33acbaf1528a50ddc">Custom_Image_Header\help</a></div><div class="ttdeci">help()</div><div class="ttdoc">Adds contextual help. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00097">wp-admin/custom-header.php:97</a></div></div>
<div class="ttc" id="namespacebutton_html"><div class="ttname"><a href="namespacebutton.html">button</a></div></div>
<div class="ttc" id="link-template_8php_html_ad641ec50e77cc407a60569240c4b7d07"><div class="ttname"><a href="link-template_8php.html#ad641ec50e77cc407a60569240c4b7d07">set_url_scheme</a></div><div class="ttdeci">set_url_scheme($url, $scheme=null)</div><div class="ttdoc">Sets the scheme for a URL. </div><div class="ttdef"><b>Definition:</b> <a href="link-template_8php_source.html#l03383">link-template.php:3383</a></div></div>
<div class="ttc" id="wp-includes_2theme_8php_html_ad614e6c66f3f9623fef2bf3d738dcb27"><div class="ttname"><a href="wp-includes_2theme_8php.html#ad614e6c66f3f9623fef2bf3d738dcb27">remove_theme_mod</a></div><div class="ttdeci">remove_theme_mod($name)</div><div class="ttdoc">Remove theme modification name from current theme list. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2theme_8php_source.html#l00917">wp-includes/theme.php:917</a></div></div>
<div class="ttc" id="class_custom___image___header_html_ad8363e6502b032f93f7e1582b8ff05ff"><div class="ttname"><a href="class_custom___image___header.html#ad8363e6502b032f93f7e1582b8ff05ff">Custom_Image_Header\ajax_header_add</a></div><div class="ttdeci">ajax_header_add()</div><div class="ttdoc">Given an attachment ID for a header image, updates its "last used" timestamp to now. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l01229">wp-admin/custom-header.php:1229</a></div></div>
<div class="ttc" id="wp-includes_2theme_8php_html_a4d6498454d40a2c245452c1ba2b4ef59"><div class="ttname"><a href="wp-includes_2theme_8php.html#a4d6498454d40a2c245452c1ba2b4ef59">set_theme_mod</a></div><div class="ttdeci">set_theme_mod($name, $value)</div><div class="ttdoc">Update theme modification value for the current theme. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2theme_8php_source.html#l00885">wp-includes/theme.php:885</a></div></div>
<div class="ttc" id="class_custom___image___header_html_ac8cde79ff301b51093133a64ecd45f65"><div class="ttname"><a href="class_custom___image___header.html#ac8cde79ff301b51093133a64ecd45f65">Custom_Image_Header\step_2</a></div><div class="ttdeci">step_2()</div><div class="ttdoc">Display second step of custom header image page. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2custom-header_8php_source.html#l00690">wp-admin/custom-header.php:690</a></div></div>
<div class="ttc" id="wp-includes_2theme_8php_html_a416f43d1d80d3efb22d75961f1b585a3"><div class="ttname"><a href="wp-includes_2theme_8php.html#a416f43d1d80d3efb22d75961f1b585a3">current_theme_supports</a></div><div class="ttdeci">current_theme_supports($feature)</div><div class="ttdoc">Checks a theme&#39;s support for a given feature. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2theme_8php_source.html#l01842">wp-includes/theme.php:1842</a></div></div>
<div class="ttc" id="options-discussion_8php_html_a9df479534ecf05fd7575c6275d381687"><div class="ttname"><a href="options-discussion_8php.html#a9df479534ecf05fd7575c6275d381687">$default</a></div><div class="ttdeci">$default</div><div class="ttdef"><b>Definition:</b> <a href="options-discussion_8php_source.html#l00242">options-discussion.php:242</a></div></div>
<div class="ttc" id="namespacetype_html"><div class="ttname"><a href="namespacetype.html">type</a></div></div>
<div class="ttc" id="site-info_8php_html_a7112f7e99b579c61b7e3040a9d7cff66"><div class="ttname"><a href="site-info_8php.html#a7112f7e99b579c61b7e3040a9d7cff66">$details</a></div><div class="ttdeci">if(!$id) $details</div><div class="ttdef"><b>Definition:</b> <a href="site-info_8php_source.html#l00044">site-info.php:44</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a866e7f0f003101850a78f372dd07bd2a"><div class="ttname"><a href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv'foreach(get_object_taxonomies($post) as $tax_name) if($thumbnail_support &amp;&amp;current_user_can( 'upload_files')) add_meta_box('postimagediv'if(post_type_supports($post_type, 'excerpt')) add_meta_box('postexcerpt' __('Excerpt')</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00269">edit-form-advanced.php:269</a></div></div>
<div class="ttc" id="wp-includes_2theme_8php_html_a6d9dd71b2ef87985d6a908cdcbf99f9a"><div class="ttname"><a href="wp-includes_2theme_8php.html#a6d9dd71b2ef87985d6a908cdcbf99f9a">get_stylesheet</a></div><div class="ttdeci">get_stylesheet()</div><div class="ttdoc">Retrieve name of the current stylesheet. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2theme_8php_source.html#l00152">wp-includes/theme.php:152</a></div></div>
<div class="ttc" id="capabilities_8php_html_a3cea61656956bc24826e04276a5847fc"><div class="ttname"><a href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a></div><div class="ttdeci">current_user_can($capability)</div><div class="ttdoc">Whether the current user has a specific capability. </div><div class="ttdef"><b>Definition:</b> <a href="capabilities_8php_source.html#l00423">capabilities.php:423</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/>
<script type="text/javascript">
    jQuery( document ).ready( function( $ ) {
        $( 'a.anchor[id^=_filters],a.anchor[id^=_actions]' ).each( function() {
            $( this )
                .text('#')
                .attr( 'href', function() {
                    return '#' + $( this ).attr( 'id' );
                }).prependTo( $( this ).parent('dt' ).next('dd') );
        });
    });
</script>
</body>
</html>
