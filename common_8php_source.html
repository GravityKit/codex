<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>GravityView: common.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom-doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GravityView
   &#160;<span id="projectnumber">1.16.1</span>
   </div>
   <div id="projectbrief">Beautifully display your Gravity Forms data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_f202f45fd139109afdc6cee542e9540d.html">tmp</a></li><li class="navelem"><a class="el" href="dir_3d569d22f974606bd3e53ee7510e95b5.html">gravityforms</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">common.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="common_8php.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keywordflow">if</span> ( ! class_exists( <span class="stringliteral">&#39;GFForms&#39;</span> ) ) {</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    die();</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;}</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">class </span>GFCommon {</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    <span class="comment">// deprecated; set to GFForms::$version in GFForms::init() for backwards compat</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> $version = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> $tab_index = 1;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a> = array();</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="edit-form-advanced_8php.html#a21a183f927a6d243fe6b4ba3a6c4d4c8">$messages</a> = array();</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_selection_fields( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $selected_field_id ) {</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;        $str = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;        <span class="keywordflow">foreach</span> ( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;fields&#39;</span>] as <a class="code" href="gquiz__grade_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a> ) {</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;            $input_type  = <a class="code" href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">RGFormsModel::get_input_type</a>( $field );</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;            $field_label = <a class="code" href="class_g_f_forms_model.html#af9834bca98d5f60922e9e816d6c8cfe5">RGFormsModel::get_label</a>( $field );</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;            <span class="keywordflow">if</span> ( $input_type == <span class="stringliteral">&#39;checkbox&#39;</span> || $input_type == <span class="stringliteral">&#39;radio&#39;</span> || $input_type == <span class="stringliteral">&#39;select&#39;</span> ) {</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;                $selected = $field-&gt;id == $selected_field_id ? <span class="stringliteral">&quot;selected=&#39;selected&#39;&quot;</span> : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;                $str .= <span class="stringliteral">&quot;&lt;option value=&#39;&quot;</span> . $field-&gt;id . <span class="stringliteral">&quot;&#39; &quot;</span> . $selected . <span class="charliteral">&#39;&gt;&#39;</span> . $field_label . <span class="stringliteral">&#39;&lt;/option&gt;&#39;</span>;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;            }</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        }</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        <span class="keywordflow">return</span> $str;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    }</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_numeric( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, $number_format = <span class="stringliteral">&#39;&#39;</span> ) {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        <span class="keywordflow">if</span> ( $number_format == <span class="stringliteral">&#39;currency&#39;</span> ) {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;            $number_format = self::is_currency_decimal_dot() ? <span class="stringliteral">&#39;decimal_dot&#39;</span> : <span class="stringliteral">&#39;decimal_comma&#39;</span>;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;            <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>         = self::remove_currency_symbol( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        }</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        <span class="keywordflow">switch</span> ( $number_format ) {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;decimal_dot&#39;</span> :</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                <span class="keywordflow">return</span> preg_match( <span class="stringliteral">&quot;/^(-?[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]+)?)$/&quot;</span>, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;decimal_comma&#39;</span> :</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                <span class="keywordflow">return</span> preg_match( <span class="stringliteral">&quot;/^(-?[0-9]{1,3}(?:\.?[0-9]{3})*(?:,[0-9]+)?)$/&quot;</span>, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            <span class="keywordflow">default</span> :</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                <span class="keywordflow">return</span> preg_match( <span class="stringliteral">&quot;/^(-?[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]{2})?)$/&quot;</span>, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) || preg_match( <span class="stringliteral">&quot;/^(-?[0-9]{1,3}(?:\.?[0-9]{3})*(?:,[0-9]{2})?)$/&quot;</span>, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        }</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    }</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> remove_currency_symbol( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, $currency = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keywordflow">if</span> ( $currency == <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            $code = GFCommon::get_currency();</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;            <span class="keywordflow">if</span> ( empty( $code ) ) {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                $code = <span class="stringliteral">&#39;USD&#39;</span>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            $currency = RGCurrency::get_currency( $code );</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        }</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( $currency[<span class="stringliteral">&#39;symbol_left&#39;</span>], <span class="stringliteral">&#39;&#39;</span>, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( $currency[<span class="stringliteral">&#39;symbol_right&#39;</span>], <span class="stringliteral">&#39;&#39;</span>, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="comment">//some symbols can&#39;t be easily matched up, so this will catch any of them</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = preg_replace( <span class="stringliteral">&#39;/[^,.\d]/&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_currency_decimal_dot( $currency = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keywordflow">if</span> ( $currency == <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            $code = GFCommon::get_currency();</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            <span class="keywordflow">if</span> ( empty( $code ) ) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                $code = <span class="stringliteral">&#39;USD&#39;</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            $currency = RGCurrency::get_currency( $code );</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keywordflow">return</span> rgar( $currency, <span class="stringliteral">&#39;decimal_separator&#39;</span> ) == <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> trim_all( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> ) {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = trim( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            $prev_text = <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>      = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="stringliteral">&#39;  &#39;</span>, <span class="charliteral">&#39; &#39;</span>, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        } <span class="keywordflow">while</span> ( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> != $prev_text );</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> format_number( $number, $number_format, $currency = <span class="stringliteral">&#39;&#39;</span>, $include_thousands_sep = <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">if</span> ( ! is_numeric( $number ) ) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <span class="keywordflow">return</span> $number;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="comment">//replacing commas with dots and dots with commas</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">if</span> ( $number_format == <span class="stringliteral">&#39;currency&#39;</span> ) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <span class="keywordflow">if</span> ( empty( $currency ) ) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                $currency = GFCommon::get_currency();</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            <span class="keywordflow">if</span> ( <span class="keyword">false</span> === class_exists( <span class="stringliteral">&#39;RGCurrency&#39;</span> ) ) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                require_once( GFCommon::get_base_path() . <span class="stringliteral">&#39;/currency.php&#39;</span> );</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            $currency = <span class="keyword">new</span> RGCurrency( $currency );</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            $number   = $currency-&gt;to_money( $number );</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="keywordflow">if</span> ( $number_format == <span class="stringliteral">&#39;decimal_comma&#39;</span> ) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                $dec_point     = <span class="charliteral">&#39;,&#39;</span>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                $thousands_sep = $include_thousands_sep ? <span class="charliteral">&#39;.&#39;</span> : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                $dec_point     = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                $thousands_sep = $include_thousands_sep ? <span class="charliteral">&#39;,&#39;</span> : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            $is_negative = $number &lt; 0;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            $number    = explode( <span class="charliteral">&#39;.&#39;</span>, $number );</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            $number[0] = number_format( <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $number[0] ), 0, <span class="stringliteral">&#39;&#39;</span>, $thousands_sep );</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            $number    = implode( $dec_point, $number );</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordflow">if</span> ( $is_negative ) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                $number = <span class="charliteral">&#39;-&#39;</span> . $number;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">return</span> $number;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> recursive_add_index_file( <a class="code" href="form__list_8php.html#a1659f0a629d408e0f849dbe4ee061e62">$dir</a> ) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">if</span> ( ! is_dir( <a class="code" href="form__list_8php.html#a1659f0a629d408e0f849dbe4ee061e62">$dir</a> ) || is_link( <a class="code" href="form__list_8php.html#a1659f0a629d408e0f849dbe4ee061e62">$dir</a> ) ) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">if</span> ( ! ( $dp = opendir( <a class="code" href="form__list_8php.html#a1659f0a629d408e0f849dbe4ee061e62">$dir</a> ) ) ) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="comment">//ignores all errors</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        set_error_handler( create_function( <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;return 0;&#39;</span> ), E_ALL );</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="comment">//creates an empty index.html file</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">if</span> ( $f = fopen( <a class="code" href="form__list_8php.html#a1659f0a629d408e0f849dbe4ee061e62">$dir</a> . <span class="stringliteral">&#39;/index.html&#39;</span>, <span class="charliteral">&#39;w&#39;</span> ) ) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            fclose( $f );</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="comment">//restores error handler</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        restore_error_handler();</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">while</span> ( ( <span class="keyword">false</span> !== <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> = readdir( $dp ) ) ) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <span class="keywordflow">if</span> ( is_dir( <span class="stringliteral">&quot;$dir/$file&quot;</span> ) &amp;&amp; <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> != <span class="charliteral">&#39;.&#39;</span> &amp;&amp; <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> != <span class="stringliteral">&#39;..&#39;</span> ) {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                self::recursive_add_index_file( <span class="stringliteral">&quot;$dir/$file&quot;</span> );</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        closedir( $dp );</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> add_htaccess_file(){</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        $upload_root = <a class="code" href="class_g_f_forms_model.html#a2ad1e7c420ebf796263ca970742f7e8f">GFFormsModel::get_upload_root</a>();</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">if</span> ( ! is_dir( $upload_root ) ) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        $htaccess_file = $upload_root . <span class="stringliteral">&#39;/.htaccess&#39;</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">if</span> ( file_exists( $htaccess_file ) ) {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            unlink($htaccess_file);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        $txt= <span class="stringliteral">&#39;# Disable parsing of PHP for some server configurations. This file may be removed or modified on certain server configurations by using by the gform_upload_root_htaccess_rules filter. Please consult your system administrator before removing this file.</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="stringliteral">&lt;Files *&gt;</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="stringliteral">  SetHandler none</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="stringliteral">  SetHandler default-handler</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="stringliteral">  Options -ExecCGI</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="stringliteral">  RemoveHandler .cgi .php .php3 .php4 .php5 .phtml .pl .py .pyc .pyo</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="stringliteral">&lt;/Files&gt;</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="stringliteral">&lt;IfModule mod_php5.c&gt;</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="stringliteral">  php_flag engine off</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="stringliteral">&lt;/IfModule&gt;&#39;</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        $rules = explode( <span class="stringliteral">&quot;\n&quot;</span>, $txt );</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">        /**</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">         * A filter to allow the modification/disabling of parsing certain PHP within Gravity Forms</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">         * @param mixed $rules The Rules of what to parse or not to parse</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        $rules = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_upload_root_htaccess_rules&#39;</span>, $rules );</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $rules ) ) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordflow">if</span> ( ! function_exists( <span class="stringliteral">&#39;insert_with_markers&#39;</span> ) ) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                require_once( <a class="code" href="load-scripts_8php.html#a495f94983b95273ad267511b2411351f">ABSPATH</a> . <span class="stringliteral">&#39;wp-admin/includes/misc.php&#39;</span> );</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <a class="code" href="wp-admin_2includes_2misc_8php.html#ab7ae06a1286467d316308a676d8be0aa">insert_with_markers</a>( $htaccess_file, <span class="stringliteral">&#39;Gravity Forms&#39;</span>, $rules );</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> clean_number( $number, $number_format = <span class="stringliteral">&#39;&#39;</span> ) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">if</span> ( rgblank( $number ) ) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <span class="keywordflow">return</span> $number;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        $decimal_char = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">if</span> ( $number_format == <span class="stringliteral">&#39;decimal_dot&#39;</span> ) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            $decimal_char = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( $number_format == <span class="stringliteral">&#39;decimal_comma&#39;</span> ) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            $decimal_char = <span class="charliteral">&#39;,&#39;</span>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        $float_number = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        $clean_number = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        $is_negative  = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="comment">//Removing all non-numeric characters</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        $array = str_split( $number );</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordflow">foreach</span> ( $array as $char ) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">if</span> ( ( $char &gt;= <span class="charliteral">&#39;0&#39;</span> &amp;&amp; $char &lt;= <span class="charliteral">&#39;9&#39;</span> ) || $char == <span class="charliteral">&#39;,&#39;</span> || $char == <span class="charliteral">&#39;.&#39;</span> ) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                $clean_number .= $char;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( $char == <span class="charliteral">&#39;-&#39;</span> ) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                $is_negative = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="comment">//Removing thousand separators but keeping decimal point</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        $array = str_split( $clean_number );</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="keywordflow">for</span> ( <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> = 0, <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a> = <span class="keyword">sizeof</span>( $array ); <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> &lt; <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a>; <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> ++ ) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            $char = $array[ <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> ];</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <span class="keywordflow">if</span> ( $char &gt;= <span class="charliteral">&#39;0&#39;</span> &amp;&amp; $char &lt;= <span class="charliteral">&#39;9&#39;</span> ) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                $float_number .= $char;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( empty( $decimal_char ) &amp;&amp; ( $char == <span class="charliteral">&#39;.&#39;</span> || $char == <span class="charliteral">&#39;,&#39;</span> ) &amp;&amp; strlen( $clean_number ) - <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> &lt;= 3 ) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                $float_number .= <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( $decimal_char == $char ) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                $float_number .= <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">if</span> ( $is_negative ) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            $float_number = <span class="charliteral">&#39;-&#39;</span> . $float_number;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">return</span> $float_number;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> json_encode( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">return</span> json_encode( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> json_decode( $str, $is_assoc = <span class="keyword">true</span> ) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">return</span> json_decode( $str, $is_assoc );</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">//Returns the url of the plugin&#39;s root folder</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_base_url() {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="link-template_8php.html#ac0255d51aa5c70acc2870e2a8b345fe6">plugins_url</a>( <span class="stringliteral">&#39;&#39;</span>, __FILE__ );</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="comment">//Returns the physical path of the plugin&#39;s root folder</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_base_path() {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">return</span> dirname( __FILE__ );</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_email_fields( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> ) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        $fields = array();</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">foreach</span> ( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;fields&#39;</span>] as $field ) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">if</span> ( $field-&gt;type == <span class="stringliteral">&#39;email&#39;</span> || $field-&gt;inputType == <span class="stringliteral">&#39;email&#39;</span> ) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                $fields[] = <a class="code" href="gquiz__grade_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">return</span> $fields;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> truncate_middle( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $max_length ) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordflow">if</span> ( strlen( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> ) &lt;= $max_length ) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        $middle = intval( $max_length / 2 );</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">return</span> self::safe_substr( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, 0, $middle ) . <span class="stringliteral">&#39;...&#39;</span> . self::safe_substr( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, strlen( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> ) - $middle, $middle );</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_invalid_or_empty_email( $email ) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">return</span> empty( $email ) || ! self::is_valid_email( $email );</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_valid_url( <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> ) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> = trim( <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> );</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keywordflow">return</span> ( ( strpos( <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a>, <span class="stringliteral">&#39;http://&#39;</span> ) === 0 || strpos( <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a>, <span class="stringliteral">&#39;https://&#39;</span> ) === 0 ) &amp;&amp;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            filter_var( <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a>, FILTER_VALIDATE_URL ) !== <span class="keyword">false</span> );</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_valid_email( $email ) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordflow">return</span> filter_var( $email, FILTER_VALIDATE_EMAIL );</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_valid_email_list( $email_list ) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        $emails = explode( <span class="charliteral">&#39;,&#39;</span>, $email_list );</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">if</span> ( ! is_array( $emails ) ){</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">foreach</span>( $emails as $email ){</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            <span class="keywordflow">if</span> ( ! filter_var( $email, FILTER_VALIDATE_EMAIL ) ) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_label( $field, $input_id = 0, $input_only = <span class="keyword">false</span>, $allow_admin_label = <span class="keyword">true</span> ) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_g_f_forms_model.html#af9834bca98d5f60922e9e816d6c8cfe5">RGFormsModel::get_label</a>( $field, $input_id, $input_only, $allow_admin_label );</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_input( $field, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_g_f_forms_model.html#a8330e4fa94939c998e6c018c3b173682">RGFormsModel::get_input</a>( $field, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> insert_variables( $fields, $element_id, $hide_all_fields = <span class="keyword">false</span>, $callback = <span class="stringliteral">&#39;&#39;</span>, $onchange = <span class="stringliteral">&#39;&#39;</span>, $max_label_size = 40, $exclude = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>, $args = <span class="stringliteral">&#39;&#39;</span>, $class_name = <span class="stringliteral">&#39;&#39;</span> ) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">if</span> ( $fields == <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            $fields = array();</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">if</span> ( $exclude == <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            $exclude = array();</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        $exclude    = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_merge_tag_list_exclude&#39;</span>, $exclude, $element_id, $fields );</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        $merge_tags = self::get_merge_tags( $fields, $element_id, $hide_all_fields, $exclude, $args );</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        $onchange = empty( $onchange ) ? <span class="stringliteral">&quot;InsertVariable(&#39;{$element_id}&#39;, &#39;{$callback}&#39;);&quot;</span> : $onchange;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <a class="code" href="table-body_8php.html#a252ba022809910ea710a068fc1bab657">$class</a>    = trim( $class_name . <span class="stringliteral">&#39; gform_merge_tags&#39;</span> );</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        ?&gt;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        &lt;select <span class="keywordtype">id</span>=<span class="stringliteral">&quot;&lt;?php echo esc_attr( $element_id ); ?&gt;_variable_select&quot;</span> onchange=<span class="stringliteral">&quot;&lt;?php echo $onchange ?&gt;&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;&lt;?php echo esc_attr( $class ) ?&gt;&quot;</span>&gt;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            &lt;option value=<span class="stringliteral">&#39;&#39;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Insert Merge Tag&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ); ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            &lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">foreach</span> ( $merge_tags as $group =&gt; $group_tags ) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                $group_label = rgar( $group_tags, <span class="stringliteral">&#39;label&#39;</span> );</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <a class="code" href="tools_8php.html#a475a6a63b85186663d34151bcbd21590">$tags</a>        = rgar( $group_tags, <span class="stringliteral">&#39;tags&#39;</span> );</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                <span class="keywordflow">if</span> ( empty( $group_tags[<span class="stringliteral">&#39;tags&#39;</span>] ) ) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                <span class="keywordflow">if</span> ( $group_label ) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                    ?&gt;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                    &lt;optgroup <a class="code" href="form__list_8php.html#a75c7d6fef8f2fc1b14944df043dd5690">label</a>=<span class="stringliteral">&quot;&lt;?php echo $group_label; ?&gt;&quot;</span>&gt;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                &lt;?<a class="code" href="namespacephp.html">php</a> } ?&gt;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                &lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">foreach</span> ( <a class="code" href="tools_8php.html#a475a6a63b85186663d34151bcbd21590">$tags</a> as $tag ) { ?&gt;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                    &lt;option value=<span class="stringliteral">&quot;&lt;?php echo $tag[&#39;tag&#39;]; ?&gt;&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> echo $tag[<span class="stringliteral">&#39;label&#39;</span>]; ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                <span class="keywordflow">if</span> ( $group_label ) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                    ?&gt;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                    &lt;/optgroup&gt;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            } ?&gt;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        &lt;/select&gt;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">     * This function is used by the gfMergeTags JS object to get the localized label for non-field merge tags as well as</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">     * for backwards compatibility with the gform_custom_merge_tags hook. Lastly, this plugin is used by the soon-to-be</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">     * deprecated insert_variables() function as the new gfMergeTags object has not yet been applied to the Post Content</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">     * Template setting.</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">     * @param GF_Field[] $fields</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">     * @param            $element_id</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">     * @param bool       $hide_all_fields</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">     * @param array      $exclude_field_types</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">     * @param string     $option</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">     * @return array</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_merge_tags( $fields, $element_id, $hide_all_fields = <span class="keyword">false</span>, $exclude_field_types = array(), <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a> = <span class="stringliteral">&#39;&#39;</span> ) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">if</span> ( $fields == <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            $fields = array();</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keywordflow">if</span> ( $exclude_field_types == <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            $exclude_field_types = array();</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        $required_fields = $optional_fields = $pricing_fields = array();</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        $ungrouped       = $required_group = $optional_group = $pricing_group = $other_group = array();</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keywordflow">if</span> ( ! $hide_all_fields ) {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            $ungrouped[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{all_fields}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;All Submitted Fields&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="comment">// group fields by required, optional, and pricing</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keywordflow">foreach</span> ( $fields as $field ) {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <span class="keywordflow">if</span> ( $field-&gt;displayOnly ) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            $input_type = <a class="code" href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">RGFormsModel::get_input_type</a>( $field );</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <span class="comment">// skip field types that should be excluded</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            <span class="keywordflow">if</span> ( is_array( $exclude_field_types ) &amp;&amp; in_array( $input_type, $exclude_field_types ) ) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <span class="keywordflow">if</span> ( $field-&gt;isRequired ) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                <span class="keywordflow">switch</span> ( $input_type ) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&#39;name&#39;</span> :</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                        <span class="keywordflow">if</span> ( $field-&gt;nameFormat == <span class="stringliteral">&#39;extended&#39;</span> ) {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                            <a class="code" href="options-permalink_8php.html#a09e8cf95b9d29955a0bfabca9b420edc">$prefix</a>                   = GFCommon::get_input( $field, $field-&gt;id . <span class="stringliteral">&#39;.2&#39;</span> );</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                            $suffix                   = GFCommon::get_input( $field, $field-&gt;id . <span class="stringliteral">&#39;.8&#39;</span> );</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                            $optional_field           = <a class="code" href="gquiz__grade_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                            $optional_field[<span class="stringliteral">&#39;inputs&#39;</span>] = array( <a class="code" href="options-permalink_8php.html#a09e8cf95b9d29955a0bfabca9b420edc">$prefix</a>, $suffix );</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                            <span class="comment">//Add optional name fields to the optional list</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                            $optional_fields[] = $optional_field;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                            <span class="comment">//Remove optional name field from required list</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                            unset( $field-&gt;inputs[0] );</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                            unset( $field-&gt;inputs[3] );</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                        }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                        $required_fields[] = <a class="code" href="gquiz__grade_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                        $required_fields[] = <a class="code" href="gquiz__grade_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                $optional_fields[] = <a class="code" href="gquiz__grade_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <span class="keywordflow">if</span> ( self::is_pricing_field( $field-&gt;type ) ) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                $pricing_fields[] = <a class="code" href="gquiz__grade_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $required_fields ) ) {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="keywordflow">foreach</span> ( $required_fields as $field ) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                $required_group = array_merge( $required_group, self::get_field_merge_tags( $field, <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a> ) );</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $optional_fields ) ) {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="keywordflow">foreach</span> ( $optional_fields as $field ) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                $optional_group = array_merge( $optional_group, self::get_field_merge_tags( $field, <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a> ) );</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $pricing_fields ) ) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            <span class="keywordflow">if</span> ( ! $hide_all_fields ) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                $pricing_group[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{pricing_fields}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;All Pricing Fields&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <span class="keywordflow">foreach</span> ( $pricing_fields as $field ) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                $pricing_group = array_merge( $pricing_group, self::get_field_merge_tags( $field, <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a> ) );</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        $other_group[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{ip}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;User IP Address&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        $other_group[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{date_mdy}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Date&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) . <span class="stringliteral">&#39; (mm/dd/yyyy)&#39;</span> );</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        $other_group[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{date_dmy}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Date&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) . <span class="stringliteral">&#39; (dd/mm/yyyy)&#39;</span> );</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        $other_group[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{embed_post:ID}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Embed Post/Page Id&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        $other_group[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{embed_post:post_title}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Embed Post/Page Title&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        $other_group[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{embed_url}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Embed URL&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        $other_group[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{entry_id}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Entry Id&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        $other_group[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{entry_url}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Entry URL&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        $other_group[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{form_id}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Form Id&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        $other_group[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{form_title}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Form Title&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        $other_group[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{user_agent}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;HTTP User Agent&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        $other_group[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{referer}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;HTTP Referer URL&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">if</span> ( self::has_post_field( $fields ) ) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            $other_group[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{post_id}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Post Id&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            $other_group[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{post_edit_url}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Post Edit URL&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        $other_group[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{user:display_name}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;User Display Name&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        $other_group[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{user:user_email}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;User Email&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        $other_group[] = array( <span class="stringliteral">&#39;tag&#39;</span> =&gt; <span class="stringliteral">&#39;{user:user_login}&#39;</span>, <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;User Login&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <a class="code" href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a> = isset($fields[0]) ? $fields[0]-&gt;formId : 0;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        $custom_group = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_custom_merge_tags&#39;</span>, array(), <a class="code" href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a>, $fields, $element_id );</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        $merge_tags = array(</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            <span class="stringliteral">&#39;ungrouped&#39;</span> =&gt; array(</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                <span class="stringliteral">&#39;label&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                <span class="stringliteral">&#39;tags&#39;</span>  =&gt; $ungrouped,</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            ),</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="stringliteral">&#39;required&#39;</span>  =&gt; array(</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Required form fields&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                <span class="stringliteral">&#39;tags&#39;</span>  =&gt; $required_group,</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            ),</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <span class="stringliteral">&#39;optional&#39;</span>  =&gt; array(</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Optional form fields&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                <span class="stringliteral">&#39;tags&#39;</span>  =&gt; $optional_group,</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            ),</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            <span class="stringliteral">&#39;pricing&#39;</span>   =&gt; array(</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Pricing form fields&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                <span class="stringliteral">&#39;tags&#39;</span>  =&gt; $pricing_group,</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            ),</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <span class="stringliteral">&#39;other&#39;</span>     =&gt; array(</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Other&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                <span class="stringliteral">&#39;tags&#39;</span>  =&gt; $other_group,</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            ),</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <span class="stringliteral">&#39;custom&#39;</span>    =&gt; array(</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Custom&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                <span class="stringliteral">&#39;tags&#39;</span>  =&gt; $custom_group,</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            )</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        );</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="keywordflow">return</span> $merge_tags;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">     * @param GF_Field $field</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">     * @param string $option</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">     * @return string</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_field_merge_tags( $field, <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a> = <span class="stringliteral">&#39;&#39;</span> ) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        $merge_tags = array();</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        $tag_args   = <a class="code" href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">RGFormsModel::get_input_type</a>( $field ) == <span class="stringliteral">&#39;list&#39;</span> ? <span class="stringliteral">&quot;:{$option}&quot;</span> : <span class="stringliteral">&#39;&#39;</span>; <span class="comment">//args currently only supported by list field</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        $inputs = $field-&gt;get_entry_inputs();</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordflow">if</span> ( is_array( $inputs ) ) {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">RGFormsModel::get_input_type</a>( $field ) == <span class="stringliteral">&#39;checkbox&#39;</span> ) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>        = <span class="charliteral">&#39;{&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( GFCommon::get_label( $field, $field-&gt;id ) ) . <span class="charliteral">&#39;:&#39;</span> . $field-&gt;id . <span class="stringliteral">&quot;{$tag_args}}&quot;</span>;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                $merge_tags[] = array(</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                    <span class="stringliteral">&#39;tag&#39;</span>   =&gt; <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>,</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                    <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( GFCommon::get_label( $field, $field-&gt;id ) )</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                );</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            <span class="keywordflow">foreach</span> ( $field-&gt;inputs as $input ) {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">RGFormsModel::get_input_type</a>( $field ) == <span class="stringliteral">&#39;creditcard&#39;</span> ) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                    <span class="comment">//only include the credit card type (field_id.4) and number (field_id.1)</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                    <span class="keywordflow">if</span> ( $input[<span class="stringliteral">&#39;id&#39;</span>] == $field[<span class="stringliteral">&#39;id&#39;</span>] . <span class="stringliteral">&#39;.1&#39;</span> || $input[<span class="stringliteral">&#39;id&#39;</span>] == $field[<span class="stringliteral">&#39;id&#39;</span>] . <span class="stringliteral">&#39;.4&#39;</span> ) {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                        <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>        = <span class="charliteral">&#39;{&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( GFCommon::get_label( $field, $input[<span class="stringliteral">&#39;id&#39;</span>] ) ) . <span class="charliteral">&#39;:&#39;</span> . $input[<span class="stringliteral">&#39;id&#39;</span>] . <span class="stringliteral">&quot;{$tag_args}}&quot;</span>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                        $merge_tags[] = array(</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                            <span class="stringliteral">&#39;tag&#39;</span>   =&gt; <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>,</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                            <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( GFCommon::get_label( $field, $input[<span class="stringliteral">&#39;id&#39;</span>] ) )</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                        );</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                    }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                    <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>        = <span class="charliteral">&#39;{&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( GFCommon::get_label( $field, $input[<span class="stringliteral">&#39;id&#39;</span>] ) ) . <span class="charliteral">&#39;:&#39;</span> . $input[<span class="stringliteral">&#39;id&#39;</span>] . <span class="stringliteral">&quot;{$tag_args}}&quot;</span>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                    $merge_tags[] = array(</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                        <span class="stringliteral">&#39;tag&#39;</span>   =&gt; <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>,</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                        <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( GFCommon::get_label( $field, $input[<span class="stringliteral">&#39;id&#39;</span>] ) )</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                    );</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            }</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>        = <span class="charliteral">&#39;{&#39;</span> . <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( GFCommon::get_label( $field ) ) . <span class="charliteral">&#39;:&#39;</span> . $field-&gt;id . <span class="stringliteral">&quot;{$tag_args}}&quot;</span>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            $merge_tags[] = array(</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                <span class="stringliteral">&#39;tag&#39;</span>   =&gt; <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>,</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                <span class="stringliteral">&#39;label&#39;</span> =&gt; <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( GFCommon::get_label( $field ) )</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            );</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="keywordflow">return</span> $merge_tags;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> insert_field_variable( $field, $max_label_size = 40, $args = <span class="stringliteral">&#39;&#39;</span> ) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        $tag_args = <a class="code" href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">RGFormsModel::get_input_type</a>( $field ) == <span class="stringliteral">&#39;list&#39;</span> ? <span class="stringliteral">&quot;:{$args}&quot;</span> : <span class="stringliteral">&#39;&#39;</span>; <span class="comment">//args currently only supported by list field</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="keywordflow">if</span> ( is_array( $field-&gt;inputs ) ) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">RGFormsModel::get_input_type</a>( $field ) == <span class="stringliteral">&#39;checkbox&#39;</span> ) {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                ?&gt;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                &lt;option value=<span class="stringliteral">&#39;&lt;?php echo &#39;</span>{<span class="stringliteral">&#39; . esc_html( GFCommon::get_label( $field, $field-&gt;id ) ) . &#39;</span>:<span class="stringliteral">&#39; . $field-&gt;id . &quot;{$tag_args}}&quot; ?&gt;&#39;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> echo <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( GFCommon::get_label( $field, $field-&gt;id ) ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            }</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            <span class="keywordflow">foreach</span> ( $field-&gt;inputs as $input ) {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                ?&gt;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                &lt;option value=<span class="stringliteral">&#39;&lt;?php echo &#39;</span>{<span class="stringliteral">&#39; . esc_html( GFCommon::get_label( $field, $input[&#39;</span><span class="keywordtype">id</span><span class="stringliteral">&#39;] ) ) . &#39;</span>:<span class="stringliteral">&#39; . $input[&#39;</span><span class="keywordtype">id</span><span class="stringliteral">&#39;] . &quot;{$tag_args}}&quot; ?&gt;&#39;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> echo <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( GFCommon::get_label( $field, $input[<span class="stringliteral">&#39;id&#39;</span>] ) ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            }</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            ?&gt;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            &lt;option value=<span class="stringliteral">&#39;&lt;?php echo &#39;</span>{<span class="stringliteral">&#39; . esc_html( GFCommon::get_label( $field ) ) . &#39;</span>:<span class="stringliteral">&#39; . $field-&gt;id . &quot;{$tag_args}}&quot; ?&gt;&#39;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> echo <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( GFCommon::get_label( $field ) ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    }</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> insert_post_content_variables( $fields, $element_id, $callback, $max_label_size = 25 ) {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="comment">// TODO: replace with class-powered merge tags</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        $insert_variables_onchange = sprintf( <span class="stringliteral">&quot;InsertPostContentVariable(&#39;%s&#39;, &#39;%s&#39;);&quot;</span>, <a class="code" href="formatting_8php.html#a0fe22f477c9eafcf9d3805461f249393">esc_js</a>( $element_id ), <a class="code" href="formatting_8php.html#a0fe22f477c9eafcf9d3805461f249393">esc_js</a>( $callback ) );</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        self::insert_variables( $fields, $element_id, <span class="keyword">true</span>, <span class="stringliteral">&#39;&#39;</span>, $insert_variables_onchange, $max_label_size, <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>, <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;gform_content_template_merge_tags&#39;</span> );</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        ?&gt;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        &amp;nbsp;&amp;nbsp;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        &lt;select <span class="keywordtype">id</span>=<span class="stringliteral">&quot;&lt;?php echo $element_id ?&gt;_image_size_select&quot;</span> onchange=<span class="stringliteral">&quot;InsertPostImageVariable(&#39;&lt;?php echo esc_js( $element_id ); ?&gt;&#39;, &#39;&lt;?php echo esc_js( $element_id ); ?&gt;&#39;); SetCustomFieldTemplate();&quot;</span> style=<span class="stringliteral">&quot;display:none;&quot;</span>&gt;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            &lt;option value=<span class="stringliteral">&quot;&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Select image size&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            &lt;option value=<span class="stringliteral">&quot;thumbnail&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Thumbnail&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            &lt;option value=<span class="stringliteral">&quot;thumbnail:left&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Thumbnail - Left Aligned&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            &lt;option value=<span class="stringliteral">&quot;thumbnail:center&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Thumbnail - Centered&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            &lt;option value=<span class="stringliteral">&quot;thumbnail:right&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Thumbnail - Right Aligned&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            &lt;option value=<span class="stringliteral">&quot;medium&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Medium&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            &lt;option value=<span class="stringliteral">&quot;medium:left&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Medium - Left Aligned&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            &lt;option value=<span class="stringliteral">&quot;medium:center&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Medium - Centered&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            &lt;option value=<span class="stringliteral">&quot;medium:right&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Medium - Right Aligned&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            &lt;option value=<span class="stringliteral">&quot;large&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Large&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            &lt;option value=<span class="stringliteral">&quot;large:left&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Large - Left Aligned&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            &lt;option value=<span class="stringliteral">&quot;large:center&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Large - Centered&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            &lt;option value=<span class="stringliteral">&quot;large:right&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Large - Right Aligned&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            &lt;option value=<span class="stringliteral">&quot;full&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Full Size&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            &lt;option value=<span class="stringliteral">&quot;full:left&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Full Size - Left Aligned&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            &lt;option value=<span class="stringliteral">&quot;full:center&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Full Size - Centered&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            &lt;option value=<span class="stringliteral">&quot;full:right&quot;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Full Size - Right Aligned&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        &lt;/select&gt;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> insert_calculation_variables( $fields, $element_id, $onchange = <span class="stringliteral">&#39;&#39;</span>, $callback = <span class="stringliteral">&#39;&#39;</span>, $max_label_size = 40 ) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keywordflow">if</span> ( $fields == <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            $fields = array();</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        }</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        $onchange = empty( $onchange ) ? sprintf( <span class="stringliteral">&quot;InsertVariable(&#39;%s&#39;, &#39;%s&#39;);&quot;</span>, <a class="code" href="formatting_8php.html#a0fe22f477c9eafcf9d3805461f249393">esc_js</a>( $element_id ), <a class="code" href="formatting_8php.html#a0fe22f477c9eafcf9d3805461f249393">esc_js</a>( $callback ) ): $onchange;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <a class="code" href="table-body_8php.html#a252ba022809910ea710a068fc1bab657">$class</a>    = <span class="stringliteral">&#39;gform_merge_tags&#39;</span>;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        ?&gt;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        &lt;select <span class="keywordtype">id</span>=<span class="stringliteral">&quot;&lt;?php echo esc_attr( $element_id ); ?&gt;_variable_select&quot;</span> onchange=<span class="stringliteral">&quot;&lt;?php echo $onchange ?&gt;&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;&lt;?php echo esc_attr( $class ) ?&gt;&quot;</span>&gt;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            &lt;option value=<span class="stringliteral">&#39;&#39;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> <a class="code" href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a>( <span class="stringliteral">&#39;Insert Merge Tag&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ); ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            &lt;optgroup <a class="code" href="form__list_8php.html#a75c7d6fef8f2fc1b14944df043dd5690">label</a>=<span class="stringliteral">&quot;&lt;?php esc_attr_e( &#39;Allowable form fields&#39;, &#39;gravityforms&#39; ); ?&gt;&quot;</span>&gt;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                <span class="keywordflow">foreach</span> ( $fields as $field ) {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                    <span class="keywordflow">if</span> ( ! self::is_valid_for_calcuation( $field ) ) {</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                    }</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                    <span class="keywordflow">if</span> ( <a class="code" href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">RGFormsModel::get_input_type</a>( $field ) == <span class="stringliteral">&#39;checkbox&#39;</span> ) {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                        <span class="keywordflow">foreach</span> ( $field-&gt;inputs as $input ) {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                            ?&gt;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                            &lt;option value=<span class="stringliteral">&#39;&lt;?php echo esc_attr( &#39;</span>{<span class="stringliteral">&#39; . esc_html( GFCommon::get_label( $field, $input[&#39;</span><span class="keywordtype">id</span><span class="stringliteral">&#39;] ) ) . &#39;</span>:<span class="stringliteral">&#39; . $input[&#39;</span><span class="keywordtype">id</span><span class="stringliteral">&#39;] . &#39;</span>}<span class="stringliteral">&#39; ); ?&gt;&#39;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> echo <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( GFCommon::get_label( $field, $input[<span class="stringliteral">&#39;id&#39;</span>] ) ) ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                        &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                        }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                        self::insert_field_variable( $field, $max_label_size );</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                    }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                ?&gt;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            &lt;/optgroup&gt;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            <a class="code" href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a> = isset(<a class="code" href="data-source_8php.html#a8dcd469e6c336555e43c3003b0a0da54">$forms</a>[0]) ? $fields[0]-&gt;formId : 0;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            $custom_merge_tags = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_custom_merge_tags&#39;</span>, array(), $form_id, $fields, $element_id );</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            <span class="keywordflow">if</span> ( is_array( $custom_merge_tags ) &amp;&amp; ! empty( $custom_merge_tags ) ) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                ?&gt;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                &lt;optgroup label=<span class="stringliteral">&quot;&lt;?php esc_attr_e( &#39;Custom&#39; , &#39;gravityforms&#39; ); ?&gt;&quot;</span>&gt;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                    &lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">foreach</span> ( $custom_merge_tags as $custom_merge_tag ) { ?&gt;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                        &lt;option value=<span class="stringliteral">&#39;&lt;?php echo esc_attr( rgar( $custom_merge_tag, &#39;</span>tag<span class="stringliteral">&#39; ) ); ?&gt;&#39;</span>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> echo <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( rgar( $custom_merge_tag, <span class="stringliteral">&#39;label&#39;</span> ) ); ?&gt;&lt;/option&gt;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                    &lt;?<a class="code" href="namespacephp.html">php</a> } ?&gt;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                &lt;/optgroup&gt;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            &lt;?<a class="code" href="namespacephp.html">php</a> } ?&gt;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        &lt;/select&gt;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">function</span> get_post_image_variable( $media_id, $arg1, $arg2, $is_url = <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keywordflow">if</span> ( $is_url ) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            <a class="code" href="post__image_8php.html#aac6146b4cdec66c94263ddb55afd5946">$image</a> = <a class="code" href="wp-includes_2media_8php.html#adc3e512380a7336cfc8dd3417892a65b">wp_get_attachment_image_src</a>( $media_id, $arg1 );</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="post__image_8php.html#aac6146b4cdec66c94263ddb55afd5946">$image</a> ) {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                <a class="code" href="namespacelist.html">list</a>( $src, $width, $height ) = <a class="code" href="post__image_8php.html#aac6146b4cdec66c94263ddb55afd5946">$image</a>;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            <span class="keywordflow">return</span> $src;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="keywordflow">switch</span> ( $arg1 ) {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;title&#39;</span> :</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                $media = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( $media_id );</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                <span class="keywordflow">return</span> $media-&gt;post_title;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;caption&#39;</span> :</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                $media = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( $media_id );</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                <span class="keywordflow">return</span> $media-&gt;post_excerpt;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;description&#39;</span> :</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                $media = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( $media_id );</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                <span class="keywordflow">return</span> $media-&gt;post_content;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            <span class="keywordflow">default</span> :</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                $img = <a class="code" href="wp-includes_2media_8php.html#a57bf956f73e9b1ed18235515b34b0028">wp_get_attachment_image</a>( $media_id, $arg1, <span class="keyword">false</span>, array( <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&quot;size-{$arg1} align{$arg2} wp-image-{$media_id}&quot;</span> ) );</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                <span class="keywordflow">return</span> $img;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    }</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> replace_variables_post_image( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $post_images, $lead ) {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        preg_match_all( <span class="stringliteral">&#39;/{[^{]*?:(\d+)(:([^:]*?))?(:([^:]*?))?(:url)?}/mi&#39;</span>, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $matches, PREG_SET_ORDER );</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordflow">if</span> ( is_array( $matches ) ) {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            <span class="keywordflow">foreach</span> ( $matches as $match ) {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                $input_id = $match[1];</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                <span class="comment">//ignore fields that are not post images</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                <span class="keywordflow">if</span> ( ! isset( $post_images[ $input_id ] ) ) {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                }</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                <span class="comment">//Reading alignment and &#39;url&#39; parameters.</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                <span class="comment">//Format could be {image:5:medium:left:url} or {image:5:medium:url}</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                $size_meta = empty( $match[3] ) ? <span class="stringliteral">&#39;full&#39;</span> : $match[3];</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                $align     = empty( $match[5] ) ? <span class="stringliteral">&#39;none&#39;</span> : $match[5];</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                <span class="keywordflow">if</span> ( $align == <span class="stringliteral">&#39;url&#39;</span> ) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                    $align  = <span class="stringliteral">&#39;none&#39;</span>;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                    $is_url = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                    $is_url = rgar( $match, 6 ) == <span class="stringliteral">&#39;:url&#39;</span>;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                }</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                $media_id = $post_images[ $input_id ];</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>    = <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $media_id ) ? <span class="stringliteral">&#39;&#39;</span> : self::get_post_image_variable( $media_id, $size_meta, $align, $is_url );</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( $match[0], <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            }</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        }</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    }</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> implode_non_blank( $separator, $array ) {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keywordflow">if</span> ( ! is_array( $array ) ) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a> = array();</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <span class="keywordflow">foreach</span> ( $array as $item ) {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            <span class="keywordflow">if</span> ( ! rgblank( $item ) ) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a>[] = $item;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        }</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <span class="keywordflow">return</span> implode( $separator, <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a> );</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    }</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> format_variable_value( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, $url_encode, $esc_html, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a>, $nl2br = <span class="keyword">true</span> ) {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="keywordflow">if</span> ( $esc_html ) {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        }</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> == <span class="stringliteral">&#39;html&#39;</span> &amp;&amp; $nl2br ) {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = nl2br( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="keywordflow">if</span> ( $url_encode ) {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = urlencode( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> replace_variables( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, $url_encode = <span class="keyword">false</span>, $esc_html = <span class="keyword">true</span>, $nl2br = <span class="keyword">true</span>, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> = <span class="stringliteral">&#39;html&#39;</span> ) {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = $nl2br ? nl2br( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> ) : <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_pre_replace_merge_tags&#39;</span>, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, $url_encode, $esc_html, $nl2br, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> );</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <span class="keywordflow">if</span> ( strpos( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, <span class="charliteral">&#39;{&#39;</span> ) === <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="comment">//Replacing conditional merge tag variables: [gravityforms action=&quot;conditional&quot; merge_tag=&quot;{Other Services:4}&quot; ....</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        preg_match_all( <span class="stringliteral">&#39;/merge_tag\s*=\s*[&quot;|\&#39;]({[^{]*?:(\d+(\.\d+)?)(:(.*?))?})[&quot;|\&#39;]/mi&#39;</span>, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $matches, PREG_SET_ORDER );</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="keywordflow">if</span> ( is_array( $matches ) ) {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            <span class="keywordflow">foreach</span> ( $matches as $match ) {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                $input_id = $match[2];</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = self::replace_field_variable( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, $url_encode, $esc_html, $nl2br, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a>, $input_id, $match, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        }</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <span class="comment">//Replacing field variables: {FIELD_LABEL:FIELD_ID} {My Field:2}</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        preg_match_all( <span class="stringliteral">&#39;/{[^{]*?:(\d+(\.\d+)?)(:(.*?))?}/mi&#39;</span>, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $matches, PREG_SET_ORDER );</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <span class="keywordflow">if</span> ( is_array( $matches ) ) {</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            <span class="keywordflow">foreach</span> ( $matches as $match ) {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                $input_id = $match[1];</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = self::replace_field_variable( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, $url_encode, $esc_html, $nl2br, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a>, $input_id, $match );</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            }</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        }</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="comment">//replacing global variables</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <span class="comment">//form title</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="stringliteral">&#39;{form_title}&#39;</span>, $url_encode ? urlencode( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;title&#39;</span>] ) : <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;title&#39;</span>], <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        $matches = array();</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        preg_match_all( <span class="stringliteral">&quot;/{all_fields(:(.*?))?}/&quot;</span>, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $matches, PREG_SET_ORDER );</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <span class="keywordflow">foreach</span> ( $matches as $match ) {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a>         = explode( <span class="charliteral">&#39;,&#39;</span>, rgar( $match, 2 ) );</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            $use_value       = in_array( <span class="stringliteral">&#39;value&#39;</span>, <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> );</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            $display_empty   = in_array( <span class="stringliteral">&#39;empty&#39;</span>, <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> );</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            $use_admin_label = in_array( <span class="stringliteral">&#39;admin&#39;</span>, <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> );</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            <span class="comment">//all submitted fields using text</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            <span class="keywordflow">if</span> ( strpos( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $match[0] ) !== <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( $match[0], self::get_submitted_fields( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, $display_empty, ! $use_value, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a>, $use_admin_label, <span class="stringliteral">&#39;all_fields&#39;</span>, rgar( $match, 2 ) ), <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        }</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <span class="comment">//all submitted fields including empty fields</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <span class="keywordflow">if</span> ( strpos( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, <span class="stringliteral">&#39;{all_fields_display_empty}&#39;</span> ) !== <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="stringliteral">&#39;{all_fields_display_empty}&#39;</span>, self::get_submitted_fields( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">true</span>, <span class="keyword">true</span>, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a>, <span class="keyword">false</span>, <span class="stringliteral">&#39;all_fields_display_empty&#39;</span> ), <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        }</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <span class="comment">//pricing fields</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        $pricing_matches = array();</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        preg_match_all( <span class="stringliteral">&quot;/{pricing_fields(:(.*?))?}/&quot;</span>, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $pricing_matches, PREG_SET_ORDER );</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="keywordflow">foreach</span> ( $pricing_matches as $match ) {</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a>         = explode( <span class="charliteral">&#39;,&#39;</span>, rgar( $match, 2 ) );</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            $use_value       = in_array( <span class="stringliteral">&#39;value&#39;</span>, <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> );</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            $use_admin_label = in_array( <span class="stringliteral">&#39;admin&#39;</span>, <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> );</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            <span class="comment">//all submitted pricing fields using text</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            <span class="keywordflow">if</span> ( strpos( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $match[0] ) !== <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                $pricing_fields = self::get_submitted_pricing_fields( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a>, ! $use_value, $use_admin_label );</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> == <span class="stringliteral">&#39;html&#39;</span> ) {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                    <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>(</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                        $match[0], <span class="stringliteral">&#39;&lt;table width=&quot;99%&quot; border=&quot;0&quot; cellpadding=&quot;1&quot; cellspacing=&quot;0&quot; bgcolor=&quot;#EAEAEA&quot;&gt;</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="stringliteral">                                                               &lt;tr&gt;&lt;td&gt;</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="stringliteral">                                                                    &lt;table width=&quot;100%&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;0&quot; bgcolor=&quot;#FFFFFF&quot;&gt;&#39;</span> .</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                                            $pricing_fields .</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                                            <span class="stringliteral">&#39;&lt;/table&gt;</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="stringliteral">                                                               &lt;/tr&gt;&lt;/td&gt;</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="stringliteral">                                                         &lt;/table&gt;&#39;</span>,</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                    );</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                }</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                    <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( $match[0], $pricing_fields, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                }</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            }</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <span class="comment">//form id</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="stringliteral">&#39;{form_id}&#39;</span>, $url_encode ? urlencode( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;id&#39;</span>] ) : <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;id&#39;</span>], <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <span class="comment">//entry id</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="stringliteral">&#39;{entry_id}&#39;</span>, $url_encode ? urlencode( rgar( $lead, <span class="stringliteral">&#39;id&#39;</span> ) ) : rgar( $lead, <span class="stringliteral">&#39;id&#39;</span> ), <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <span class="comment">//entry url</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        $entry_url = <a class="code" href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a>( <span class="stringliteral">&#39;wpurl&#39;</span> ) . <span class="stringliteral">&#39;/wp-admin/admin.php?page=gf_entries&amp;view=entry&amp;id=&#39;</span> . <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;id&#39;</span>] . <span class="stringliteral">&#39;&amp;lid=&#39;</span> . rgar( $lead, <span class="stringliteral">&#39;id&#39;</span> );</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>      = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="stringliteral">&#39;{entry_url}&#39;</span>, $url_encode ? urlencode( $entry_url ) : $entry_url, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="comment">//post id</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="stringliteral">&#39;{post_id}&#39;</span>, $url_encode ? urlencode( rgar( $lead, <span class="stringliteral">&#39;post_id&#39;</span> ) ) : rgar( $lead, <span class="stringliteral">&#39;post_id&#39;</span> ), <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        <span class="comment">//admin email</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        $wp_email = <a class="code" href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a>( <span class="stringliteral">&#39;admin_email&#39;</span> );</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>     = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="stringliteral">&#39;{admin_email}&#39;</span>, $url_encode ? urlencode( $wp_email ) : $wp_email, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="comment">//post edit url</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        $post_url = <a class="code" href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a>( <span class="stringliteral">&#39;wpurl&#39;</span> ) . <span class="stringliteral">&#39;/wp-admin/post.php?action=edit&amp;post=&#39;</span> . rgar( $lead, <span class="stringliteral">&#39;post_id&#39;</span> );</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>     = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="stringliteral">&#39;{post_edit_url}&#39;</span>, $url_encode ? urlencode( $post_url ) : $post_url, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = self::replace_variables_prepopulate( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $url_encode, $lead, $esc_html, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $nl2br, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> );</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <span class="comment">// TODO: Deprecate the &#39;gform_replace_merge_tags&#39; and replace it with a call to the &#39;gform_merge_tag_filter&#39;</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <span class="comment">//$text = apply_filters(&#39;gform_merge_tag_filter&#39;, $text, false, false, false );</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = self::decode_merge_tag( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    }</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> encode_merge_tag( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> ) {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="charliteral">&#39;{&#39;</span>, <span class="stringliteral">&#39;&amp;#x7b;&#39;</span>, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    }</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> decode_merge_tag( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> ) {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="stringliteral">&#39;&amp;#x7b;&#39;</span>, <span class="charliteral">&#39;{&#39;</span>, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    }</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> format_post_category( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, $use_id ) {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <a class="code" href="namespacelist.html">list</a>( $item_value, $item_id ) = rgexplode( <span class="charliteral">&#39;:&#39;</span>, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, 2 );</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        <span class="keywordflow">if</span> ( $use_id &amp;&amp; ! empty( $item_id ) ) {</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            $item_value = $item_id;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        }</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        <span class="keywordflow">return</span> $item_value;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    }</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_embed_post() {</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        global $embed_post, <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>, $wp_query;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <span class="keywordflow">if</span> ( $embed_post ) {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            <span class="keywordflow">return</span> $embed_post;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        }</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <span class="keywordflow">if</span> ( ! rgempty( <span class="stringliteral">&#39;gform_embed_post&#39;</span> ) ) {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a>    = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( rgpost( <span class="stringliteral">&#39;gform_embed_post&#39;</span> ) );</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            $embed_post = <a class="code" href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a>( <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> );</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( $wp_query-&gt;is_in_loop ) {</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            $embed_post = <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;            $embed_post = array();</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        }</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_ul_classes( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> ){</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        $description_class = rgar( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, <span class="stringliteral">&#39;descriptionPlacement&#39;</span> ) == <span class="stringliteral">&#39;above&#39;</span> ? <span class="stringliteral">&#39;description_above&#39;</span> : <span class="stringliteral">&#39;description_below&#39;</span>;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        $sublabel_class    = rgar( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, <span class="stringliteral">&#39;subLabelPlacement&#39;</span> ) == <span class="stringliteral">&#39;above&#39;</span> ? <span class="stringliteral">&#39;form_sublabel_above&#39;</span> : <span class="stringliteral">&#39;form_sublabel_below&#39;</span>;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        $label_class       = rgempty( <span class="stringliteral">&#39;labelPlacement&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> ) ? <span class="stringliteral">&#39;top_label&#39;</span> : rgar( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, <span class="stringliteral">&#39;labelPlacement&#39;</span> );</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        $css_class = preg_replace( <span class="stringliteral">&#39;/\s+/&#39;</span>, <span class="charliteral">&#39; &#39;</span>, <span class="stringliteral">&quot;gform_fields {$label_class} {$sublabel_class} {$description_class}&quot;</span> ); <span class="comment">//removing extra spaces</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        <span class="keywordflow">return</span> $css_class;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    }</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> replace_variables_prepopulate( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $url_encode = <span class="keyword">false</span>, $entry = <span class="keyword">false</span>, $esc_html = <span class="keyword">false</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> = <span class="keyword">false</span>, $nl2br = <span class="keyword">false</span>, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> = <span class="stringliteral">&#39;html&#39;</span> ) {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <span class="comment">//embed url</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        $current_page_url = <a class="code" href="class_g_f_forms_model.html#a77d2c65218c18855112ade16f5e162df">RGFormsModel::get_current_page_url</a>();</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        <span class="keywordflow">if</span> ( $esc_html ) {</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;            $current_page_url = <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $current_page_url );</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        }</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        <span class="keywordflow">if</span> ( $url_encode ) {</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;            $current_page_url = urlencode( $current_page_url );</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        }</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="stringliteral">&#39;{embed_url}&#39;</span>, $current_page_url, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        $local_timestamp = self::get_local_timestamp( time() );</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <span class="comment">//date (mm/dd/yyyy)</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        $local_date_mdy = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a053ff37ae44c85a9bef47cd59328912e">date_i18n</a>( <span class="stringliteral">&#39;m/d/Y&#39;</span>, $local_timestamp, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>           = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="stringliteral">&#39;{date_mdy}&#39;</span>, $url_encode ? urlencode( $local_date_mdy ) : $local_date_mdy, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        <span class="comment">//date (dd/mm/yyyy)</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        $local_date_dmy = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a053ff37ae44c85a9bef47cd59328912e">date_i18n</a>( <span class="stringliteral">&#39;d/m/Y&#39;</span>, $local_timestamp, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>           = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="stringliteral">&#39;{date_dmy}&#39;</span>, $url_encode ? urlencode( $local_date_dmy ) : $local_date_dmy, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        <span class="comment">// ip</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        $ip = isset( $entry[<span class="stringliteral">&#39;ip&#39;</span>] ) ? $entry[<span class="stringliteral">&#39;ip&#39;</span>] : <a class="code" href="class_g_f_forms_model.html#a63c60c64f42afd0036bb78cf80f454ba">GFFormsModel::get_ip</a>();</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="stringliteral">&#39;{ip}&#39;</span>, $url_encode ? urlencode( $ip ) : $ip, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        global <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        $post_array = self::object_to_array( $post );</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        preg_match_all( <span class="stringliteral">&quot;/\{embed_post:(.*?)\}/&quot;</span>, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $matches, PREG_SET_ORDER );</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <span class="keywordflow">foreach</span> ( $matches as $match ) {</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            $full_tag = $match[0];</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            $property = $match[1];</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>     = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( $full_tag, $url_encode ? urlencode( $post_array[ $property ] ) : $post_array[ $property ], <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        }</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        <span class="comment">//embed post custom fields</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        preg_match_all( <span class="stringliteral">&quot;/\{custom_field:(.*?)\}/&quot;</span>, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $matches, PREG_SET_ORDER );</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <span class="keywordflow">foreach</span> ( $matches as $match ) {</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            $full_tag           = $match[0];</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            $custom_field_name  = $match[1];</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;            $custom_field_value = ! empty( $post_array[<span class="stringliteral">&#39;ID&#39;</span>] ) ? <a class="code" href="wp-includes_2post_8php.html#a5ac8d9eefeeb2ac8b45650a335971b81">get_post_meta</a>( $post_array[<span class="stringliteral">&#39;ID&#39;</span>], $custom_field_name, <span class="keyword">true</span> ) : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>               = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( $full_tag, $url_encode ? urlencode( $custom_field_value ) : $custom_field_value, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        }</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        <span class="comment">//user agent</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        $user_agent = <a class="code" href="class_g_f_forms.html#a85d469d4d196e138ea085db1cd3e2423">RGForms::get</a>( <span class="stringliteral">&#39;HTTP_USER_AGENT&#39;</span>, <a class="code" href="edit-tags_8php.html#aed6d7b9acff0b9518917d3b0573bc636">$_SERVER</a> );</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <span class="keywordflow">if</span> ( $esc_html ) {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            $user_agent = <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $user_agent );</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <span class="keywordflow">if</span> ( $url_encode ) {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            $user_agent = urlencode( $user_agent );</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        }</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="stringliteral">&#39;{user_agent}&#39;</span>, $user_agent, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <span class="comment">//referrer</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        <a class="code" href="edit-form-comment_8php.html#a872d93ddbbb879ab5c0eb29261a520a4">$referer</a> = <a class="code" href="class_g_f_forms.html#a85d469d4d196e138ea085db1cd3e2423">RGForms::get</a>( <span class="stringliteral">&#39;HTTP_REFERER&#39;</span>, <a class="code" href="edit-tags_8php.html#aed6d7b9acff0b9518917d3b0573bc636">$_SERVER</a> );</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <span class="keywordflow">if</span> ( $esc_html ) {</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            <a class="code" href="edit-form-comment_8php.html#a872d93ddbbb879ab5c0eb29261a520a4">$referer</a> = <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( <a class="code" href="edit-form-comment_8php.html#a872d93ddbbb879ab5c0eb29261a520a4">$referer</a> );</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="keywordflow">if</span> ( $url_encode ) {</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;            <a class="code" href="edit-form-comment_8php.html#a872d93ddbbb879ab5c0eb29261a520a4">$referer</a> = urlencode( <a class="code" href="edit-form-comment_8php.html#a872d93ddbbb879ab5c0eb29261a520a4">$referer</a> );</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        }</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="stringliteral">&#39;{referer}&#39;</span>,  <a class="code" href="edit-form-comment_8php.html#a872d93ddbbb879ab5c0eb29261a520a4">$referer</a>, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <span class="comment">//logged in user info</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        global $userdata, <a class="code" href="admin-header_8php.html#a0adaa55d75018329f592200c2da54994">$wp_version</a>, <a class="code" href="user-edit_8php.html#a12f5443cc19cb33ae0292013c53a7b19">$current_user</a>;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        $user_array = self::object_to_array( $userdata );</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        preg_match_all( <span class="stringliteral">&quot;/\{user:(.*?)\}/&quot;</span>, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $matches, PREG_SET_ORDER );</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <span class="keywordflow">foreach</span> ( $matches as $match ) {</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            $full_tag = $match[0];</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            $property = $match[1];</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = version_compare( $wp_version, <span class="stringliteral">&#39;3.3&#39;</span>, <span class="stringliteral">&#39;&gt;=&#39;</span> ) ? $current_user-&gt;get( $property ) : $user_array[ $property ];</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = $url_encode ? urlencode( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) : <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( $full_tag, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        }</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment">        /**</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="comment">         * Allow the text to be filtered so custom merge tags can be replaced.</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment">         * @param string $text The text in which merge tags are being processed.</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment">         * @param false|array $form The Form object if available or false.</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment">         * @param false|array $entry The Entry object if available or false.</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment">         * @param bool $url_encode Indicates if the urlencode function should be applied.</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="comment">         * @param bool $esc_html Indicates if the esc_html function should be applied.</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="comment">         * @param bool $nl2br Indicates if the nl2br function should be applied.</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment">         * @param string $format The format requested for the location the merge is being used. Possible values: html, text or url.</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_replace_merge_tags&#39;</span>, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $entry, $url_encode, $esc_html, $nl2br, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> );</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    }</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> object_to_array( $object ) {</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        $array = array();</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $object ) ) {</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            <span class="keywordflow">foreach</span> ( $object as $member =&gt; $data ) {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                $array[ $member ] = $data;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;            }</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        }</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <span class="keywordflow">return</span> $array;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    }</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_empty_array( $val ) {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="keywordflow">if</span> ( ! is_array( $val ) ) {</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;            $val = array( $val );</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        }</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a> = array_values( $val );</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="keywordflow">foreach</span> ( <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a> as $item ) {</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;            <span class="keywordflow">if</span> ( ! rgblank( $item ) ) {</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;            }</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        }</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    }</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_submitted_fields( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, $display_empty = <span class="keyword">false</span>, $use_text = <span class="keyword">false</span>, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> = <span class="stringliteral">&#39;html&#39;</span>, $use_admin_label = <span class="keyword">false</span>, <a class="code" href="widget-poll_8php.html#aa1dbc314943a448ba681230a0e83633c">$merge_tag</a> = <span class="stringliteral">&#39;&#39;</span>, <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> = <span class="stringliteral">&#39;&#39;</span> ) {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        $field_data = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> == <span class="stringliteral">&#39;html&#39;</span> ) {</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;            $field_data = <span class="stringliteral">&#39;&lt;table width=&quot;99%&quot; border=&quot;0&quot; cellpadding=&quot;1&quot; cellspacing=&quot;0&quot; bgcolor=&quot;#EAEAEA&quot;&gt;&lt;tr&gt;&lt;td&gt;</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="stringliteral">                            &lt;table width=&quot;100%&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;0&quot; bgcolor=&quot;#FFFFFF&quot;&gt;</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="stringliteral">                            &#39;</span>;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        $options_array           = explode( <span class="charliteral">&#39;,&#39;</span>, <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> );</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        $no_admin                = in_array( <span class="stringliteral">&#39;noadmin&#39;</span>, $options_array );</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        $no_hidden               = in_array( <span class="stringliteral">&#39;nohidden&#39;</span>, $options_array );</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        $display_product_summary = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <span class="keywordflow">foreach</span> ( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;fields&#39;</span>] as $field ) {</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            <span class="comment">/* @var GF_Field $field */</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            $field_value = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            $field_label = $use_admin_label &amp;&amp; ! empty( $field-&gt;adminLabel ) ? $field-&gt;adminLabel : <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( GFCommon::get_label( $field, 0, <span class="keyword">false</span>, $use_admin_label ) );</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            <span class="keywordflow">switch</span> ( $field-&gt;type ) {</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&#39;captcha&#39;</span> :</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&#39;section&#39;</span> :</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                    <span class="keywordflow">if</span> ( <a class="code" href="class_g_f_forms_model.html#a4f3a8c6f620700754754e3c262cee663">GFFormsModel::is_field_hidden</a>( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $field, array(), $lead ) ){</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                    }</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                    <span class="keywordflow">if</span> ( ( ! GFCommon::is_section_empty( $field, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead ) || $display_empty ) &amp;&amp; ! $field-&gt;adminOnly ) {</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                        <span class="keywordflow">switch</span> ( <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> ) {</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                            <span class="keywordflow">case</span> <span class="stringliteral">&#39;text&#39;</span> :</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                                $field_value = <span class="stringliteral">&quot;--------------------------------\n{$field_label}\n\n&quot;</span>;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                                $field_value = sprintf(</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                                    <span class="stringliteral">&#39;&lt;tr&gt;</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="stringliteral">                                            &lt;td colspan=&quot;2&quot; style=&quot;font-size:14px; font-weight:bold; background-color:#EEE; border-bottom:1px solid #DFDFDF; padding:7px 7px&quot;&gt;%s&lt;/td&gt;</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="stringliteral">                                       &lt;/tr&gt;</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="stringliteral">                                       &#39;</span>, $field_label</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                                );</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                        }</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                    }</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                    $field_value = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_merge_tag_filter&#39;</span>, $field_value, <a class="code" href="widget-poll_8php.html#aa1dbc314943a448ba681230a0e83633c">$merge_tag</a>, <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a>, $field, $field_label );</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                    $field_data .= $field_value;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&#39;password&#39;</span> :</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                    <span class="comment">//ignore password fields</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                <span class="keywordflow">default</span> :</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                    <span class="keywordflow">if</span> ( self::is_product_field( $field-&gt;type ) ) {</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                        <span class="comment">// ignore product fields as they will be grouped together at the end of the grid</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                        $display_product_summary = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_display_product_summary&#39;</span>, <span class="keyword">true</span>, $field, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead );</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                        <span class="keywordflow">if</span> ( $display_product_summary ) {</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                        }</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="class_g_f_forms_model.html#a4f3a8c6f620700754754e3c262cee663">GFFormsModel::is_field_hidden</a>( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $field, array(), $lead ) ) {</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                        <span class="comment">// ignore fields hidden by conditional logic</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                    }</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                    $raw_field_value = <a class="code" href="class_g_f_forms_model.html#abf73ae376358a1b72c4603c7b8b401ba">RGFormsModel::get_lead_field_value</a>( $lead, $field );</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                    $field_value     = GFCommon::get_lead_field_display( $field, $raw_field_value, rgar( $lead, <span class="stringliteral">&#39;currency&#39;</span> ), $use_text, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a>, <span class="stringliteral">&#39;email&#39;</span> );</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                    $display_field = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                    <span class="comment">//depending on parameters, don&#39;t display adminOnly or hidden fields</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                    <span class="keywordflow">if</span> ( $no_admin &amp;&amp; $field-&gt;adminOnly ) {</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                        $display_field = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( $no_hidden &amp;&amp; <a class="code" href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">RGFormsModel::get_input_type</a>( $field ) == <span class="stringliteral">&#39;hidden&#39;</span> ) {</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                        $display_field = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                    }</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                    <span class="comment">//if field is not supposed to be displayed, pass false to filter. otherwise, pass field&#39;s value</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                    <span class="keywordflow">if</span> ( ! $display_field ) {</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                        $field_value = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                    }</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                    $field_value = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_merge_tag_filter&#39;</span>, $field_value, <a class="code" href="widget-poll_8php.html#aa1dbc314943a448ba681230a0e83633c">$merge_tag</a>, <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a>, $field, $raw_field_value );</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                    <span class="keywordflow">if</span> ( $field_value === <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                    }</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                    <span class="keywordflow">if</span> ( ! empty( $field_value ) || strlen( $field_value ) &gt; 0 || $display_empty ) {</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                        <span class="keywordflow">switch</span> ( <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> ) {</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                            <span class="keywordflow">case</span> <span class="stringliteral">&#39;text&#39;</span> :</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                                $field_data .= <span class="stringliteral">&quot;{$field_label}: {$field_value}\n\n&quot;</span>;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                                $field_data .= sprintf(</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                                        <span class="stringliteral">&#39;&lt;tr bgcolor=&quot;%3$s&quot;&gt;</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="stringliteral">                                            &lt;td colspan=&quot;2&quot;&gt;</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="stringliteral">                                                &lt;font style=&quot;font-family: sans-serif; font-size:12px;&quot;&gt;&lt;strong&gt;%1$s&lt;/strong&gt;&lt;/font&gt;</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="stringliteral">                                            &lt;/td&gt;</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="stringliteral">                                       &lt;/tr&gt;</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="stringliteral">                                       &lt;tr bgcolor=&quot;%4$s&quot;&gt;</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="stringliteral">                                            &lt;td width=&quot;20&quot;&gt;&amp;nbsp;&lt;/td&gt;</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="stringliteral">                                            &lt;td&gt;</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="stringliteral">                                                &lt;font style=&quot;font-family: sans-serif; font-size:12px;&quot;&gt;%2$s&lt;/font&gt;</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="stringliteral">                                            &lt;/td&gt;</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="stringliteral">                                       &lt;/tr&gt;</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="stringliteral">                                       &#39;</span>, $field_label, empty( $field_value ) &amp;&amp; strlen( $field_value ) == 0 ? <span class="stringliteral">&#39;&amp;nbsp;&#39;</span> : $field_value, <a class="code" href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a>( <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_email_background_color_label&#39;</span>, <span class="stringliteral">&#39;#EAF2FA&#39;</span>, $field, $lead ) ), <a class="code" href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a>( <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_email_background_color_data&#39;</span>, <span class="stringliteral">&#39;#FFFFFF&#39;</span>, $field, $lead ) )</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                                );</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                        }</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                    }</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;            }</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        }</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <span class="keywordflow">if</span> ( $display_product_summary ) {</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;            $field_data .= self::get_submitted_pricing_fields( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a>, $use_text, $use_admin_label );</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        }</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> == <span class="stringliteral">&#39;html&#39;</span> ) {</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;            $field_data .= <span class="stringliteral">&#39;&lt;/table&gt;</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="stringliteral">                        &lt;/td&gt;</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="stringliteral">                   &lt;/tr&gt;</span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="stringliteral">               &lt;/table&gt;&#39;</span>;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        }</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        <span class="keywordflow">return</span> $field_data;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    }</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_submitted_pricing_fields( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a>, $use_text = <span class="keyword">true</span>, $use_admin_label = <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        $form_id     = <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        $order_label = gf_apply_filters( array( <span class="stringliteral">&#39;gform_order_label&#39;</span>, $form_id ), <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Order&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ), <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;id&#39;</span>] );</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        $products    = GFCommon::get_product_fields( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, $use_text, $use_admin_label );</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        $total       = 0;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        $field_data  = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        <span class="keywordflow">switch</span> ( <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> ) {</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;text&#39;</span> :</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                <span class="keywordflow">if</span> ( ! empty( $products[<span class="stringliteral">&#39;products&#39;</span>] ) ) {</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                    $field_data = <span class="stringliteral">&quot;--------------------------------\n&quot;</span> . $order_label . <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                    <span class="keywordflow">foreach</span> ( $products[<span class="stringliteral">&#39;products&#39;</span>] as $product ) {</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                        $product_name = $product[<span class="stringliteral">&#39;quantity&#39;</span>] . <span class="charliteral">&#39; &#39;</span> . $product[<span class="stringliteral">&#39;name&#39;</span>];</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                        $price        = self::to_number( $product[<span class="stringliteral">&#39;price&#39;</span>] );</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                        <span class="keywordflow">if</span> ( ! empty( $product[<span class="stringliteral">&#39;options&#39;</span>] ) ) {</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                            $product_name .= <span class="stringliteral">&#39; (&#39;</span>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                            <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> = array();</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                            <span class="keywordflow">foreach</span> ( $product[<span class="stringliteral">&#39;options&#39;</span>] as <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a> ) {</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                                $price += self::to_number( $option[<span class="stringliteral">&#39;price&#39;</span>] );</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                                <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a>[] = $option[<span class="stringliteral">&#39;option_name&#39;</span>];</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                            }</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                            $product_name .= implode( <span class="stringliteral">&#39;, &#39;</span>, <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> ) . <span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                        }</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                        $subtotal = floatval( $product[<span class="stringliteral">&#39;quantity&#39;</span>] ) * $price;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                        $total += $subtotal;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                        $field_data .= <span class="stringliteral">&quot;{$product_name}: &quot;</span> . self::to_money( $subtotal, $lead[<span class="stringliteral">&#39;currency&#39;</span>] ) . <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                    }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                    $total += floatval( $products[<span class="stringliteral">&#39;shipping&#39;</span>][<span class="stringliteral">&#39;price&#39;</span>] );</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                    <span class="keywordflow">if</span> ( ! empty( $products[<span class="stringliteral">&#39;shipping&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>] ) ) {</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                        $field_data .= $products[<span class="stringliteral">&#39;shipping&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>] . <span class="stringliteral">&#39;: &#39;</span> . self::to_money( $products[<span class="stringliteral">&#39;shipping&#39;</span>][<span class="stringliteral">&#39;price&#39;</span>], $lead[<span class="stringliteral">&#39;currency&#39;</span>] ) . <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                    }</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                    $field_data .= <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Total&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) . <span class="stringliteral">&#39;: &#39;</span> . self::to_money( $total, $lead[<span class="stringliteral">&#39;currency&#39;</span>] ) . <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                }</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            <span class="keywordflow">default</span> :</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                <span class="keywordflow">if</span> ( ! empty( $products[<span class="stringliteral">&#39;products&#39;</span>] ) ) {</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                    $field_data = <span class="stringliteral">&#39;&lt;tr bgcolor=&quot;#EAF2FA&quot;&gt;</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="stringliteral">                            &lt;td colspan=&quot;2&quot;&gt;</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="stringliteral">                                &lt;font style=&quot;font-family: sans-serif; font-size:12px;&quot;&gt;&lt;strong&gt;&#39;</span> . $order_label . <span class="stringliteral">&#39;&lt;/strong&gt;&lt;/font&gt;</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="stringliteral">                            &lt;/td&gt;</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="stringliteral">                       &lt;/tr&gt;</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="stringliteral">                       &lt;tr bgcolor=&quot;#FFFFFF&quot;&gt;</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="stringliteral">                            &lt;td width=&quot;20&quot;&gt;&amp;nbsp;&lt;/td&gt;</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="stringliteral">                            &lt;td&gt;</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="stringliteral">                                &lt;table cellspacing=&quot;0&quot; width=&quot;97%&quot; style=&quot;border-left:1px solid #DFDFDF; border-top:1px solid #DFDFDF&quot;&gt;</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="stringliteral">                                &lt;thead&gt;</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="stringliteral">                                    &lt;th style=&quot;background-color:#F4F4F4; border-bottom:1px solid #DFDFDF; border-right:1px solid #DFDFDF; padding:7px; font-family: sans-serif; font-size:12px; text-align:left&quot;&gt;&#39;</span> . gf_apply_filters( array( <span class="stringliteral">&#39;gform_product&#39;</span>, $form_id ), <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Product&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ), $form_id ) . <span class="stringliteral">&#39;&lt;/th&gt;</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="stringliteral">                                    &lt;th style=&quot;background-color:#F4F4F4; border-bottom:1px solid #DFDFDF; border-right:1px solid #DFDFDF; padding:7px; width:50px; font-family: sans-serif; font-size:12px; text-align:center&quot;&gt;&#39;</span> . gf_apply_filters( array( <span class="stringliteral">&#39;gform_product_qty&#39;</span>, $form_id ), <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Qty&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ), $form_id ) . <span class="stringliteral">&#39;&lt;/th&gt;</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="stringliteral">                                    &lt;th style=&quot;background-color:#F4F4F4; border-bottom:1px solid #DFDFDF; border-right:1px solid #DFDFDF; padding:7px; width:155px; font-family: sans-serif; font-size:12px; text-align:left&quot;&gt;&#39;</span> . gf_apply_filters( array( <span class="stringliteral">&#39;gform_product_unitprice&#39;</span>, $form_id ), <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Unit Price&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ), $form_id ) . <span class="stringliteral">&#39;&lt;/th&gt;</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="stringliteral">                                    &lt;th style=&quot;background-color:#F4F4F4; border-bottom:1px solid #DFDFDF; border-right:1px solid #DFDFDF; padding:7px; width:155px; font-family: sans-serif; font-size:12px; text-align:left&quot;&gt;&#39;</span> . gf_apply_filters( array( <span class="stringliteral">&#39;gform_product_price&#39;</span>, $form_id ), <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Price&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ), $form_id ) . <span class="stringliteral">&#39;&lt;/th&gt;</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="stringliteral">                                &lt;/thead&gt;</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;<span class="stringliteral">                                &lt;tbody&gt;&#39;</span>;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                    <span class="keywordflow">foreach</span> ( $products[<span class="stringliteral">&#39;products&#39;</span>] as $product ) {</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                        $field_data .= <span class="stringliteral">&#39;&lt;tr&gt;</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="stringliteral">                                                        &lt;td style=&quot;border-bottom:1px solid #DFDFDF; border-right:1px solid #DFDFDF; padding:7px; font-family: sans-serif; font-size:11px;&quot; &gt;</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="stringliteral">                                                            &lt;strong style=&quot;color:#BF461E; font-size:12px; margin-bottom:5px&quot;&gt;&#39;</span> . $product[<span class="stringliteral">&#39;name&#39;</span>] . <span class="stringliteral">&#39;&lt;/strong&gt;</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="stringliteral">                                                            &lt;ul style=&quot;margin:0&quot;&gt;&#39;</span>;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                        $price = self::to_number( $product[<span class="stringliteral">&#39;price&#39;</span>] );</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                        <span class="keywordflow">if</span> ( is_array( rgar( $product, <span class="stringliteral">&#39;options&#39;</span> ) ) ) {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                            <span class="keywordflow">foreach</span> ( $product[<span class="stringliteral">&#39;options&#39;</span>] as <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a> ) {</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                                $price += self::to_number( $option[<span class="stringliteral">&#39;price&#39;</span>] );</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                                $field_data .= <span class="stringliteral">&#39;&lt;li style=&quot;padding:4px 0 4px 0&quot;&gt;&#39;</span> . $option[<span class="stringliteral">&#39;option_label&#39;</span>] . <span class="stringliteral">&#39;&lt;/li&gt;&#39;</span>;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;                            }</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                        }</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                        $subtotal = floatval( $product[<span class="stringliteral">&#39;quantity&#39;</span>] ) * $price;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                        $total += $subtotal;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                        $field_data .= <span class="stringliteral">&#39;&lt;/ul&gt;</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;<span class="stringliteral">                                                        &lt;/td&gt;</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;<span class="stringliteral">                                                        &lt;td style=&quot;border-bottom:1px solid #DFDFDF; border-right:1px solid #DFDFDF; padding:7px; text-align:center; width:50px; font-family: sans-serif; font-size:11px;&quot; &gt;&#39;</span> . $product[<span class="stringliteral">&#39;quantity&#39;</span>] . <span class="stringliteral">&#39;&lt;/td&gt;</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="stringliteral">                                                        &lt;td style=&quot;border-bottom:1px solid #DFDFDF; border-right:1px solid #DFDFDF; padding:7px; width:155px; font-family: sans-serif; font-size:11px;&quot; &gt;&#39;</span> . self::to_money( $price, $lead[<span class="stringliteral">&#39;currency&#39;</span>] ) . <span class="stringliteral">&#39;&lt;/td&gt;</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="stringliteral">                                                        &lt;td style=&quot;border-bottom:1px solid #DFDFDF; border-right:1px solid #DFDFDF; padding:7px; width:155px; font-family: sans-serif; font-size:11px;&quot; &gt;&#39;</span> . self::to_money( $subtotal, $lead[<span class="stringliteral">&#39;currency&#39;</span>] ) . <span class="stringliteral">&#39;&lt;/td&gt;</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="stringliteral">                                                    &lt;/tr&gt;&#39;</span>;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;                    }</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                    $total += floatval( $products[<span class="stringliteral">&#39;shipping&#39;</span>][<span class="stringliteral">&#39;price&#39;</span>] );</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;                    $field_data .= <span class="stringliteral">&#39;&lt;/tbody&gt;</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="stringliteral">                                &lt;tfoot&gt;&#39;</span>;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                    <span class="keywordflow">if</span> ( ! empty( $products[<span class="stringliteral">&#39;shipping&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>] ) ) {</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                        $field_data .= <span class="stringliteral">&#39;</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="stringliteral">                                    &lt;tr&gt;</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="stringliteral">                                        &lt;td colspan=&quot;2&quot; rowspan=&quot;2&quot; style=&quot;background-color:#F4F4F4; border-bottom:1px solid #DFDFDF; border-right:1px solid #DFDFDF; padding:7px; font-size:11px;&quot;&gt;&amp;nbsp;&lt;/td&gt;</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;<span class="stringliteral">                                        &lt;td style=&quot;border-bottom:1px solid #DFDFDF; border-right:1px solid #DFDFDF; padding:7px; text-align:right; width:155px; font-family: sans-serif;&quot;&gt;&lt;strong style=&quot;font-size:12px;&quot;&gt;&#39;</span> . $products[<span class="stringliteral">&#39;shipping&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>] . <span class="stringliteral">&#39;&lt;/strong&gt;&lt;/td&gt;</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="stringliteral">                                        &lt;td style=&quot;border-bottom:1px solid #DFDFDF; border-right:1px solid #DFDFDF; padding:7px; width:155px; font-family: sans-serif;&quot;&gt;&lt;strong style=&quot;font-size:12px;&quot;&gt;&#39;</span> . self::to_money( $products[<span class="stringliteral">&#39;shipping&#39;</span>][<span class="stringliteral">&#39;price&#39;</span>], $lead[<span class="stringliteral">&#39;currency&#39;</span>] ) . <span class="stringliteral">&#39;&lt;/strong&gt;&lt;/td&gt;</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;<span class="stringliteral">                                    &lt;/tr&gt;</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="stringliteral">                                    &#39;</span>;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                    }</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;                    $field_data .= <span class="stringliteral">&#39;</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="stringliteral">                                    &lt;tr&gt;&#39;</span>;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                    <span class="keywordflow">if</span> ( empty( $products[<span class="stringliteral">&#39;shipping&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>] ) ) {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                        $field_data .= <span class="stringliteral">&#39;</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="stringliteral">                                        &lt;td colspan=&quot;2&quot; style=&quot;background-color:#F4F4F4; border-bottom:1px solid #DFDFDF; border-right:1px solid #DFDFDF; padding:7px; font-size:11px;&quot;&gt;&amp;nbsp;&lt;/td&gt;&#39;</span>;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                    }</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                    $field_data .= <span class="stringliteral">&#39;</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="stringliteral">                                        &lt;td style=&quot;border-bottom:1px solid #DFDFDF; border-right:1px solid #DFDFDF; padding:7px; text-align:right; width:155px; font-family: sans-serif;&quot;&gt;&lt;strong style=&quot;font-size:12px;&quot;&gt;&#39;</span> . <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Total:&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) . <span class="stringliteral">&#39;&lt;/strong&gt;&lt;/td&gt;</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="stringliteral">                                        &lt;td style=&quot;border-bottom:1px solid #DFDFDF; border-right:1px solid #DFDFDF; padding:7px; width:155px; font-family: sans-serif;&quot;&gt;&lt;strong style=&quot;font-size:12px;&quot;&gt;&#39;</span> . self::to_money( $total, $lead[<span class="stringliteral">&#39;currency&#39;</span>] ) . <span class="stringliteral">&#39;&lt;/strong&gt;&lt;/td&gt;</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="stringliteral">                                    &lt;/tr&gt;</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;<span class="stringliteral">                                &lt;/tfoot&gt;</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="stringliteral">                               &lt;/table&gt;</span></div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="stringliteral">                            &lt;/td&gt;</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="stringliteral">                        &lt;/tr&gt;&#39;</span>;</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;                }</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        }</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        <span class="keywordflow">return</span> $field_data;</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    }</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> send_user_notification( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, $override_options = <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a5fa64d49f59b259090dd3b907ef3f369">_deprecated_function</a>( <span class="stringliteral">&#39;send_user_notification&#39;</span>, <span class="stringliteral">&#39;1.7&#39;</span>, <span class="stringliteral">&#39;send_notification&#39;</span> );</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        $notification = self::prepare_user_notification( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, $override_options );</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        self::send_email( $notification[<span class="stringliteral">&#39;from&#39;</span>], $notification[<span class="stringliteral">&#39;to&#39;</span>], $notification[<span class="stringliteral">&#39;bcc&#39;</span>], $notification[<span class="stringliteral">&#39;reply_to&#39;</span>], $notification[<span class="stringliteral">&#39;subject&#39;</span>], $notification[<span class="stringliteral">&#39;message&#39;</span>], $notification[<span class="stringliteral">&#39;from_name&#39;</span>], $notification[<span class="stringliteral">&#39;message_format&#39;</span>], $notification[<span class="stringliteral">&#39;attachments&#39;</span>], $lead );</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    }</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> send_admin_notification( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, $override_options = <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a5fa64d49f59b259090dd3b907ef3f369">_deprecated_function</a>( <span class="stringliteral">&#39;send_admin_notification&#39;</span>, <span class="stringliteral">&#39;1.7&#39;</span>, <span class="stringliteral">&#39;send_notification&#39;</span> );</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        $notification = self::prepare_admin_notification( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, $override_options );</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        self::send_email( $notification[<span class="stringliteral">&#39;from&#39;</span>], $notification[<span class="stringliteral">&#39;to&#39;</span>], $notification[<span class="stringliteral">&#39;bcc&#39;</span>], $notification[<span class="stringliteral">&#39;replyTo&#39;</span>], $notification[<span class="stringliteral">&#39;subject&#39;</span>], $notification[<span class="stringliteral">&#39;message&#39;</span>], $notification[<span class="stringliteral">&#39;from_name&#39;</span>], $notification[<span class="stringliteral">&#39;message_format&#39;</span>], $notification[<span class="stringliteral">&#39;attachments&#39;</span>], $lead );</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    }</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">function</span> prepare_user_notification( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, $override_options = <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        $form_id = <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        <span class="keywordflow">if</span> ( ! isset( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;autoResponder&#39;</span>] ) ) {</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        }</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        <span class="comment">//handling autoresponder email</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        $to_field = isset( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;autoResponder&#39;</span>][<span class="stringliteral">&#39;toField&#39;</span>] ) ? rgget( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;autoResponder&#39;</span>][<span class="stringliteral">&#39;toField&#39;</span>], $lead ) : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        $to       = gf_apply_filters( array( <span class="stringliteral">&#39;gform_autoresponder_email&#39;</span>, $form_id ), $to_field, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> );</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        $subject  = GFCommon::replace_variables( rgget( <span class="stringliteral">&#39;subject&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;autoResponder&#39;</span>] ), <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        $message_format = gf_apply_filters( array( <span class="stringliteral">&#39;gform_notification_format&#39;</span>, $form_id ), <span class="stringliteral">&#39;html&#39;</span>, <span class="stringliteral">&#39;user&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead );</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a>        = GFCommon::replace_variables( rgget( <span class="stringliteral">&#39;message&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;autoResponder&#39;</span>] ), <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span>, ! rgget( <span class="stringliteral">&#39;disableAutoformat&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;autoResponder&#39;</span>] ), $message_format );</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_enable_shortcode_notification_message&#39;</span>, <span class="keyword">true</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead ) ) {</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;            <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> = <a class="code" href="shortcodes_8php.html#aaa19827abd3976c4b6a24136c4c6380f">do_shortcode</a>( <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> );</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;        }</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        <span class="comment">//Running trough variable replacement</span></div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        $to        = GFCommon::replace_variables( $to, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;        <a class="code" href="wp-admin_2revision_8php.html#a0bb7e2b3d541598cc9c9e3b11bee859c">$from</a>      = GFCommon::replace_variables( rgget( <span class="stringliteral">&#39;from&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;autoResponder&#39;</span>] ), <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        $bcc       = GFCommon::replace_variables( rgget( <span class="stringliteral">&#39;bcc&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;autoResponder&#39;</span>] ), <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        $reply_to  = GFCommon::replace_variables( rgget( <span class="stringliteral">&#39;replyTo&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;autoResponder&#39;</span>] ), <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        $from_name = GFCommon::replace_variables( rgget( <span class="stringliteral">&#39;fromName&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;autoResponder&#39;</span>] ), <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <span class="comment">// override default values if override options provided</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        <span class="keywordflow">if</span> ( $override_options &amp;&amp; is_array( $override_options ) ) {</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;            <span class="keywordflow">foreach</span> ( $override_options as $override_key =&gt; $override_value ) {</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;                ${$override_key} = $override_value;</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;            }</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        }</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#aa2f80297e973639eba0f2f8619fe783b">$attachments</a> = gf_apply_filters( array( <span class="stringliteral">&#39;gform_user_notification_attachments&#39;</span>, $form_id ), array(), $lead, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> );</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;        <span class="comment">//Disabling autoformat to prevent double autoformatting of messages</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        $disableAutoformat = <span class="charliteral">&#39;1&#39;</span>;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        <span class="keywordflow">return</span> compact( <span class="stringliteral">&#39;to&#39;</span>, <span class="stringliteral">&#39;from&#39;</span>, <span class="stringliteral">&#39;bcc&#39;</span>, <span class="stringliteral">&#39;reply_to&#39;</span>, <span class="stringliteral">&#39;subject&#39;</span>, <span class="stringliteral">&#39;message&#39;</span>, <span class="stringliteral">&#39;from_name&#39;</span>, <span class="stringliteral">&#39;message_format&#39;</span>, <span class="stringliteral">&#39;attachments&#39;</span>, <span class="stringliteral">&#39;disableAutoformat&#39;</span> );</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    }</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">function</span> prepare_admin_notification( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, $override_options = <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        $form_id = <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        <span class="comment">//handling admin notification email</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        $subject = GFCommon::replace_variables( rgget( <span class="stringliteral">&#39;subject&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>] ), <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        $message_format = gf_apply_filters( array( <span class="stringliteral">&#39;gform_notification_format&#39;</span>, $form_id ), <span class="stringliteral">&#39;html&#39;</span>, <span class="stringliteral">&#39;admin&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead );</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a>        = GFCommon::replace_variables( rgget( <span class="stringliteral">&#39;message&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>] ), <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span>, ! rgget( <span class="stringliteral">&#39;disableAutoformat&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>] ), $message_format );</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_enable_shortcode_notification_message&#39;</span>, <span class="keyword">true</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead ) ) {</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;            <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> = <a class="code" href="shortcodes_8php.html#aaa19827abd3976c4b6a24136c4c6380f">do_shortcode</a>( <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> );</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        }</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        $version_info = self::get_version_info();</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        $is_expired   = ! rgempty( <span class="stringliteral">&#39;expiration_time&#39;</span>, $version_info ) &amp;&amp; $version_info[<span class="stringliteral">&#39;expiration_time&#39;</span>] &lt; time();</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        <span class="keywordflow">if</span> ( ! rgar( $version_info, <span class="stringliteral">&#39;is_valid_key&#39;</span> ) &amp;&amp; $is_expired ) {</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;            <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> .= <span class="stringliteral">&quot;&lt;br/&gt;&lt;br/&gt;Your Gravity Forms License Key has expired. In order to continue receiving support and software updates you must renew your license key. You can do so by following the renewal instructions on the Gravity Forms Settings page in your WordPress Dashboard or by &lt;a href=&#39;http://www.gravityhelp.com/renew-license/?key=&quot;</span> . self::get_key() . <span class="stringliteral">&quot;&#39;&gt;clicking here&lt;/a&gt;.&quot;</span>;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        }</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        <a class="code" href="wp-admin_2revision_8php.html#a0bb7e2b3d541598cc9c9e3b11bee859c">$from</a> = rgempty( <span class="stringliteral">&#39;fromField&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>] ) ? rgget( <span class="stringliteral">&#39;from&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>] ) : rgget( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>][<span class="stringliteral">&#39;fromField&#39;</span>], $lead );</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        <span class="keywordflow">if</span> ( rgempty( <span class="stringliteral">&#39;fromNameField&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>] ) ) {</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;            $from_name = rgget( <span class="stringliteral">&#39;fromName&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>] );</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;            $field     = <a class="code" href="class_g_f_forms_model.html#a5861b1ac8048f1af93bf65fd5d8cac7e">RGFormsModel::get_field</a>( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, rgget( <span class="stringliteral">&#39;fromNameField&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>] ) );</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;            <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>     = <a class="code" href="class_g_f_forms_model.html#abf73ae376358a1b72c4603c7b8b401ba">RGFormsModel::get_lead_field_value</a>( $lead, $field );</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;            $from_name = GFCommon::get_lead_field_display( $field, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        }</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        $replyTo = rgempty( <span class="stringliteral">&#39;replyToField&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>] ) ? rgget( <span class="stringliteral">&#39;replyTo&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>] ) : rgget( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>][<span class="stringliteral">&#39;replyToField&#39;</span>], $lead );</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        <span class="keywordflow">if</span> ( rgempty( <span class="stringliteral">&#39;routing&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>] ) ) {</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;            $email_to = rgempty( <span class="stringliteral">&#39;toField&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>] ) ? rgget( <span class="stringliteral">&#39;to&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>] ) : rgget( <span class="stringliteral">&#39;toField&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>] );</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;            $email_to = array();</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;            <span class="keywordflow">foreach</span> ( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>][<span class="stringliteral">&#39;routing&#39;</span>] as $routing ) {</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;                $source_field   = <a class="code" href="class_g_f_forms_model.html#a5861b1ac8048f1af93bf65fd5d8cac7e">RGFormsModel::get_field</a>( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $routing[<span class="stringliteral">&#39;fieldId&#39;</span>] );</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;                $field_value    = <a class="code" href="class_g_f_forms_model.html#abf73ae376358a1b72c4603c7b8b401ba">RGFormsModel::get_lead_field_value</a>( $lead, $source_field );</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;                $is_value_match = <a class="code" href="class_g_f_forms_model.html#a0f01e9aa2eeaf6b8306380e9c501360c">RGFormsModel::is_value_match</a>( $field_value, $routing[<span class="stringliteral">&#39;value&#39;</span>], $routing[<span class="stringliteral">&#39;operator&#39;</span>], $source_field, $routing, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> ) &amp;&amp; ! <a class="code" href="class_g_f_forms_model.html#a4f3a8c6f620700754754e3c262cee663">RGFormsModel::is_field_hidden</a>( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $source_field, array(), $lead );</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;                <span class="keywordflow">if</span> ( $is_value_match ) {</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;                    $email_to[] = $routing[<span class="stringliteral">&#39;email&#39;</span>];</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;                }</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;            }</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;            $email_to = join( <span class="charliteral">&#39;,&#39;</span>, $email_to );</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        }</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        <span class="comment">//Running through variable replacement</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        $email_to  = GFCommon::replace_variables( $email_to, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        <a class="code" href="wp-admin_2revision_8php.html#a0bb7e2b3d541598cc9c9e3b11bee859c">$from</a>      = GFCommon::replace_variables( <a class="code" href="wp-admin_2revision_8php.html#a0bb7e2b3d541598cc9c9e3b11bee859c">$from</a>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        $bcc       = GFCommon::replace_variables( rgget( <span class="stringliteral">&#39;bcc&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>] ), <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        $reply_to  = GFCommon::replace_variables( $replyTo, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        $from_name = GFCommon::replace_variables( $from_name, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        <span class="comment">//Filters the admin notification email to address. Allows users to change email address before notification is sent</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        $to = gf_apply_filters( array( <span class="stringliteral">&#39;gform_notification_email&#39;</span>, $form_id ), $email_to, $lead );</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        <span class="comment">// override default values if override options provided</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        <span class="keywordflow">if</span> ( $override_options &amp;&amp; is_array( $override_options ) ) {</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;            <span class="keywordflow">foreach</span> ( $override_options as $override_key =&gt; $override_value ) {</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                ${$override_key} = $override_value;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;            }</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;        }</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#aa2f80297e973639eba0f2f8619fe783b">$attachments</a> = gf_apply_filters( array( <span class="stringliteral">&#39;gform_admin_notification_attachments&#39;</span>, $form_id ), array(), $lead, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> );</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        <span class="comment">//Disabling autoformat to prevent double autoformatting of messages</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        $disableAutoformat = <span class="charliteral">&#39;1&#39;</span>;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        <span class="keywordflow">return</span> compact( <span class="stringliteral">&#39;to&#39;</span>, <span class="stringliteral">&#39;from&#39;</span>, <span class="stringliteral">&#39;bcc&#39;</span>, <span class="stringliteral">&#39;replyTo&#39;</span>, <span class="stringliteral">&#39;subject&#39;</span>, <span class="stringliteral">&#39;message&#39;</span>, <span class="stringliteral">&#39;from_name&#39;</span>, <span class="stringliteral">&#39;message_format&#39;</span>, <span class="stringliteral">&#39;attachments&#39;</span>, <span class="stringliteral">&#39;disableAutoformat&#39;</span> );</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    }</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> send_notification( $notification, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead ) {</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        GFCommon::log_debug( <span class="stringliteral">&quot;GFCommon::send_notification(): Starting to process notification (#{$notification[&#39;id&#39;]} - {$notification[&#39;name&#39;]}).&quot;</span> );</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        $notification = gf_apply_filters( array( <span class="stringliteral">&#39;gform_notification&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;id&#39;</span>] ), $notification, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead );</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        $to_field = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        <span class="keywordflow">if</span> ( rgar( $notification, <span class="stringliteral">&#39;toType&#39;</span> ) == <span class="stringliteral">&#39;field&#39;</span> ) {</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;            $to_field = rgar( $notification, <span class="stringliteral">&#39;toField&#39;</span> );</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;            <span class="keywordflow">if</span> ( rgempty( <span class="stringliteral">&#39;toField&#39;</span>, $notification ) ) {</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;                $to_field = rgar( $notification, <span class="stringliteral">&#39;to&#39;</span> );</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;            }</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        }</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        $email_to = rgar( $notification, <span class="stringliteral">&#39;to&#39;</span> );</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        <span class="comment">//do routing logic if &quot;to&quot; field doesn&#39;t have a value (to support legacy notifications that will run routing prior to this method)</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;        <span class="keywordflow">if</span> ( empty( $email_to ) &amp;&amp; rgar( $notification, <span class="stringliteral">&#39;toType&#39;</span> ) == <span class="stringliteral">&#39;routing&#39;</span> ) {</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;            $email_to = array();</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;            <span class="keywordflow">foreach</span> ( $notification[<span class="stringliteral">&#39;routing&#39;</span>] as $routing ) {</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;                GFCommon::log_debug( __METHOD__ . <span class="stringliteral">&#39;(): Evaluating Routing - rule =&gt; &#39;</span> . print_r( $routing, 1 ) );</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;                $source_field   = <a class="code" href="class_g_f_forms_model.html#a5861b1ac8048f1af93bf65fd5d8cac7e">RGFormsModel::get_field</a>( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $routing[<span class="stringliteral">&#39;fieldId&#39;</span>] );</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;                $field_value    = <a class="code" href="class_g_f_forms_model.html#abf73ae376358a1b72c4603c7b8b401ba">RGFormsModel::get_lead_field_value</a>( $lead, $source_field );</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;                $is_value_match = <a class="code" href="class_g_f_forms_model.html#a0f01e9aa2eeaf6b8306380e9c501360c">RGFormsModel::is_value_match</a>( $field_value, $routing[<span class="stringliteral">&#39;value&#39;</span>], $routing[<span class="stringliteral">&#39;operator&#39;</span>], $source_field, $routing, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> ) &amp;&amp; ! <a class="code" href="class_g_f_forms_model.html#a4f3a8c6f620700754754e3c262cee663">RGFormsModel::is_field_hidden</a>( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $source_field, array(), $lead );</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;                <span class="keywordflow">if</span> ( $is_value_match ) {</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;                    $email_to[] = $routing[<span class="stringliteral">&#39;email&#39;</span>];</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;                }</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;                GFCommon::log_debug( __METHOD__ . <span class="stringliteral">&#39;(): Evaluating Routing - field value =&gt; &#39;</span> . print_r( $field_value, 1 ) );</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;                $is_value_match = $is_value_match ? <span class="stringliteral">&#39;Yes&#39;</span> : <span class="stringliteral">&#39;No&#39;</span>;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                GFCommon::log_debug( __METHOD__ . <span class="stringliteral">&#39;(): Evaluating Routing - is value match? &#39;</span> . $is_value_match );</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;            }</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;            $email_to = join( <span class="charliteral">&#39;,&#39;</span>, $email_to );</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ! empty( $to_field ) ) {</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;            $source_field = <a class="code" href="class_g_f_forms_model.html#a5861b1ac8048f1af93bf65fd5d8cac7e">RGFormsModel::get_field</a>( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $to_field );</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;            $email_to     = <a class="code" href="class_g_f_forms_model.html#abf73ae376358a1b72c4603c7b8b401ba">RGFormsModel::get_lead_field_value</a>( $lead, $source_field );</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        }</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        <span class="comment">//Running through variable replacement</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        $to        = GFCommon::replace_variables( $email_to, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        $subject   = GFCommon::replace_variables( rgar( $notification, <span class="stringliteral">&#39;subject&#39;</span> ), <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&#39;text&#39;</span> );</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        <a class="code" href="wp-admin_2revision_8php.html#a0bb7e2b3d541598cc9c9e3b11bee859c">$from</a>      = GFCommon::replace_variables( rgar( $notification, <span class="stringliteral">&#39;from&#39;</span> ), <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        $from_name = GFCommon::replace_variables( rgar( $notification, <span class="stringliteral">&#39;fromName&#39;</span> ), <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="stringliteral">&#39;text&#39;</span> );</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;        $bcc       = GFCommon::replace_variables( rgar( $notification, <span class="stringliteral">&#39;bcc&#39;</span> ), <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;        $replyTo   = GFCommon::replace_variables( rgar( $notification, <span class="stringliteral">&#39;replyTo&#39;</span> ), <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        $message_format = rgempty( <span class="stringliteral">&#39;message_format&#39;</span>, $notification ) ? <span class="stringliteral">&#39;html&#39;</span> : rgar( $notification, <span class="stringliteral">&#39;message_format&#39;</span> );</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a>        = GFCommon::replace_variables( rgar( $notification, <span class="stringliteral">&#39;message&#39;</span> ), <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span>, <span class="keyword">false</span>, ! rgar( $notification, <span class="stringliteral">&#39;disableAutoformat&#39;</span> ), $message_format );</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_enable_shortcode_notification_message&#39;</span>, <span class="keyword">true</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead ) ) {</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;            <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> = <a class="code" href="shortcodes_8php.html#aaa19827abd3976c4b6a24136c4c6380f">do_shortcode</a>( <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> );</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        }</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        <span class="comment">// allow attachments to be passed as a single path (string) or an array of paths, if string provided, add to array</span></div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#aa2f80297e973639eba0f2f8619fe783b">$attachments</a> = rgar( $notification, <span class="stringliteral">&#39;attachments&#39;</span> );</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        <span class="keywordflow">if</span> ( ! empty( <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#aa2f80297e973639eba0f2f8619fe783b">$attachments</a> ) ) {</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;            <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#aa2f80297e973639eba0f2f8619fe783b">$attachments</a> = is_array( <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#aa2f80297e973639eba0f2f8619fe783b">$attachments</a> ) ? <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#aa2f80297e973639eba0f2f8619fe783b">$attachments</a> : array( <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#aa2f80297e973639eba0f2f8619fe783b">$attachments</a> );</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;            <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#aa2f80297e973639eba0f2f8619fe783b">$attachments</a> = array();</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        }</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        self::send_email( <a class="code" href="wp-admin_2revision_8php.html#a0bb7e2b3d541598cc9c9e3b11bee859c">$from</a>, $to, $bcc, $replyTo, $subject, <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a>, $from_name, $message_format, <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#aa2f80297e973639eba0f2f8619fe783b">$attachments</a>, $lead );</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        <span class="keywordflow">return</span> compact( <span class="stringliteral">&#39;to&#39;</span>, <span class="stringliteral">&#39;from&#39;</span>, <span class="stringliteral">&#39;bcc&#39;</span>, <span class="stringliteral">&#39;replyTo&#39;</span>, <span class="stringliteral">&#39;subject&#39;</span>, <span class="stringliteral">&#39;message&#39;</span>, <span class="stringliteral">&#39;from_name&#39;</span>, <span class="stringliteral">&#39;message_format&#39;</span>, <span class="stringliteral">&#39;attachments&#39;</span> );</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    }</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> send_notifications( $notification_ids, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, $do_conditional_logic = <span class="keyword">true</span>, $event = <span class="stringliteral">&#39;form_submission&#39;</span> ) {</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;        $entry_id = rgar( $lead, <span class="stringliteral">&#39;id&#39;</span> );</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        <span class="keywordflow">if</span> ( ! is_array( $notification_ids ) || empty( $notification_ids ) ) {</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;            GFCommon::log_debug( <span class="stringliteral">&quot;GFCommon::send_notifications(): Aborting. No notifications to process for {$event} event for entry #{$entry_id}.&quot;</span> );</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        }</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        GFCommon::log_debug( <span class="stringliteral">&quot;GFCommon::send_notifications(): Processing notifications for {$event} event for entry #{$entry_id}: &quot;</span> . print_r( $notification_ids, <span class="keyword">true</span> ) . <span class="stringliteral">&quot;\n(only active/applicable notifications are sent)&quot;</span> );</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;        <span class="keywordflow">foreach</span> ( $notification_ids as $notification_id ) {</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;            <span class="keywordflow">if</span> ( ! isset( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notifications&#39;</span>][ $notification_id ] ) ) {</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;            }</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;            <span class="keywordflow">if</span> ( isset( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notifications&#39;</span>][ $notification_id ][<span class="stringliteral">&#39;isActive&#39;</span>] ) &amp;&amp; ! <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notifications&#39;</span>][ $notification_id ][<span class="stringliteral">&#39;isActive&#39;</span>] ) {</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;                GFCommon::log_debug( <span class="stringliteral">&quot;GFCommon::send_notifications(): Notification is inactive, not processing notification (#{$notification_id} - {$form[&#39;notifications&#39;][$notification_id][&#39;name&#39;]}).&quot;</span> );</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;            }</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;            $notification = <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notifications&#39;</span>][ $notification_id ];</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;            <span class="comment">//check conditional logic when appropriate</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;            <span class="keywordflow">if</span> ( $do_conditional_logic &amp;&amp; ! GFCommon::evaluate_conditional_logic( rgar( $notification, <span class="stringliteral">&#39;conditionalLogic&#39;</span> ), <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead ) ) {</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;                GFCommon::log_debug( <span class="stringliteral">&quot;GFCommon::send_notifications(): Notification conditional logic not met, not processing notification (#{$notification_id} - {$notification[&#39;name&#39;]}).&quot;</span> );</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;            }</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;            <span class="keywordflow">if</span> ( rgar( $notification, <span class="stringliteral">&#39;type&#39;</span> ) == <span class="stringliteral">&#39;user&#39;</span> ) {</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;                <span class="comment">//Getting user notification from legacy structure (for backwards compatibility)</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                $legacy_notification = GFCommon::prepare_user_notification( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead );</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                $notification        = self::merge_legacy_notification( $notification, $legacy_notification );</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( rgar( $notification, <span class="stringliteral">&#39;type&#39;</span> ) == <span class="stringliteral">&#39;admin&#39;</span> ) {</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                <span class="comment">//Getting admin notification from legacy structure (for backwards compatibility)</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;                $legacy_notification = GFCommon::prepare_admin_notification( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead );</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;                $notification        = self::merge_legacy_notification( $notification, $legacy_notification );</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;            }</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;            <span class="comment">//sending notification</span></div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;            self::send_notification( $notification, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead );</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        }</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    }</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> send_form_submission_notifications( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead ) {</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <a class="code" href="class_g_f_a_p_i.html#afb54d041c3cbf8c7bff6d3c458ca8891">GFAPI::send_notifications</a>( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead );</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    }</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">function</span> merge_legacy_notification( $notification, $notification_data ) {</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <a class="code" href="wp-cron_8php.html#af20635b6c08e03bfee9e3fc036fa80f3">$keys</a> = array( <span class="stringliteral">&#39;to&#39;</span>, <span class="stringliteral">&#39;from&#39;</span>, <span class="stringliteral">&#39;bcc&#39;</span>, <span class="stringliteral">&#39;replyTo&#39;</span>, <span class="stringliteral">&#39;subject&#39;</span>, <span class="stringliteral">&#39;message&#39;</span>, <span class="stringliteral">&#39;from_name&#39;</span>, <span class="stringliteral">&#39;message_format&#39;</span>, <span class="stringliteral">&#39;attachments&#39;</span>, <span class="stringliteral">&#39;disableAutoformat&#39;</span> );</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        <span class="keywordflow">foreach</span> ( <a class="code" href="wp-cron_8php.html#af20635b6c08e03bfee9e3fc036fa80f3">$keys</a> as $key ) {</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;            $notification[ $key ] = rgar( $notification_data, $key );</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        }</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <span class="keywordflow">return</span> $notification;</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    }</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_notifications_to_send( $event, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead ) {</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;        $notifications         = self::get_notifications( $event, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> );</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        $notifications_to_send = array();</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;        <span class="keywordflow">foreach</span> ( $notifications as $notification ) {</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;            <span class="keywordflow">if</span> ( GFCommon::evaluate_conditional_logic( rgar( $notification, <span class="stringliteral">&#39;conditionalLogic&#39;</span> ), <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead ) ) {</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;                $notifications_to_send[] = $notification;</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;            }</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        }</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        <span class="keywordflow">return</span> $notifications_to_send;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    }</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_notifications( $event, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> ) {</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        <span class="keywordflow">if</span> ( rgempty( <span class="stringliteral">&#39;notifications&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> ) ) {</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;            <span class="keywordflow">return</span> array();</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        }</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;        $notifications = array();</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;        <span class="keywordflow">foreach</span> ( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notifications&#39;</span>] as $notification ) {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;            $notification_event = rgar( $notification, <span class="stringliteral">&#39;event&#39;</span> );</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;            $omit_from_resend   = array( <span class="stringliteral">&#39;form_saved&#39;</span>, <span class="stringliteral">&#39;form_save_email_requested&#39;</span> );</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;            <span class="keywordflow">if</span> ( $notification_event == $event || ( $event == <span class="stringliteral">&#39;resend_notifications&#39;</span> &amp;&amp; ! in_array( $notification_event, $omit_from_resend ) ) ) {</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;                $notifications[] = $notification;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;            }</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        }</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        <span class="keywordflow">return</span> $notifications;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    }</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> has_admin_notification( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> ) {</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        <span class="keywordflow">return</span> ( ! empty( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>][<span class="stringliteral">&#39;to&#39;</span>] ) || ! empty( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>][<span class="stringliteral">&#39;routing&#39;</span>] ) ) &amp;&amp; ( ! empty( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>][<span class="stringliteral">&#39;subject&#39;</span>] ) || ! empty( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;notification&#39;</span>][<span class="stringliteral">&#39;message&#39;</span>] ) );</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    }</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> has_user_notification( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> ) {</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        <span class="keywordflow">return</span> ! empty( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;autoResponder&#39;</span>][<span class="stringliteral">&#39;toField&#39;</span>] ) &amp;&amp; ( ! empty( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;autoResponder&#39;</span>][<span class="stringliteral">&#39;subject&#39;</span>] ) || ! empty( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;autoResponder&#39;</span>][<span class="stringliteral">&#39;message&#39;</span>] ) );</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    }</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">function</span> send_email( <a class="code" href="wp-admin_2revision_8php.html#a0bb7e2b3d541598cc9c9e3b11bee859c">$from</a>, $to, $bcc, $reply_to, $subject, <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a>, $from_name = <span class="stringliteral">&#39;&#39;</span>, $message_format = <span class="stringliteral">&#39;html&#39;</span>, <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#aa2f80297e973639eba0f2f8619fe783b">$attachments</a> = <span class="stringliteral">&#39;&#39;</span>, $entry = <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        </div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        global <a class="code" href="tmp_2wordpress-tests-lib_2includes_2bootstrap_8php.html#a0283d24a47d4e01fa8846cac8a63d308">$phpmailer</a>;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;        $to    = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="charliteral">&#39; &#39;</span>, <span class="stringliteral">&#39;&#39;</span>, $to );</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        $bcc   = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="charliteral">&#39; &#39;</span>, <span class="stringliteral">&#39;&#39;</span>, $bcc );</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;        $error = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;        <span class="keywordflow">if</span> ( ! GFCommon::is_valid_email( <a class="code" href="wp-admin_2revision_8php.html#a0bb7e2b3d541598cc9c9e3b11bee859c">$from</a> ) ) {</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;            <a class="code" href="wp-admin_2revision_8php.html#a0bb7e2b3d541598cc9c9e3b11bee859c">$from</a> = <a class="code" href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a>( <span class="stringliteral">&#39;admin_email&#39;</span> );</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        }</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;        <span class="keywordflow">if</span> ( ! GFCommon::is_valid_email_list( $to ) ) {</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;            $error = <span class="keyword">new</span> <a class="code" href="class_w_p___error.html">WP_Error</a>( <span class="stringliteral">&#39;invalid_to&#39;</span>, <span class="stringliteral">&#39;Cannot send email because the TO address is invalid.&#39;</span> );</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( empty( $subject ) &amp;&amp; empty( <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> ) ) {</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;            $error = <span class="keyword">new</span> <a class="code" href="class_w_p___error.html">WP_Error</a>( <span class="stringliteral">&#39;missing_subject_and_message&#39;</span>, <span class="stringliteral">&#39;Cannot send email because there is no SUBJECT and no MESSAGE.&#39;</span> );</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ! GFCommon::is_valid_email( <a class="code" href="wp-admin_2revision_8php.html#a0bb7e2b3d541598cc9c9e3b11bee859c">$from</a> ) ) {</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;            $error = <span class="keyword">new</span> <a class="code" href="class_w_p___error.html">WP_Error</a>( <span class="stringliteral">&#39;invalid_from&#39;</span>, <span class="stringliteral">&#39;Cannot send email because the FROM address is invalid.&#39;</span> );</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        }</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $error ) ) {</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;            GFCommon::log_error( <span class="stringliteral">&#39;GFCommon::send_email(): &#39;</span> . $error-&gt;get_error_message() );</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;            GFCommon::log_error( print_r( compact( <span class="stringliteral">&#39;to&#39;</span>, <span class="stringliteral">&#39;subject&#39;</span>, <span class="stringliteral">&#39;message&#39;</span> ), <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;<span class="comment">            /**</span></div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="comment">             * Fires when an email from Gravity Forms has failed to send</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="comment">             *</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;<span class="comment">             * @param string $error The Error message returned after the email fails to send</span></div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;            <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;gform_send_email_failed&#39;</span>, $error, compact( <span class="stringliteral">&#39;from&#39;</span>, <span class="stringliteral">&#39;to&#39;</span>, <span class="stringliteral">&#39;bcc&#39;</span>, <span class="stringliteral">&#39;reply_to&#39;</span>, <span class="stringliteral">&#39;subject&#39;</span>, <span class="stringliteral">&#39;message&#39;</span>, <span class="stringliteral">&#39;from_name&#39;</span>, <span class="stringliteral">&#39;message_format&#39;</span>, <span class="stringliteral">&#39;attachments&#39;</span> ), $entry );</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        }</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        $content_type = $message_format == <span class="stringliteral">&#39;html&#39;</span> ? <span class="stringliteral">&#39;text/html&#39;</span> : <span class="stringliteral">&#39;text/plain&#39;</span>;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        <a class="code" href="search-field-date__range_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>         = empty( $from_name ) ? <a class="code" href="wp-admin_2revision_8php.html#a0bb7e2b3d541598cc9c9e3b11bee859c">$from</a> : $from_name;</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;        $headers         = array();</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;        $headers[<span class="stringliteral">&#39;From&#39;</span>] = <span class="stringliteral">&quot;From: \&quot;&quot;</span> . <a class="code" href="formatting_8php.html#a2aa43f1e479af8878251d6697bf84f09">wp_strip_all_tags</a>( <a class="code" href="search-field-date__range_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>, <span class="keyword">true</span> ) . <span class="stringliteral">&quot;\&quot; &lt;{$from}&gt;&quot;</span>;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;        <span class="keywordflow">if</span> ( GFCommon::is_valid_email_list( $reply_to ) ) {</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;            $headers[<span class="stringliteral">&#39;Reply-To&#39;</span>] = <span class="stringliteral">&quot;Reply-To: {$reply_to}&quot;</span>;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;        }</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;        <span class="keywordflow">if</span> ( GFCommon::is_valid_email_list( $bcc ) ) {</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;            $headers[<span class="stringliteral">&#39;Bcc&#39;</span>] = <span class="stringliteral">&quot;Bcc: $bcc&quot;</span>;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        }</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        $headers[<span class="stringliteral">&#39;Content-type&#39;</span>] = <span class="stringliteral">&quot;Content-type: {$content_type}; charset=&quot;</span> . <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;blog_charset&#39;</span> );</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        $abort_email = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        extract( <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_pre_send_email&#39;</span>, compact( <span class="stringliteral">&#39;to&#39;</span>, <span class="stringliteral">&#39;subject&#39;</span>, <span class="stringliteral">&#39;message&#39;</span>, <span class="stringliteral">&#39;headers&#39;</span>, <span class="stringliteral">&#39;attachments&#39;</span>, <span class="stringliteral">&#39;abort_email&#39;</span> ), $message_format ) );</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        $is_success = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;        <span class="keywordflow">if</span> ( ! $abort_email ) {</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;            GFCommon::log_debug( <span class="stringliteral">&#39;GFCommon::send_email(): Sending email via wp_mail().&#39;</span> );</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;            GFCommon::log_debug( print_r( compact( <span class="stringliteral">&#39;to&#39;</span>, <span class="stringliteral">&#39;subject&#39;</span>, <span class="stringliteral">&#39;message&#39;</span>, <span class="stringliteral">&#39;headers&#39;</span>, <span class="stringliteral">&#39;attachments&#39;</span>, <span class="stringliteral">&#39;abort_email&#39;</span> ), <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;            $is_success = wp_mail( $to, $subject, <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a>, $headers, <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#aa2f80297e973639eba0f2f8619fe783b">$attachments</a> );</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;            $result = <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $is_success ) ? $is_success-&gt;get_error_message() : $is_success;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;            GFCommon::log_debug( <span class="stringliteral">&quot;GFCommon::send_email(): Result from wp_mail(): {$result}&quot;</span> );</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;            <span class="keywordflow">if</span> ( ! <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $is_success ) &amp;&amp; $is_success ) {</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;                GFCommon::log_debug( <span class="stringliteral">&#39;GFCommon::send_email(): Mail was passed from WordPress to the mail server.&#39;</span> );</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;                GFCommon::log_error( <span class="stringliteral">&#39;GFCommon::send_email(): The mail message was passed off to WordPress for processing, but WordPress was unable to send the message.&#39;</span> );</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;            }</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="wp-includes_2plugin_8php.html#aad14d1be64c7ecfdf35da5a2f3cf979a">has_filter</a>( <span class="stringliteral">&#39;phpmailer_init&#39;</span> ) ) {</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;                GFCommon::log_debug( __METHOD__ . <span class="stringliteral">&#39;(): The WordPress phpmailer_init hook has been detected, usually used by SMTP plugins, it can impact mail delivery.&#39;</span> );</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;            }</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;            <span class="keywordflow">if</span> ( ! empty( $phpmailer-&gt;ErrorInfo ) ) {</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                GFCommon::log_debug( __METHOD__ . <span class="stringliteral">&#39;(): PHPMailer class returned an error message: &#39;</span> . $phpmailer-&gt;ErrorInfo );</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;            }           </div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;            GFCommon::log_debug( <span class="stringliteral">&#39;GFCommon::send_email(): Aborting. The gform_pre_send_email hook was used to set the abort_email parameter to true.&#39;</span> );</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        }</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        self::add_emails_sent();</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;        <a class="code" href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a>( <span class="stringliteral">&#39;gform_after_email&#39;</span>, $is_success, $to, $subject, <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a>, $headers, <a class="code" href="wp-content_2themes_2twentyeleven_2image_8php.html#aa2f80297e973639eba0f2f8619fe783b">$attachments</a>, $message_format, <a class="code" href="wp-admin_2revision_8php.html#a0bb7e2b3d541598cc9c9e3b11bee859c">$from</a>, $from_name, $bcc, $reply_to, $entry );</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    }</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> add_emails_sent() {</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        $count = self::get_emails_sent();</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        <a class="code" href="option_8php.html#a21f59332d7b293dca17bccd56c8c00eb">update_option</a>( <span class="stringliteral">&#39;gform_email_count&#39;</span>, ++$count );</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    }</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_emails_sent() {</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        $count = <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;gform_email_count&#39;</span> );</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        <span class="keywordflow">if</span> ( ! $count ) {</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;            $count = 0;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;        }</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a>;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    }</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_api_calls() {</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;        $count = <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;gform_api_count&#39;</span> );</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;        <span class="keywordflow">if</span> ( ! $count ) {</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;            $count = 0;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;        }</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a>;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    }</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> add_api_call() {</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        $count = self::get_api_calls();</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;        <a class="code" href="option_8php.html#a21f59332d7b293dca17bccd56c8c00eb">update_option</a>( <span class="stringliteral">&#39;gform_api_count&#39;</span>, ++$count );</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    }</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> has_post_field( $fields ) {</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        <span class="keywordflow">foreach</span> ( $fields as $field ) {</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;            <span class="keywordflow">if</span> ( in_array( $field-&gt;type, array( <span class="stringliteral">&#39;post_title&#39;</span>, <span class="stringliteral">&#39;post_content&#39;</span>, <span class="stringliteral">&#39;post_excerpt&#39;</span>, <span class="stringliteral">&#39;post_category&#39;</span>, <span class="stringliteral">&#39;post_image&#39;</span>, <span class="stringliteral">&#39;post_tags&#39;</span>, <span class="stringliteral">&#39;post_custom_field&#39;</span> ) ) ) {</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;            }</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;        }</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    }</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> has_list_field( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> ) {</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        <span class="keywordflow">return</span> self::has_field_by_type( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, <span class="stringliteral">&#39;list&#39;</span> );</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    }</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> has_credit_card_field( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> ) {</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        <span class="keywordflow">return</span> self::has_field_by_type( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, <span class="stringliteral">&#39;creditcard&#39;</span> );</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    }</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">function</span> has_field_by_type( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $type ) {</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;        <span class="keywordflow">if</span> ( is_array( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;fields&#39;</span>] ) ) {</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;            <span class="keywordflow">foreach</span> ( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;fields&#39;</span>] as $field ) {</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">RGFormsModel::get_input_type</a>( $field ) == $type ) {</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;                }</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;            }</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        }</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    }</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> current_user_can_any( $caps ) {</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        <span class="keywordflow">if</span> ( ! is_array( $caps ) ) {</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;            $has_cap = <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( $caps ) || <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;gform_full_access&#39;</span> );</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;            <span class="keywordflow">return</span> $has_cap;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        }</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;        <span class="keywordflow">foreach</span> ( $caps as $cap ) {</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( $cap ) ) {</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;            }</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;        }</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        $has_full_access = <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( <span class="stringliteral">&#39;gform_full_access&#39;</span> );</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        <span class="keywordflow">return</span> $has_full_access;</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    }</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> current_user_can_which( $caps ) {</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;        <span class="keywordflow">foreach</span> ( $caps as $cap ) {</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a>( $cap ) ) {</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;                <span class="keywordflow">return</span> $cap;</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;            }</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        }</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    }</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_pricing_field( $field_type ) {</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;        <span class="keywordflow">return</span> self::is_product_field( $field_type ) || $field_type == <span class="stringliteral">&#39;donation&#39;</span>;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    }</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_product_field( $field_type ) {</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;        $product_fields = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_product_field_types&#39;</span>, array( <span class="stringliteral">&#39;option&#39;</span>, <span class="stringliteral">&#39;quantity&#39;</span>, <span class="stringliteral">&#39;product&#39;</span>, <span class="stringliteral">&#39;total&#39;</span>, <span class="stringliteral">&#39;shipping&#39;</span>, <span class="stringliteral">&#39;calculation&#39;</span>, <span class="stringliteral">&#39;price&#39;</span> ) );</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        <span class="keywordflow">return</span> in_array( $field_type, $product_fields );</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    }</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> all_caps() {</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;        <span class="keywordflow">return</span> array(</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;            <span class="stringliteral">&#39;gravityforms_edit_forms&#39;</span>,</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;            <span class="stringliteral">&#39;gravityforms_delete_forms&#39;</span>,</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;            <span class="stringliteral">&#39;gravityforms_create_form&#39;</span>,</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;            <span class="stringliteral">&#39;gravityforms_view_entries&#39;</span>,</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;            <span class="stringliteral">&#39;gravityforms_edit_entries&#39;</span>,</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;            <span class="stringliteral">&#39;gravityforms_delete_entries&#39;</span>,</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;            <span class="stringliteral">&#39;gravityforms_view_settings&#39;</span>,</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;            <span class="stringliteral">&#39;gravityforms_edit_settings&#39;</span>,</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;            <span class="stringliteral">&#39;gravityforms_export_entries&#39;</span>,</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;            <span class="stringliteral">&#39;gravityforms_uninstall&#39;</span>,</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;            <span class="stringliteral">&#39;gravityforms_view_entry_notes&#39;</span>,</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;            <span class="stringliteral">&#39;gravityforms_edit_entry_notes&#39;</span>,</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;            <span class="stringliteral">&#39;gravityforms_view_updates&#39;</span>,</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;            <span class="stringliteral">&#39;gravityforms_view_addons&#39;</span>,</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;            <span class="stringliteral">&#39;gravityforms_preview_forms&#39;</span>,</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        );</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    }</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> delete_directory( <a class="code" href="form__list_8php.html#a1659f0a629d408e0f849dbe4ee061e62">$dir</a> ) {</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        <span class="keywordflow">if</span> ( ! file_exists( <a class="code" href="form__list_8php.html#a1659f0a629d408e0f849dbe4ee061e62">$dir</a> ) ) {</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        }</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        <span class="keywordflow">if</span> ( $handle = opendir( <a class="code" href="form__list_8php.html#a1659f0a629d408e0f849dbe4ee061e62">$dir</a> ) ) {</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;            $array = array();</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;            <span class="keywordflow">while</span> ( <span class="keyword">false</span> !== ( <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> = readdir( $handle ) ) ) {</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> != <span class="charliteral">&#39;.&#39;</span> &amp;&amp; <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> != <span class="stringliteral">&#39;..&#39;</span> ) {</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;                    <span class="keywordflow">if</span> ( is_dir( <a class="code" href="form__list_8php.html#a1659f0a629d408e0f849dbe4ee061e62">$dir</a> . <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> ) ) {</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;                        <span class="keywordflow">if</span> ( ! @rmdir( <a class="code" href="form__list_8php.html#a1659f0a629d408e0f849dbe4ee061e62">$dir</a> . $file ) ) {</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                            <span class="comment">// Empty directory? Remove it</span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;                            self::delete_directory( <a class="code" href="form__list_8php.html#a1659f0a629d408e0f849dbe4ee061e62">$dir</a> . $file . <span class="charliteral">&#39;/&#39;</span> );</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;                        } <span class="comment">// Not empty? Delete the files inside it</span></div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;                        @unlink( <a class="code" href="form__list_8php.html#a1659f0a629d408e0f849dbe4ee061e62">$dir</a> . $file );</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;                    }</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;                }</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;            }</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;            closedir( $handle );</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;            @rmdir( <a class="code" href="form__list_8php.html#a1659f0a629d408e0f849dbe4ee061e62">$dir</a> );</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        }</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    }</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_remote_message() {</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        <span class="keywordflow">return</span> stripslashes( <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;rg_gforms_message&#39;</span> ) );</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    }</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_key() {</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;rg_gforms_key&#39;</span> );</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    }</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> has_update( $use_cache = <span class="keyword">true</span> ) {</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;        $version_info = GFCommon::get_version_info( $use_cache );</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;        $version      = rgar( $version_info, <span class="stringliteral">&#39;version&#39;</span> );</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;        <span class="keywordflow">return</span> empty( $version ) ? <span class="keyword">false</span> : version_compare( GFCommon::$version, $version, <span class="charliteral">&#39;&lt;&#39;</span> );</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    }</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_key_info( $key ) {</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;        <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a>            = array( <span class="stringliteral">&#39;method&#39;</span> =&gt; <span class="stringliteral">&#39;POST&#39;</span>, <span class="stringliteral">&#39;timeout&#39;</span> =&gt; 3 );</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;        <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a>[<span class="stringliteral">&#39;headers&#39;</span>] = array(</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;            <span class="stringliteral">&#39;Content-Type&#39;</span> =&gt; <span class="stringliteral">&#39;application/x-www-form-urlencoded; charset=&#39;</span> . <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;blog_charset&#39;</span> ),</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;            <span class="stringliteral">&#39;User-Agent&#39;</span>   =&gt; <span class="stringliteral">&#39;WordPress/&#39;</span> . <a class="code" href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a>( <span class="stringliteral">&#39;version&#39;</span> ),</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;            <span class="stringliteral">&#39;Referer&#39;</span>      =&gt; <a class="code" href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a>( <span class="stringliteral">&#39;url&#39;</span> )</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;        );</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        $raw_response = self::post_to_manager( <span class="stringliteral">&#39;api.php&#39;</span>, <span class="stringliteral">&quot;op=get_key&amp;key={$key}&quot;</span>, <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> );</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $raw_response ) || $raw_response[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;code&#39;</span>] != 200 ) {</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;            <span class="keywordflow">return</span> array();</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;        }</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;        $key_info = unserialize( trim( $raw_response[<span class="stringliteral">&#39;body&#39;</span>] ) );</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        <span class="keywordflow">return</span> $key_info ? $key_info : array();</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    }</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_version_info( $cache = <span class="keyword">true</span> ) {</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;        $raw_response = <a class="code" href="option_8php.html#ad76e544fa26ccb7e20668c75cfdcb012">get_transient</a>( <span class="stringliteral">&#39;gform_update_info&#39;</span> );</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        <span class="keywordflow">if</span> ( ! $cache ) {</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;            $raw_response = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;        }</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;        <span class="keywordflow">if</span> ( ! $raw_response ) {</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;            <span class="comment">//Getting version number</span></div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;            <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a>            = array( <span class="stringliteral">&#39;method&#39;</span> =&gt; <span class="stringliteral">&#39;POST&#39;</span>, <span class="stringliteral">&#39;timeout&#39;</span> =&gt; 20 );</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;            <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a>[<span class="stringliteral">&#39;headers&#39;</span>] = array(</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;                <span class="stringliteral">&#39;Content-Type&#39;</span> =&gt; <span class="stringliteral">&#39;application/x-www-form-urlencoded; charset=&#39;</span> . <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;blog_charset&#39;</span> ),</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;                <span class="stringliteral">&#39;User-Agent&#39;</span>   =&gt; <span class="stringliteral">&#39;WordPress/&#39;</span> . <a class="code" href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a>( <span class="stringliteral">&#39;version&#39;</span> ),</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;                <span class="stringliteral">&#39;Referer&#39;</span>      =&gt; <a class="code" href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a>( <span class="stringliteral">&#39;url&#39;</span> )</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;            );</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;            <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a>[<span class="stringliteral">&#39;body&#39;</span>]    = self::get_remote_post_params();</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;            <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a>[<span class="stringliteral">&#39;timeout&#39;</span>] = 15;</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;            $nocache = $cache ? <span class="stringliteral">&#39;&#39;</span> : <span class="stringliteral">&#39;nocache=1&#39;</span>; <span class="comment">//disabling server side caching</span></div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;            $raw_response = self::post_to_manager( <span class="stringliteral">&#39;version.php&#39;</span>, $nocache, <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> );</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;            <span class="comment">//caching responses.</span></div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;            <a class="code" href="option_8php.html#af7903f5568120880e79afc93d75c0d6e">set_transient</a>( <span class="stringliteral">&#39;gform_update_info&#39;</span>, $raw_response, 86400 ); <span class="comment">//caching for 24 hours</span></div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;        }</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $raw_response ) || rgars( $raw_response, <span class="stringliteral">&#39;response/code&#39;</span> ) != 200 ) {</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;            <span class="keywordflow">return</span> array( <span class="stringliteral">&#39;is_valid_key&#39;</span> =&gt; <span class="charliteral">&#39;1&#39;</span>, <span class="stringliteral">&#39;version&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;url&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;is_error&#39;</span> =&gt; <span class="charliteral">&#39;1&#39;</span> );</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;        }</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;        $version_info = json_decode( $raw_response[<span class="stringliteral">&#39;body&#39;</span>], <span class="keyword">true</span> );</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;        <span class="keywordflow">if</span> ( empty( $version_info ) ) {</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;            <span class="keywordflow">return</span> array( <span class="stringliteral">&#39;is_valid_key&#39;</span> =&gt; <span class="charliteral">&#39;1&#39;</span>, <span class="stringliteral">&#39;version&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;url&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;is_error&#39;</span> =&gt; <span class="charliteral">&#39;1&#39;</span> );</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;        }</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;        <span class="keywordflow">return</span> $version_info;</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    }</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_remote_request_params() {</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;        global <a class="code" href="schema_8php.html#aaac3ddf81d405fac59e1dceeca05b0a7">$wpdb</a>;</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;        <span class="keywordflow">return</span> sprintf( <span class="stringliteral">&#39;of=GravityForms&amp;key=%s&amp;v=%s&amp;wp=%s&amp;php=%s&amp;mysql=%s&amp;version=2&#39;</span>, urlencode( self::get_key() ), urlencode( self::$version ), urlencode( <a class="code" href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a>( <span class="stringliteral">&#39;version&#39;</span> ) ), urlencode( phpversion() ), urlencode( $wpdb-&gt;db_version() ) );</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    }</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_remote_post_params() {</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;        global <a class="code" href="schema_8php.html#aaac3ddf81d405fac59e1dceeca05b0a7">$wpdb</a>;</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;        <span class="keywordflow">if</span> ( ! function_exists( <span class="stringliteral">&#39;get_plugins&#39;</span> ) ) {</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;            require_once( <a class="code" href="load-scripts_8php.html#a495f94983b95273ad267511b2411351f">ABSPATH</a> . <span class="stringliteral">&#39;wp-admin/includes/plugin.php&#39;</span> );</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;        }</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;        $plugin_list = <a class="code" href="wp-admin_2includes_2plugin_8php.html#ac98eb4b447e19f4df31adaaedc008b0f">get_plugins</a>();</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;        $site_url    = <a class="code" href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a>( <span class="stringliteral">&#39;url&#39;</span> );</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;        <a class="code" href="plugin-editor_8php.html#a4ab51386acb82cd0a0066eac2567b2bd">$plugins</a>     = array();</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;        $active_plugins = <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;active_plugins&#39;</span> );</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        <span class="keywordflow">foreach</span> ( $plugin_list as $key =&gt; <a class="code" href="plugins_8php.html#ada8a7130088351710bb02ed622d6bf65">$plugin</a> ) {</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;            $is_active = in_array( $key, $active_plugins );</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;            <span class="comment">//filter for only gravityforms ones, may get some others if using our naming convention</span></div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;            <span class="keywordflow">if</span> ( strpos( strtolower( <a class="code" href="plugins_8php.html#ada8a7130088351710bb02ed622d6bf65">$plugin</a>[<span class="stringliteral">&#39;Title&#39;</span>] ), <span class="stringliteral">&#39;gravity forms&#39;</span> ) !== <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;                <a class="code" href="search-field-date__range_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>      = substr( $key, 0, strpos( $key, <span class="charliteral">&#39;/&#39;</span> ) );</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;                <a class="code" href="plugin-editor_8php.html#a4ab51386acb82cd0a0066eac2567b2bd">$plugins</a>[] = array( <span class="stringliteral">&#39;name&#39;</span> =&gt; <a class="code" href="search-field-date__range_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>, <span class="stringliteral">&#39;version&#39;</span> =&gt; <a class="code" href="plugins_8php.html#ada8a7130088351710bb02ed622d6bf65">$plugin</a>[<span class="stringliteral">&#39;Version&#39;</span>], <span class="stringliteral">&#39;is_active&#39;</span> =&gt; $is_active );</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;            }</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        }</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;        <a class="code" href="plugin-editor_8php.html#a4ab51386acb82cd0a0066eac2567b2bd">$plugins</a> = json_encode( <a class="code" href="plugin-editor_8php.html#a4ab51386acb82cd0a0066eac2567b2bd">$plugins</a> );</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;        <span class="comment">//get theme info</span></div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;        <a class="code" href="theme-editor_8php.html#a1ae541f7fe1c5e21cb4535f88ec9e9dc">$theme</a>            = <a class="code" href="wp-includes_2theme_8php.html#a930e87e99fca734cbd2913800e7bcf4d">wp_get_theme</a>();</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        $theme_name       = <a class="code" href="theme-editor_8php.html#a1ae541f7fe1c5e21cb4535f88ec9e9dc">$theme</a>-&gt;get( <span class="stringliteral">&#39;Name&#39;</span> );</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        $theme_uri        = <a class="code" href="theme-editor_8php.html#a1ae541f7fe1c5e21cb4535f88ec9e9dc">$theme</a>-&gt;get( <span class="stringliteral">&#39;ThemeURI&#39;</span> );</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        $theme_version    = <a class="code" href="theme-editor_8php.html#a1ae541f7fe1c5e21cb4535f88ec9e9dc">$theme</a>-&gt;get( <span class="stringliteral">&#39;Version&#39;</span> );</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        $theme_author     = <a class="code" href="theme-editor_8php.html#a1ae541f7fe1c5e21cb4535f88ec9e9dc">$theme</a>-&gt;get( <span class="stringliteral">&#39;Author&#39;</span> );</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;        $theme_author_uri = <a class="code" href="theme-editor_8php.html#a1ae541f7fe1c5e21cb4535f88ec9e9dc">$theme</a>-&gt;get( <span class="stringliteral">&#39;AuthorURI&#39;</span> );</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;        $form_counts    = <a class="code" href="class_g_f_forms_model.html#a1641aad22a837fa8fffba39877964f81">GFFormsModel::get_form_count</a>();</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;        $active_count   = $form_counts[<span class="stringliteral">&#39;active&#39;</span>];</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        $inactive_count = $form_counts[<span class="stringliteral">&#39;inactive&#39;</span>];</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;        $fc             = abs( $active_count ) + abs( $inactive_count );</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        $entry_count    = <a class="code" href="class_g_f_forms_model.html#ad9b91456e6a33c6a00aea487280fa38e">GFFormsModel::get_lead_count_all_forms</a>( <span class="stringliteral">&#39;active&#39;</span> );</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        $im             = <a class="code" href="load_8php.html#a72e5386fcd7a5ce7526d208d0b03a0af">is_multisite</a>();</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        $post = array( <span class="stringliteral">&#39;of&#39;</span> =&gt; <span class="stringliteral">&#39;gravityforms&#39;</span>, <span class="stringliteral">&#39;key&#39;</span> =&gt; self::get_key(), <span class="charliteral">&#39;v&#39;</span> =&gt; self::$version, <span class="stringliteral">&#39;wp&#39;</span> =&gt; <a class="code" href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a>( <span class="stringliteral">&#39;version&#39;</span> ), <span class="stringliteral">&#39;php&#39;</span> =&gt; phpversion(), <span class="stringliteral">&#39;mysql&#39;</span> =&gt; $wpdb-&gt;db_version(), <span class="stringliteral">&#39;version&#39;</span> =&gt; <span class="charliteral">&#39;2&#39;</span>, <span class="stringliteral">&#39;plugins&#39;</span> =&gt; <a class="code" href="plugin-editor_8php.html#a4ab51386acb82cd0a0066eac2567b2bd">$plugins</a>, <span class="stringliteral">&#39;tn&#39;</span> =&gt; $theme_name, <span class="stringliteral">&#39;tu&#39;</span> =&gt; $theme_uri, <span class="stringliteral">&#39;tv&#39;</span> =&gt; $theme_version, <span class="stringliteral">&#39;ta&#39;</span> =&gt; $theme_author, <span class="stringliteral">&#39;tau&#39;</span> =&gt; $theme_author_uri, <span class="stringliteral">&#39;im&#39;</span> =&gt; $im, <span class="stringliteral">&#39;fc&#39;</span> =&gt; $fc, <span class="stringliteral">&#39;ec&#39;</span> =&gt; $entry_count, <span class="stringliteral">&#39;emc&#39;</span> =&gt; self::get_emails_sent(), <span class="stringliteral">&#39;api&#39;</span> =&gt; self::get_api_calls() );</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>;</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    }</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> ensure_wp_version() {</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="gravityforms_8php.html#af1a8961ff0bce0e696ba1fcc2fe8371e">GF_SUPPORTED_WP_VERSION</a> ) {</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;            echo <span class="stringliteral">&quot;&lt;div class=&#39;error&#39; style=&#39;padding:10px;&#39;&gt;&quot;</span> . sprintf( <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Gravity Forms require WordPress %s or greater. You must upgrade WordPress in order to use Gravity Forms&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ), <a class="code" href="gravityforms_8php.html#a7bcd2a91ddf1f1524805d64271f4f6d6">GF_MIN_WP_VERSION</a> ) . <span class="stringliteral">&#39;&lt;/div&gt;&#39;</span>;</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        }</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    }</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> check_update( <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a>, $cache = <span class="keyword">true</span> ) {</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;        <span class="keywordflow">if</span> ( ! is_object( <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a> ) ) {</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a>;</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;        }</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;        $version_info = self::get_version_info( $cache );</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;        <span class="keywordflow">if</span> ( ! $version_info ) {</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a>;</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;        }</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;        $plugin_path = <span class="stringliteral">&#39;gravityforms/gravityforms.php&#39;</span>;</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;        <span class="keywordflow">if</span> ( empty( <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a>-&gt;response[ $plugin_path ] ) ) {</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;            <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a>-&gt;response[ $plugin_path ] = <span class="keyword">new</span> stdClass();</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;        }</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;        $version = rgar( $version_info, <span class="stringliteral">&#39;version&#39;</span> );</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;        <span class="comment">//Empty response means that the key is invalid. Do not queue for upgrade</span></div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;        <span class="keywordflow">if</span> ( ! rgar( $version_info, <span class="stringliteral">&#39;is_valid_key&#39;</span> ) || version_compare( GFCommon::$version, $version, <span class="stringliteral">&#39;&gt;=&#39;</span> ) ) {</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;            unset( <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a>-&gt;response[ $plugin_path ] );</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;            <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a>                                         = rgar( $version_info, <span class="stringliteral">&#39;url&#39;</span> );</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;            <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a>-&gt;response[ $plugin_path ]-&gt;url         = <span class="stringliteral">&#39;http://www.gravityforms.com&#39;</span>;</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;            <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a>-&gt;response[ $plugin_path ]-&gt;slug        = <span class="stringliteral">&#39;gravityforms&#39;</span>;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;            <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a>-&gt;response[ $plugin_path ]-&gt;plugin      = $plugin_path;</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;            <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a>-&gt;response[ $plugin_path ]-&gt;package     = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="stringliteral">&#39;{KEY}&#39;</span>, GFCommon::get_key(), <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> );</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;            <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a>-&gt;response[ $plugin_path ]-&gt;new_version = $version;</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;            <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a>-&gt;response[ $plugin_path ]-&gt;id          = <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;        }</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a>;</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    }</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> cache_remote_message() {</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        <span class="comment">//Getting version number</span></div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;        $key                = GFCommon::get_key();</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;        $body               = <span class="stringliteral">&quot;key=$key&quot;</span>;</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;        <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a>            = array( <span class="stringliteral">&#39;method&#39;</span> =&gt; <span class="stringliteral">&#39;POST&#39;</span>, <span class="stringliteral">&#39;timeout&#39;</span> =&gt; 3, <span class="stringliteral">&#39;body&#39;</span> =&gt; $body );</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a>[<span class="stringliteral">&#39;headers&#39;</span>] = array(</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;            <span class="stringliteral">&#39;Content-Type&#39;</span>   =&gt; <span class="stringliteral">&#39;application/x-www-form-urlencoded; charset=&#39;</span> . <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;blog_charset&#39;</span> ),</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;            <span class="stringliteral">&#39;Content-Length&#39;</span> =&gt; strlen( $body ),</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;            <span class="stringliteral">&#39;User-Agent&#39;</span>     =&gt; <span class="stringliteral">&#39;WordPress/&#39;</span> . <a class="code" href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a>( <span class="stringliteral">&#39;version&#39;</span> ),</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;            <span class="stringliteral">&#39;Referer&#39;</span>        =&gt; <a class="code" href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a>( <span class="stringliteral">&#39;url&#39;</span> )</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;        );</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;        $raw_response = self::post_to_manager( <span class="stringliteral">&#39;message.php&#39;</span>, GFCommon::get_remote_request_params(), <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> );</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $raw_response ) || 200 != $raw_response[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;code&#39;</span>] ) {</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;            <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;            <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> = $raw_response[<span class="stringliteral">&#39;body&#39;</span>];</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;        }</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;        <span class="comment">//validating that message is a valid Gravity Form message. If message is invalid, don&#39;t display anything</span></div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        <span class="keywordflow">if</span> ( substr( <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a>, 0, 10 ) != <span class="stringliteral">&#39;&lt;!--GFM--&gt;&#39;</span> ) {</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;            <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;        }</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;        <a class="code" href="option_8php.html#a21f59332d7b293dca17bccd56c8c00eb">update_option</a>( <span class="stringliteral">&#39;rg_gforms_message&#39;</span>, <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> );</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    }</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> post_to_manager( <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>, $query, <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> ){</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;        $request_url = GRAVITY_MANAGER_URL . <span class="charliteral">&#39;/&#39;</span> . <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> . <span class="charliteral">&#39;?&#39;</span> . $query;</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;        self::log_debug( <span class="stringliteral">&#39;Posting to manager: &#39;</span> . $request_url );</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;        $raw_response = <a class="code" href="wordpress_2wp-includes_2http_8php.html#a197e9e4b401150dba32ba7d51442bfbb">wp_remote_post</a>( $request_url, <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> );</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;        self::log_debug( print_r( $raw_response, <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a>( $raw_response ) || 200 != $raw_response[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;code&#39;</span>] ){</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;            self::log_error( <span class="stringliteral">&#39;Error from manager. Sending to proxy...&#39;</span> );</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;            $request_url = GRAVITY_MANAGER_PROXY_URL . <span class="stringliteral">&#39;/proxy.php?f=&#39;</span> . <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> . <span class="charliteral">&#39;&amp;&#39;</span> . $query;</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;            $raw_response = <a class="code" href="wordpress_2wp-includes_2http_8php.html#a197e9e4b401150dba32ba7d51442bfbb">wp_remote_post</a>( $request_url, <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> );</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;            self::log_debug( print_r( $raw_response, <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;        }</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;        <span class="keywordflow">return</span> $raw_response;</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    }</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_local_timestamp( $timestamp = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        <span class="keywordflow">if</span> ( $timestamp == <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;            $timestamp = time();</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;        }</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;        <span class="keywordflow">return</span> $timestamp + ( <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;gmt_offset&#39;</span> ) * 3600 );</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    }</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_gmt_timestamp( $local_timestamp ) {</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;        <span class="keywordflow">return</span> $local_timestamp - ( <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;gmt_offset&#39;</span> ) * 3600 );</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;    }</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> format_date( $gmt_datetime, $is_human = <span class="keyword">true</span>, <a class="code" href="admin_8php.html#acca3fdcdfc67e06cb49a87e476d364a8">$date_format</a> = <span class="stringliteral">&#39;&#39;</span>, $include_time = <span class="keyword">true</span> ) {</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;        <span class="keywordflow">if</span> ( empty( $gmt_datetime ) ) {</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;        }</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;        <span class="comment">//adjusting date to local configured Time Zone</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;        $lead_gmt_time   = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#af7ccbb4fe49b4877219cbdbddecd7f77">mysql2date</a>( <span class="charliteral">&#39;G&#39;</span>, $gmt_datetime );</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;        $lead_local_time = self::get_local_timestamp( $lead_gmt_time );</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;        <span class="keywordflow">if</span> ( empty( <a class="code" href="admin_8php.html#acca3fdcdfc67e06cb49a87e476d364a8">$date_format</a> ) ) {</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;            <a class="code" href="admin_8php.html#acca3fdcdfc67e06cb49a87e476d364a8">$date_format</a> = <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;date_format&#39;</span> );</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;        }</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;        <span class="keywordflow">if</span> ( $is_human ) {</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;            $time_diff = time() - $lead_gmt_time;</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;            <span class="keywordflow">if</span> ( $time_diff &gt; 0 &amp;&amp; $time_diff &lt; 24 * 60 * 60 ) {</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;                $date_display = sprintf( <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;%s ago&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ), <a class="code" href="formatting_8php.html#af2574f18e281f23b4b3b04bf02ebe4d5">human_time_diff</a>( $lead_gmt_time ) );</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;                $date_display = $include_time ? sprintf( <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;%1$s at %2$s&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ), <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a053ff37ae44c85a9bef47cd59328912e">date_i18n</a>( <a class="code" href="admin_8php.html#acca3fdcdfc67e06cb49a87e476d364a8">$date_format</a>, $lead_local_time, <span class="keyword">true</span> ), <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a053ff37ae44c85a9bef47cd59328912e">date_i18n</a>( <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;time_format&#39;</span> ), $lead_local_time, <span class="keyword">true</span> ) ) : <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a053ff37ae44c85a9bef47cd59328912e">date_i18n</a>( <a class="code" href="admin_8php.html#acca3fdcdfc67e06cb49a87e476d364a8">$date_format</a>, $lead_local_time, <a class="code" href="admin_8php.html#acfc73f199060a91876019ff352baa5c2">true</a> );</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;            }</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;            $date_display = $include_time ? sprintf( <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;%1$s at %2$s&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ), <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a053ff37ae44c85a9bef47cd59328912e">date_i18n</a>( <a class="code" href="admin_8php.html#acca3fdcdfc67e06cb49a87e476d364a8">$date_format</a>, $lead_local_time, <span class="keyword">true</span> ), <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a053ff37ae44c85a9bef47cd59328912e">date_i18n</a>( <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;time_format&#39;</span> ), $lead_local_time, <span class="keyword">true</span> ) ) : <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a053ff37ae44c85a9bef47cd59328912e">date_i18n</a>( <a class="code" href="admin_8php.html#acca3fdcdfc67e06cb49a87e476d364a8">$date_format</a>, $lead_local_time, <a class="code" href="admin_8php.html#acfc73f199060a91876019ff352baa5c2">true</a> );</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;        }</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;        <span class="keywordflow">return</span> $date_display;</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;    }</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_selection_value( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) {</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;        <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a> = explode( <span class="charliteral">&#39;|&#39;</span>, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;        $val = <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a>[0];</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;        <span class="keywordflow">return</span> $val;</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;    }</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> selection_display( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, $field, $currency = <span class="stringliteral">&#39;&#39;</span>, $use_text = <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;        <span class="keywordflow">if</span> ( is_array( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) ) {</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;        }</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;        <span class="keywordflow">if</span> ( $field !== <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> &amp;&amp; $field-&gt;enablePrice ) {</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;            <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a>   = explode( <span class="charliteral">&#39;|&#39;</span>, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;            $val   = <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a>[0];</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;            $price = count( <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a> ) &gt; 1 ? <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a>[1] : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;            $val = <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>;</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;            $price = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;        }</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        <span class="keywordflow">if</span> ( $use_text ) {</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;            $val = <a class="code" href="class_g_f_forms_model.html#a2db0d85a059a494987a8e8ef648e1c49">RGFormsModel::get_choice_text</a>( $field, $val );</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;        }</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $price ) ) {</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;$val (&quot;</span> . self::to_money( $price, $currency ) . <span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;            <span class="keywordflow">return</span> $val;</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;        }</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    }</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> date_display( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, $input_format = <span class="stringliteral">&#39;mdy&#39;</span>, $output_format = <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        <span class="keywordflow">if</span> ( ! $output_format ) {</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;            $output_format = $input_format;</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;        }</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;        $date = self::parse_date( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, $input_format );</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;        <span class="keywordflow">if</span> ( empty( $date ) ) {</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>;</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;        }</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;        <a class="code" href="namespacelist.html">list</a>( $position, $separator ) = rgexplode( <span class="charliteral">&#39;_&#39;</span>, $output_format, 2 );</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;        <span class="keywordflow">switch</span> ( $separator ) {</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;dash&#39;</span> :</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;                $separator = <span class="charliteral">&#39;-&#39;</span>;</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;dot&#39;</span> :</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;                $separator = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;            <span class="keywordflow">default</span> :</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;                $separator = <span class="charliteral">&#39;/&#39;</span>;</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;        }</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;        <span class="keywordflow">switch</span> ( $position ) {</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;year&#39;</span> :</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;month&#39;</span> :</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;day&#39;</span> :</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;                <span class="keywordflow">return</span> $date[ $position ];</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;ymd&#39;</span> :</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;                <span class="keywordflow">return</span> $date[<span class="stringliteral">&#39;year&#39;</span>] . $separator . $date[<span class="stringliteral">&#39;month&#39;</span>] . $separator . $date[<span class="stringliteral">&#39;day&#39;</span>];</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;dmy&#39;</span> :</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;                <span class="keywordflow">return</span> $date[<span class="stringliteral">&#39;day&#39;</span>] . $separator . $date[<span class="stringliteral">&#39;month&#39;</span>] . $separator . $date[<span class="stringliteral">&#39;year&#39;</span>];</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;            <span class="keywordflow">default</span> :</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                <span class="keywordflow">return</span> $date[<span class="stringliteral">&#39;month&#39;</span>] . $separator . $date[<span class="stringliteral">&#39;day&#39;</span>] . $separator . $date[<span class="stringliteral">&#39;year&#39;</span>];</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;        }</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    }</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> parse_date( $date, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> = <span class="stringliteral">&#39;mdy&#39;</span> ) {</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;        $date_info = array();</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;        $position = substr( <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a>, 0, 3 );</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;        <span class="keywordflow">if</span> ( is_array( $date ) ) {</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;            <span class="keywordflow">switch</span> ( $position ) {</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&#39;mdy&#39;</span> :</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;                    $date_info[<span class="stringliteral">&#39;month&#39;</span>] = rgar( $date, 0 );</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;                    $date_info[<span class="stringliteral">&#39;day&#39;</span>]   = rgar( $date, 1 );</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;                    $date_info[<span class="stringliteral">&#39;year&#39;</span>]  = rgar( $date, 2 );</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&#39;dmy&#39;</span> :</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;                    $date_info[<span class="stringliteral">&#39;day&#39;</span>]   = rgar( $date, 0 );</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;                    $date_info[<span class="stringliteral">&#39;month&#39;</span>] = rgar( $date, 1 );</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;                    $date_info[<span class="stringliteral">&#39;year&#39;</span>]  = rgar( $date, 2 );</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&#39;ymd&#39;</span> :</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;                    $date_info[<span class="stringliteral">&#39;year&#39;</span>]  = rgar( $date, 0 );</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;                    $date_info[<span class="stringliteral">&#39;month&#39;</span>] = rgar( $date, 1 );</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;                    $date_info[<span class="stringliteral">&#39;day&#39;</span>]   = rgar( $date, 2 );</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;            }</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;            <span class="keywordflow">return</span> $date_info;</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;        }</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;        $date = preg_replace( <span class="stringliteral">&quot;|[/\.]|&quot;</span>, <span class="charliteral">&#39;-&#39;</span>, $date );</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;        <span class="keywordflow">if</span> ( preg_match( <span class="stringliteral">&#39;/^(\d{1,4})-(\d{1,2})-(\d{1,4})$/&#39;</span>, $date, $matches ) ) {</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;            <span class="keywordflow">if</span> ( strlen( $matches[1] ) == 4 ) {</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;                <span class="comment">//format yyyy-mm-dd</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;                $date_info[<span class="stringliteral">&#39;year&#39;</span>]  = $matches[1];</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;                $date_info[<span class="stringliteral">&#39;month&#39;</span>] = $matches[2];</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;                $date_info[<span class="stringliteral">&#39;day&#39;</span>]   = $matches[3];</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( $position == <span class="stringliteral">&#39;mdy&#39;</span> ) {</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;                <span class="comment">//format mm-dd-yyyy</span></div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;                $date_info[<span class="stringliteral">&#39;month&#39;</span>] = $matches[1];</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;                $date_info[<span class="stringliteral">&#39;day&#39;</span>]   = $matches[2];</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;                $date_info[<span class="stringliteral">&#39;year&#39;</span>]  = $matches[3];</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                <span class="comment">//format dd-mm-yyyy</span></div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;                $date_info[<span class="stringliteral">&#39;day&#39;</span>]   = $matches[1];</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;                $date_info[<span class="stringliteral">&#39;month&#39;</span>] = $matches[2];</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;                $date_info[<span class="stringliteral">&#39;year&#39;</span>]  = $matches[3];</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;            }</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;        }</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;        <span class="keywordflow">return</span> $date_info;</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    }</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> truncate_url( <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> ) {</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;        $truncated_url = basename( <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> );</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;        <span class="keywordflow">if</span> ( empty( $truncated_url ) ) {</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;            $truncated_url = dirname( <a class="code" href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a> );</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;        }</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;        <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a> = explode( <span class="charliteral">&#39;?&#39;</span>, $truncated_url );</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a>[0];</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    }</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_field_placeholder_attribute( $field ) {</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;        $placeholder_value = GFCommon::replace_variables_prepopulate( $field-&gt;placeholder );</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;        <span class="keywordflow">return</span> ! empty( $placeholder_value ) ? sprintf( <span class="stringliteral">&quot;placeholder=&#39;%s&#39;&quot;</span>, <a class="code" href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a>( $placeholder_value ) ) : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    }</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_input_placeholder_attribute( $input ) {</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;        $placeholder_value = self::get_input_placeholder_value( $input );</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;        <span class="keywordflow">return</span> ! empty( $placeholder_value ) ? sprintf( <span class="stringliteral">&quot;placeholder=&#39;%s&#39;&quot;</span>, <a class="code" href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a>( $placeholder_value ) ) : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;    }</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_input_placeholder_value( $input ) {</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;        $placeholder = rgar( $input, <span class="stringliteral">&#39;placeholder&#39;</span> );</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;        <span class="keywordflow">return</span> empty( $placeholder ) ? <span class="stringliteral">&#39;&#39;</span> : GFCommon::replace_variables_prepopulate( $placeholder );</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    }</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_tabindex() {</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        <span class="keywordflow">return</span> GFCommon::$tab_index &gt; 0 ? <span class="stringliteral">&quot;tabindex=&#39;&quot;</span> . GFCommon::$tab_index ++ . <span class="stringliteral">&quot;&#39;&quot;</span> : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    }</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;<span class="comment">     * @deprecated</span></div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;<span class="comment">     * @param GF_Field_Checkbox $field</span></div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;<span class="comment">     * @param                   $value</span></div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;<span class="comment">     * @param                   $disabled_text</span></div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;<span class="comment">     * @return mixed</span></div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_checkbox_choices( $field, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, $disabled_text ) {</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a5fa64d49f59b259090dd3b907ef3f369">_deprecated_function</a>( <span class="stringliteral">&#39;get_checkbox_choices&#39;</span>, <span class="stringliteral">&#39;1.9&#39;</span>, <span class="stringliteral">&#39;GF_Field_Checkbox::get_checkbox_choices&#39;</span> );</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;        <span class="keywordflow">return</span> $field-&gt;get_checkbox_choices( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, $disabled_text );</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    }</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;<span class="comment">     * @deprecated Deprecated since 1.9. Use GF_Field_Checkbox::get_radio_choices() instead.</span></div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;<span class="comment">     * @param GF_Field_Radio $field</span></div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;<span class="comment">     * @param string         $value</span></div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;<span class="comment">     * @param                $disabled_text</span></div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;<span class="comment">     * @return mixed</span></div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_radio_choices( $field, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = <span class="stringliteral">&#39;&#39;</span>, $disabled_text ) {</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a5fa64d49f59b259090dd3b907ef3f369">_deprecated_function</a>( <span class="stringliteral">&#39;get_radio_choices&#39;</span>, <span class="stringliteral">&#39;1.9&#39;</span>, <span class="stringliteral">&#39;GF_Field_Checkbox::get_radio_choices&#39;</span> );</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;        <span class="keywordflow">return</span> $field-&gt;get_radio_choices( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, $disabled_text );</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    }</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_field_type_title( $type ) {</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;        $gf_field = <a class="code" href="class_g_f___fields.html#a104bc0f3909cf98af91a926db5f851a2">GF_Fields::get</a>( $type );</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $gf_field ) ) {</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;            <span class="keywordflow">return</span> $gf_field-&gt;get_form_editor_field_title();</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;        }</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_field_type_title&#39;</span>, $type, $type );</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    }</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_select_choices( $field, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = <span class="stringliteral">&#39;&#39;</span>, $support_placeholders = <span class="keyword">true</span> ) {</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;        $choices = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="gravityforms_8php.html#ad1b29ec2d54657ace1353d572eb3196a">RG_CURRENT_VIEW</a> == <span class="stringliteral">&#39;entry&#39;</span> &amp;&amp; empty( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) &amp;&amp; empty( $field-&gt;placeholder ) ) {</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;            $choices .= <span class="stringliteral">&quot;&lt;option value=&#39;&#39;&gt;&lt;/option&gt;&quot;</span>;</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;        }</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;        <span class="keywordflow">if</span> ( is_array( $field-&gt;choices ) ) {</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;            <span class="keywordflow">if</span> ( $support_placeholders &amp;&amp; ! empty( $field-&gt;placeholder ) ) {</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;                $selected = empty( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) ? <span class="stringliteral">&quot;selected=&#39;selected&#39;&quot;</span> : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;                $choices .= sprintf( <span class="stringliteral">&quot;&lt;option value=&#39;&#39; %s class=&#39;gf_placeholder&#39;&gt;%s&lt;/option&gt;&quot;</span>, $selected, <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $field-&gt;placeholder ) );</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;            }</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;            <span class="keywordflow">foreach</span> ( $field-&gt;choices as $choice ) {</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;                <span class="comment">//needed for users upgrading from 1.0</span></div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;                $field_value = ! empty( $choice[<span class="stringliteral">&#39;value&#39;</span>] ) || $field-&gt;enableChoiceValue || $field-&gt;type == <span class="stringliteral">&#39;post_category&#39;</span> ? $choice[<span class="stringliteral">&#39;value&#39;</span>] : $choice[<span class="stringliteral">&#39;text&#39;</span>];</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;                <span class="keywordflow">if</span> ( $field-&gt;enablePrice ) {</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;                    $price = rgempty( <span class="stringliteral">&#39;price&#39;</span>, $choice ) ? 0 : GFCommon::to_number( rgar( $choice, <span class="stringliteral">&#39;price&#39;</span> ) );</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;                    $field_value .= <span class="charliteral">&#39;|&#39;</span> . $price;</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;                }</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;                <span class="keywordflow">if</span> ( ! isset( $_GET[<span class="stringliteral">&#39;gf_token&#39;</span>] ) &amp;&amp; empty( $_POST ) &amp;&amp; rgblank( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) &amp;&amp; <a class="code" href="gravityforms_8php.html#ad1b29ec2d54657ace1353d572eb3196a">RG_CURRENT_VIEW</a> != <span class="stringliteral">&#39;entry&#39;</span> ) {</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;                    $selected = rgar( $choice, <span class="stringliteral">&#39;isSelected&#39;</span> ) ? <span class="stringliteral">&quot;selected=&#39;selected&#39;&quot;</span> : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;                    <span class="keywordflow">if</span> ( is_array( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) ) {</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;                        $is_match = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;                        <span class="keywordflow">foreach</span> ( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> as $item ) {</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;                            <span class="keywordflow">if</span> ( <a class="code" href="class_g_f_forms_model.html#a0600cc5dd578b45b14c57637dc3a5bff">RGFormsModel::choice_value_match</a>( $field, $choice, $item ) ) {</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;                                $is_match = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;                            }</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;                        }</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;                        $selected = $is_match ? <span class="stringliteral">&quot;selected=&#39;selected&#39;&quot;</span> : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;                        $selected = <a class="code" href="class_g_f_forms_model.html#a0600cc5dd578b45b14c57637dc3a5bff">RGFormsModel::choice_value_match</a>( $field, $choice, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) ? <span class="stringliteral">&quot;selected=&#39;selected&#39;&quot;</span> : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;                    }</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;                }</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;                $choice_markup = sprintf( <span class="stringliteral">&quot;&lt;option value=&#39;%s&#39; %s&gt;%s&lt;/option&gt;&quot;</span>, <a class="code" href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a>( $field_value ), $selected, <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( $choice[<span class="stringliteral">&#39;text&#39;</span>] ) );</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;                $choices .= gf_apply_filters( array( <span class="stringliteral">&#39;gform_field_choice_markup_pre_render&#39;</span>, $field-&gt;formId, $field-&gt;id ), $choice_markup, $choice, $field, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;            }</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;        }</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;        <span class="keywordflow">return</span> $choices;</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    }</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_section_empty( $section_field, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $entry ) {</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;        $cache_key = <span class="stringliteral">&quot;GFCommon::is_section_empty_{$form[&#39;id&#39;]}_{$section_field[&#39;id&#39;]}&quot;</span>;</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;        <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>     = GFCache::get( $cache_key );</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> !== <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> == <span class="keyword">true</span>;</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;        }</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;        $fields = self::get_section_fields( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $section_field[<span class="stringliteral">&#39;id&#39;</span>] );</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;        <span class="keywordflow">if</span> ( ! is_array( $fields ) ) {</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;            GFCache::set( $cache_key, 1 );</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;        }</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;        <span class="keywordflow">foreach</span> ( $fields as $field ) {</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;            <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = <a class="code" href="class_g_f_forms_model.html#abf73ae376358a1b72c4603c7b8b401ba">GFFormsModel::get_lead_field_value</a>( $entry, $field );</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;            <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = GFCommon::get_lead_field_display( $field, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, rgar( $entry, <span class="stringliteral">&#39;currency&#39;</span> ) );</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;            <span class="keywordflow">if</span> ( rgblank( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) ) {</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;            }</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;            <span class="comment">// most fields are displayed in the section by default, exceptions are handled below</span></div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;            $is_field_displayed_in_section = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;            <span class="comment">// by default, product fields are not displayed in their containing section (displayed in a product summary table)</span></div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;            <span class="comment">// if the filter is used to disable this, product fields are displayed in the section like other fields</span></div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;            <span class="keywordflow">if</span> ( self::is_product_field( $field[<span class="stringliteral">&#39;type&#39;</span>] ) ) {</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;<span class="comment">                /**</span></div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;<span class="comment">                 * By default, product fields are not displayed in their containing section (displayed in a product summary table). If the filter is used to disable this, product fields are displayed in the section like other fields</span></div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;<span class="comment">                 *</span></div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;<span class="comment">                 * @param array $field The Form Fields Object</span></div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;<span class="comment">                 * @param array $form The Form Object</span></div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;<span class="comment">                 * @param array $entry The Entry object</span></div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;<span class="comment">                 *</span></div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;<span class="comment">                 */</span></div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;                $display_product_summary = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_display_product_summary&#39;</span>, <span class="keyword">true</span>, $field, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $entry );</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;                $is_field_displayed_in_section = ! $display_product_summary;</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;            }</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;            <span class="keywordflow">if</span> ( $is_field_displayed_in_section ) {</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                GFCache::set( $cache_key, 0 );</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;            }</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;        }</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;        GFCache::set( $cache_key, 1 );</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    }</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_section_fields( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $section_field_id ) {</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;        $fields     = array();</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;        $in_section = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;        <span class="keywordflow">foreach</span> ( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;fields&#39;</span>] as $field ) {</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;            <span class="keywordflow">if</span> ( in_array( $field-&gt;type, array( <span class="stringliteral">&#39;section&#39;</span>, <span class="stringliteral">&#39;page&#39;</span> ) ) &amp;&amp; $in_section ) {</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;                <span class="keywordflow">return</span> $fields;</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;            }</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;            <span class="keywordflow">if</span> ( $field-&gt;id == $section_field_id ) {</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;                $in_section = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;            }</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;            <span class="keywordflow">if</span> ( $in_section ) {</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;                $fields[] = <a class="code" href="gquiz__grade_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>;</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;            }</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;        }</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;        <span class="keywordflow">return</span> $fields;</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;    }</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_us_state_code( $state_name ) {</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_g_f___fields.html#a104bc0f3909cf98af91a926db5f851a2">GF_Fields::get</a>( <span class="stringliteral">&#39;address&#39;</span> )-&gt;get_us_state_code( $state_name );</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    }</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_country_code( $country_name ) {</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_g_f___fields.html#a104bc0f3909cf98af91a926db5f851a2">GF_Fields::get</a>( <span class="stringliteral">&#39;address&#39;</span> )-&gt;get_country_code( $country_name );</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;    }</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_us_states() {</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_g_f___fields.html#a104bc0f3909cf98af91a926db5f851a2">GF_Fields::get</a>( <span class="stringliteral">&#39;address&#39;</span> )-&gt;get_us_states();</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    }</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_canadian_provinces() {</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_g_f___fields.html#a104bc0f3909cf98af91a926db5f851a2">GF_Fields::get</a>( <span class="stringliteral">&#39;address&#39;</span> )-&gt;get_canadian_provinces();</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    }</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_post_field( $field ) {</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;        <span class="keywordflow">return</span> in_array( $field-&gt;type, array( <span class="stringliteral">&#39;post_title&#39;</span>, <span class="stringliteral">&#39;post_tags&#39;</span>, <span class="stringliteral">&#39;post_category&#39;</span>, <span class="stringliteral">&#39;post_custom_field&#39;</span>, <span class="stringliteral">&#39;post_content&#39;</span>, <span class="stringliteral">&#39;post_excerpt&#39;</span>, <span class="stringliteral">&#39;post_image&#39;</span> ) );</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    }</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_fields_by_type( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, <a class="code" href="menu_8php.html#a92d70a97331cc6fc0a79d9da50895be8">$types</a> ) {</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_g_f_a_p_i.html#a0dda8aeec765f8fabc1d0542d1ea7879">GFAPI::get_fields_by_type</a>( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, <a class="code" href="menu_8php.html#a92d70a97331cc6fc0a79d9da50895be8">$types</a> );</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;    }</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> has_pages( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> ) {</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">sizeof</span>( <a class="code" href="class_g_f_a_p_i.html#a0dda8aeec765f8fabc1d0542d1ea7879">GFAPI::get_fields_by_type</a>( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, array( <span class="stringliteral">&#39;page&#39;</span> ) ) ) &gt; 0;</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;    }</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_product_fields_by_type( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, <a class="code" href="menu_8php.html#a92d70a97331cc6fc0a79d9da50895be8">$types</a>, $product_id ) {</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;        global $_product_fields;</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;        $key = json_encode( <a class="code" href="menu_8php.html#a92d70a97331cc6fc0a79d9da50895be8">$types</a> ) . <span class="charliteral">&#39;_&#39;</span> . $product_id . <span class="charliteral">&#39;_&#39;</span> . <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;        <span class="keywordflow">if</span> ( ! isset( $_product_fields[ $key ] ) ) {</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;            $fields = array();</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;            <span class="keywordflow">for</span> ( <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> = 0, $count = <span class="keyword">sizeof</span>( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;fields&#39;</span>] ); <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> &lt; <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a>; <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> ++ ) {</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;                $field = <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;fields&#39;</span>][ <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> ];</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;                <span class="keywordflow">if</span> ( in_array( $field-&gt;type, <a class="code" href="menu_8php.html#a92d70a97331cc6fc0a79d9da50895be8">$types</a> ) &amp;&amp; $field-&gt;productField == $product_id ) {</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;                    $fields[] = <a class="code" href="gquiz__grade_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>;</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;                }</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;            }</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;            $_product_fields[ $key ] = $fields;</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;        }</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;        <span class="keywordflow">return</span> $_product_fields[ $key ];</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;    }</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;<span class="comment">     * @deprecated</span></div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;<span class="comment">     * @param GF_Field $field</span></div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;<span class="comment">     * @return mixed</span></div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> has_field_calculation( $field ) {</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a5fa64d49f59b259090dd3b907ef3f369">_deprecated_function</a>( <span class="stringliteral">&#39;has_field_calculation&#39;</span>, <span class="stringliteral">&#39;1.7&#39;</span>, <span class="stringliteral">&#39;GF_Field::has_calculation&#39;</span> );</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;        <span class="keywordflow">return</span> $field-&gt;has_calculation();</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    }</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;<span class="comment">     * @param GF_Field $field</span></div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;<span class="comment">     * @param string   $value</span></div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;<span class="comment">     * @param int      $lead_id</span></div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;<span class="comment">     * @param int      $form_id</span></div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;<span class="comment">     * @param null     $form</span></div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;<span class="comment">     * @return mixed|string|void</span></div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_field_input( $field, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = <span class="stringliteral">&#39;&#39;</span>, $lead_id = 0, $form_id = 0, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;        <span class="keywordflow">if</span> ( ! $field instanceof <a class="code" href="class_g_f___field.html">GF_Field</a> ) {</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;            $field = <a class="code" href="class_g_f___fields.html#a58cc2eb187fc7d1daaecd59235d52a5d">GF_Fields::create</a>( $field );</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;        }</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;        $is_form_editor = GFCommon::is_form_editor();</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;        $is_entry_detail = GFCommon::is_entry_detail();</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;        $is_admin = $is_form_editor || $is_entry_detail;</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;        <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>       = intval( $field-&gt;id );</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;        <a class="code" href="time_8php.html#a77957aab921d62a9e2d2783a4924e634">$field_id</a> = $is_admin || $form_id == 0 ? <span class="stringliteral">&quot;input_$id&quot;</span> : <span class="stringliteral">&#39;input_&#39;</span> . $form_id . <span class="stringliteral">&quot;_$id&quot;</span>;</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;        $form_id  = $is_admin &amp;&amp; empty( $form_id ) ? rgget( <span class="stringliteral">&#39;id&#39;</span> ) : $form_id;</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="gravityforms_8php.html#ad1b29ec2d54657ace1353d572eb3196a">RG_CURRENT_VIEW</a> == <span class="stringliteral">&#39;entry&#39;</span> ) {</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;            $lead      = <a class="code" href="class_g_f_forms_model.html#a8aa723db710f9582b3742354d886c1a7">RGFormsModel::get_lead</a>( $lead_id );</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;            <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a>   = $lead[<span class="stringliteral">&#39;post_id&#39;</span>];</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;            $post_link = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;            <span class="keywordflow">if</span> ( is_numeric( <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> ) &amp;&amp; self::is_post_field( $field ) ) {</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;                $post_link = <span class="stringliteral">&quot;&lt;div&gt;You can &lt;a href=&#39;post.php?action=edit&amp;post=$post_id&#39;&gt;edit this post&lt;/a&gt; from the post page.&lt;/div&gt;&quot;</span>;</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;            }</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;        }</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;        $field_input = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_field_input&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, $field, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, $lead_id, $form_id );</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;        <span class="keywordflow">if</span> ( $field_input ) {</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;            <span class="keywordflow">return</span> $field_input;</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;        }</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;        <span class="comment">//product fields are not editable</span></div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="gravityforms_8php.html#ad1b29ec2d54657ace1353d572eb3196a">RG_CURRENT_VIEW</a> == <span class="stringliteral">&#39;entry&#39;</span> &amp;&amp; self::is_product_field( $field-&gt;type ) ) {</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;div class=&#39;ginput_container&#39;&gt;&quot;</span> . <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Product fields are not editable&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) . <span class="stringliteral">&#39;&lt;/div&gt;&#39;</span>;</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="gravityforms_8php.html#ad1b29ec2d54657ace1353d572eb3196a">RG_CURRENT_VIEW</a> == <span class="stringliteral">&#39;entry&#39;</span> &amp;&amp; $field-&gt;type == <span class="stringliteral">&#39;donation&#39;</span> ) {</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;div class=&#39;ginput_container&#39;&gt;&quot;</span> . <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Donations are not editable&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) . <span class="stringliteral">&#39;&lt;/div&gt;&#39;</span>;</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;        }</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;        <span class="comment">// add categories as choices for Post Category field</span></div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;        <span class="keywordflow">if</span> ( $field-&gt;type == <span class="stringliteral">&#39;post_category&#39;</span> ) {</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;            $field = self::add_categories_as_choices( $field, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;        }</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;        $type = <a class="code" href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">RGFormsModel::get_input_type</a>( $field );</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;        <span class="keywordflow">switch</span> ( $type ) {</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;honeypot&#39;</span>:</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;                $autocomplete = <a class="code" href="class_g_f_forms_model.html#a4cfcc02ac08a7e9f732d21866eab20b5">RGFormsModel::is_html5_enabled</a>() ? <span class="stringliteral">&quot;autocomplete=&#39;off&#39;&quot;</span> : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;div class=&#39;ginput_container&#39;&gt;&lt;input name=&#39;input_{$id}&#39; id=&#39;{$field_id}&#39; type=&#39;text&#39; value=&#39;&#39; {$autocomplete}/&gt;&lt;/div&gt;&quot;</span>;</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;adminonly_hidden&#39;</span> :</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;                <span class="keywordflow">if</span> ( ! is_array( $field-&gt;inputs ) ) {</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;                    <span class="keywordflow">if</span> ( is_array( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) ) {</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;                        <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = json_encode( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> );</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;                    }</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;                    <span class="keywordflow">return</span> sprintf( <span class="stringliteral">&quot;&lt;input name=&#39;input_%d&#39; id=&#39;%s&#39; class=&#39;gform_hidden&#39; type=&#39;hidden&#39; value=&#39;%s&#39;/&gt;&quot;</span>, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, <a class="code" href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a>( <a class="code" href="time_8php.html#a77957aab921d62a9e2d2783a4924e634">$field_id</a> ), <a class="code" href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a>( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) );</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;                }</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;                $fields = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;                <span class="keywordflow">foreach</span> ( $field-&gt;inputs as $input ) {</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;                    $fields .= sprintf( <span class="stringliteral">&quot;&lt;input name=&#39;input_%s&#39; class=&#39;gform_hidden&#39; type=&#39;hidden&#39; value=&#39;%s&#39;/&gt;&quot;</span>, $input[<span class="stringliteral">&#39;id&#39;</span>], <a class="code" href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a>( rgar( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, strval( $input[<span class="stringliteral">&#39;id&#39;</span>] ) ) ) );</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;                }</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;                <span class="keywordflow">return</span> $fields;</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;            <span class="keywordflow">default</span> :</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;                <span class="keywordflow">if</span> ( ! empty( $post_link ) ) {</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;                    <span class="keywordflow">return</span> $post_link;</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;                }</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;                <span class="keywordflow">if</span> ( ! isset( $lead ) ) {</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;                    $lead = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>;</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;                }</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;                <span class="keywordflow">return</span> $field-&gt;get_field_input( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, $lead );</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;        }</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;    }</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="wordpress_2wp-includes_2functions_8php.html#ad4a24ba6dbefcab84554fda62013864d">is_ssl</a>() {</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;        global $wordpress_https;</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;        $is_ssl = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;        $has_https_plugin  = class_exists( <span class="stringliteral">&#39;WordPressHTTPS&#39;</span> ) &amp;&amp; isset( $wordpress_https );</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;        $has_is_ssl_method = $has_https_plugin &amp;&amp; method_exists( <span class="stringliteral">&#39;WordPressHTTPS&#39;</span>, <span class="stringliteral">&#39;is_ssl&#39;</span> );</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;        $has_isSsl_method  = $has_https_plugin &amp;&amp; method_exists( <span class="stringliteral">&#39;WordPressHTTPS&#39;</span>, <span class="stringliteral">&#39;isSsl&#39;</span> );</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;        <span class="comment">//Use the WordPress HTTPs plugin if installed</span></div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;        <span class="keywordflow">if</span> ( $has_https_plugin &amp;&amp; $has_is_ssl_method ) {</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;            $is_ssl = $wordpress_https-&gt;is_ssl();</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( $has_https_plugin &amp;&amp; $has_isSsl_method ) {</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;            $is_ssl = $wordpress_https-&gt;isSsl();</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;            $is_ssl = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#ad4a24ba6dbefcab84554fda62013864d">is_ssl</a>();</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;        }</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;        <span class="keywordflow">if</span> ( ! $is_ssl &amp;&amp; isset( <a class="code" href="edit-tags_8php.html#aed6d7b9acff0b9518917d3b0573bc636">$_SERVER</a>[<span class="stringliteral">&#39;HTTP_CF_VISITOR&#39;</span>] ) &amp;&amp; strpos( <a class="code" href="edit-tags_8php.html#aed6d7b9acff0b9518917d3b0573bc636">$_SERVER</a>[<span class="stringliteral">&#39;HTTP_CF_VISITOR&#39;</span>], <span class="stringliteral">&#39;https&#39;</span> ) ) {</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;            $is_ssl = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;        }</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_is_ssl&#39;</span>, $is_ssl );</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;    }</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="query_8php.html#a41f8c5d8db4edc68807fc002cc312cca">is_preview</a>() {</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;        $url_info  = parse_url( <a class="code" href="class_g_f_forms_model.html#a77d2c65218c18855112ade16f5e162df">RGFormsModel::get_current_page_url</a>() );</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;        $file_name = basename( $url_info[<span class="stringliteral">&#39;path&#39;</span>] );</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;        <span class="keywordflow">return</span> $file_name == <span class="stringliteral">&#39;preview.php&#39;</span> || rgget( <span class="stringliteral">&#39;gf_page&#39;</span>, $_GET ) == <span class="stringliteral">&#39;preview&#39;</span>;</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;    }</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> clean_extensions( $extensions ) {</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;        $count = <span class="keyword">sizeof</span>( $extensions );</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;        <span class="keywordflow">for</span> ( <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> = 0; <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> &lt; <a class="code" href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a>; <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> ++ ) {</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;            $extensions[ <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> ] = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="charliteral">&#39;.&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="charliteral">&#39; &#39;</span>, <span class="stringliteral">&#39;&#39;</span>, $extensions[ <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> ] ) );</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;        }</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;        <span class="keywordflow">return</span> $extensions;</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;    }</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_disallowed_file_extensions() {</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;        $extensions = array( <span class="stringliteral">&#39;php&#39;</span>, <span class="stringliteral">&#39;asp&#39;</span>, <span class="stringliteral">&#39;aspx&#39;</span>, <span class="stringliteral">&#39;cmd&#39;</span>, <span class="stringliteral">&#39;csh&#39;</span>, <span class="stringliteral">&#39;bat&#39;</span>, <span class="stringliteral">&#39;html&#39;</span>, <span class="stringliteral">&#39;hta&#39;</span>, <span class="stringliteral">&#39;jar&#39;</span>, <span class="stringliteral">&#39;exe&#39;</span>, <span class="stringliteral">&#39;com&#39;</span>, <span class="stringliteral">&#39;js&#39;</span>, <span class="stringliteral">&#39;lnk&#39;</span>, <span class="stringliteral">&#39;htaccess&#39;</span>, <span class="stringliteral">&#39;phtml&#39;</span>, <span class="stringliteral">&#39;ps1&#39;</span>, <span class="stringliteral">&#39;ps2&#39;</span>, <span class="stringliteral">&#39;php3&#39;</span>, <span class="stringliteral">&#39;php4&#39;</span>, <span class="stringliteral">&#39;php5&#39;</span>, <span class="stringliteral">&#39;php6&#39;</span>, <span class="stringliteral">&#39;py&#39;</span>, <span class="stringliteral">&#39;rb&#39;</span>, <span class="stringliteral">&#39;tmp&#39;</span> );</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;        <span class="comment">// Intended for internal use - not to be included in the documentation.</span></div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;        $extensions = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_disallowed_file_extensions&#39;</span>, $extensions );</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;        <span class="keywordflow">return</span> $extensions;</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;    }</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> match_file_extension( $file_name, $extensions ) {</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;        <span class="keywordflow">if</span> ( empty ( $extensions ) || ! is_array( $extensions ) ) {</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;        }</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;        $ext = strtolower( pathinfo( $file_name, PATHINFO_EXTENSION ) );</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;        <span class="keywordflow">if</span> ( in_array( $ext, $extensions ) ) {</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;        }</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    }</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> file_name_has_disallowed_extension( $file_name ) {</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;        <span class="keywordflow">return</span> self::match_file_extension( $file_name, self::get_disallowed_file_extensions() ) || strpos( strtolower( $file_name ), <span class="stringliteral">&#39;.php.&#39;</span> ) !== <span class="keyword">false</span>;</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    }</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> check_type_and_ext( <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>, $file_name = <span class="stringliteral">&#39;&#39;</span>){</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;        <span class="keywordflow">if</span> ( empty( $file_name ) ) {</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;            $file_name = <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>[<span class="stringliteral">&#39;name&#39;</span>];</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;        }</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;        $tmp_name = <a class="code" href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>[<span class="stringliteral">&#39;tmp_name&#39;</span>];</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;        <span class="comment">// Whitelist the mime type and extension</span></div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;        $wp_filetype = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#ad7133b9d8edf539917094b657f8c701e">wp_check_filetype_and_ext</a>( $tmp_name, $file_name );</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;        $ext = empty( $wp_filetype[<span class="stringliteral">&#39;ext&#39;</span>] ) ? <span class="stringliteral">&#39;&#39;</span> : $wp_filetype[<span class="stringliteral">&#39;ext&#39;</span>];</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;        $type = empty( $wp_filetype[<span class="stringliteral">&#39;type&#39;</span>] ) ? <span class="stringliteral">&#39;&#39;</span> : $wp_filetype[<span class="stringliteral">&#39;type&#39;</span>];</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;        $proper_filename = empty( $wp_filetype[<span class="stringliteral">&#39;proper_filename&#39;</span>] ) ? <span class="stringliteral">&#39;&#39;</span> : $wp_filetype[<span class="stringliteral">&#39;proper_filename&#39;</span>];</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;        <span class="keywordflow">if</span> ( $proper_filename ) {</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_w_p___error.html">WP_Error</a>( <span class="stringliteral">&#39;invalid_file&#39;</span>, <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;There was an problem while verifying your file.&#39;</span> ) );</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;        }</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;        <span class="keywordflow">if</span> ( ! $ext ) {</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_w_p___error.html">WP_Error</a>( <span class="stringliteral">&#39;illegal_extension&#39;</span>, <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Sorry, this file extension is not permitted for security reasons.&#39;</span> ) );</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;        }</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;        <span class="keywordflow">if</span> ( ! $type ) {</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_w_p___error.html">WP_Error</a>( <span class="stringliteral">&#39;illegal_type&#39;</span>, <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Sorry, this file type is not permitted for security reasons.&#39;</span> ) );</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;        }</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;    }</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> to_money( $number, $currency_code = <span class="stringliteral">&#39;&#39;</span> ) {</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;        <span class="keywordflow">if</span> ( ! class_exists( <span class="stringliteral">&#39;RGCurrency&#39;</span> ) ) {</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;            require_once( <span class="stringliteral">&#39;currency.php&#39;</span> );</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;        }</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;        <span class="keywordflow">if</span> ( empty( $currency_code ) ) {</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;            $currency_code = self::get_currency();</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;        }</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;        $currency = <span class="keyword">new</span> RGCurrency( $currency_code );</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;        <span class="keywordflow">return</span> $currency-&gt;to_money( $number );</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;    }</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> to_number( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $currency_code = <span class="stringliteral">&#39;&#39;</span> ) {</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;        <span class="keywordflow">if</span> ( ! class_exists( <span class="stringliteral">&#39;RGCurrency&#39;</span> ) ) {</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;            require_once( <span class="stringliteral">&#39;currency.php&#39;</span> );</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;        }</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;        <span class="keywordflow">if</span> ( empty( $currency_code ) ) {</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;            $currency_code = self::get_currency();</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;        }</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;        $currency = <span class="keyword">new</span> RGCurrency( $currency_code );</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;        <span class="keywordflow">return</span> $currency-&gt;to_number( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;    }</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_currency() {</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;        $currency = <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;rg_gforms_currency&#39;</span> );</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;        $currency = empty( $currency ) ? <span class="stringliteral">&#39;USD&#39;</span> : $currency;</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_currency&#39;</span>, $currency );</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;    }</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_simple_captcha() {</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a5fa64d49f59b259090dd3b907ef3f369">_deprecated_function</a>( <span class="stringliteral">&#39;GFCommon::get_simple_captcha&#39;</span>, <span class="stringliteral">&#39;1.9&#39;</span>, <span class="stringliteral">&#39;GFField_CAPTCHA::get_simple_captcha&#39;</span> );</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;        $captcha          = <span class="keyword">new</span> ReallySimpleCaptcha();</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;        $captcha-&gt;tmp_dir = <a class="code" href="class_g_f_forms_model.html#af6ccb19a7ab6c691b13c8083ebcc1f50">RGFormsModel::get_upload_path</a>( <span class="stringliteral">&#39;captcha&#39;</span> ) . <span class="charliteral">&#39;/&#39;</span>;</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;        <span class="keywordflow">return</span> $captcha;</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;    }</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;<span class="comment">     * @deprecated</span></div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;<span class="comment">     * @param GF_Field_CAPTCH $field</span></div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;<span class="comment">     * @return mixed</span></div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_captcha( $field ) {</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a5fa64d49f59b259090dd3b907ef3f369">_deprecated_function</a>( <span class="stringliteral">&#39;GFCommon::get_captcha&#39;</span>, <span class="stringliteral">&#39;1.9&#39;</span>, <span class="stringliteral">&#39;GFField_CAPTCHA::get_captcha&#39;</span> );</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;        <span class="keywordflow">return</span> $field-&gt;get_captcha();</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    }</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;<span class="comment">     * @deprecated</span></div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;<span class="comment">     * @param $field</span></div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;<span class="comment">     * @param $pos</span></div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;<span class="comment">     * @return mixed</span></div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_math_captcha( $field, $pos ) {</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a5fa64d49f59b259090dd3b907ef3f369">_deprecated_function</a>( <span class="stringliteral">&#39;GFCommon::get_math_captcha&#39;</span>, <span class="stringliteral">&#39;1.9&#39;</span>, <span class="stringliteral">&#39;GFField_CAPTCHA::get_math_captcha&#39;</span> );</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;        <span class="keywordflow">return</span> $field-&gt;get_math_captcha( $pos );</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;    }</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;<span class="comment">     * @param GF_Field $field</span></div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;<span class="comment">     * @param          $value</span></div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;<span class="comment">     * @param string   $currency</span></div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;<span class="comment">     * @param bool     $use_text</span></div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;<span class="comment">     * @param string   $format</span></div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;<span class="comment">     * @param string   $media</span></div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;<span class="comment">     * @return array|mixed|string</span></div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_lead_field_display( $field, <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, $currency = <span class="stringliteral">&#39;&#39;</span>, $use_text = <span class="keyword">false</span>, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a> = <span class="stringliteral">&#39;html&#39;</span>, $media = <span class="stringliteral">&#39;screen&#39;</span> ) {</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;        <span class="keywordflow">if</span> ( ! $field instanceof GF_Field ) {</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;            $field = <a class="code" href="class_g_f___fields.html#a58cc2eb187fc7d1daaecd59235d52a5d">GF_Fields::create</a>( $field );</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;        }</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;        <span class="keywordflow">if</span> ( $field-&gt;type == <span class="stringliteral">&#39;post_category&#39;</span> ) {</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;            <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> = self::prepare_post_category_value( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, $field );</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;        }</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;        <span class="keywordflow">return</span> $field-&gt;get_value_entry_detail( <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>, $currency, $use_text, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a>, $media );</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    }</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_product_fields( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, $use_choice_text = <span class="keyword">false</span>, $use_admin_label = <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;        $products = array();</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;        $product_info = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>;</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;        <span class="comment">// retrieve static copy of product info (only for &#39;real&#39; entries)</span></div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;        <span class="keywordflow">if</span> ( ! rgempty( <span class="stringliteral">&#39;id&#39;</span>, $lead ) ) {</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;            $product_info = <a class="code" href="forms__model_8php.html#af6b814528487d7fcd3f8cc5a6fdaef75">gform_get_meta</a>( rgar( $lead, <span class="stringliteral">&#39;id&#39;</span> ), <span class="stringliteral">&quot;gform_product_info_{$use_choice_text}_{$use_admin_label}&quot;</span> );</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;        }</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;        <span class="comment">// if no static copy, generate from form/lead info</span></div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;        <span class="keywordflow">if</span> ( ! $product_info ) {</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;            <span class="keywordflow">foreach</span> ( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;fields&#39;</span>] as $field ) {</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;                <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>         = $field-&gt;id;</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;                $lead_value = <a class="code" href="class_g_f_forms_model.html#abf73ae376358a1b72c4603c7b8b401ba">RGFormsModel::get_lead_field_value</a>( $lead, $field );</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;                $quantity_field = self::get_product_fields_by_type( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, array( <span class="stringliteral">&#39;quantity&#39;</span> ), <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> );</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;                $quantity       = <span class="keyword">sizeof</span>( $quantity_field ) &gt; 0 &amp;&amp; ! <a class="code" href="class_g_f_forms_model.html#a4f3a8c6f620700754754e3c262cee663">RGFormsModel::is_field_hidden</a>( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $quantity_field[0], array(), $lead ) ? <a class="code" href="class_g_f_forms_model.html#abf73ae376358a1b72c4603c7b8b401ba">RGFormsModel::get_lead_field_value</a>( $lead, $quantity_field[0] ) : 1;</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;                <span class="keywordflow">switch</span> ( $field-&gt;type ) {</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&#39;product&#39;</span> :</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;                        <span class="comment">//ignore products that have been hidden by conditional logic</span></div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;                        $is_hidden = <a class="code" href="class_g_f_forms_model.html#a4f3a8c6f620700754754e3c262cee663">RGFormsModel::is_field_hidden</a>( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $field, array(), $lead );</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;                        <span class="keywordflow">if</span> ( $is_hidden ) {</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;                        }</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;                        <span class="comment">//if single product, get values from the multiple inputs</span></div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;                        <span class="keywordflow">if</span> ( is_array( $lead_value ) ) {</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;                            $product_quantity = <span class="keyword">sizeof</span>( $quantity_field ) == 0 &amp;&amp; ! $field-&gt;disableQuantity ? rgget( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> . <span class="stringliteral">&#39;.3&#39;</span>, $lead_value ) : $quantity;</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;                            <span class="keywordflow">if</span> ( empty( $product_quantity ) ) {</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;                                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;                            }</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;                            <span class="keywordflow">if</span> ( ! rgget( <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a>, $products ) ) {</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;                                $products[ <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ] = array();</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;                            }</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;                            $products[ <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ][<span class="stringliteral">&#39;name&#39;</span>]     = $use_admin_label &amp;&amp; ! rgempty( <span class="stringliteral">&#39;adminLabel&#39;</span>, $field ) ? $field-&gt;adminLabel : $lead_value[ <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> . <span class="stringliteral">&#39;.1&#39;</span> ];</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;                            $products[ <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ][<span class="stringliteral">&#39;price&#39;</span>]    = rgar( $lead_value, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> . <span class="stringliteral">&#39;.2&#39;</span> );</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;                            $products[ <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ][<span class="stringliteral">&#39;quantity&#39;</span>] = $product_quantity;</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;                        } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( ! empty( $lead_value ) ) {</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;                            <span class="keywordflow">if</span> ( empty( $quantity ) ) {</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;                                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;                            }</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;                            <span class="keywordflow">if</span> ( ! rgar( $products, <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ) ) {</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;                                $products[ <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ] = array();</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;                            }</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;                            <span class="keywordflow">if</span> ( $field-&gt;inputType == <span class="stringliteral">&#39;price&#39;</span> ) {</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;                                <a class="code" href="search-field-date__range_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>  = $field-&gt;label;</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;                                $price = $lead_value;</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;                            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;                                <a class="code" href="namespacelist.html">list</a>( <a class="code" href="search-field-date__range_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>, $price ) = explode( <span class="charliteral">&#39;|&#39;</span>, $lead_value );</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;                            }</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;                            $products[ <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ][<span class="stringliteral">&#39;name&#39;</span>] = ! $use_choice_text ? <a class="code" href="search-field-date__range_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a> : <a class="code" href="class_g_f_forms_model.html#a2db0d85a059a494987a8e8ef648e1c49">RGFormsModel::get_choice_text</a>( $field, <a class="code" href="search-field-date__range_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a> );</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;                            $include_field_label     = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_product_info_name_include_field_label&#39;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;                            <span class="keywordflow">if</span> ( $field-&gt;inputType == ( <span class="stringliteral">&#39;radio&#39;</span> || <span class="stringliteral">&#39;select&#39;</span> ) &amp;&amp; $include_field_label ) {</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;                                $products[ <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ][<span class="stringliteral">&#39;name&#39;</span>] = $field-&gt;label . <span class="stringliteral">&quot; ({$products[$id][&#39;name&#39;]})&quot;</span>;</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;                            }</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;                            $products[ <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ][<span class="stringliteral">&#39;price&#39;</span>]    = $price;</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;                            $products[ <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ][<span class="stringliteral">&#39;quantity&#39;</span>] = $quantity;</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;                            $products[ <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ][<span class="stringliteral">&#39;options&#39;</span>]  = array();</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;                        }</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;                        <span class="keywordflow">if</span> ( isset( $products[ <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ] ) ) {</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;                            <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> = self::get_product_fields_by_type( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, array( <span class="stringliteral">&#39;option&#39;</span> ), $id );</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;                            <span class="keywordflow">foreach</span> ( <a class="code" href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> as <a class="code" href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a> ) {</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;                                $option_value = <a class="code" href="class_g_f_forms_model.html#abf73ae376358a1b72c4603c7b8b401ba">RGFormsModel::get_lead_field_value</a>( $lead, $option );</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;                                $option_label = empty( $option[<span class="stringliteral">&#39;adminLabel&#39;</span>] ) ? $option[<span class="stringliteral">&#39;label&#39;</span>] : $option[<span class="stringliteral">&#39;adminLabel&#39;</span>];</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;                                <span class="keywordflow">if</span> ( is_array( $option_value ) ) {</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;                                    <span class="keywordflow">foreach</span> ( $option_value as <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a> ) {</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;                                        $option_info = self::get_option_info( $value, $option, $use_choice_text );</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;                                        <span class="keywordflow">if</span> ( ! empty( $option_info ) ) {</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;                                            $products[ <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ][<span class="stringliteral">&#39;options&#39;</span>][] = array( <span class="stringliteral">&#39;field_label&#39;</span>  =&gt; rgar( $option, <span class="stringliteral">&#39;label&#39;</span> ),</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;                                                                                   <span class="stringliteral">&#39;option_name&#39;</span>  =&gt; rgar( $option_info, <span class="stringliteral">&#39;name&#39;</span> ),</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;                                                                                   <span class="stringliteral">&#39;option_label&#39;</span> =&gt; $option_label . <span class="stringliteral">&#39;: &#39;</span> . rgar( $option_info, <span class="stringliteral">&#39;name&#39;</span> ),</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;                                                                                   <span class="stringliteral">&#39;price&#39;</span>        =&gt; rgar( $option_info, <span class="stringliteral">&#39;price&#39;</span> )</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;                                            );</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;                                        }</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;                                    }</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;                                } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( ! empty( $option_value ) ) {</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;                                    $option_info                  = self::get_option_info( $option_value, $option, $use_choice_text );</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;                                    $products[ <a class="code" href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a> ][<span class="stringliteral">&#39;options&#39;</span>][] = array( <span class="stringliteral">&#39;field_label&#39;</span>  =&gt; rgar( $option, <span class="stringliteral">&#39;label&#39;</span> ),</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;                                                                           <span class="stringliteral">&#39;option_name&#39;</span>  =&gt; rgar( $option_info, <span class="stringliteral">&#39;name&#39;</span> ),</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;                                                                           <span class="stringliteral">&#39;option_label&#39;</span> =&gt; $option_label . <span class="stringliteral">&#39;: &#39;</span> . rgar( $option_info, <span class="stringliteral">&#39;name&#39;</span> ),</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;                                                                           <span class="stringliteral">&#39;price&#39;</span>        =&gt; rgar( $option_info, <span class="stringliteral">&#39;price&#39;</span> )</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;                                    );</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;                                }</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;                            }</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;                        }</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;                }</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;            }</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;            $shipping_field    = <a class="code" href="class_g_f_a_p_i.html#a0dda8aeec765f8fabc1d0542d1ea7879">GFAPI::get_fields_by_type</a>( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, array( <span class="stringliteral">&#39;shipping&#39;</span> ) );</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;            $shipping_price    = $shipping_name = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;            $shipping_field_id = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;            <span class="keywordflow">if</span> ( ! empty( $shipping_field ) &amp;&amp; ! <a class="code" href="class_g_f_forms_model.html#a4f3a8c6f620700754754e3c262cee663">RGFormsModel::is_field_hidden</a>( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $shipping_field[0], array(), $lead ) ) {</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;                $shipping_price    = <a class="code" href="class_g_f_forms_model.html#abf73ae376358a1b72c4603c7b8b401ba">RGFormsModel::get_lead_field_value</a>( $lead, $shipping_field[0] );</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;                $shipping_name     = $shipping_field[0][<span class="stringliteral">&#39;label&#39;</span>];</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;                $shipping_field_id = $shipping_field[0][<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;                <span class="keywordflow">if</span> ( $shipping_field[0][<span class="stringliteral">&#39;inputType&#39;</span>] != <span class="stringliteral">&#39;singleshipping&#39;</span> &amp;&amp; ! empty( $shipping_price ) ) {</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;                    <a class="code" href="namespacelist.html">list</a>( $shipping_method, $shipping_price ) = explode( <span class="charliteral">&#39;|&#39;</span>, $shipping_price );</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;                    $shipping_name = $shipping_field[0][<span class="stringliteral">&#39;label&#39;</span>] . <span class="stringliteral">&quot; ($shipping_method)&quot;</span>;</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;                }</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;            }</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;            $shipping_price = self::to_number( $shipping_price );</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;            $product_info = array( <span class="stringliteral">&#39;products&#39;</span> =&gt; $products, <span class="stringliteral">&#39;shipping&#39;</span> =&gt; array( <span class="stringliteral">&#39;id&#39;</span> =&gt; $shipping_field_id, <span class="stringliteral">&#39;name&#39;</span> =&gt; $shipping_name, <span class="stringliteral">&#39;price&#39;</span> =&gt; $shipping_price ) );</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;            $product_info = gf_apply_filters( array( <span class="stringliteral">&#39;gform_product_info&#39;</span>, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>[<span class="stringliteral">&#39;id&#39;</span>] ), $product_info, <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead );</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;            <span class="comment">// save static copy of product info (only for &#39;real&#39; entries)</span></div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;            <span class="keywordflow">if</span> ( ! rgempty( <span class="stringliteral">&#39;id&#39;</span>, $lead ) &amp;&amp; ! empty( $product_info[<span class="stringliteral">&#39;products&#39;</span>] ) ) {</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;                <a class="code" href="forms__model_8php.html#a37de7e0d11a5e514567333aae0d00634">gform_update_meta</a>( $lead[<span class="stringliteral">&#39;id&#39;</span>], <span class="stringliteral">&quot;gform_product_info_{$use_choice_text}_{$use_admin_label}&quot;</span>, $product_info );</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;            }</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;        }</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;        <span class="keywordflow">return</span> $product_info;</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;    }</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_order_total( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead ) {</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;        $products = self::get_product_fields( <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a>, $lead, <span class="keyword">false</span> );</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;        <span class="keywordflow">return</span> self::get_total( $products );</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;    }</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_total( $products ) {</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;        $total = 0;</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;        <span class="keywordflow">foreach</span> ( $products[<span class="stringliteral">&#39;products&#39;</span>] as $product ) {</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;            $price = self::to_number( $product[<span class="stringliteral">&#39;price&#39;</span>] );</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;            <span class="keywordflow">if</span> ( is_array( rgar( $product, <span class="stringliteral">&#39;options&#39;</span> ) ) ) {</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;                <span class="keywordflow">foreach</span> ( $product[<span class="stringliteral">&#39;options&#39;</span>] as $option ) {</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;                    $price += self::to_number( $option[<span class="stringliteral">&#39;price&#39;</span>] );</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;                }</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;            }</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;            $subtotal = floatval( $product[<span class="stringliteral">&#39;quantity&#39;</span>] ) * $price;</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;            $total += $subtotal;</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;        }</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;        $total += floatval( $products[<span class="stringliteral">&#39;shipping&#39;</span>][<span class="stringliteral">&#39;price&#39;</span>] );</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;        <span class="keywordflow">return</span> $total;</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;    }</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_option_info( $value, $option, $use_choice_text ) {</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;        <span class="keywordflow">if</span> ( empty( $value ) ) {</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;            <span class="keywordflow">return</span> array();</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;        }</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;        <a class="code" href="namespacelist.html">list</a>( <a class="code" href="search-field-date__range_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>, $price ) = explode( <span class="charliteral">&#39;|&#39;</span>, $value );</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;        <span class="keywordflow">if</span> ( $use_choice_text ) {</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;            <a class="code" href="search-field-date__range_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a> = <a class="code" href="class_g_f_forms_model.html#a2db0d85a059a494987a8e8ef648e1c49">RGFormsModel::get_choice_text</a>( $option, <a class="code" href="search-field-date__range_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a> );</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;        }</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;        <span class="keywordflow">return</span> array( <span class="stringliteral">&#39;name&#39;</span> =&gt; <a class="code" href="search-field-date__range_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a>, <span class="stringliteral">&#39;price&#39;</span> =&gt; $price );</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;    }</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> gform_do_shortcode( <a class="code" href="custom_8php.html#ab2cfd183a13283e6ee22f33f2713eac9">$content</a> ) {</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;        $is_ajax = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;        <a class="code" href="data-source_8php.html#a8dcd469e6c336555e43c3003b0a0da54">$forms</a>   = <a class="code" href="class_g_f_form_display.html#ae2964cce5c001907bdbc15a25ae1daab">GFFormDisplay::get_embedded_forms</a>( <a class="code" href="custom_8php.html#ab2cfd183a13283e6ee22f33f2713eac9">$content</a>, $is_ajax );</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;        <span class="keywordflow">foreach</span> ( <a class="code" href="data-source_8php.html#a8dcd469e6c336555e43c3003b0a0da54">$forms</a> as <a class="code" href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a> ) {</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;            <span class="keywordflow">if</span> ( headers_sent() ) {</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;                <a class="code" href="class_g_f_form_display.html#a77191d480254145ad7187b027af1e16b">GFFormDisplay::print_form_scripts</a>( $form, $is_ajax );</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;                <a class="code" href="class_g_f_form_display.html#a1fe4b28e179e2928f3654563009a75d2">GFFormDisplay::enqueue_form_scripts</a>( $form, $is_ajax );</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;            }</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;        }</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="shortcodes_8php.html#aaa19827abd3976c4b6a24136c4c6380f">do_shortcode</a>( <a class="code" href="custom_8php.html#ab2cfd183a13283e6ee22f33f2713eac9">$content</a> );</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;    }</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> spam_enabled( $form_id ) {</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;        $spam_enabled = self::akismet_enabled( $form_id ) || <a class="code" href="wp-includes_2plugin_8php.html#aad14d1be64c7ecfdf35da5a2f3cf979a">has_filter</a>( <span class="stringliteral">&#39;gform_entry_is_spam&#39;</span> ) || <a class="code" href="wp-includes_2plugin_8php.html#aad14d1be64c7ecfdf35da5a2f3cf979a">has_filter</a>( <span class="stringliteral">&quot;gform_entry_is_spam_{$form_id}&quot;</span> );</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;        <span class="keywordflow">return</span> $spam_enabled;</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;    }</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> has_akismet() {</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;        $akismet_exists = function_exists( <span class="stringliteral">&#39;akismet_http_post&#39;</span> ) || function_exists( <span class="stringliteral">&#39;Akismet::http_post&#39;</span> );</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;        <span class="keywordflow">return</span> $akismet_exists;</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;    }</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> akismet_enabled( $form_id ) {</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;        <span class="keywordflow">if</span> ( ! self::has_akismet() ) {</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;        }</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;        <span class="comment">// if no option is set, leave akismet enabled; otherwise, use option value true/false</span></div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;        $enabled_by_setting = <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;rg_gforms_enable_akismet&#39;</span> ) === <span class="keyword">false</span> ? <span class="keyword">true</span> : <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;rg_gforms_enable_akismet&#39;</span> ) == <span class="keyword">true</span>;</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;        $enabled_by_filter  = gf_apply_filters( array( <span class="stringliteral">&#39;gform_akismet_enabled&#39;</span>, $form_id ), $enabled_by_setting );</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;        <span class="keywordflow">return</span> $enabled_by_filter;</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;    }</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_akismet_spam( $form, $lead ) {</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;        global $akismet_api_host, $akismet_api_port;</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;        $fields = self::get_akismet_fields( $form, $lead );</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;        <span class="comment">//Submitting info to Akismet</span></div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;        <span class="keywordflow">if</span> ( defined( <span class="stringliteral">&#39;AKISMET_VERSION&#39;</span> ) &amp;&amp; AKISMET_VERSION &lt; 3.0 ) {</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;            <span class="comment">//Akismet versions before 3.0</span></div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;            $response = akismet_http_post( $fields, $akismet_api_host, <span class="stringliteral">&#39;/1.1/comment-check&#39;</span>, $akismet_api_port );</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;            $response = Akismet::http_post( $fields, <span class="stringliteral">&#39;comment-check&#39;</span> );</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;        }</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;        $is_spam = trim( rgar( $response, 1 ) ) == <span class="stringliteral">&#39;true&#39;</span>;</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;        <span class="keywordflow">return</span> $is_spam;</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;    }</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> mark_akismet_spam( $form, $lead, $is_spam ) {</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;        global $akismet_api_host, $akismet_api_port;</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;        $fields = self::get_akismet_fields( $form, $lead );</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;        $as     = $is_spam ? <span class="stringliteral">&#39;spam&#39;</span> : <span class="stringliteral">&#39;ham&#39;</span>;</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;        <span class="comment">//Submitting info to Akismet</span></div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;        <span class="keywordflow">if</span> ( defined( <span class="stringliteral">&#39;AKISMET_VERSION&#39;</span> ) &amp;&amp; AKISMET_VERSION &lt; 3.0 ) {</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;            <span class="comment">//Akismet versions before 3.0</span></div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;            akismet_http_post( $fields, $akismet_api_host, <span class="stringliteral">&#39;/1.1/submit-&#39;</span> . $as, $akismet_api_port );</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;            Akismet::http_post( $fields, <span class="stringliteral">&#39;submit-&#39;</span> . $as );</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;        }</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;    }</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">function</span> get_akismet_fields( $form, $lead ) {</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;        $is_form_editor = GFCommon::is_form_editor();</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;        $is_entry_detail = GFCommon::is_entry_detail();</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;        $is_admin = $is_form_editor || $is_entry_detail;</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;        <span class="comment">//Gathering Akismet information</span></div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;        $akismet_info                         = array();</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;        $akismet_info[<span class="stringliteral">&#39;comment_type&#39;</span>]         = <span class="stringliteral">&#39;gravity_form&#39;</span>;</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;        $akismet_info[<span class="stringliteral">&#39;comment_author&#39;</span>]       = self::get_akismet_field( <span class="stringliteral">&#39;name&#39;</span>, $form, $lead );</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;        $akismet_info[<span class="stringliteral">&#39;comment_author_email&#39;</span>] = self::get_akismet_field( <span class="stringliteral">&#39;email&#39;</span>, $form, $lead );</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;        $akismet_info[<span class="stringliteral">&#39;comment_author_url&#39;</span>]   = self::get_akismet_field( <span class="stringliteral">&#39;website&#39;</span>, $form, $lead );</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;        $akismet_info[<span class="stringliteral">&#39;comment_content&#39;</span>]      = self::get_akismet_field( <span class="stringliteral">&#39;textarea&#39;</span>, $form, $lead );</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;        $akismet_info[<span class="stringliteral">&#39;contact_form_subject&#39;</span>] = $form[<span class="stringliteral">&#39;title&#39;</span>];</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;        $akismet_info[<span class="stringliteral">&#39;comment_author_IP&#39;</span>]    = $lead[<span class="stringliteral">&#39;ip&#39;</span>];</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;        $akismet_info[<span class="stringliteral">&#39;permalink&#39;</span>]            = $lead[<span class="stringliteral">&#39;source_url&#39;</span>];</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;        $akismet_info[<span class="stringliteral">&#39;user_ip&#39;</span>]              = preg_replace( <span class="stringliteral">&#39;/[^0-9., ]/&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, $lead[<span class="stringliteral">&#39;ip&#39;</span>] );</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;        $akismet_info[<span class="stringliteral">&#39;user_agent&#39;</span>]           = $lead[<span class="stringliteral">&#39;user_agent&#39;</span>];</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;        $akismet_info[<span class="stringliteral">&#39;referrer&#39;</span>]             = $is_admin ? <span class="stringliteral">&#39;&#39;</span> : <a class="code" href="edit-tags_8php.html#aed6d7b9acff0b9518917d3b0573bc636">$_SERVER</a>[<span class="stringliteral">&#39;HTTP_REFERER&#39;</span>];</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;        $akismet_info[<span class="stringliteral">&#39;blog&#39;</span>]                 = <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;home&#39;</span> );</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;        $akismet_info = gf_apply_filters( array( <span class="stringliteral">&#39;gform_akismet_fields&#39;</span>, $form[<span class="stringliteral">&#39;id&#39;</span>] ), $akismet_info, $form, $lead );</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;        <span class="keywordflow">return</span> http_build_query( $akismet_info );</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;    }</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">function</span> get_akismet_field( $field_type, $form, $lead ) {</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;        $fields = <a class="code" href="class_g_f_a_p_i.html#a0dda8aeec765f8fabc1d0542d1ea7879">GFAPI::get_fields_by_type</a>( $form, array( $field_type ) );</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;        <span class="keywordflow">if</span> ( empty( $fields ) ) {</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;        }</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;        $value = <a class="code" href="class_g_f_forms_model.html#abf73ae376358a1b72c4603c7b8b401ba">RGFormsModel::get_lead_field_value</a>( $lead, $fields[0] );</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;        <span class="keywordflow">switch</span> ( $field_type ) {</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;name&#39;</span> :</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;                $value = GFCommon::get_lead_field_display( $fields[0], $value );</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;        }</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>;</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;    }</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_other_choice_value() {</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;        $value = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_other_choice_value&#39;</span>, <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Other&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>;</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;    }</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_browser_class() {</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;        global <a class="code" href="vars_8php.html#a7d7976d2181693eee234a9554e574c97">$is_lynx</a>, <a class="code" href="vars_8php.html#a871a9479e3633e807ccb2bcec3e6c582">$is_gecko</a>, <a class="code" href="vars_8php.html#a65d87c7cec88a5c6674ac5ea51374768">$is_IE</a>, <a class="code" href="vars_8php.html#a8dc23b0bc1ec4319afdcf2e852fca562">$is_opera</a>, <a class="code" href="vars_8php.html#abd9809ed3ac1bfe77f85089a3d6699ee">$is_NS4</a>, <a class="code" href="vars_8php.html#ab896dca47caf5d3eaffc7b6c3abf3275">$is_safari</a>, <a class="code" href="vars_8php.html#af86a2f432ec61469bce462a43cf1c7ee">$is_chrome</a>, <a class="code" href="vars_8php.html#af183ac59caee1501e622cb7c914f7d6d">$is_iphone</a>, <a class="code" href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a>;</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;        $classes = array();</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;        <span class="comment">//adding browser related class</span></div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;        <span class="keywordflow">if</span> ( $is_lynx ) {</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;            $classes[] = <span class="stringliteral">&#39;gf_browser_lynx&#39;</span>;</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( $is_gecko ) {</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;            $classes[] = <span class="stringliteral">&#39;gf_browser_gecko&#39;</span>;</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( $is_opera ) {</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;            $classes[] = <span class="stringliteral">&#39;gf_browser_opera&#39;</span>;</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( $is_NS4 ) {</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;            $classes[] = <span class="stringliteral">&#39;gf_browser_ns4&#39;</span>;</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( $is_safari ) {</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;            $classes[] = <span class="stringliteral">&#39;gf_browser_safari&#39;</span>;</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( $is_chrome ) {</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;            $classes[] = <span class="stringliteral">&#39;gf_browser_chrome&#39;</span>;</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( $is_IE ) {</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;            $classes[] = <span class="stringliteral">&#39;gf_browser_ie&#39;</span>;</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;            $classes[] = <span class="stringliteral">&#39;gf_browser_unknown&#39;</span>;</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;        }</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        <span class="comment">//adding IE version</span></div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;        <span class="keywordflow">if</span> ( $is_IE ) {</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;            <span class="keywordflow">if</span> ( strpos( <a class="code" href="edit-tags_8php.html#aed6d7b9acff0b9518917d3b0573bc636">$_SERVER</a>[<span class="stringliteral">&#39;HTTP_USER_AGENT&#39;</span>], <span class="stringliteral">&#39;MSIE 6&#39;</span> ) !== <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;                $classes[] = <span class="stringliteral">&#39;gf_browser_ie6&#39;</span>;</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( strpos( <a class="code" href="edit-tags_8php.html#aed6d7b9acff0b9518917d3b0573bc636">$_SERVER</a>[<span class="stringliteral">&#39;HTTP_USER_AGENT&#39;</span>], <span class="stringliteral">&#39;MSIE 7&#39;</span> ) !== <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;                $classes[] = <span class="stringliteral">&#39;gf_browser_ie7&#39;</span>;</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;            }</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;            <span class="keywordflow">if</span> ( strpos( <a class="code" href="edit-tags_8php.html#aed6d7b9acff0b9518917d3b0573bc636">$_SERVER</a>[<span class="stringliteral">&#39;HTTP_USER_AGENT&#39;</span>], <span class="stringliteral">&#39;MSIE 8&#39;</span> ) !== <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;                $classes[] = <span class="stringliteral">&#39;gf_browser_ie8&#39;</span>;</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;            }</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;            <span class="keywordflow">if</span> ( strpos( <a class="code" href="edit-tags_8php.html#aed6d7b9acff0b9518917d3b0573bc636">$_SERVER</a>[<span class="stringliteral">&#39;HTTP_USER_AGENT&#39;</span>], <span class="stringliteral">&#39;MSIE 9&#39;</span> ) !== <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;                $classes[] = <span class="stringliteral">&#39;gf_browser_ie9&#39;</span>;</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;            }</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;        }</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;        <span class="keywordflow">if</span> ( $is_iphone ) {</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;            $classes[] = <span class="stringliteral">&#39;gf_browser_iphone&#39;</span>;</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;        }</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;        <span class="keywordflow">return</span> implode( <span class="charliteral">&#39; &#39;</span>, $classes );</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;    }</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> create_post( $form, &amp;$lead ) {</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;        $disable_post = gf_apply_filters( array( <span class="stringliteral">&#39;gform_disable_post_creation&#39;</span>, $form[<span class="stringliteral">&#39;id&#39;</span>] ), <span class="keyword">false</span>, $form, $lead );</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;        <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a>      = 0;</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;        <span class="keywordflow">if</span> ( ! $disable_post ) {</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;            <span class="comment">//creates post if the form has any post fields</span></div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;            <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a> = <a class="code" href="class_g_f_forms_model.html#aac0865a01aeb5a7c597880af680e5304">RGFormsModel::create_post</a>( $form, $lead );</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;        }</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a>;</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;    }</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> evaluate_conditional_logic( $logic, $form, $lead ) {</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;        <span class="keywordflow">if</span> ( ! $logic || ! is_array( rgar( $logic, <span class="stringliteral">&#39;rules&#39;</span> ) ) ) {</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;        }</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;        $entry_meta_keys = array_keys( <a class="code" href="class_g_f_forms_model.html#a1166cd7c754f765f15a0bece0b9d9018">GFFormsModel::get_entry_meta</a>( $form[<span class="stringliteral">&#39;id&#39;</span>] ) );</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;        $match_count     = 0;</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;        <span class="keywordflow">if</span> ( is_array( $logic[<span class="stringliteral">&#39;rules&#39;</span>] ) ) {</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;            <span class="keywordflow">foreach</span> ( $logic[<span class="stringliteral">&#39;rules&#39;</span>] as $rule ) {</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;                <span class="keywordflow">if</span> ( in_array( $rule[<span class="stringliteral">&#39;fieldId&#39;</span>], $entry_meta_keys ) ) {</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;                    $is_value_match = <a class="code" href="class_g_f_forms_model.html#a0f01e9aa2eeaf6b8306380e9c501360c">GFFormsModel::is_value_match</a>( rgar( $lead, $rule[<span class="stringliteral">&#39;fieldId&#39;</span>] ), $rule[<span class="stringliteral">&#39;value&#39;</span>], $rule[<span class="stringliteral">&#39;operator&#39;</span>], $rule, $form );</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;                    $source_field   = <a class="code" href="class_g_f_forms_model.html#a5861b1ac8048f1af93bf65fd5d8cac7e">GFFormsModel::get_field</a>( $form, $rule[<span class="stringliteral">&#39;fieldId&#39;</span>] );</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;                    $field_value    = empty( $lead ) ? <a class="code" href="class_g_f_forms_model.html#ad922bfc064f1e2b56d4327a253129a33">GFFormsModel::get_field_value</a>( $source_field, array() ) : <a class="code" href="class_g_f_forms_model.html">GFFormsModel</a>::get_lead_field_value( $lead, $source_field );</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;                    $is_value_match = <a class="code" href="class_g_f_forms_model.html#a0f01e9aa2eeaf6b8306380e9c501360c">GFFormsModel::is_value_match</a>( $field_value, $rule[<span class="stringliteral">&#39;value&#39;</span>], $rule[<span class="stringliteral">&#39;operator&#39;</span>], $source_field, $rule, $form );</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;                }</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;                <span class="keywordflow">if</span> ( $is_value_match ) {</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;                    $match_count ++;</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;                }</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;            }</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;        }</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;        $do_action = ( $logic[<span class="stringliteral">&#39;logicType&#39;</span>] == <span class="stringliteral">&#39;all&#39;</span> &amp;&amp; $match_count == <span class="keyword">sizeof</span>( $logic[<span class="stringliteral">&#39;rules&#39;</span>] ) ) || ( $logic[<span class="stringliteral">&#39;logicType&#39;</span>] == <span class="stringliteral">&#39;any&#39;</span> &amp;&amp; $match_count &gt; 0 );</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;        <span class="keywordflow">return</span> $do_action;</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;    }</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_card_types() {</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;        $cards = array(</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;            array(</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;                <span class="stringliteral">&#39;name&#39;</span>     =&gt; <span class="stringliteral">&#39;American Express&#39;</span>,</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;                <span class="stringliteral">&#39;slug&#39;</span>     =&gt; <span class="stringliteral">&#39;amex&#39;</span>,</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;                <span class="stringliteral">&#39;lengths&#39;</span>  =&gt; <span class="stringliteral">&#39;15&#39;</span>,</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;                <span class="stringliteral">&#39;prefixes&#39;</span> =&gt; <span class="stringliteral">&#39;34,37&#39;</span>,</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;                <span class="stringliteral">&#39;checksum&#39;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;            ),</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;            array(</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;                <span class="stringliteral">&#39;name&#39;</span>     =&gt; <span class="stringliteral">&#39;Discover&#39;</span>,</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;                <span class="stringliteral">&#39;slug&#39;</span>     =&gt; <span class="stringliteral">&#39;discover&#39;</span>,</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;                <span class="stringliteral">&#39;lengths&#39;</span>  =&gt; <span class="stringliteral">&#39;16&#39;</span>,</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;                <span class="stringliteral">&#39;prefixes&#39;</span> =&gt; <span class="stringliteral">&#39;6011,622,64,65&#39;</span>,</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;                <span class="stringliteral">&#39;checksum&#39;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;            ),</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;            array(</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;                <span class="stringliteral">&#39;name&#39;</span>     =&gt; <span class="stringliteral">&#39;MasterCard&#39;</span>,</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;                <span class="stringliteral">&#39;slug&#39;</span>     =&gt; <span class="stringliteral">&#39;mastercard&#39;</span>,</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;                <span class="stringliteral">&#39;lengths&#39;</span>  =&gt; <span class="stringliteral">&#39;16&#39;</span>,</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;                <span class="stringliteral">&#39;prefixes&#39;</span> =&gt; <span class="stringliteral">&#39;51,52,53,54,55&#39;</span>,</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;                <span class="stringliteral">&#39;checksum&#39;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;            ),</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;            array(</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;                <span class="stringliteral">&#39;name&#39;</span>     =&gt; <span class="stringliteral">&#39;Visa&#39;</span>,</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;                <span class="stringliteral">&#39;slug&#39;</span>     =&gt; <span class="stringliteral">&#39;visa&#39;</span>,</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;                <span class="stringliteral">&#39;lengths&#39;</span>  =&gt; <span class="stringliteral">&#39;13,16&#39;</span>,</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;                <span class="stringliteral">&#39;prefixes&#39;</span> =&gt; <span class="stringliteral">&#39;4,417500,4917,4913,4508,4844&#39;</span>,</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;                <span class="stringliteral">&#39;checksum&#39;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;            ),</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;            array(</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;                <span class="stringliteral">&#39;name&#39;</span>     =&gt; <span class="stringliteral">&#39;JCB&#39;</span>,</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;                <span class="stringliteral">&#39;slug&#39;</span>     =&gt; <span class="stringliteral">&#39;jcb&#39;</span>,</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;                <span class="stringliteral">&#39;lengths&#39;</span>  =&gt; <span class="stringliteral">&#39;16&#39;</span>,</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;                <span class="stringliteral">&#39;prefixes&#39;</span> =&gt; <span class="stringliteral">&#39;35&#39;</span>,</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;                <span class="stringliteral">&#39;checksum&#39;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;            ),</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;            array(</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;                <span class="stringliteral">&#39;name&#39;</span>     =&gt; <span class="stringliteral">&#39;Maestro&#39;</span>,</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;                <span class="stringliteral">&#39;slug&#39;</span>     =&gt; <span class="stringliteral">&#39;maestro&#39;</span>,</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;                <span class="stringliteral">&#39;lengths&#39;</span>  =&gt; <span class="stringliteral">&#39;12,13,14,15,16,18,19&#39;</span>,</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;                <span class="stringliteral">&#39;prefixes&#39;</span> =&gt; <span class="stringliteral">&#39;5018,5020,5038,6304,6759,6761&#39;</span>,</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;                <span class="stringliteral">&#39;checksum&#39;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;            ),</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;        );</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;        $cards = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_creditcard_types&#39;</span>, $cards );</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;        <span class="keywordflow">return</span> $cards;</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;    }</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_card_type( $number ) {</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;        <span class="comment">//removing spaces from number</span></div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;        $number = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <span class="charliteral">&#39; &#39;</span>, <span class="stringliteral">&#39;&#39;</span>, $number );</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;        <span class="keywordflow">if</span> ( empty( $number ) ) {</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;        }</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;        $cards = self::get_card_types();</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;        $matched_card = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;        <span class="keywordflow">foreach</span> ( $cards as $card ) {</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;            <span class="keywordflow">if</span> ( self::matches_card_type( $number, $card ) ) {</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;                $matched_card = $card;</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;            }</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;        }</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;        <span class="keywordflow">if</span> ( $matched_card &amp;&amp; $matched_card[<span class="stringliteral">&#39;checksum&#39;</span>] &amp;&amp; ! self::is_valid_card_checksum( $number ) ) {</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;            $matched_card = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;        }</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;        <span class="keywordflow">return</span> $matched_card ? $matched_card : <span class="keyword">false</span>;</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;    }</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">function</span> matches_card_type( $number, $card ) {</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;        <span class="comment">//checking prefix</span></div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;        $prefixes       = explode( <span class="charliteral">&#39;,&#39;</span>, $card[<span class="stringliteral">&#39;prefixes&#39;</span>] );</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;        $matches_prefix = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;        <span class="keywordflow">foreach</span> ( $prefixes as <a class="code" href="options-permalink_8php.html#a09e8cf95b9d29955a0bfabca9b420edc">$prefix</a> ) {</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;            <span class="keywordflow">if</span> ( preg_match( <span class="stringliteral">&quot;|^{$prefix}|&quot;</span>, $number ) ) {</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;                $matches_prefix = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;            }</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;        }</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;        <span class="comment">//checking length</span></div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;        $lengths        = explode( <span class="charliteral">&#39;,&#39;</span>, $card[<span class="stringliteral">&#39;lengths&#39;</span>] );</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;        $matches_length = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;        <span class="keywordflow">foreach</span> ( $lengths as $length ) {</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;            <span class="keywordflow">if</span> ( strlen( $number ) == <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a>( $length ) ) {</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;                $matches_length = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;            }</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;        }</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;        <span class="keywordflow">return</span> $matches_prefix &amp;&amp; $matches_length;</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    }</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">function</span> is_valid_card_checksum( $number ) {</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;        $checksum   = 0;</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;        $num        = 0;</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;        $multiplier = 1;</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;        <span class="comment">// Process each character starting at the right</span></div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;        <span class="keywordflow">for</span> ( <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> = strlen( $number ) - 1; <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> &gt;= 0; <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> -- ) {</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;            <span class="comment">//Multiply current digit by multiplier (1 or 2)</span></div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;            $num = $number{<a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a>} * $multiplier;</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;            <span class="comment">// If the result is in greater than 9, add 1 to the checksum total</span></div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;            <span class="keywordflow">if</span> ( $num &gt;= 10 ) {</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;                $checksum ++;</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;                $num -= 10;</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;            }</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;            <span class="comment">//Update checksum</span></div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;            $checksum += $num;</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;            <span class="comment">//Update multiplier</span></div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;            $multiplier = $multiplier == 1 ? 2 : 1;</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;        }</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;        <span class="keywordflow">return</span> $checksum % 10 == 0;</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;    }</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_wp_version( $min_version ) {</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;        <span class="keywordflow">return</span> ! version_compare( <a class="code" href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a>( <span class="stringliteral">&#39;version&#39;</span> ), <span class="stringliteral">&quot;{$min_version}.dev1&quot;</span>, <span class="charliteral">&#39;&lt;&#39;</span> );</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;    }</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> add_categories_as_choices( $field, $value ) {</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;        $choices         = $inputs = array();</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;        $is_post         = isset( $_POST[<span class="stringliteral">&#39;gform_submit&#39;</span>] );</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;        $has_placeholder = $field-&gt;categoryInitialItemEnabled &amp;&amp; <a class="code" href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">RGFormsModel::get_input_type</a>( $field ) == <span class="stringliteral">&#39;select&#39;</span>;</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;        <span class="keywordflow">if</span> ( $has_placeholder ) {</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;            $choices[] = array( <span class="stringliteral">&#39;text&#39;</span> =&gt; $field-&gt;categoryInitialItem, <span class="stringliteral">&#39;value&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;isSelected&#39;</span> =&gt; <span class="keyword">true</span> );</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;        }</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;        $display_all = $field-&gt;displayAllCategories;</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;        $args = array( <span class="stringliteral">&#39;hide_empty&#39;</span> =&gt; <span class="keyword">false</span>, <span class="stringliteral">&#39;orderby&#39;</span> =&gt; <span class="stringliteral">&#39;name&#39;</span> );</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;        <span class="keywordflow">if</span> ( ! $display_all ) {</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;            <span class="keywordflow">foreach</span> ( $field-&gt;choices as $field_choice_to_include ) {</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;                $args[<span class="stringliteral">&#39;include&#39;</span>][] = $field_choice_to_include[<span class="stringliteral">&#39;value&#39;</span>];</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;            }</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;        }</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;        $args  = gf_apply_filters( array( <span class="stringliteral">&#39;gform_post_category_args&#39;</span>, $field-&gt;id ), $args, $field );</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;        $terms = <a class="code" href="wp-includes_2taxonomy_8php.html#aa491ab8e62a9a11b6a3aa62e015f75dd">get_terms</a>( <span class="stringliteral">&#39;category&#39;</span>, $args );</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;        $terms_copy = unserialize( serialize( $terms ) ); <span class="comment">// deep copy the terms to avoid repeating GFCategoryWalker on previously cached terms.</span></div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;        $walker     = <span class="keyword">new</span> GFCategoryWalker();</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;        $categories = $walker-&gt;walk( $terms_copy, 0, array( 0 ) ); <span class="comment">// 3rd parameter prevents notices triggered by $walker::display_element() function which checks $args[0]</span></div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;        <span class="keywordflow">foreach</span> ( $categories as $category ) {</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;            <span class="keywordflow">if</span> ( $display_all ) {</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;                $selected  = $value == $category-&gt;term_id ||</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;                    (</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;                        empty( $value ) &amp;&amp;</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;                        <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;default_category&#39;</span> ) == $category-&gt;term_id &amp;&amp;</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;                        <a class="code" href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">RGFormsModel::get_input_type</a>( $field ) == <span class="stringliteral">&#39;select&#39;</span> &amp;&amp; <span class="comment">// only preselect default category on select fields</span></div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;                        ! $is_post &amp;&amp;</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;                        ! $has_placeholder</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;                    );</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;                $choices[] = array( <span class="stringliteral">&#39;text&#39;</span> =&gt; $category-&gt;name, <span class="stringliteral">&#39;value&#39;</span> =&gt; $category-&gt;term_id, <span class="stringliteral">&#39;isSelected&#39;</span> =&gt; $selected );</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;                <span class="keywordflow">foreach</span> ( $field-&gt;choices as $field_choice ) {</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;                    <span class="keywordflow">if</span> ( $field_choice[<span class="stringliteral">&#39;value&#39;</span>] == $category-&gt;term_id ) {</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;                        $choices[] = array( <span class="stringliteral">&#39;text&#39;</span> =&gt; $category-&gt;name, <span class="stringliteral">&#39;value&#39;</span> =&gt; $category-&gt;term_id );</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;                    }</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;                }</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;            }</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;        }</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;        <span class="keywordflow">if</span> ( empty( $choices ) ) {</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;            $choices[] = array( <span class="stringliteral">&#39;text&#39;</span> =&gt; <span class="stringliteral">&#39;You must select at least one category.&#39;</span>, <span class="stringliteral">&#39;value&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span> );</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;        }</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;        $choice_number = 1;</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;        <span class="keywordflow">foreach</span> ( $choices as $choice ) {</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;            <span class="keywordflow">if</span> ( $choice_number % 10 == 0 ) {</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;                <span class="comment">//hack to skip numbers ending in 0. so that 5.1 doesn&#39;t conflict with 5.10</span></div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;                $choice_number ++;</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;            }</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;            $input_id = $field-&gt;id . <span class="charliteral">&#39;.&#39;</span> . $choice_number;</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;            $inputs[] = array( <span class="stringliteral">&#39;id&#39;</span> =&gt; $input_id, <span class="stringliteral">&#39;label&#39;</span> =&gt; $choice[<span class="stringliteral">&#39;text&#39;</span>], <span class="stringliteral">&#39;name&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span> );</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;            $choice_number ++;</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;        }</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;        $field-&gt;choices = $choices;</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;        $is_form_editor = GFCommon::is_form_editor();</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;        $is_entry_detail = GFCommon::is_entry_detail();</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;        $is_admin = $is_form_editor || $is_entry_detail;</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;        $form_id = $is_admin ? rgget( <span class="stringliteral">&#39;id&#39;</span> ) : $field-&gt;formId;</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;<span class="comment">        /**</span></div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;<span class="comment">         * Allows you to filter (modify) the post cateogry choices when using post fields</span></div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;<span class="comment">         * @param array $field The Cateogry choices field</span></div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;<span class="comment">         * @param int $form_id The CUrrent form ID</span></div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;        $field-&gt;choices = gf_apply_filters( array( <span class="stringliteral">&#39;gform_post_category_choices&#39;</span>, $form_id, $field-&gt;id ), $field-&gt;choices, $field, $form_id );</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">RGFormsModel::get_input_type</a>( $field ) == <span class="stringliteral">&#39;checkbox&#39;</span> ) {</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;            $field-&gt;inputs = $inputs;</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;        }</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="gquiz__grade_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a>;</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;    }</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> prepare_post_category_value( $value, $field, <a class="code" href="wordpress_2wp-admin_2upload_8php.html#a3aaf40baac36e278c7d7c9139df1750c">$mode</a> = <span class="stringliteral">&#39;entry_detail&#39;</span> ) {</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;        <span class="keywordflow">if</span> ( ! is_array( $value ) ) {</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;            $value = explode( <span class="charliteral">&#39;,&#39;</span>, $value );</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;        }</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;        $cat_names = array();</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;        $cat_ids   = array();</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;        <span class="keywordflow">foreach</span> ( $value as $cat_string ) {</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;            <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a>      = explode( <span class="charliteral">&#39;:&#39;</span>, $cat_string );</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;            $cat_name = count( <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a> ) &gt; 0 ? <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a>[0] : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;            $cat_id   = count( <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a> ) &gt; 1 ? <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a>[1] : <a class="code" href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a>[0];</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;            <span class="keywordflow">if</span> ( ! empty( $cat_name ) ) {</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;                $cat_names[] = $cat_name;</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;            }</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;            <span class="keywordflow">if</span> ( ! empty( $cat_id ) ) {</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;                $cat_ids[] = $cat_id;</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;            }</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;        }</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;        sort( $cat_names );</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;        <span class="keywordflow">switch</span> ( <a class="code" href="wordpress_2wp-admin_2upload_8php.html#a3aaf40baac36e278c7d7c9139df1750c">$mode</a> ) {</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;entry_list&#39;</span>:</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;                $value = self::implode_non_blank( <span class="stringliteral">&#39;, &#39;</span>, $cat_names );</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;entry_detail&#39;</span>:</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;                $value = <a class="code" href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">RGFormsModel::get_input_type</a>( $field ) == <span class="stringliteral">&#39;checkbox&#39;</span> ? $cat_names : self::implode_non_blank( <span class="stringliteral">&#39;, &#39;</span>, $cat_names );</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;conditional_logic&#39;</span>:</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;                $value = array_values( $cat_ids );</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;        }</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>;</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;    }</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> calculate( $field, $form, $lead ) {</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;        $formula = (string) <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_calculation_formula&#39;</span>, $field-&gt;calculationFormula, $field, $form, $lead );</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;        <span class="comment">// replace multiple spaces and new lines with single space</span></div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;        <span class="comment">// @props: http://stackoverflow.com/questions/3760816/remove-new-lines-from-string</span></div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;        $formula = trim( preg_replace( <span class="stringliteral">&#39;/\s+/&#39;</span>, <span class="charliteral">&#39; &#39;</span>, $formula ) );</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;        preg_match_all( <span class="stringliteral">&#39;/{[^{]*?:(\d+(\.\d+)?)(:(.*?))?}/mi&#39;</span>, $formula, $matches, PREG_SET_ORDER );</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;        <span class="keywordflow">if</span> ( is_array( $matches ) ) {</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;            <span class="keywordflow">foreach</span> ( $matches as $match ) {</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;                <a class="code" href="namespacelist.html">list</a>( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $input_id ) = $match;</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;                $value   = self::get_calculation_value( $input_id, $form, $lead );</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;                $value   = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_merge_tag_value_pre_calculation&#39;</span>, $value, $input_id, rgar( $match, 4 ), $field, $form, $lead );</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;                $formula = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $value, $formula );</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;            }</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;        }</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;        $result = preg_match( <span class="stringliteral">&#39;/^[0-9 -\/*\(\)]+$/&#39;</span>, $formula ) ? eval( <span class="stringliteral">&quot;return {$formula};&quot;</span> ) : <a class="code" href="admin_8php.html#a2c554c048d48362786c97b715f765984">false</a>;</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;        $result = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_calculation_result&#39;</span>, $result, $formula, $field, $form, $lead );</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;        <span class="keywordflow">return</span> $result;</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;    }</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> round_number( $number, $rounding ) {</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;        <span class="keywordflow">if</span> ( is_numeric( $rounding ) &amp;&amp; $rounding &gt;= 0 ) {</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;            $number = round( $number, $rounding );</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;        }</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;        <span class="keywordflow">return</span> $number;</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;    }</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_calculation_value( <a class="code" href="time_8php.html#a77957aab921d62a9e2d2783a4924e634">$field_id</a>, $form, $lead ) {</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;        $filters = array( <span class="stringliteral">&#39;price&#39;</span>, <span class="stringliteral">&#39;value&#39;</span>, <span class="stringliteral">&#39;&#39;</span> );</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;        $value   = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;        <span class="keywordflow">foreach</span> ( $filters as $filter ) {</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;            <span class="keywordflow">if</span> ( is_numeric( $value ) ) {</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;                <span class="comment">//value found, exit loop</span></div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;            }</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;            $field = <a class="code" href="class_g_f_forms_model.html#a5861b1ac8048f1af93bf65fd5d8cac7e">RGFormsModel::get_field</a>( $form, <a class="code" href="time_8php.html#a77957aab921d62a9e2d2783a4924e634">$field_id</a> );</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;            $is_pricing_field = self::has_currency_value( $field );</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;            $replaced_value = GFCommon::replace_variables( <span class="stringliteral">&quot;{:{$field_id}:$filter}&quot;</span>, $form, $lead );</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;            <span class="keywordflow">if</span> ( $is_pricing_field ) {</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;                $value = self::to_number( $replaced_value );</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;            }</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;            <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;                $number_format = rgobj( $field, <span class="stringliteral">&#39;numberFormat&#39;</span> );</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;                $value = self::clean_number( $replaced_value, $number_format );</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;            }</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;        }</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;        <span class="keywordflow">if</span> ( ! $value || ! is_numeric( $value ) ) {</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;            GFCommon::log_debug( <span class="stringliteral">&quot;GFCommon::get_calculation_value(): No value or non-numeric value available for field #{$field_id}. Returning zero instead.&quot;</span> );</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;            $value = 0;</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;        }</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>;</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;    }</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> has_currency_value( $field ){</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;        $has_currency = self::is_pricing_field( $field-&gt;type ) || rgobj( $field, <span class="stringliteral">&#39;numberFormat&#39;</span> ) == <span class="stringliteral">&#39;currency&#39;</span>;</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;        <span class="keywordflow">return</span> $has_currency;</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;    }</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> conditional_shortcode( <a class="code" href="delete__link_8php.html#adc851f7a62250e75df0490c0280aef4c">$attributes</a>, <a class="code" href="custom_8php.html#ab2cfd183a13283e6ee22f33f2713eac9">$content</a> = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;        extract(</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;            <a class="code" href="shortcodes_8php.html#aba55ec8783759bb5600f1f12b7f9ecc0">shortcode_atts</a>(</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;                array(</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;                    <span class="stringliteral">&#39;merge_tag&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;                    <span class="stringliteral">&#39;condition&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;                    <span class="stringliteral">&#39;value&#39;</span>     =&gt; <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;                ), <a class="code" href="delete__link_8php.html#adc851f7a62250e75df0490c0280aef4c">$attributes</a></div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;            )</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;        );</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_g_f_forms_model.html#aceb0262a802095054196cc905722e288">RGFormsModel::matches_operation</a>( <a class="code" href="widget-poll_8php.html#aa1dbc314943a448ba681230a0e83633c">$merge_tag</a>, $value, $condition ) ? <a class="code" href="shortcodes_8php.html#aaa19827abd3976c4b6a24136c4c6380f">do_shortcode</a>( <a class="code" href="custom_8php.html#ab2cfd183a13283e6ee22f33f2713eac9">$content</a> ) : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;    }</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_valid_for_calcuation( $field ) {</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;        $supported_input_types   = array( <span class="stringliteral">&#39;text&#39;</span>, <span class="stringliteral">&#39;select&#39;</span>, <span class="stringliteral">&#39;number&#39;</span>, <span class="stringliteral">&#39;checkbox&#39;</span>, <span class="stringliteral">&#39;radio&#39;</span>, <span class="stringliteral">&#39;hidden&#39;</span>, <span class="stringliteral">&#39;singleproduct&#39;</span>, <span class="stringliteral">&#39;price&#39;</span>, <span class="stringliteral">&#39;hiddenproduct&#39;</span>, <span class="stringliteral">&#39;calculation&#39;</span>, <span class="stringliteral">&#39;singleshipping&#39;</span> );</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;        $unsupported_field_types = array( <span class="stringliteral">&#39;category&#39;</span> );</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;        $input_type              = <a class="code" href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">RGFormsModel::get_input_type</a>( $field );</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;        <span class="keywordflow">return</span> in_array( $input_type, $supported_input_types ) &amp;&amp; ! in_array( $input_type, $unsupported_field_types );</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;    }</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> log_error( <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> ) {</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;        <span class="keywordflow">if</span> ( class_exists( <span class="stringliteral">&#39;GFLogging&#39;</span> ) ) {</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;            GFLogging::include_logger();</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;            GFLogging::log_message( <span class="stringliteral">&#39;gravityforms&#39;</span>, <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a>, KLogger::ERROR );</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;        }</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;    }</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> log_debug( <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> ) {</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;        <span class="keywordflow">if</span> ( class_exists( <span class="stringliteral">&#39;GFLogging&#39;</span> ) ) {</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;            GFLogging::include_logger();</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;            GFLogging::log_message( <span class="stringliteral">&#39;gravityforms&#39;</span>, <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a>, KLogger::DEBUG );</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;        }</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;    }</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> echo_if( $condition, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> ) {</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;        <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a5fa64d49f59b259090dd3b907ef3f369">_deprecated_function</a>( <span class="stringliteral">&#39;GFCommon::echo_if() is deprecated&#39;</span>, <span class="stringliteral">&#39;1.9.9&#39;</span>, <span class="stringliteral">&#39;Use checked() or selected() instead.&#39;</span> );</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;        <span class="keywordflow">switch</span> ( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> ) {</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;checked&#39;</span>:</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;                <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <span class="stringliteral">&#39;checked=&quot;checked&quot;&#39;</span>;</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;selected&#39;</span>:</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;                <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <span class="stringliteral">&#39;selected=&quot;selected&quot;&#39;</span>;</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;        }</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;        echo $condition ? <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;    }</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> gf_global( $echo = <span class="keyword">true</span> ) {</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;        require_once( GFCommon::get_base_path() . <span class="stringliteral">&#39;/currency.php&#39;</span> );</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;        $gf_global                       = array();</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;        $gf_global[<span class="stringliteral">&#39;gf_currency_config&#39;</span>] = RGCurrency::get_currency( GFCommon::get_currency() );</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;        $gf_global[<span class="stringliteral">&#39;base_url&#39;</span>]           = GFCommon::get_base_url();</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;        $gf_global[<span class="stringliteral">&#39;number_formats&#39;</span>]     = array();</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;        $gf_global[<span class="stringliteral">&#39;spinnerUrl&#39;</span>]         = GFCommon::get_base_url() . <span class="stringliteral">&#39;/images/spinner.gif&#39;</span>;</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;        $gf_global_json = <span class="stringliteral">&#39;var gf_global = &#39;</span> . json_encode( $gf_global ) . <span class="charliteral">&#39;;&#39;</span>;</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;        <span class="keywordflow">if</span> ( ! $echo ) {</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;            <span class="keywordflow">return</span> $gf_global_json;</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;        }</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;        echo $gf_global_json;</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;    }</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> gf_vars( $echo = <span class="keyword">true</span> ) {</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;        <span class="keywordflow">if</span> ( ! class_exists( <span class="stringliteral">&#39;RGCurrency&#39;</span> ) ) {</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;            require_once( <span class="stringliteral">&#39;currency.php&#39;</span> );</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;        }</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;        $gf_vars                            = array();</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;        $gf_vars[<span class="stringliteral">&#39;active&#39;</span>]                  = <a class="code" href="l10n_8php.html#abd860e2ef067a94c4a1633f9307a3750">esc_attr__</a>( <span class="stringliteral">&#39;Active&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;        $gf_vars[<span class="stringliteral">&#39;inactive&#39;</span>]                = <a class="code" href="l10n_8php.html#abd860e2ef067a94c4a1633f9307a3750">esc_attr__</a>( <span class="stringliteral">&#39;Inactive&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;        $gf_vars[<span class="stringliteral">&#39;save&#39;</span>]                    = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Save&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;        $gf_vars[<span class="stringliteral">&#39;update&#39;</span>]                  = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Update&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;        $gf_vars[<span class="stringliteral">&#39;previousLabel&#39;</span>]           = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Previous&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;        $gf_vars[<span class="stringliteral">&#39;selectFormat&#39;</span>]            = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Select a format&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;        $gf_vars[<span class="stringliteral">&#39;editToViewAll&#39;</span>]           = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;5 of %d items shown. Edit field to view all&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;        $gf_vars[<span class="stringliteral">&#39;enterValue&#39;</span>]              = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Enter a value&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;        $gf_vars[<span class="stringliteral">&#39;formTitle&#39;</span>]               = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Untitled Form&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;        $gf_vars[<span class="stringliteral">&#39;formDescription&#39;</span>]         = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;We would love to hear from you! Please fill out this form and we will get in touch with you shortly.&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;        $gf_vars[<span class="stringliteral">&#39;formConfirmationMessage&#39;</span>] = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Thanks for contacting us! We will get in touch with you shortly.&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;        $gf_vars[<span class="stringliteral">&#39;buttonText&#39;</span>]              = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Submit&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;        $gf_vars[<span class="stringliteral">&#39;loading&#39;</span>]                 = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Loading...&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;        $gf_vars[<span class="stringliteral">&#39;thisFieldIf&#39;</span>]             = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;this field if&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;        $gf_vars[<span class="stringliteral">&#39;thisSectionIf&#39;</span>]           = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;this section if&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;        $gf_vars[<span class="stringliteral">&#39;thisPage&#39;</span>]                = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;this page&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;        $gf_vars[<span class="stringliteral">&#39;thisFormButton&#39;</span>]          = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;this form button if&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;        $gf_vars[<span class="stringliteral">&#39;show&#39;</span>]                    = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Show&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;        $gf_vars[<span class="stringliteral">&#39;hide&#39;</span>]                    = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Hide&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;        $gf_vars[<span class="stringliteral">&#39;all&#39;</span>]                     = <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( <a class="code" href="edit-form-advanced_8php.html#ada8efad85a9cd028503cbe55c37c890a">_x</a>( <span class="stringliteral">&#39;All&#39;</span>, <span class="stringliteral">&#39;Conditional Logic&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;        $gf_vars[<span class="stringliteral">&#39;any&#39;</span>]                     = <a class="code" href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a>( <a class="code" href="edit-form-advanced_8php.html#ada8efad85a9cd028503cbe55c37c890a">_x</a>( <span class="stringliteral">&#39;Any&#39;</span>, <span class="stringliteral">&#39;Conditional Logic&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) );</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;        $gf_vars[<span class="stringliteral">&#39;ofTheFollowingMatch&#39;</span>]     = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;of the following match:&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;        $gf_vars[<span class="stringliteral">&#39;is&#39;</span>]                      = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;        $gf_vars[<span class="stringliteral">&#39;isNot&#39;</span>]                   = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;is not&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;        $gf_vars[<span class="stringliteral">&#39;greaterThan&#39;</span>]             = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;greater than&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;        $gf_vars[<span class="stringliteral">&#39;lessThan&#39;</span>]                = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;less than&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;        $gf_vars[<span class="stringliteral">&#39;contains&#39;</span>]                = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;contains&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;        $gf_vars[<span class="stringliteral">&#39;startsWith&#39;</span>]              = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;starts with&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;        $gf_vars[<span class="stringliteral">&#39;endsWith&#39;</span>]                = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;ends with&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;        $gf_vars[<span class="stringliteral">&#39;thisConfirmation&#39;</span>]                 = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Use this confirmation if&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;        $gf_vars[<span class="stringliteral">&#39;thisNotification&#39;</span>]                 = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Send this notification if&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;        $gf_vars[<span class="stringliteral">&#39;confirmationSave&#39;</span>]                 = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Save&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;        $gf_vars[<span class="stringliteral">&#39;confirmationSaving&#39;</span>]               = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Saving...&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;        $gf_vars[<span class="stringliteral">&#39;confirmationAreYouSure&#39;</span>]           = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Are you sure you wish to cancel these changes?&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;        $gf_vars[<span class="stringliteral">&#39;confirmationIssueSaving&#39;</span>]          = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;There was an issue saving this confirmation.&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;        $gf_vars[<span class="stringliteral">&#39;confirmationConfirmDelete&#39;</span>]        = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Are you sure you wish to delete this confirmation?&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;        $gf_vars[<span class="stringliteral">&#39;confirmationIssueDeleting&#39;</span>]        = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;There was an issue deleting this confirmation.&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;        $gf_vars[<span class="stringliteral">&#39;confirmationConfirmDiscard&#39;</span>]       = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;There are unsaved changes to the current confirmation. Would you like to discard these changes?&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;        $gf_vars[<span class="stringliteral">&#39;confirmationDefaultName&#39;</span>]          = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Untitled Confirmation&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;        $gf_vars[<span class="stringliteral">&#39;confirmationDefaultMessage&#39;</span>]       = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Thanks for contacting us! We will get in touch with you shortly.&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;        $gf_vars[<span class="stringliteral">&#39;confirmationInvalidPageSelection&#39;</span>] = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Please select a page.&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;        $gf_vars[<span class="stringliteral">&#39;confirmationInvalidRedirect&#39;</span>]      = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Please enter a URL.&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;        $gf_vars[<span class="stringliteral">&#39;confirmationInvalidName&#39;</span>]          = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;Please enter a confirmation name.&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;        $gf_vars[<span class="stringliteral">&#39;conditionalLogicDependency&#39;</span>]           = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&quot;This form contains conditional logic dependent upon this field. Are you sure you want to delete this field? &#39;OK&#39; to delete, &#39;Cancel&#39; to abort.&quot;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;        $gf_vars[<span class="stringliteral">&#39;conditionalLogicDependencyChoice&#39;</span>]     = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&quot;This form contains conditional logic dependent upon this choice. Are you sure you want to delete this choice? &#39;OK&#39; to delete, &#39;Cancel&#39; to abort.&quot;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;        $gf_vars[<span class="stringliteral">&#39;conditionalLogicDependencyChoiceEdit&#39;</span>] = <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&quot;This form contains conditional logic dependent upon this choice. Are you sure you want to modify this choice? &#39;OK&#39; to delete, &#39;Cancel&#39; to abort.&quot;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;        $gf_vars[<span class="stringliteral">&#39;mergeTagsTooltip&#39;</span>] = <span class="stringliteral">&#39;&lt;h6&gt;&#39;</span> . <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Merge Tags&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> ) . <span class="stringliteral">&#39;&lt;/h6&gt;&#39;</span> . <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Merge tags allow you to dynamically populate submitted field values in your form content wherever this merge tag icon is present.&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;        $gf_vars[<span class="stringliteral">&#39;baseUrl&#39;</span>]              = GFCommon::get_base_url();</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;        $gf_vars[<span class="stringliteral">&#39;gf_currency_config&#39;</span>]   = RGCurrency::get_currency( GFCommon::get_currency() );</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;        $gf_vars[<span class="stringliteral">&#39;otherChoiceValue&#39;</span>]     = GFCommon::get_other_choice_value();</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;        $gf_vars[<span class="stringliteral">&#39;isFormTrash&#39;</span>]          = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;        $gf_vars[<span class="stringliteral">&#39;currentlyAddingField&#39;</span>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;        $gf_vars[<span class="stringliteral">&#39;addFieldFilter&#39;</span>]    = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Add a condition&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;        $gf_vars[<span class="stringliteral">&#39;removeFieldFilter&#39;</span>] = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Remove a condition&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;        $gf_vars[<span class="stringliteral">&#39;filterAndAny&#39;</span>]      = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Include results if {0} match:&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;        $gf_vars[<span class="stringliteral">&#39;customChoices&#39;</span>]     = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Custom Choices&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;        $gf_vars[<span class="stringliteral">&#39;predefinedChoices&#39;</span>] = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Predefined Choices&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="noop_8php.html#a0b327581800dba50ad70720e23ae2ed2">is_admin</a>() &amp;&amp; rgget( <span class="stringliteral">&#39;id&#39;</span> ) ) {</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;            $form                 = <a class="code" href="class_g_f_forms_model.html#a2bbf1022c96f557e04addbdd5d803fcf">RGFormsModel::get_form_meta</a>( rgget( <span class="stringliteral">&#39;id&#39;</span> ) );</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;            $gf_vars[<span class="stringliteral">&#39;mergeTags&#39;</span>] = GFCommon::get_merge_tags( $form[<span class="stringliteral">&#39;fields&#39;</span>], <span class="stringliteral">&#39;&#39;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;        }</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;        $gf_vars_json = <span class="stringliteral">&#39;var gf_vars = &#39;</span> . json_encode( $gf_vars ) . <span class="charliteral">&#39;;&#39;</span>;</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;        <span class="keywordflow">if</span> ( ! $echo ) {</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;            <span class="keywordflow">return</span> $gf_vars_json;</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;            echo $gf_vars_json;</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;        }</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;    }</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_bp_active() {</div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;        <span class="keywordflow">return</span> defined( <span class="stringliteral">&#39;BP_VERSION&#39;</span> ) ? <span class="keyword">true</span> : <span class="keyword">false</span>;</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;    }</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> add_message( <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a>, $is_error = <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;        <span class="keywordflow">if</span> ( $is_error ) {</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;            <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">self::$errors</a>[] = <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a>;</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;            <a class="code" href="edit-form-advanced_8php.html#a21a183f927a6d243fe6b4ba3a6c4d4c8">self::$messages</a>[] = <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a>;</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;        }</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;    }</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> add_error_message( <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> ) {</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;        self::add_message( <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;    }</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> display_admin_message( <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a> = <span class="keyword">false</span>, <a class="code" href="edit-form-advanced_8php.html#a21a183f927a6d243fe6b4ba3a6c4d4c8">$messages</a> = <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a> ) {</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;            <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a> = <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">self::$errors</a>;</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;        }</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="edit-form-advanced_8php.html#a21a183f927a6d243fe6b4ba3a6c4d4c8">$messages</a> ) {</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;            <a class="code" href="edit-form-advanced_8php.html#a21a183f927a6d243fe6b4ba3a6c4d4c8">$messages</a> = <a class="code" href="edit-form-advanced_8php.html#a21a183f927a6d243fe6b4ba3a6c4d4c8">self::$messages</a>;</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;        }</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;        <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a>   = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_admin_error_messages&#39;</span>, <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a> );</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;        <a class="code" href="edit-form-advanced_8php.html#a21a183f927a6d243fe6b4ba3a6c4d4c8">$messages</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_admin_messages&#39;</span>, <a class="code" href="edit-form-advanced_8php.html#a21a183f927a6d243fe6b4ba3a6c4d4c8">$messages</a> );</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;        <span class="keywordflow">if</span> ( ! empty( <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a> ) ) {</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;            ?&gt;</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;            &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;error below-h2&quot;</span>&gt;</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;                &lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">if</span> ( count( <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a> ) &gt; 1 ) { ?&gt;</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;                    &lt;ul style=<span class="stringliteral">&quot;margin: 0.5em 0 0; padding: 2px;&quot;</span>&gt;</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;                        &lt;<a class="code" href="wordpress_2wp-includes_2functions_8php.html#af06cd3b218b548cf6b733df97c80c8a3">li</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> echo implode( <span class="stringliteral">&#39;&lt;/li&gt;&lt;li&gt;&#39;</span>, <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a> ); ?&gt;&lt;/<a class="code" href="wordpress_2wp-includes_2functions_8php.html#af06cd3b218b548cf6b733df97c80c8a3">li</a>&gt;</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;                    &lt;/ul&gt;</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;                &lt;?<a class="code" href="namespacephp.html">php</a> } <span class="keywordflow">else</span> { ?&gt;</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;                    &lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> echo <a class="code" href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a>[0]; ?&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;                &lt;?<a class="code" href="namespacephp.html">php</a> } ?&gt;</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;            &lt;/div&gt;</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ! empty( <a class="code" href="edit-form-advanced_8php.html#a21a183f927a6d243fe6b4ba3a6c4d4c8">$messages</a> ) ) {</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;            ?&gt;</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;            &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;message&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;updated below-h2&quot;</span>&gt;</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;                &lt;?<a class="code" href="namespacephp.html">php</a> <span class="keywordflow">if</span> ( count( <a class="code" href="edit-form-advanced_8php.html#a21a183f927a6d243fe6b4ba3a6c4d4c8">$messages</a> ) &gt; 1 ) { ?&gt;</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;                    &lt;ul style=<span class="stringliteral">&quot;margin: 0.5em 0 0; padding: 2px;&quot;</span>&gt;</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;                        &lt;<a class="code" href="wordpress_2wp-includes_2functions_8php.html#af06cd3b218b548cf6b733df97c80c8a3">li</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> echo implode( <span class="stringliteral">&#39;&lt;/li&gt;&lt;li&gt;&#39;</span>, <a class="code" href="edit-form-advanced_8php.html#a21a183f927a6d243fe6b4ba3a6c4d4c8">$messages</a> ); ?&gt;&lt;/<a class="code" href="wordpress_2wp-includes_2functions_8php.html#af06cd3b218b548cf6b733df97c80c8a3">li</a>&gt;</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;                    &lt;/ul&gt;</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;                &lt;?<a class="code" href="namespacephp.html">php</a> } <span class="keywordflow">else</span> { ?&gt;</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;                    &lt;<a class="code" href="namespacep.html">p</a>&gt;&lt;<a class="code" href="namespacestrong.html">strong</a>&gt;&lt;?<a class="code" href="namespacephp.html">php</a> echo <a class="code" href="edit-form-advanced_8php.html#a21a183f927a6d243fe6b4ba3a6c4d4c8">$messages</a>[0]; ?&gt;&lt;/<a class="code" href="namespacestrong.html">strong</a>&gt;&lt;/<a class="code" href="namespacep.html">p</a>&gt;</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;                &lt;?<a class="code" href="namespacephp.html">php</a> } ?&gt;</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;            &lt;/div&gt;</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;        &lt;?<a class="code" href="namespacephp.html">php</a></div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;        }</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;    }</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">function</span> requires_gf_vars() {</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;        $dependent_scripts = array( <span class="stringliteral">&#39;gform_form_admin&#39;</span>, <span class="stringliteral">&#39;gform_gravityforms&#39;</span>, <span class="stringliteral">&#39;gform_form_editor&#39;</span>, <span class="stringliteral">&#39;gform_field_filter&#39;</span> );</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;        <span class="keywordflow">foreach</span> ( $dependent_scripts as $script ) {</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="functions_8wp-scripts_8php.html#acc3f81c1acb27cb6d960fa9dd1f3bba1">wp_script_is</a>( $script ) ) {</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;            }</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;        }</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;    }</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> maybe_output_gf_vars() {</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;        <span class="keywordflow">if</span> ( self::requires_gf_vars() ) {</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;            echo <span class="stringliteral">&#39;&lt;script type=&quot;text/javascript&quot;&gt;&#39;</span> . self::gf_vars( <span class="keyword">false</span> ) . <span class="stringliteral">&#39;&lt;/script&gt;&#39;</span>;</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;        }</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;    }</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;</div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> maybe_add_leading_zero( $value ) {</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;        $first_char = GFCommon::safe_substr( $value, 0, 1, <span class="stringliteral">&#39;utf-8&#39;</span> );</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;        <span class="keywordflow">if</span> ( in_array( $first_char, array( <span class="charliteral">&#39;.&#39;</span>, <span class="charliteral">&#39;,&#39;</span> ) ) ) {</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;            $value = <span class="charliteral">&#39;0&#39;</span> . <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>;</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;        }</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>;</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;    }</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;    <span class="comment">// used by the gfFieldFilterUI() jQuery plugin</span></div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_field_filter_settings( $form ) {</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;        $all_fields = $form[<span class="stringliteral">&#39;fields&#39;</span>];</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;        <span class="comment">// set up filters</span></div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;        $fields        = $all_fields;</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;        $exclude_types = array( <span class="stringliteral">&#39;rank&#39;</span>, <span class="stringliteral">&#39;page&#39;</span>, <span class="stringliteral">&#39;html&#39;</span> );</div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;        $operators_by_input_type = array(</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;            <span class="stringliteral">&#39;default&#39;</span>     =&gt; array( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;isnot&#39;</span>, <span class="charliteral">&#39;&gt;&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span>, ),</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;            <span class="stringliteral">&#39;name&#39;</span>        =&gt; array( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;isnot&#39;</span>, <span class="charliteral">&#39;&gt;&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span>, <span class="stringliteral">&#39;contains&#39;</span> ),</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;            <span class="stringliteral">&#39;address&#39;</span>     =&gt; array( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;isnot&#39;</span>, <span class="charliteral">&#39;&gt;&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span>, <span class="stringliteral">&#39;contains&#39;</span> ),</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;            <span class="stringliteral">&#39;text&#39;</span>        =&gt; array( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;isnot&#39;</span>, <span class="charliteral">&#39;&gt;&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span>, <span class="stringliteral">&#39;contains&#39;</span> ),</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;            <span class="stringliteral">&#39;textarea&#39;</span>    =&gt; array( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;isnot&#39;</span>, <span class="charliteral">&#39;&gt;&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span>, <span class="stringliteral">&#39;contains&#39;</span> ),</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;            <span class="stringliteral">&#39;checkbox&#39;</span>    =&gt; array( <span class="stringliteral">&#39;is&#39;</span> ),</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;            <span class="stringliteral">&#39;multiselect&#39;</span> =&gt; array( <span class="stringliteral">&#39;contains&#39;</span> ),</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;            <span class="stringliteral">&#39;number&#39;</span>      =&gt; array( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;isnot&#39;</span>, <span class="charliteral">&#39;&gt;&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span> ),</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;            <span class="stringliteral">&#39;select&#39;</span>      =&gt; array( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;isnot&#39;</span>, <span class="charliteral">&#39;&gt;&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span> ),</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;            <span class="stringliteral">&#39;likert&#39;</span>      =&gt; array( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;isnot&#39;</span> ),</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;            <span class="stringliteral">&#39;list&#39;</span>        =&gt; array( <span class="stringliteral">&#39;contains&#39;</span> )</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;        );</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;        <span class="keywordflow">for</span> ( <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> = 0; <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> &lt; count( $all_fields ); <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> ++ ) {</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;            $input_type = GFFormsmodel::get_input_type( $all_fields[ <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> ] );</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;            <span class="keywordflow">if</span> ( in_array( $input_type, $exclude_types ) ) {</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;                unset( $fields[ <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> ] );</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;            }</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;        }</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;        $fields = array_values( $fields );</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;        $field_filters = array(</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;            array(</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;                <span class="stringliteral">&#39;key&#39;</span>       =&gt; <span class="charliteral">&#39;0&#39;</span>,</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;                <span class="stringliteral">&#39;text&#39;</span>      =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Any form field&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;                <span class="stringliteral">&#39;operators&#39;</span> =&gt; array( <span class="stringliteral">&#39;contains&#39;</span>, <span class="stringliteral">&#39;is&#39;</span> ),</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;                <span class="stringliteral">&#39;preventMultiple&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;            ),</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;        );</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;        <span class="keywordflow">foreach</span> ( $fields as $field ) {</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;            $input_type = <a class="code" href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">GFFormsModel::get_input_type</a>( $field );</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;            $operators = isset( $operators_by_input_type[ $input_type ] ) ? $operators_by_input_type[ $input_type ] : $operators_by_input_type[<span class="stringliteral">&#39;default&#39;</span>];</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;            <span class="keywordflow">if</span> ( $field-&gt;type == <span class="stringliteral">&#39;product&#39;</span> &amp;&amp; in_array( $input_type, array( <span class="stringliteral">&#39;radio&#39;</span>, <span class="stringliteral">&#39;select&#39;</span> ) ) ) {</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;                $operators = array( <span class="stringliteral">&#39;is&#39;</span> );</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;            } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( ! isset( $field-&gt;choices ) &amp;&amp; ! in_array( <span class="stringliteral">&#39;contains&#39;</span>, $operators ) ) {</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;                $operators[] = <span class="stringliteral">&#39;contains&#39;</span>;</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;            }</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;</div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;            $field_filter = array();</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;            $key          = $field-&gt;id;</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;            <span class="keywordflow">if</span> ( $input_type == <span class="stringliteral">&#39;likert&#39;</span> &amp;&amp; $field-&gt;gsurveyLikertEnableMultipleRows ) {</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;                <span class="comment">// multi-row likert fields</span></div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;                $field_filter[<span class="stringliteral">&#39;key&#39;</span>]   = $key;</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;                $field_filter[<span class="stringliteral">&#39;group&#39;</span>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;                $field_filter[<span class="stringliteral">&#39;text&#39;</span>]  = <a class="code" href="class_g_f_forms_model.html#af9834bca98d5f60922e9e816d6c8cfe5">GFFormsModel::get_label</a>( $field );</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;                $sub_filters           = array();</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;                $rows                  = $field-&gt;gsurveyLikertRows;</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;                <span class="keywordflow">foreach</span> ( $rows as $row ) {</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;                    $sub_filter                    = array();</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;                    $sub_filter[<span class="stringliteral">&#39;key&#39;</span>]             = $key . <span class="charliteral">&#39;|&#39;</span> . rgar( $row, <span class="stringliteral">&#39;value&#39;</span> );</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;                    $sub_filter[<span class="stringliteral">&#39;text&#39;</span>]            = rgar( $row, <span class="stringliteral">&#39;text&#39;</span> );</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;                    $sub_filter[<span class="stringliteral">&#39;type&#39;</span>]            = <span class="stringliteral">&#39;field&#39;</span>;</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;                    $sub_filter[<span class="stringliteral">&#39;preventMultiple&#39;</span>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;                    $sub_filter[<span class="stringliteral">&#39;operators&#39;</span>]       = $operators;</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;                    $sub_filter[<span class="stringliteral">&#39;values&#39;</span>]          = $field-&gt;choices;</div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;                    $sub_filters[]                 = $sub_filter;</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;                }</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;                $field_filter[<span class="stringliteral">&#39;filters&#39;</span>] = $sub_filters;</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;            } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a> ( ( $input_type == <span class="stringliteral">&#39;name&#39;</span> &amp;&amp; $field-&gt;nameFormat !== <span class="stringliteral">&#39;&#39;</span> &amp;&amp; $field-&gt;nameFormat !== <span class="stringliteral">&#39;simple&#39;</span>) || $input_type == <span class="stringliteral">&#39;address&#39;</span> ) {</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;                <span class="comment">// standard two input name field</span></div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;                $field_filter[<span class="stringliteral">&#39;key&#39;</span>]   = $key;</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;                $field_filter[<span class="stringliteral">&#39;group&#39;</span>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;                $field_filter[<span class="stringliteral">&#39;text&#39;</span>]  = <a class="code" href="class_g_f_forms_model.html#af9834bca98d5f60922e9e816d6c8cfe5">GFFormsModel::get_label</a>( $field );</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;                $sub_filters           = array();</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;                $inputs                = $field-&gt;inputs;</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;                <span class="keywordflow">foreach</span> ( $inputs as $input ) {</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;                    $sub_filter                    = array();</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;                    $sub_filter[<span class="stringliteral">&#39;key&#39;</span>]             = rgar( $input, <span class="stringliteral">&#39;id&#39;</span> );</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;                    $sub_filter[<span class="stringliteral">&#39;text&#39;</span>]            = rgar( $input, <span class="stringliteral">&#39;label&#39;</span> );</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;                    $sub_filter[<span class="stringliteral">&#39;preventMultiple&#39;</span>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;                    $sub_filter[<span class="stringliteral">&#39;operators&#39;</span>]       = $operators;</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;                    $sub_filters[]                 = $sub_filter;</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;                }</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;                $field_filter[<span class="stringliteral">&#39;filters&#39;</span>] = $sub_filters;</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;            } <a class="code" href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a>( $input_type == <span class="stringliteral">&#39;date&#39;</span>) {</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;                $field_filter[<span class="stringliteral">&#39;key&#39;</span>]             = $key;</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;                $field_filter[<span class="stringliteral">&#39;preventMultiple&#39;</span>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;                $field_filter[<span class="stringliteral">&#39;text&#39;</span>]            = <a class="code" href="class_g_f_forms_model.html#af9834bca98d5f60922e9e816d6c8cfe5">GFFormsModel::get_label</a>( $field );</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;                $field_filter[<span class="stringliteral">&#39;operators&#39;</span>] = $operators;</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;                $field_filter[<span class="stringliteral">&#39;placeholder&#39;</span>] = <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>(<span class="stringliteral">&#39;yyyy-mm-dd&#39;</span>, <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;                $field_filter[<span class="stringliteral">&#39;cssClass&#39;</span>] = <span class="stringliteral">&#39;datepicker ymd_dash&#39;</span>;</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;                $field_filter[<span class="stringliteral">&#39;key&#39;</span>]             = $key;</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;                $field_filter[<span class="stringliteral">&#39;preventMultiple&#39;</span>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;                $field_filter[<span class="stringliteral">&#39;text&#39;</span>]            = <a class="code" href="class_g_f_forms_model.html#af9834bca98d5f60922e9e816d6c8cfe5">GFFormsModel::get_label</a>( $field );</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;                $field_filter[<span class="stringliteral">&#39;operators&#39;</span>] = $operators;</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;                <span class="keywordflow">if</span> ( isset( $field-&gt;choices ) ) {</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;                    $field_filter[<span class="stringliteral">&#39;values&#39;</span>] = $field-&gt;choices;</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;                }</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;            }</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;            $field_filters[] = $field_filter;</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;        }</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;        $form_id            = $form[<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;        $entry_meta_filters = self::get_entry_meta_filter_settings( $form_id );</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;        $field_filters      = array_merge( $field_filters, $entry_meta_filters );</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;        $field_filters      = array_values( $field_filters ); <span class="comment">// reset the numeric keys in case some filters have been unset</span></div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;        $info_filters       = self::get_entry_info_filter_settings();</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;        $field_filters      = array_merge( $field_filters, $info_filters );</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;        $field_filters      = array_values( $field_filters );</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;</div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;        <span class="keywordflow">return</span> $field_filters;</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;    }</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_entry_info_filter_settings() {</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;        $settings     = array();</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;        $info_columns = self::get_entry_info_filter_columns();</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;        <span class="keywordflow">foreach</span> ( $info_columns as $key =&gt; $info_column ) {</div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;            $info_column[<span class="stringliteral">&#39;key&#39;</span>]             = $key;</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;            $info_column[<span class="stringliteral">&#39;preventMultiple&#39;</span>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;            $settings[]                     = $info_column;</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;        }</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;        <span class="keywordflow">return</span> $settings;</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;    }</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_entry_info_filter_columns( $get_users = <span class="keyword">true</span> ) {</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;        $account_choices = array();</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;        <span class="keywordflow">if</span> ( $get_users ) {</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;            $args            = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_filters_get_users&#39;</span>, array( <span class="stringliteral">&#39;number&#39;</span> =&gt; 200 ) );</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;            $accounts        = <a class="code" href="wp-includes_2user_8php.html#aa414164c348c21e38980eb95ebb0d541">get_users</a>( $args );</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;            $account_choices = array();</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;            <span class="keywordflow">foreach</span> ( $accounts as $account ) {</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;                $account_choices[] = array( <span class="stringliteral">&#39;text&#39;</span> =&gt; $account-&gt;user_login, <span class="stringliteral">&#39;value&#39;</span> =&gt; $account-&gt;ID );</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;            }</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;        }</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;        <span class="keywordflow">return</span> array(</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;            <span class="stringliteral">&#39;entry_id&#39;</span>       =&gt; array(</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;                <span class="stringliteral">&#39;text&#39;</span>      =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Entry ID&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;                <span class="stringliteral">&#39;operators&#39;</span> =&gt; array( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;isnot&#39;</span>, <span class="charliteral">&#39;&gt;&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span> )</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;            ),</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;            <span class="stringliteral">&#39;date_created&#39;</span>   =&gt; array(</div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;                <span class="stringliteral">&#39;text&#39;</span>        =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Entry Date&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;                <span class="stringliteral">&#39;operators&#39;</span>   =&gt; array( <span class="stringliteral">&#39;is&#39;</span>, <span class="charliteral">&#39;&gt;&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span> ),</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;                <span class="stringliteral">&#39;placeholder&#39;</span> =&gt; <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;yyyy-mm-dd&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;                <span class="stringliteral">&#39;cssClass&#39;</span> =&gt; <span class="stringliteral">&#39;datepicker ymd_dash&#39;</span>,</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;            ),</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;            <span class="stringliteral">&#39;is_starred&#39;</span>     =&gt; array(</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;                <span class="stringliteral">&#39;text&#39;</span>      =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Starred&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;                <span class="stringliteral">&#39;operators&#39;</span> =&gt; array( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;isnot&#39;</span> ),</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;                <span class="stringliteral">&#39;values&#39;</span>    =&gt; array(</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;                    array(</div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;                        <span class="stringliteral">&#39;text&#39;</span>  =&gt; <span class="stringliteral">&#39;Yes&#39;</span>,</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;                        <span class="stringliteral">&#39;value&#39;</span> =&gt; <span class="charliteral">&#39;1&#39;</span>,</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;                    ),</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;                    array(</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;                        <span class="stringliteral">&#39;text&#39;</span>  =&gt; <span class="stringliteral">&#39;No&#39;</span>,</div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;                        <span class="stringliteral">&#39;value&#39;</span> =&gt; <span class="charliteral">&#39;0&#39;</span>,</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;                    ),</div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;                )</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;            ),</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;            <span class="stringliteral">&#39;ip&#39;</span>             =&gt; array(</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;                <span class="stringliteral">&#39;text&#39;</span>      =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;IP Address&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;                <span class="stringliteral">&#39;operators&#39;</span> =&gt; array( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;isnot&#39;</span>, <span class="charliteral">&#39;&gt;&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span>, <span class="stringliteral">&#39;contains&#39;</span> )</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;            ),</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;            <span class="stringliteral">&#39;source_url&#39;</span>     =&gt; array(</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;                <span class="stringliteral">&#39;text&#39;</span>      =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Source URL&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;                <span class="stringliteral">&#39;operators&#39;</span> =&gt; array( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;isnot&#39;</span>, <span class="charliteral">&#39;&gt;&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span>, <span class="stringliteral">&#39;contains&#39;</span> )</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;            ),</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;            <span class="stringliteral">&#39;payment_status&#39;</span> =&gt; array(</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;                <span class="stringliteral">&#39;text&#39;</span>      =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Payment Status&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;                <span class="stringliteral">&#39;operators&#39;</span> =&gt; array( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;isnot&#39;</span> ),</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;                <span class="stringliteral">&#39;values&#39;</span>    =&gt; array(</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;                    array(</div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;                        <span class="stringliteral">&#39;text&#39;</span>  =&gt; <span class="stringliteral">&#39;Paid&#39;</span>,</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;                        <span class="stringliteral">&#39;value&#39;</span> =&gt; <span class="stringliteral">&#39;Paid&#39;</span>,</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;                    ),</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;                    array(</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;                        <span class="stringliteral">&#39;text&#39;</span>  =&gt; <span class="stringliteral">&#39;Processing&#39;</span>,</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;                        <span class="stringliteral">&#39;value&#39;</span> =&gt; <span class="stringliteral">&#39;Processing&#39;</span>,</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;                    ),</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;                    array(</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;                        <span class="stringliteral">&#39;text&#39;</span>  =&gt; <span class="stringliteral">&#39;Failed&#39;</span>,</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;                        <span class="stringliteral">&#39;value&#39;</span> =&gt; <span class="stringliteral">&#39;Failed&#39;</span>,</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;                    ),</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;                    array(</div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;                        <span class="stringliteral">&#39;text&#39;</span>  =&gt; <span class="stringliteral">&#39;Active&#39;</span>,</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;                        <span class="stringliteral">&#39;value&#39;</span> =&gt; <span class="stringliteral">&#39;Active&#39;</span>,</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;                    ),</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;                    array(</div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;                        <span class="stringliteral">&#39;text&#39;</span>  =&gt; <span class="stringliteral">&#39;Cancelled&#39;</span>,</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;                        <span class="stringliteral">&#39;value&#39;</span> =&gt; <span class="stringliteral">&#39;Cancelled&#39;</span>,</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;                    ),</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;                )</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;            ),</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;            <span class="stringliteral">&#39;payment_date&#39;</span>   =&gt; array(</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;                <span class="stringliteral">&#39;text&#39;</span>      =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Payment Date&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;                <span class="stringliteral">&#39;operators&#39;</span> =&gt; array( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;isnot&#39;</span>, <span class="charliteral">&#39;&gt;&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span> ),</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;                <span class="stringliteral">&#39;placeholder&#39;</span> =&gt; <a class="code" href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a>( <span class="stringliteral">&#39;yyyy-mm-dd&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;                <span class="stringliteral">&#39;cssClass&#39;</span> =&gt; <span class="stringliteral">&#39;datepicker ymd_dash&#39;</span>,</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;            ),</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;            <span class="stringliteral">&#39;payment_amount&#39;</span> =&gt; array(</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;                <span class="stringliteral">&#39;text&#39;</span>      =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Payment Amount&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;                <span class="stringliteral">&#39;operators&#39;</span> =&gt; array( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;isnot&#39;</span>, <span class="charliteral">&#39;&gt;&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span>, <span class="stringliteral">&#39;contains&#39;</span> )</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;            ),</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;            <span class="stringliteral">&#39;transaction_id&#39;</span> =&gt; array(</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;                <span class="stringliteral">&#39;text&#39;</span>      =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Transaction ID&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;                <span class="stringliteral">&#39;operators&#39;</span> =&gt; array( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;isnot&#39;</span>, <span class="charliteral">&#39;&gt;&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span>, <span class="stringliteral">&#39;contains&#39;</span> )</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;            ),</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;            <span class="stringliteral">&#39;created_by&#39;</span>     =&gt; array(</div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;                <span class="stringliteral">&#39;text&#39;</span>      =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;User&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;                <span class="stringliteral">&#39;operators&#39;</span> =&gt; array( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;isnot&#39;</span> ),</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;                <span class="stringliteral">&#39;values&#39;</span>    =&gt; $account_choices,</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;            )</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;        );</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;    }</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_entry_meta_filter_settings( $form_id ) {</div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;        $filters    = array();</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;        $entry_meta = <a class="code" href="class_g_f_forms_model.html#a1166cd7c754f765f15a0bece0b9d9018">GFFormsModel::get_entry_meta</a>( $form_id );</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;        <span class="keywordflow">if</span> ( empty( $entry_meta ) ) {</div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;            <span class="keywordflow">return</span> $filters;</div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;        }</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;        <span class="keywordflow">foreach</span> ( $entry_meta as $key =&gt; $meta ) {</div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;            <span class="keywordflow">if</span> ( isset( $meta[<span class="stringliteral">&#39;filter&#39;</span>] ) ) {</div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;                $filter                    = array();</div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;                $filter[<span class="stringliteral">&#39;key&#39;</span>]             = $key;</div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;                $filter[<span class="stringliteral">&#39;preventMultiple&#39;</span>] = isset( $meta[<span class="stringliteral">&#39;filter&#39;</span>][<span class="stringliteral">&#39;preventMultiple&#39;</span>] ) ? $meta[<span class="stringliteral">&#39;filter&#39;</span>][<span class="stringliteral">&#39;preventMultiple&#39;</span>] : <span class="keyword">false</span>;</div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;                $filter[<span class="stringliteral">&#39;text&#39;</span>]            = rgar( $meta, <span class="stringliteral">&#39;label&#39;</span> );</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;                $filter[<span class="stringliteral">&#39;operators&#39;</span>]       = isset( $meta[<span class="stringliteral">&#39;filter&#39;</span>][<span class="stringliteral">&#39;operators&#39;</span>] ) ? $meta[<span class="stringliteral">&#39;filter&#39;</span>][<span class="stringliteral">&#39;operators&#39;</span>] : array( <span class="stringliteral">&#39;is&#39;</span>, <span class="stringliteral">&#39;isnot&#39;</span> );</div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;                <span class="keywordflow">if</span> ( isset( $meta[<span class="stringliteral">&#39;filter&#39;</span>][<span class="stringliteral">&#39;choices&#39;</span>] ) ) {</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;                    $filter[<span class="stringliteral">&#39;values&#39;</span>] = $meta[<span class="stringliteral">&#39;filter&#39;</span>][<span class="stringliteral">&#39;choices&#39;</span>];</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;                }</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;                $filters[] = $filter;</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;            }</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;        }</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;        <span class="keywordflow">return</span> $filters;</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;    }</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;</div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_field_filters_from_post( $form ) {</div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;        $field_filters = array();</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;        $filter_fields = rgpost( <span class="charliteral">&#39;f&#39;</span> );</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;        <span class="keywordflow">if</span> ( is_array( $filter_fields ) ) {</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;            $filter_operators = rgpost( <span class="charliteral">&#39;o&#39;</span> );</div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;            $filter_values    = rgpost( <span class="charliteral">&#39;v&#39;</span> );</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;            <span class="keywordflow">for</span> ( <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> = 0; <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> &lt; count( $filter_fields ); <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> ++ ) {</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;                $field_filter = array();</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;                $key          = $filter_fields[ <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> ];</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;                <span class="keywordflow">if</span> ( <span class="stringliteral">&#39;entry_id&#39;</span> == $key ) {</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;                    $key = <span class="stringliteral">&#39;id&#39;</span>;</div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;                }</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;                $operator       = $filter_operators[ <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> ];</div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;                $val            = $filter_values[ <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> ];</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;                $strpos_row_key = strpos( $key, <span class="charliteral">&#39;|&#39;</span> );</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;                <span class="keywordflow">if</span> ( $strpos_row_key !== <span class="keyword">false</span> ) { <span class="comment">//multi-row likert</span></div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;                    $key_array = explode( <span class="charliteral">&#39;|&#39;</span>, $key );</div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;                    $key       = $key_array[0];</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;                    $val       = $key_array[1] . <span class="charliteral">&#39;:&#39;</span> . $val;</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;                }</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;                $field_filter[<span class="stringliteral">&#39;key&#39;</span>]      = $key;</div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;                $field = <a class="code" href="class_g_f_forms_model.html#a5861b1ac8048f1af93bf65fd5d8cac7e">GFFormsModel::get_field</a>( $form, $key );</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;                <span class="keywordflow">if</span> ( $field ) {</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;                    $input_type = <a class="code" href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">GFFormsModel::get_input_type</a>( $field );</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;                    <span class="keywordflow">if</span> ( $field-&gt;type == <span class="stringliteral">&#39;product&#39;</span> &amp;&amp; in_array( $input_type, array( <span class="stringliteral">&#39;radio&#39;</span>, <span class="stringliteral">&#39;select&#39;</span> ) ) ) {</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;                        $operator = <span class="stringliteral">&#39;contains&#39;</span>;</div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;                    }</div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;                }</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;</div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;                $field_filter[<span class="stringliteral">&#39;operator&#39;</span>] = $operator;</div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;                $field_filter[<span class="stringliteral">&#39;value&#39;</span>]    = $val;</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;                $field_filters[]          = $field_filter;</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;            }</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;        }</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;        $field_filters[<span class="stringliteral">&#39;mode&#39;</span>] = rgpost( <span class="stringliteral">&#39;mode&#39;</span> );</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;        <span class="keywordflow">return</span> $field_filters;</div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;    }</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> has_multifile_fileupload_field( $form ) {</div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;        $fileupload_fields = <a class="code" href="class_g_f_a_p_i.html#a0dda8aeec765f8fabc1d0542d1ea7879">GFAPI::get_fields_by_type</a>( $form, array( <span class="stringliteral">&#39;fileupload&#39;</span>, <span class="stringliteral">&#39;post_custom_field&#39;</span> ) );</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;        <span class="keywordflow">if</span> ( is_array( $fileupload_fields ) ) {</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;            <span class="keywordflow">foreach</span> ( $fileupload_fields as $field ) {</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;                <span class="keywordflow">if</span> ( $field-&gt;multipleFiles ) {</div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;                }</div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;            }</div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;        }</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;    }</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;</div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> localize_gform_gravityforms_multifile() {</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;        <a class="code" href="functions_8wp-scripts_8php.html#afd42679e2d031e3a1c3e0c8b6a546e6a">wp_localize_script</a>(</div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;            <span class="stringliteral">&#39;gform_gravityforms&#39;</span>, <span class="stringliteral">&#39;gform_gravityforms&#39;</span>, array(</div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;                <span class="stringliteral">&#39;strings&#39;</span> =&gt; array(</div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;                    <span class="stringliteral">&#39;invalid_file_extension&#39;</span> =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;This type of file is not allowed. Must be one of the following: &#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;                    <span class="stringliteral">&#39;delete_file&#39;</span>            =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Delete this file&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;                    <span class="stringliteral">&#39;in_progress&#39;</span>            =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;in progress&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;                    <span class="stringliteral">&#39;file_exceeds_limit&#39;</span>     =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;File exceeds size limit&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;                    <span class="stringliteral">&#39;illegal_extension&#39;</span>      =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;This type of file is not allowed.&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;                    <span class="stringliteral">&#39;max_reached&#39;</span>            =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Maximum number of files reached&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;                    <span class="stringliteral">&#39;unknown_error&#39;</span>          =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;There was a problem while saving the file on the server&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;                    <span class="stringliteral">&#39;currently_uploading&#39;</span>    =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Please wait for the uploading to complete&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;                    <span class="stringliteral">&#39;cancel&#39;</span>                 =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Cancel&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;                    <span class="stringliteral">&#39;cancel_upload&#39;</span>          =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Cancel this upload&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> ),</div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;                    <span class="stringliteral">&#39;cancelled&#39;</span>              =&gt; <a class="code" href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a>( <span class="stringliteral">&#39;Cancelled&#39;</span> , <span class="stringliteral">&#39;gravityforms&#39;</span> )</div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;                ),</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;                <span class="stringliteral">&#39;vars&#39;</span>    =&gt; array(</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;                    <span class="stringliteral">&#39;images_url&#39;</span> =&gt; GFCommon::get_base_url() . <span class="stringliteral">&#39;/images&#39;</span></div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;                )</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;            )</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;        );</div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;    }</div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> send_resume_link( <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a>, $subject, $email, $embed_url, $resume_token ) {</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;        <a class="code" href="wp-admin_2revision_8php.html#a0bb7e2b3d541598cc9c9e3b11bee859c">$from</a>      = <a class="code" href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a>( <span class="stringliteral">&#39;admin_email&#39;</span> );</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;        $from_name = <a class="code" href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a>( <span class="stringliteral">&#39;name&#39;</span> );</div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;        $message_format = <span class="stringliteral">&#39;html&#39;</span>;</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;        $resume_url  = <a class="code" href="wordpress_2wp-includes_2functions_8php.html#a6e348722923afe18808c59773964c162">add_query_arg</a>( array( <span class="stringliteral">&#39;gf_token&#39;</span> =&gt; $resume_token ), $embed_url );</div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;        $resume_url = <a class="code" href="twentyfifteen_2content-link_8php.html#a4a6fb8865e1ae52faa29662b4087e629">esc_url</a>( $resume_url );</div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;        $resume_link = <span class="stringliteral">&quot;&lt;a href=&#39;{$resume_url}&#39;&gt;{$resume_url}&lt;/a&gt;&quot;</span>;</div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;        <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a> .= $resume_link;</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;        self::send_email( <a class="code" href="wp-admin_2revision_8php.html#a0bb7e2b3d541598cc9c9e3b11bee859c">$from</a>, $email, <span class="stringliteral">&#39;&#39;</span>, <a class="code" href="wp-admin_2revision_8php.html#a0bb7e2b3d541598cc9c9e3b11bee859c">$from</a>, $subject, <a class="code" href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a>, $from_name, $message_format );</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;    }</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> safe_strlen( $string ) {</div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;        <span class="keywordflow">if</span> ( is_array( $string ) ) {</div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;        }</div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;        <span class="keywordflow">if</span> ( function_exists( <span class="stringliteral">&#39;mb_strlen&#39;</span> ) ) {</div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;            <span class="keywordflow">return</span> mb_strlen( $string );</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;            <span class="keywordflow">return</span> strlen( $string );</div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;        }</div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;</div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;    }</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> safe_substr( $string, $start, $length = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;</div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;        <span class="keywordflow">if</span> ( is_array( $string ) ) {</div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;        }</div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;</div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;        <span class="keywordflow">if</span> ( function_exists( <span class="stringliteral">&#39;mb_substr&#39;</span> ) ) {</div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;            <span class="keywordflow">return</span> mb_substr( $string, $start, $length );</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;            <span class="keywordflow">return</span> substr( $string, $start, $length );</div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;        }</div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;    }</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;<span class="comment">     * @param string $string</span></div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;<span class="comment">     * @return string</span></div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> safe_strtoupper( $string ) {</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;        <span class="keywordflow">if</span> ( function_exists( <span class="stringliteral">&#39;mb_strtoupper&#39;</span> ) ) {</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;            <span class="keywordflow">return</span> mb_strtoupper( $string );</div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;            <span class="keywordflow">return</span> strtoupper( $string );</div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;        }</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;    }</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;<span class="comment">     * Trims a string or an array recursively.</span></div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;<span class="comment">     * @param array|string $array</span></div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;<span class="comment">     * @return array|string</span></div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> trim_deep( $array ){</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;        <span class="keywordflow">if</span> ( ! is_array( $array ) ) {</div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;            <span class="keywordflow">return</span> trim( $array );</div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;        }</div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;        <span class="keywordflow">return</span> array_map( array( <span class="stringliteral">&#39;GFCommon&#39;</span>, <span class="stringliteral">&#39;trim_deep&#39;</span> ), $array );</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;    }</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;<span class="comment">     * Reliably compare floats.</span></div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;<span class="comment">     * @param  float  $float1</span></div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;<span class="comment">     * @param  float  $float2</span></div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;<span class="comment">     * @param  string $operator Supports: &#39;&lt;&#39;, &#39;&lt;=&#39;, &#39;&gt;&#39;, &#39;&gt;=&#39;, &#39;==&#39;, &#39;=&#39;, &#39;!=&#39;</span></div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;<span class="comment">     * @return bool</span></div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> compare_floats( $float1, $float2, $operator ) {</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;        $epsilon    = 0.00001;</div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;        $is_equal   = abs( floatval( $float1 ) - floatval( $float2 ) ) &lt; $epsilon;</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;        $is_greater = floatval( $float1 ) &gt; floatval( $float2 );</div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;        $is_less    = floatval( $float1 ) &lt; floatval( $float2 );</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;        <span class="keywordflow">switch</span> ( $operator ) {</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;&lt;&#39;</span>:</div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;                <span class="keywordflow">return</span> $is_less;</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;&lt;=&#39;</span>:</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;                <span class="keywordflow">return</span> $is_less || $is_equal;</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;&gt;&#39;</span> :</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;                <span class="keywordflow">return</span> $is_greater;</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;&gt;=&#39;</span>:</div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;                <span class="keywordflow">return</span> $is_greater || $is_equal;</div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;==&#39;</span>:</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;=&#39;</span>:</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;                <span class="keywordflow">return</span> $is_equal;</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&#39;!=&#39;</span>:</div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;                <span class="keywordflow">return</span> ! $is_equal;</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;        }</div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;    }</div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> encrypt( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> ) {</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;        $use_mcrypt = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>(<span class="stringliteral">&#39;gform_use_mcrypt&#39;</span>, function_exists( <span class="stringliteral">&#39;mcrypt_encrypt&#39;</span> ) );</div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;        <span class="keywordflow">if</span> ( $use_mcrypt ){</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;            $iv_size = mcrypt_get_iv_size( MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB );</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;            $key = substr( md5( wp_salt( <span class="stringliteral">&#39;nonce&#39;</span> ) ), 0, $iv_size );</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;            $encrypted_value = trim( base64_encode( mcrypt_encrypt( MCRYPT_RIJNDAEL_256, $key, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, MCRYPT_MODE_ECB, mcrypt_create_iv( $iv_size, MCRYPT_RAND ) ) ) );</div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;        }</div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;        <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;            $encrypted_value = EncryptDB::encrypt( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, wp_salt( <span class="stringliteral">&#39;nonce&#39;</span> ) );</div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;</div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;            <span class="comment">//$encrypted_value = base64_encode( $wpdb-&gt;get_var( $wpdb-&gt;prepare(&#39;SELECT AES_ENCRYPT(%s, %s) AS data&#39;, $text, wp_salt( &#39;nonce&#39; ) ) ) );</span></div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;        }</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;        <span class="keywordflow">return</span> $encrypted_value;</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;    }</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> decrypt( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> ) {</div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;        $use_mcrypt = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>(<span class="stringliteral">&#39;gform_use_mcrypt&#39;</span>, function_exists( <span class="stringliteral">&#39;mcrypt_decrypt&#39;</span> ) );</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;</div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;        <span class="keywordflow">if</span> ( $use_mcrypt ){</div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;            $iv_size = mcrypt_get_iv_size( MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB );</div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;            $key = substr( md5( wp_salt( <span class="stringliteral">&#39;nonce&#39;</span> ) ), 0, $iv_size );</div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;</div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;            $decrypted_value = trim( mcrypt_decrypt( MCRYPT_RIJNDAEL_256, $key, base64_decode( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> ), MCRYPT_MODE_ECB, mcrypt_create_iv( $iv_size, MCRYPT_RAND ) ) );</div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;        }</div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;        <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;            $decrypted_value = EncryptDB::decrypt( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, wp_salt( <span class="stringliteral">&#39;nonce&#39;</span> ) );</div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;        }</div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;        <span class="keywordflow">return</span> $decrypted_value;</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;    }</div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> esc_like( $value ) {</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;        global <a class="code" href="schema_8php.html#aaac3ddf81d405fac59e1dceeca05b0a7">$wpdb</a>;</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;        <span class="keywordflow">if</span>( is_callable( array( $wpdb, <span class="stringliteral">&#39;esc_like&#39;</span> ) ) ) {</div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;            $value = $wpdb-&gt;esc_like( $value );</div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;            $value = <a class="code" href="wp-includes_2deprecated_8php.html#ae6dd2fda749296bff9887b354def70b9">like_escape</a>( $value );</div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;        }</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;</div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>;</div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;    }</div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_form_editor(){</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;        $is_form_editor = <a class="code" href="class_g_f_forms.html#a7bb16019cbf1e2111ff04c4e064d5348">GFForms::get_page</a>() == <span class="stringliteral">&#39;form_editor&#39;</span> || ( defined( <span class="stringliteral">&#39;DOING_AJAX&#39;</span> ) &amp;&amp; <a class="code" href="admin-ajax_8php.html#a0597550ce673ad79c507bfa03dcf0ef4">DOING_AJAX</a> &amp;&amp; in_array( rgpost( <span class="stringliteral">&#39;action&#39;</span> ), array( <span class="stringliteral">&#39;rg_add_field&#39;</span>, <span class="stringliteral">&#39;rg_refresh_field_preview&#39;</span>, <span class="stringliteral">&#39;rg_duplicate_field&#39;</span>, <span class="stringliteral">&#39;rg_delete_field&#39;</span>, <span class="stringliteral">&#39;rg_change_input_type&#39;</span> ) ) );</div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_is_form_editor&#39;</span>, $is_form_editor );</div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;    }</div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_entry_detail(){</div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;        $is_entry_detail = <a class="code" href="class_g_f_forms.html#a7bb16019cbf1e2111ff04c4e064d5348">GFForms::get_page</a>() == <span class="stringliteral">&#39;entry_detail_edit&#39;</span> || <a class="code" href="class_g_f_forms.html#a7bb16019cbf1e2111ff04c4e064d5348">GFForms::get_page</a>() == <span class="stringliteral">&#39;entry_detail&#39;</span> ;</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_is_entry_detail&#39;</span>, $is_entry_detail );</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;    }</div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;</div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_entry_detail_view(){</div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;        $is_entry_detail_view = <a class="code" href="class_g_f_forms.html#a7bb16019cbf1e2111ff04c4e064d5348">GFForms::get_page</a>() == <span class="stringliteral">&#39;entry_detail&#39;</span> ;</div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_is_entry_detail_view&#39;</span>, $is_entry_detail_view );</div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;    }</div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;</div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> is_entry_detail_edit(){</div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;        $is_entry_detail_edit = <a class="code" href="class_g_f_forms.html#a7bb16019cbf1e2111ff04c4e064d5348">GFForms::get_page</a>() == <span class="stringliteral">&#39;entry_detail_edit&#39;</span>;</div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_is_entry_detail_edit&#39;</span>, $is_entry_detail_edit );</div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;    }</div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;</div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> has_merge_tag( $string ) {</div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;        <span class="keywordflow">return</span> preg_match( <span class="stringliteral">&#39;/{.+}/&#39;</span>, $string );</div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;    }</div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;</div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_upload_page_slug() {</div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;        $slug = <a class="code" href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a>( <span class="stringliteral">&#39;gform_upload_page_slug&#39;</span> );</div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;        <span class="keywordflow">if</span> ( empty( $slug ) ) {</div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;            $slug = substr( str_shuffle( wp_hash( microtime() ) ), 0, 15 );</div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;            <a class="code" href="option_8php.html#a21f59332d7b293dca17bccd56c8c00eb">update_option</a>( <span class="stringliteral">&#39;gform_upload_page_slug&#39;</span>, $slug );</div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;        }</div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;        <span class="keywordflow">return</span> $slug;</div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;    }</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;<span class="comment">     * Whitelists a value. Returns the value or the first value in the array.</span></div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;<span class="comment">     * @param $value</span></div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;<span class="comment">     * @param $whitelist</span></div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;<span class="comment">     * @return mixed</span></div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> whitelist( $value, $whitelist ) {</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;        <span class="keywordflow">if</span> ( ! in_array( $value, $whitelist ) ) {</div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;            $value = $whitelist[0];</div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;        }</div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>;</div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;    }</div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;<span class="comment">     * Forces an integer into a range of integers. Returns the value or the minimum if it&#39;s outside the range.</span></div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;<span class="comment">     * @param $value</span></div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;<span class="comment">     * @param $min</span></div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;<span class="comment">     * @param $max</span></div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;<span class="comment">     * @return int</span></div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> int_range( $value, <a class="code" href="preview_8php.html#a8fb7cd76a5f6fe9b500cb9eebcdc4259">$min</a>, $max ) {</div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;        $value = (int) $value;</div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;        <a class="code" href="preview_8php.html#a8fb7cd76a5f6fe9b500cb9eebcdc4259">$min</a>   = (int) <a class="code" href="preview_8php.html#a8fb7cd76a5f6fe9b500cb9eebcdc4259">$min</a>;</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;        $max   = (int) $max;</div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;</div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;        <span class="keywordflow">return</span> filter_var( $value, FILTER_VALIDATE_INT, array(</div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;            <span class="stringliteral">&#39;min_range&#39;</span> =&gt; <a class="code" href="preview_8php.html#a8fb7cd76a5f6fe9b500cb9eebcdc4259">$min</a>,</div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;            <span class="stringliteral">&#39;max_range&#39;</span> =&gt; $max</div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;        ) ) ? $value : <a class="code" href="preview_8php.html#a8fb7cd76a5f6fe9b500cb9eebcdc4259">$min</a>;</div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;    }</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;</div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> load_gf_text_domain( $domain ){</div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;        <span class="comment">// Initializing translations. Translation files in the WP_LANG_DIR folder have a higher priority.</span></div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;        global $l10n;</div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;        <a class="code" href="about_8php.html#a3b392f5a691b803e728f1fb42b35f6e1">$locale</a> = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;plugin_locale&#39;</span>, <a class="code" href="l10n_8php.html#a6ec9fd4baced85768ba16386e9e1b339">get_locale</a>(), <span class="stringliteral">&#39;gravityforms&#39;</span> );</div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;        <span class="keywordflow">if</span> ( ! isset( $l10n[$domain] ) ){</div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;            <a class="code" href="l10n_8php.html#abb54e3355273e9e847b4f1ec283b578e">load_textdomain</a>( <span class="stringliteral">&#39;gravityforms&#39;</span>, WP_LANG_DIR . <span class="stringliteral">&#39;/gravityforms/gravityforms-&#39;</span> . <a class="code" href="about_8php.html#a3b392f5a691b803e728f1fb42b35f6e1">$locale</a> . <span class="stringliteral">&#39;.mo&#39;</span> );</div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;            <a class="code" href="l10n_8php.html#ac954f8ae2c4525a1ff294a8b2cba638b">load_plugin_textdomain</a>( <span class="stringliteral">&#39;gravityforms&#39;</span>, <span class="keyword">false</span>, <span class="stringliteral">&#39;/gravityforms/languages&#39;</span> );</div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;        }</div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;    }</div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;</div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> replace_field_variable( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $form, $lead, $url_encode, $esc_html, $nl2br, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a>, $input_id, $match, $esc_attr = <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;        $field = <a class="code" href="class_g_f_forms_model.html#a5861b1ac8048f1af93bf65fd5d8cac7e">RGFormsModel::get_field</a>( $form, $input_id );</div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;</div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;        <span class="keywordflow">if</span> ( ! $field instanceof GF_Field ) {</div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;            $field = <a class="code" href="class_g_f___fields.html#a58cc2eb187fc7d1daaecd59235d52a5d">GF_Fields::create</a>( $field );</div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;        }</div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;</div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;        $value     = <a class="code" href="class_g_f_forms_model.html#abf73ae376358a1b72c4603c7b8b401ba">RGFormsModel::get_lead_field_value</a>( $lead, $field );</div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;        $raw_value = <a class="code" href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a>;</div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;</div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;        <span class="keywordflow">if</span> ( is_array( $value ) ) {</div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;            $value = rgar( $value, $input_id );</div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;        }</div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;</div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;        $value = self::format_variable_value( $value, $url_encode, $esc_html, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a>, $nl2br );</div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;</div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;        <span class="comment">// modifier will be at index 4 unless used in a conditional shortcode in which case it would be at index 5</span></div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;        <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a>        = $match[0][0] == <span class="charliteral">&#39;{&#39;</span> ? 4 : 5;</div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;        $modifier = strtolower( rgar( $match, <a class="code" href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> ) );</div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;</div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;        $value = $field-&gt;get_value_merge_tag( $value, $input_id, $lead, $form, $modifier, $raw_value, $url_encode, $esc_html, <a class="code" href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a>, $nl2br );</div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;</div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;        <span class="keywordflow">if</span> ( $esc_attr ) {</div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;            $value = <a class="code" href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a>( $value );</div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;        }</div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;</div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;        <span class="keywordflow">if</span> ( $modifier == <span class="stringliteral">&#39;label&#39;</span> ) {</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;            $value = empty( $value ) ? <span class="stringliteral">&#39;&#39;</span> : $field-&gt;label;</div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( $modifier == <span class="stringliteral">&#39;qty&#39;</span> &amp;&amp; $field-&gt;type == <span class="stringliteral">&#39;product&#39;</span> ) {</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;            <span class="comment">//getting quantity associated with product field</span></div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;            $products = self::get_product_fields( $form, $lead, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;            $value    = 0;</div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;            <span class="keywordflow">foreach</span> ( $products[<span class="stringliteral">&#39;products&#39;</span>] as $product_id =&gt; $product ) {</div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;                <span class="keywordflow">if</span> ( $product_id == $field-&gt;id ) {</div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;                    $value = $product[<span class="stringliteral">&#39;quantity&#39;</span>];</div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;                }</div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;            }</div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;        }</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;</div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;        <span class="comment">//Encoding left curly bracket so that merge tags entered in the front end are displayed as is and not parsed</span></div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;        $value = self::encode_merge_tag( $value );</div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;</div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;        <span class="comment">//filter can change merge tag value</span></div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;        $value = <a class="code" href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a>( <span class="stringliteral">&#39;gform_merge_tag_filter&#39;</span>, $value, $input_id, $modifier, $field, $raw_value );</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;        <span class="keywordflow">if</span> ( $value === <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;            $value = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;        }</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;</div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;        <span class="keywordflow">if</span> ( $match[0][0] != <span class="charliteral">&#39;{&#39;</span> ) {</div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;            <span class="comment">// replace the merge tag in the conditional shortcode merge_tag attr</span></div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;            $value = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( $match[1], $value, $match[0] );</div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;        }</div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;</div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;        <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> = <a class="code" href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a>( $match[0], $value, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> );</div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;</div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>;</div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;    }</div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;}</div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;</div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;<span class="keyword">class </span>GFCategoryWalker <span class="keyword">extends</span> <a class="code" href="class_walker.html">Walker</a> {<span class="comment"></span></div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;<span class="comment">     * @see   Walker::$tree_type</span></div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;<span class="comment">     * @since 2.1.0</span></div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;<span class="comment">     * @var string</span></div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;    var $tree_type = <span class="stringliteral">&#39;category&#39;</span>;</div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;<span class="comment">     * @see   Walker::$db_fields</span></div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;<span class="comment">     * @since 2.1.0</span></div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;<span class="comment">     * @todo  Decouple this</span></div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;<span class="comment">     * @var array</span></div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;    var $db_fields = array( <span class="stringliteral">&#39;parent&#39;</span> =&gt; <span class="stringliteral">&#39;parent&#39;</span>, <span class="stringliteral">&#39;id&#39;</span> =&gt; <span class="stringliteral">&#39;term_id&#39;</span> );</div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;<span class="comment">    /**</span></div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;<span class="comment">     * @see   Walker::start_el()</span></div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;<span class="comment">     * @since 2.1.0</span></div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;<span class="comment">     * @param string $output   Passed by reference. Used to append additional content.</span></div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;<span class="comment">     * @param object $object Category data object.</span></div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;<span class="comment">     * @param int    $depth    Depth of category. Used for padding.</span></div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;<span class="comment">     * @param array  $args     Uses &#39;selected&#39; and &#39;show_count&#39; keys, if they exist.</span></div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;<span class="comment">     * @param int    $current_object_id</span></div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;    <span class="keyword">function</span> start_el( &amp;<a class="code" href="edit__link_8php.html#a73004ce9cd673c1bfafd1dc351134797">$output</a>, $object, $depth = 0, $args = array(), $current_object_id = 0 ) {</div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;        <span class="comment">//$pad = str_repeat(&#39;&amp;nbsp;&#39;, $depth * 3);</span></div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;        $pad = str_repeat( <span class="stringliteral">&#39;&amp;#9472;&#39;</span>, $depth );</div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;        <span class="keywordflow">if</span> ( ! empty( $pad ) ) {</div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;            $pad .= <span class="stringliteral">&#39;&amp;nbsp;&#39;</span>;</div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;        }</div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;        $object-&gt;name = <span class="stringliteral">&quot;{$pad}{$object-&gt;name}&quot;</span>;</div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;        <a class="code" href="edit__link_8php.html#a73004ce9cd673c1bfafd1dc351134797">$output</a>[]     = $object;</div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;    }</div>
<div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;}</div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;<span class="comment"> * Notes:</span></div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;<span class="comment"> * 1. The WordPress Transients API does not support boolean</span></div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;<span class="comment"> * values so boolean values should be converted to integers</span></div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;<span class="comment"> * or arrays before setting the values as persistent.</span></div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;<span class="comment"> * 2. The transients API only deletes the transient from the database</span></div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;<span class="comment"> * when the transient is accessed after it has expired. WordPress doesn&#39;t</span></div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;<span class="comment"> * do any garbage collection of transients.</span></div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;<span class="keyword">class </span>GFCache {</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> $_transient_prefix = <span class="stringliteral">&#39;GFCache_&#39;</span>;</div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> $_cache = array();</div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;</div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <span class="keyword">get</span>( $key, &amp;$found = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>, $is_persistent=<a class="code" href="admin_8php.html#acfc73f199060a91876019ff352baa5c2">true</a> ) {</div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;        global <a class="code" href="wp-settings_8php.html#a52044fb33b3842bc3d4655d3bd64415e">$blog_id</a>;</div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="load_8php.html#a72e5386fcd7a5ce7526d208d0b03a0af">is_multisite</a>() ) {</div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;            $key = $blog_id . <span class="charliteral">&#39;:&#39;</span> . $key;</div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;        }</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;</div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;        <span class="keywordflow">if</span> ( isset( self::$_cache[ $key ] ) ) {</div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;            $found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;            $data  = rgar( self::$_cache[ $key ], <span class="stringliteral">&#39;data&#39;</span> );</div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;</div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;            <span class="keywordflow">return</span> $data;</div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;        }</div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;</div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;        <span class="comment">//If set to not persistent, do not check transient for performance reasons</span></div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;        <span class="keywordflow">if</span> (! $is_persistent ){</div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;            $found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;        }</div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;</div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;        $data = <a class="code" href="option_8php.html#ad76e544fa26ccb7e20668c75cfdcb012">self::get_transient</a>( $key );</div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;        <span class="keywordflow">if</span> ( <span class="keyword">false</span> === ( $data ) ) {</div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;            $found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;</div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;            self::$_cache[ $key ] = array( <span class="stringliteral">&#39;data&#39;</span> =&gt; $data, <span class="stringliteral">&#39;is_persistent&#39;</span> =&gt; <span class="keyword">true</span> );</div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;            $found              = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;</div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;            <span class="keywordflow">return</span> $data;</div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;        }</div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;</div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;    }</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="namespaceset.html">set</a>( $key, $data, $is_persistent = <span class="keyword">false</span>, $expiration = 0 ) {</div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;        global <a class="code" href="wp-settings_8php.html#a52044fb33b3842bc3d4655d3bd64415e">$blog_id</a>;</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;        $success = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;</div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="load_8php.html#a72e5386fcd7a5ce7526d208d0b03a0af">is_multisite</a>() ) {</div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;            $key = $blog_id . <span class="charliteral">&#39;:&#39;</span> . $key;</div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;        }</div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;</div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;        <span class="keywordflow">if</span> ( $is_persistent ) {</div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;            $success = <a class="code" href="option_8php.html#af7903f5568120880e79afc93d75c0d6e">self::set_transient</a>( $key, $data, $expiration );</div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;        }</div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;</div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;        self::$_cache[ $key ] = array( <span class="stringliteral">&#39;data&#39;</span> =&gt; $data, <span class="stringliteral">&#39;is_persistent&#39;</span> =&gt; $is_persistent );</div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;</div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;        <span class="keywordflow">return</span> $success;</div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;    }</div>
<div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;</div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <span class="keyword">delete</span>( $key ) {</div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;        global <a class="code" href="wp-settings_8php.html#a52044fb33b3842bc3d4655d3bd64415e">$blog_id</a>;</div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;        $success = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="load_8php.html#a72e5386fcd7a5ce7526d208d0b03a0af">is_multisite</a>() ) {</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;            $key = $blog_id . <span class="charliteral">&#39;:&#39;</span> . $key;</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;        }</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;</div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;        <span class="keywordflow">if</span> ( isset( self::$_cache[ $key ] ) ) {</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;            <span class="keywordflow">if</span> ( self::$_cache[ $key ][<span class="stringliteral">&#39;is_persistent&#39;</span>] ) {</div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;                $success = <a class="code" href="option_8php.html#a5f714ed7fb1ec27740c1e8a8e441b178">self::delete_transient</a>( $key );</div>
<div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;            }</div>
<div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;</div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;            unset( self::$_cache[ $key ] );</div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;            $success = <a class="code" href="option_8php.html#a5f714ed7fb1ec27740c1e8a8e441b178">self::delete_transient</a>( $key );</div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;        }</div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;</div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;        <span class="keywordflow">return</span> $success;</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;    }</div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;</div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> flush( $flush_persistent = <span class="keyword">false</span> ) {</div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;        global <a class="code" href="schema_8php.html#aaac3ddf81d405fac59e1dceeca05b0a7">$wpdb</a>;</div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;</div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;        self::$_cache = array();</div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;</div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;        <span class="keywordflow">if</span> ( <span class="keyword">false</span> === $flush_persistent ) {</div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;        }</div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;</div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="load_8php.html#a72e5386fcd7a5ce7526d208d0b03a0af">is_multisite</a>() ) {</div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;            $sql = <span class="stringliteral">&quot;</span></div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;<span class="stringliteral">                 DELETE FROM $wpdb-&gt;sitemeta</span></div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;<span class="stringliteral">                 WHERE meta_key LIKE &#39;_site_transient_timeout_GFCache_%&#39; OR</span></div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;<span class="stringliteral">                 meta_key LIKE &#39;_site_transient_GFCache_%&#39;</span></div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;<span class="stringliteral">                &quot;</span>;</div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;            $sql = <span class="stringliteral">&quot;</span></div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;<span class="stringliteral">                 DELETE FROM $wpdb-&gt;options</span></div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;<span class="stringliteral">                 WHERE option_name LIKE &#39;_transient_timeout_GFCache_%&#39; OR</span></div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;<span class="stringliteral">                 option_name LIKE &#39;_transient_GFCache_%&#39;</span></div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;<span class="stringliteral">                &quot;</span>;</div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;</div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;        }</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;        $rows_deleted = $wpdb-&gt;query( $sql );</div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;</div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;        $success = $rows_deleted !== <span class="keyword">false</span> ? <span class="keyword">true</span> : <span class="keyword">false</span>;</div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;</div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;        <span class="keywordflow">return</span> $success;</div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;    }</div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;</div>
<div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="option_8php.html#a5f714ed7fb1ec27740c1e8a8e441b178">delete_transient</a>( $key ) {</div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;        $key = self::$_transient_prefix . wp_hash( $key );</div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="load_8php.html#a72e5386fcd7a5ce7526d208d0b03a0af">is_multisite</a>() ) {</div>
<div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;            $success = <a class="code" href="option_8php.html#af5c71b5d253b6c299cadbf192a2fbc58">delete_site_transient</a>( $key );</div>
<div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;            $success = <a class="code" href="option_8php.html#a5f714ed7fb1ec27740c1e8a8e441b178">delete_transient</a>( $key );</div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;        }</div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;</div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;        <span class="keywordflow">return</span> $success;</div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;    }</div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;</div>
<div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="option_8php.html#af7903f5568120880e79afc93d75c0d6e">set_transient</a>( $key, $data, $expiration ) {</div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;        $key = self::$_transient_prefix . wp_hash( $key );</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="load_8php.html#a72e5386fcd7a5ce7526d208d0b03a0af">is_multisite</a>() ) {</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;            $success = <a class="code" href="option_8php.html#abb01837a781b0f4f98d06284203b8e81">set_site_transient</a>( $key, $data, $expiration );</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;            $success = <a class="code" href="option_8php.html#af7903f5568120880e79afc93d75c0d6e">set_transient</a>( $key, $data, $expiration );</div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;        }</div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;        <span class="keywordflow">return</span> $success;</div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;    }</div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="option_8php.html#ad76e544fa26ccb7e20668c75cfdcb012">get_transient</a>( $key ) {</div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;        $key = self::$_transient_prefix . wp_hash( $key );</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="load_8php.html#a72e5386fcd7a5ce7526d208d0b03a0af">is_multisite</a>() ) {</div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;            $data = <a class="code" href="option_8php.html#ababa2424b834614908fbd0c9e97783f6">get_site_transient</a>( $key );</div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;            $data = <a class="code" href="option_8php.html#ad76e544fa26ccb7e20668c75cfdcb012">get_transient</a>( $key );</div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;        }</div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;</div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;        <span class="keywordflow">return</span> $data;</div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;    }</div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;</div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;}</div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;</div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;<span class="keyword">class </span>EncryptDB <span class="keyword">extends</span> <a class="code" href="classwpdb.html">wpdb</a>{</div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> $_instance = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>;</div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;</div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> get_instance() {</div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;</div>
<div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;        <span class="keywordflow">if</span> ( self::$_instance == <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a> ) {</div>
<div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;            self::$_instance = <span class="keyword">new</span> EncryptDB( <a class="code" href="wp-config-sample_8php.html#a1d1d99f8e08f387d84fe9848f3357156">DB_USER</a>, <a class="code" href="wp-config-sample_8php.html#a4dca144fafcc7bd3f71cb5778afcdd13">DB_PASSWORD</a>, <a class="code" href="wp-config-sample_8php.html#ab5db0d3504f917f268614c50b02c53e2">DB_NAME</a>, <a class="code" href="wp-config-sample_8php.html#a293363d7988627f671958e2d908c202a">DB_HOST</a> );</div>
<div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;        }</div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;</div>
<div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;        <span class="keywordflow">return</span> self::$_instance;</div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;    }</div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;</div>
<div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> encrypt( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $key ){</div>
<div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;        $db = self::get_instance();</div>
<div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;</div>
<div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;        $encrypted = base64_encode( $db-&gt;get_var( $db-&gt;prepare(<span class="stringliteral">&#39;SELECT AES_ENCRYPT(%s, %s) AS data&#39;</span>, <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $key ) ) );</div>
<div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;</div>
<div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;        <span class="keywordflow">return</span> $encrypted;</div>
<div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;    }</div>
<div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;</div>
<div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> decrypt( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a>, $key ){</div>
<div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;</div>
<div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;        $db = self::get_instance();</div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;</div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;        $decrypted = $db-&gt;get_var( $db-&gt;prepare(<span class="stringliteral">&#39;SELECT AES_DECRYPT(%s, %s) AS data&#39;</span>, base64_decode( <a class="code" href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a> ), wp_salt( <span class="stringliteral">&#39;nonce&#39;</span> ) ) );</div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;</div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;        <span class="keywordflow">return</span> $decrypted;</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;    }</div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;</div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> get_var( $query = <a class="code" href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a>, $x = 0, $y = 0 ){</div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;</div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;        $this-&gt;check_current_query = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;</div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;        <span class="keywordflow">return</span> parent::get_var( $query );</div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;    }</div>
<div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;}</div>
<div class="ttc" id="formatting_8php_html_a0fe22f477c9eafcf9d3805461f249393"><div class="ttname"><a href="formatting_8php.html#a0fe22f477c9eafcf9d3805461f249393">esc_js</a></div><div class="ttdeci">esc_js($text)</div><div class="ttdoc">Escape single quotes, htmlspecialchar " < > &, and fix line endings. </div><div class="ttdef"><b>Definition:</b> <a href="formatting_8php_source.html#l03500">formatting.php:3500</a></div></div>
<div class="ttc" id="wp-settings_8php_html_a52044fb33b3842bc3d4655d3bd64415e"><div class="ttname"><a href="wp-settings_8php.html#a52044fb33b3842bc3d4655d3bd64415e">$blog_id</a></div><div class="ttdeci">global $blog_id</div><div class="ttdoc">If not already configured, $blog_id will default to 1 in a single site configuration. </div><div class="ttdef"><b>Definition:</b> <a href="wp-settings_8php_source.html#l00030">wp-settings.php:30</a></div></div>
<div class="ttc" id="post__image_8php_html_acf215f34a917d014776ce684a9ee8909"><div class="ttname"><a href="post__image_8php.html#acf215f34a917d014776ce684a9ee8909">$url</a></div><div class="ttdeci">$url</div><div class="ttdef"><b>Definition:</b> <a href="post__image_8php_source.html#l00025">post_image.php:25</a></div></div>
<div class="ttc" id="post__image_8php_html_aac6146b4cdec66c94263ddb55afd5946"><div class="ttname"><a href="post__image_8php.html#aac6146b4cdec66c94263ddb55afd5946">$image</a></div><div class="ttdeci">$image</div><div class="ttdef"><b>Definition:</b> <a href="post__image_8php_source.html#l00099">post_image.php:99</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_af6ccb19a7ab6c691b13c8083ebcc1f50"><div class="ttname"><a href="class_g_f_forms_model.html#af6ccb19a7ab6c691b13c8083ebcc1f50">GFFormsModel\get_upload_path</a></div><div class="ttdeci">static get_upload_path($form_id)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l03197">forms_model.php:3197</a></div></div>
<div class="ttc" id="shortcodes_8php_html_aaa19827abd3976c4b6a24136c4c6380f"><div class="ttname"><a href="shortcodes_8php.html#aaa19827abd3976c4b6a24136c4c6380f">do_shortcode</a></div><div class="ttdeci">do_shortcode($content, $ignore_html=false)</div><div class="ttdoc">Search content for shortcodes and filter shortcodes through their hooks. </div><div class="ttdef"><b>Definition:</b> <a href="shortcodes_8php_source.html#l00202">shortcodes.php:202</a></div></div>
<div class="ttc" id="shortcodes_8php_html_aba55ec8783759bb5600f1f12b7f9ecc0"><div class="ttname"><a href="shortcodes_8php.html#aba55ec8783759bb5600f1f12b7f9ecc0">shortcode_atts</a></div><div class="ttdeci">shortcode_atts($pairs, $atts, $shortcode= '')</div><div class="ttdoc">Combine user attributes with known attributes and fill in defaults when needed. </div><div class="ttdef"><b>Definition:</b> <a href="shortcodes_8php_source.html#l00530">shortcodes.php:530</a></div></div>
<div class="ttc" id="vars_8php_html_a7d7976d2181693eee234a9554e574c97"><div class="ttname"><a href="vars_8php.html#a7d7976d2181693eee234a9554e574c97">$is_lynx</a></div><div class="ttdeci">global $is_lynx</div><div class="ttdef"><b>Definition:</b> <a href="vars_8php_source.html#l00018">vars.php:18</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_abf73ae376358a1b72c4603c7b8b401ba"><div class="ttname"><a href="class_g_f_forms_model.html#abf73ae376358a1b72c4603c7b8b401ba">GFFormsModel\get_lead_field_value</a></div><div class="ttdeci">static get_lead_field_value($lead, $field)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l03431">forms_model.php:3431</a></div></div>
<div class="ttc" id="user-edit_8php_html_a12f5443cc19cb33ae0292013c53a7b19"><div class="ttname"><a href="user-edit_8php.html#a12f5443cc19cb33ae0292013c53a7b19">$current_user</a></div><div class="ttdeci">$current_user</div><div class="ttdef"><b>Definition:</b> <a href="user-edit_8php_source.html#l00015">user-edit.php:15</a></div></div>
<div class="ttc" id="wp-config-sample_8php_html_a293363d7988627f671958e2d908c202a"><div class="ttname"><a href="wp-config-sample_8php.html#a293363d7988627f671958e2d908c202a">DB_HOST</a></div><div class="ttdeci">const DB_HOST</div><div class="ttdoc">MySQL hostname. </div><div class="ttdef"><b>Definition:</b> <a href="wp-config-sample_8php_source.html#l00032">wp-config-sample.php:32</a></div></div>
<div class="ttc" id="wp-includes_2plugin_8php_html_aed75045b0b4572e55462b37b063a77cc"><div class="ttname"><a href="wp-includes_2plugin_8php.html#aed75045b0b4572e55462b37b063a77cc">do_action</a></div><div class="ttdeci">do_action($tag, $arg= '')</div><div class="ttdoc">Execute functions hooked on a specific action hook. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2plugin_8php_source.html#l00482">wp-includes/plugin.php:482</a></div></div>
<div class="ttc" id="form__list_8php_html_a1659f0a629d408e0f849dbe4ee061e62"><div class="ttname"><a href="form__list_8php.html#a1659f0a629d408e0f849dbe4ee061e62">$dir</a></div><div class="ttdeci">$dir</div><div class="ttdef"><b>Definition:</b> <a href="form__list_8php_source.html#l00396">form_list.php:396</a></div></div>
<div class="ttc" id="data-source_8php_html_a8dcd469e6c336555e43c3003b0a0da54"><div class="ttname"><a href="data-source_8php.html#a8dcd469e6c336555e43c3003b0a0da54">$forms</a></div><div class="ttdeci">$forms</div><div class="ttdef"><b>Definition:</b> <a href="data-source_8php_source.html#l00017">data-source.php:17</a></div></div>
<div class="ttc" id="preview_8php_html_a21eed5208524a2f33323eabc88f8dcdd"><div class="ttname"><a href="preview_8php.html#a21eed5208524a2f33323eabc88f8dcdd">esc_html_e</a></div><div class="ttdeci">esc_html_e( 'Form Preview', 'gravityforms')?&gt;&lt;/title &gt;&lt; link rel</div><div class="ttdef"><b>Definition:</b> <a href="preview_8php_source.html#l00033">preview.php:33</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a0600cc5dd578b45b14c57637dc3a5bff"><div class="ttname"><a href="class_g_f_forms_model.html#a0600cc5dd578b45b14c57637dc3a5bff">GFFormsModel\choice_value_match</a></div><div class="ttdeci">static choice_value_match($field, $choice, $value)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l02554">forms_model.php:2554</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_afb54d041c3cbf8c7bff6d3c458ca8891"><div class="ttname"><a href="class_g_f_a_p_i.html#afb54d041c3cbf8c7bff6d3c458ca8891">GFAPI\send_notifications</a></div><div class="ttdeci">static send_notifications($form, $entry, $event= 'form_submission')</div><div class="ttdoc">Sends all active notifications for a form given an entry object and an event. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l01231">api.php:1231</a></div></div>
<div class="ttc" id="option_8php_html_af5c71b5d253b6c299cadbf192a2fbc58"><div class="ttname"><a href="option_8php.html#af5c71b5d253b6c299cadbf192a2fbc58">delete_site_transient</a></div><div class="ttdeci">delete_site_transient($transient)</div><div class="ttdoc">Delete a site transient. </div><div class="ttdef"><b>Definition:</b> <a href="option_8php_source.html#l01488">option.php:1488</a></div></div>
<div class="ttc" id="wp-cron_8php_html_af20635b6c08e03bfee9e3fc036fa80f3"><div class="ttname"><a href="wp-cron_8php.html#af20635b6c08e03bfee9e3fc036fa80f3">$keys</a></div><div class="ttdeci">$keys</div><div class="ttdef"><b>Definition:</b> <a href="wp-cron_8php_source.html#l00061">wp-cron.php:61</a></div></div>
<div class="ttc" id="query_8php_html_a41f8c5d8db4edc68807fc002cc312cca"><div class="ttname"><a href="query_8php.html#a41f8c5d8db4edc68807fc002cc312cca">is_preview</a></div><div class="ttdeci">is_preview()</div><div class="ttdoc">Is the query for a post or page preview? </div><div class="ttdef"><b>Definition:</b> <a href="query_8php_source.html#l00514">query.php:514</a></div></div>
<div class="ttc" id="vars_8php_html_abd9809ed3ac1bfe77f85089a3d6699ee"><div class="ttname"><a href="vars_8php.html#abd9809ed3ac1bfe77f85089a3d6699ee">$is_NS4</a></div><div class="ttdeci">global $is_NS4</div><div class="ttdef"><b>Definition:</b> <a href="vars_8php_source.html#l00018">vars.php:18</a></div></div>
<div class="ttc" id="wp-includes_2plugin_8php_html_aad14d1be64c7ecfdf35da5a2f3cf979a"><div class="ttname"><a href="wp-includes_2plugin_8php.html#aad14d1be64c7ecfdf35da5a2f3cf979a">has_filter</a></div><div class="ttdeci">has_filter($tag, $function_to_check=false)</div><div class="ttdoc">Check if any filter has been registered for a hook. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2plugin_8php_source.html#l00128">wp-includes/plugin.php:128</a></div></div>
<div class="ttc" id="gravityforms_8php_html_ad1b29ec2d54657ace1353d572eb3196a"><div class="ttname"><a href="gravityforms_8php.html#ad1b29ec2d54657ace1353d572eb3196a">RG_CURRENT_VIEW</a></div><div class="ttdeci">const RG_CURRENT_VIEW(!defined( 'IS_ADMIN'))</div><div class="ttdef"><b>Definition:</b> <a href="gravityforms_8php_source.html#l00069">gravityforms.php:69</a></div></div>
<div class="ttc" id="edit-form-comment_8php_html_a872d93ddbbb879ab5c0eb29261a520a4"><div class="ttname"><a href="edit-form-comment_8php.html#a872d93ddbbb879ab5c0eb29261a520a4">$referer</a></div><div class="ttdeci">$referer</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-comment_8php_source.html#l00190">edit-form-comment.php:190</a></div></div>
<div class="ttc" id="menu_8php_html_a83018d9153d17d91fbcf3bc10158d34f"><div class="ttname"><a href="menu_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a></div><div class="ttdeci">$i</div><div class="ttdef"><b>Definition:</b> <a href="menu_8php_source.html#l00053">menu.php:53</a></div></div>
<div class="ttc" id="admin-ajax_8php_html_a0597550ce673ad79c507bfa03dcf0ef4"><div class="ttname"><a href="admin-ajax_8php.html#a0597550ce673ad79c507bfa03dcf0ef4">DOING_AJAX</a></div><div class="ttdeci">const DOING_AJAX</div><div class="ttdoc">Executing AJAX process. </div><div class="ttdef"><b>Definition:</b> <a href="admin-ajax_8php_source.html#l00016">admin-ajax.php:16</a></div></div>
<div class="ttc" id="plugin-editor_8php_html_a4ab51386acb82cd0a0066eac2567b2bd"><div class="ttname"><a href="plugin-editor_8php.html#a4ab51386acb82cd0a0066eac2567b2bd">$plugins</a></div><div class="ttdeci">$plugins</div><div class="ttdef"><b>Definition:</b> <a href="plugin-editor_8php_source.html#l00025">plugin-editor.php:25</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a8aa723db710f9582b3742354d886c1a7"><div class="ttname"><a href="class_g_f_forms_model.html#a8aa723db710f9582b3742354d886c1a7">GFFormsModel\get_lead</a></div><div class="ttdeci">static get_lead($lead_id)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l03387">forms_model.php:3387</a></div></div>
<div class="ttc" id="preview_8php_html_a8fb7cd76a5f6fe9b500cb9eebcdc4259"><div class="ttname"><a href="preview_8php.html#a8fb7cd76a5f6fe9b500cb9eebcdc4259">$min</a></div><div class="ttdeci">if(!class_exists( 'RGForms')) if(!GFCommon::current_user_can_any(array( 'gravityforms_edit_forms', 'gravityforms_create_form', 'gravityforms_preview_forms'))) $min</div><div class="ttdef"><b>Definition:</b> <a href="preview_8php_source.html#l00024">preview.php:24</a></div></div>
<div class="ttc" id="option_8php_html_abb01837a781b0f4f98d06284203b8e81"><div class="ttname"><a href="option_8php.html#abb01837a781b0f4f98d06284203b8e81">set_site_transient</a></div><div class="ttdeci">set_site_transient($transient, $value, $expiration=0)</div><div class="ttdoc">Set/update the value of a site transient. </div><div class="ttdef"><b>Definition:</b> <a href="option_8php_source.html#l01611">option.php:1611</a></div></div>
<div class="ttc" id="admin-footer_8php_html_adf95f30eaafccead90ab5e2cdb55e9b9"><div class="ttname"><a href="admin-footer_8php.html#adf95f30eaafccead90ab5e2cdb55e9b9">$text</a></div><div class="ttdeci">$text</div><div class="ttdef"><b>Definition:</b> <a href="admin-footer_8php_source.html#l00029">admin-footer.php:29</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a0f01e9aa2eeaf6b8306380e9c501360c"><div class="ttname"><a href="class_g_f_forms_model.html#a0f01e9aa2eeaf6b8306380e9c501360c">GFFormsModel\is_value_match</a></div><div class="ttdeci">static is_value_match($field_value, $target_value, $operation= 'is', $source_field=null, $rule=null, $form=null)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l01771">forms_model.php:1771</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_af9834bca98d5f60922e9e816d6c8cfe5"><div class="ttname"><a href="class_g_f_forms_model.html#af9834bca98d5f60922e9e816d6c8cfe5">GFFormsModel\get_label</a></div><div class="ttdeci">static get_label($field, $input_id=0, $input_only=false, $allow_admin_label=true)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l03976">forms_model.php:3976</a></div></div>
<div class="ttc" id="class_g_f_form_display_html_a1fe4b28e179e2928f3654563009a75d2"><div class="ttname"><a href="class_g_f_form_display.html#a1fe4b28e179e2928f3654563009a75d2">GFFormDisplay\enqueue_form_scripts</a></div><div class="ttdeci">static enqueue_form_scripts($form, $ajax=false)</div><div class="ttdef"><b>Definition:</b> <a href="form__display_8php_source.html#l01586">form_display.php:1586</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a2ad1e7c420ebf796263ca970742f7e8f"><div class="ttname"><a href="class_g_f_forms_model.html#a2ad1e7c420ebf796263ca970742f7e8f">GFFormsModel\get_upload_root</a></div><div class="ttdeci">static get_upload_root()</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l03177">forms_model.php:3177</a></div></div>
<div class="ttc" id="functions_8wp-scripts_8php_html_afd42679e2d031e3a1c3e0c8b6a546e6a"><div class="ttname"><a href="functions_8wp-scripts_8php.html#afd42679e2d031e3a1c3e0c8b6a546e6a">wp_localize_script</a></div><div class="ttdeci">wp_localize_script($handle, $object_name, $l10n)</div><div class="ttdoc">Localize a script. </div><div class="ttdef"><b>Definition:</b> <a href="functions_8wp-scripts_8php_source.html#l00151">functions.wp-scripts.php:151</a></div></div>
<div class="ttc" id="class_g_f_forms_html_a7bb16019cbf1e2111ff04c4e064d5348"><div class="ttname"><a href="class_g_f_forms.html#a7bb16019cbf1e2111ff04c4e064d5348">GFForms\get_page</a></div><div class="ttdeci">static get_page()</div><div class="ttdoc">Gets current page name. </div><div class="ttdef"><b>Definition:</b> <a href="gravityforms_8php_source.html#l01881">gravityforms.php:1881</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a21a183f927a6d243fe6b4ba3a6c4d4c8"><div class="ttname"><a href="edit-form-advanced_8php.html#a21a183f927a6d243fe6b4ba3a6c4d4c8">$messages</a></div><div class="ttdeci">if(!$permalink) $messages</div><div class="ttdoc">Filter the post updated messages. </div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00083">edit-form-advanced.php:83</a></div></div>
<div class="ttc" id="async-upload_8php_html_a2717aea9720d8d0b37b32fede52333b6"><div class="ttname"><a href="async-upload_8php.html#a2717aea9720d8d0b37b32fede52333b6">$post_id</a></div><div class="ttdeci">$post_id</div><div class="ttdef"><b>Definition:</b> <a href="async-upload_8php_source.html#l00084">async-upload.php:84</a></div></div>
<div class="ttc" id="wp-content_2themes_2twentyeleven_2image_8php_html_aa2f80297e973639eba0f2f8619fe783b"><div class="ttname"><a href="wp-content_2themes_2twentyeleven_2image_8php.html#aa2f80297e973639eba0f2f8619fe783b">$attachments</a></div><div class="ttdeci">$attachments</div><div class="ttdef"><b>Definition:</b> <a href="wp-content_2themes_2twentyeleven_2image_8php_source.html#l00055">wp-content/themes/twentyeleven/image.php:55</a></div></div>
<div class="ttc" id="load-scripts_8php_html_a495f94983b95273ad267511b2411351f"><div class="ttname"><a href="load-scripts_8php.html#a495f94983b95273ad267511b2411351f">ABSPATH</a></div><div class="ttdeci">const ABSPATH</div><div class="ttdoc">Set ABSPATH for execution. </div><div class="ttdef"><b>Definition:</b> <a href="load-scripts_8php_source.html#l00011">load-scripts.php:11</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2http_8php_html_a197e9e4b401150dba32ba7d51442bfbb"><div class="ttname"><a href="wordpress_2wp-includes_2http_8php.html#a197e9e4b401150dba32ba7d51442bfbb">wp_remote_post</a></div><div class="ttdeci">wp_remote_post($url, $args=array())</div><div class="ttdoc">Retrieve the raw response from the HTTP request using the POST method. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2http_8php_source.html#l00185">wordpress/wp-includes/http.php:185</a></div></div>
<div class="ttc" id="vars_8php_html_af183ac59caee1501e622cb7c914f7d6d"><div class="ttname"><a href="vars_8php.html#af183ac59caee1501e622cb7c914f7d6d">$is_iphone</a></div><div class="ttdeci">global $is_iphone</div><div class="ttdef"><b>Definition:</b> <a href="vars_8php_source.html#l00018">vars.php:18</a></div></div>
<div class="ttc" id="functions_8wp-scripts_8php_html_acc3f81c1acb27cb6d960fa9dd1f3bba1"><div class="ttname"><a href="functions_8wp-scripts_8php.html#acc3f81c1acb27cb6d960fa9dd1f3bba1">wp_script_is</a></div><div class="ttdeci">wp_script_is($handle, $list= 'enqueued')</div><div class="ttdoc">Check whether a script has been added to the queue. </div><div class="ttdef"><b>Definition:</b> <a href="functions_8wp-scripts_8php_source.html#l00271">functions.wp-scripts.php:271</a></div></div>
<div class="ttc" id="option_8php_html_af7903f5568120880e79afc93d75c0d6e"><div class="ttname"><a href="option_8php.html#af7903f5568120880e79afc93d75c0d6e">set_transient</a></div><div class="ttdeci">set_transient($transient, $value, $expiration=0)</div><div class="ttdoc">Set/update the value of a transient. </div><div class="ttdef"><b>Definition:</b> <a href="option_8php_source.html#l00682">option.php:682</a></div></div>
<div class="ttc" id="post__image_8php_html_a9254e826af88c3356ce25f1a75db4213"><div class="ttname"><a href="post__image_8php.html#a9254e826af88c3356ce25f1a75db4213">$ary</a></div><div class="ttdeci">$ary</div><div class="ttdef"><b>Definition:</b> <a href="post__image_8php_source.html#l00024">post_image.php:24</a></div></div>
<div class="ttc" id="options-permalink_8php_html_a09e8cf95b9d29955a0bfabca9b420edc"><div class="ttname"><a href="options-permalink_8php.html#a09e8cf95b9d29955a0bfabca9b420edc">$prefix</a></div><div class="ttdeci">$prefix</div><div class="ttdef"><b>Definition:</b> <a href="options-permalink_8php_source.html#l00055">options-permalink.php:55</a></div></div>
<div class="ttc" id="option_8php_html_ababa2424b834614908fbd0c9e97783f6"><div class="ttname"><a href="option_8php.html#ababa2424b834614908fbd0c9e97783f6">get_site_transient</a></div><div class="ttdeci">get_site_transient($transient)</div><div class="ttdoc">Get the value of a site transient. </div><div class="ttdef"><b>Definition:</b> <a href="option_8php_source.html#l01538">option.php:1538</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_ada8efad85a9cd028503cbe55c37c890a"><div class="ttname"><a href="edit-form-advanced_8php.html#ada8efad85a9cd028503cbe55c37c890a">_x</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv' _x( 'Format', 'post format')</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00244">edit-form-advanced.php:244</a></div></div>
<div class="ttc" id="preview_8php_html_a1a4fda4c28a9ee5f91102c023b9501f4"><div class="ttname"><a href="preview_8php.html#a1a4fda4c28a9ee5f91102c023b9501f4">$form</a></div><div class="ttdeci">$form</div><div class="ttdef"><b>Definition:</b> <a href="preview_8php_source.html#l00052">preview.php:52</a></div></div>
<div class="ttc" id="admin_8php_html_af1c9ecf26c0cfd247c0760dd4b594a6d"><div class="ttname"><a href="admin_8php.html#af1c9ecf26c0cfd247c0760dd4b594a6d">elseif</a></div><div class="ttdeci">if(get_option('db_upgraded')) elseif(get_option('db_version')!=$wp_db_version &amp;&amp;empty($_POST))</div><div class="ttdef"><b>Definition:</b> <a href="admin_8php_source.html#l00045">admin.php:45</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_ad9b91456e6a33c6a00aea487280fa38e"><div class="ttname"><a href="class_g_f_forms_model.html#ad9b91456e6a33c6a00aea487280fa38e">GFFormsModel\get_lead_count_all_forms</a></div><div class="ttdeci">static get_lead_count_all_forms($status= 'active')</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l04840">forms_model.php:4840</a></div></div>
<div class="ttc" id="formatting_8php_html_a2aa43f1e479af8878251d6697bf84f09"><div class="ttname"><a href="formatting_8php.html#a2aa43f1e479af8878251d6697bf84f09">wp_strip_all_tags</a></div><div class="ttdeci">wp_strip_all_tags($string, $remove_breaks=false)</div><div class="ttdoc">Properly strip all HTML tags including script and style. </div><div class="ttdef"><b>Definition:</b> <a href="formatting_8php_source.html#l04233">formatting.php:4233</a></div></div>
<div class="ttc" id="formatting_8php_html_af2574f18e281f23b4b3b04bf02ebe4d5"><div class="ttname"><a href="formatting_8php.html#af2574f18e281f23b4b3b04bf02ebe4d5">human_time_diff</a></div><div class="ttdeci">human_time_diff($from, $to= '')</div><div class="ttdoc">Determines the difference between two timestamps. </div><div class="ttdef"><b>Definition:</b> <a href="formatting_8php_source.html#l02819">formatting.php:2819</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a6e348722923afe18808c59773964c162"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a6e348722923afe18808c59773964c162">add_query_arg</a></div><div class="ttdeci">add_query_arg()</div><div class="ttdoc">Retrieves a modified URL query string. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l00770">wordpress/wp-includes/functions.php:770</a></div></div>
<div class="ttc" id="namespacestrong_html"><div class="ttname"><a href="namespacestrong.html">strong</a></div></div>
<div class="ttc" id="namespacep_html"><div class="ttname"><a href="namespacep.html">p</a></div></div>
<div class="ttc" id="widget-poll_8php_html_aa1dbc314943a448ba681230a0e83633c"><div class="ttname"><a href="widget-poll_8php.html#aa1dbc314943a448ba681230a0e83633c">$merge_tag</a></div><div class="ttdeci">$merge_tag</div><div class="ttdoc">Merge tag is already generated by the class. </div><div class="ttdef"><b>Definition:</b> <a href="widget-poll_8php_source.html#l00014">widget-poll.php:14</a></div></div>
<div class="ttc" id="noop_8php_html_a472b5d168d122332c7e23553b87d7d5d"><div class="ttname"><a href="noop_8php.html#a472b5d168d122332c7e23553b87d7d5d">get_bloginfo</a></div><div class="ttdeci">get_bloginfo()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00056">noop.php:56</a></div></div>
<div class="ttc" id="classwpdb_html"><div class="ttname"><a href="classwpdb.html">wpdb</a></div><div class="ttdef"><b>Definition:</b> <a href="wp-db_8php_source.html#l00052">wp-db.php:52</a></div></div>
<div class="ttc" id="noop_8php_html_a54639394aa645a2277ea41f3cbd23247"><div class="ttname"><a href="noop_8php.html#a54639394aa645a2277ea41f3cbd23247">apply_filters</a></div><div class="ttdeci">apply_filters()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00026">noop.php:26</a></div></div>
<div class="ttc" id="l10n_8php_html_a6ec9fd4baced85768ba16386e9e1b339"><div class="ttname"><a href="l10n_8php.html#a6ec9fd4baced85768ba16386e9e1b339">get_locale</a></div><div class="ttdeci">get_locale()</div><div class="ttdoc">Retrieves the current locale. </div><div class="ttdef"><b>Definition:</b> <a href="l10n_8php_source.html#l00030">l10n.php:30</a></div></div>
<div class="ttc" id="tmp_2wordpress_2wp-admin_2index_8php_html_a3691fb4ac25261a9b1efa1fd6d58923b"><div class="ttname"><a href="tmp_2wordpress_2wp-admin_2index_8php.html#a3691fb4ac25261a9b1efa1fd6d58923b">$option</a></div><div class="ttdeci">if(has_action( 'welcome_panel')&amp;&amp;current_user_can( 'edit_theme_options')) $option</div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress_2wp-admin_2index_8php_source.html#l00101">tmp/wordpress/wp-admin/index.php:101</a></div></div>
<div class="ttc" id="async-upload_8php_html_ad69de186eb69f332f105ae157136192e"><div class="ttname"><a href="async-upload_8php.html#ad69de186eb69f332f105ae157136192e">$id</a></div><div class="ttdeci">if(isset($_REQUEST['post_id'])) $id</div><div class="ttdef"><b>Definition:</b> <a href="async-upload_8php_source.html#l00091">async-upload.php:91</a></div></div>
<div class="ttc" id="menu_8php_html_af789423037bbc89dc7c850e761177570"><div class="ttname"><a href="menu_8php.html#af789423037bbc89dc7c850e761177570">$count</a></div><div class="ttdeci">$count</div><div class="ttdef"><b>Definition:</b> <a href="menu_8php_source.html#l00192">menu.php:192</a></div></div>
<div class="ttc" id="noop_8php_html_aaf1220eff85fdd291725eabf743b2ed3"><div class="ttname"><a href="noop_8php.html#aaf1220eff85fdd291725eabf743b2ed3">get_option</a></div><div class="ttdeci">get_option()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00031">noop.php:31</a></div></div>
<div class="ttc" id="wp-includes_2user_8php_html_aa414164c348c21e38980eb95ebb0d541"><div class="ttname"><a href="wp-includes_2user_8php.html#aa414164c348c21e38980eb95ebb0d541">get_users</a></div><div class="ttdeci">get_users($args=array())</div><div class="ttdoc">Retrieve list of users matching criteria. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2user_8php_source.html#l00477">wp-includes/user.php:477</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a1641aad22a837fa8fffba39877964f81"><div class="ttname"><a href="class_g_f_forms_model.html#a1641aad22a837fa8fffba39877964f81">GFFormsModel\get_form_count</a></div><div class="ttdeci">static get_form_count()</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l00274">forms_model.php:274</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a053ff37ae44c85a9bef47cd59328912e"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a053ff37ae44c85a9bef47cd59328912e">date_i18n</a></div><div class="ttdeci">date_i18n($dateformatstring, $unixtimestamp=false, $gmt=false)</div><div class="ttdoc">Retrieve the date in localized format, based on timestamp. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l00089">wordpress/wp-includes/functions.php:89</a></div></div>
<div class="ttc" id="class-wp-error_8php_html_a741b5ec807dbba8d2a0851e32e7d926c"><div class="ttname"><a href="class-wp-error_8php.html#a741b5ec807dbba8d2a0851e32e7d926c">is_wp_error</a></div><div class="ttdeci">is_wp_error($thing)</div><div class="ttdoc">Check whether variable is a WordPress Error. </div><div class="ttdef"><b>Definition:</b> <a href="class-wp-error_8php_source.html#l00216">class-wp-error.php:216</a></div></div>
<div class="ttc" id="gquiz__percent_8php_html_a1d2cd7133414dcb5bf74c0f3b3fb99e2"><div class="ttname"><a href="gquiz__percent_8php.html#a1d2cd7133414dcb5bf74c0f3b3fb99e2">$format</a></div><div class="ttdeci">if(empty($field['value'])) $format</div><div class="ttdoc">Modify the format of the display of the field. </div><div class="ttdef"><b>Definition:</b> <a href="gquiz__percent_8php_source.html#l00025">gquiz_percent.php:25</a></div></div>
<div class="ttc" id="l10n_8php_html_ac954f8ae2c4525a1ff294a8b2cba638b"><div class="ttname"><a href="l10n_8php.html#ac954f8ae2c4525a1ff294a8b2cba638b">load_plugin_textdomain</a></div><div class="ttdeci">load_plugin_textdomain($domain, $deprecated=false, $plugin_rel_path=false)</div><div class="ttdoc">Load a plugin&#39;s translated strings. </div><div class="ttdef"><b>Definition:</b> <a href="l10n_8php_source.html#l00665">l10n.php:665</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_af06cd3b218b548cf6b733df97c80c8a3"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#af06cd3b218b548cf6b733df97c80c8a3">li</a></div><div class="ttdeci">ul li</div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l02622">wordpress/wp-includes/functions.php:2622</a></div></div>
<div class="ttc" id="wp-includes_2theme_8php_html_a930e87e99fca734cbd2913800e7bcf4d"><div class="ttname"><a href="wp-includes_2theme_8php.html#a930e87e99fca734cbd2913800e7bcf4d">wp_get_theme</a></div><div class="ttdeci">wp_get_theme($stylesheet=null, $theme_root=null)</div><div class="ttdoc">Gets a WP_Theme object for a theme. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2theme_8php_source.html#l00097">wp-includes/theme.php:97</a></div></div>
<div class="ttc" id="class_g_f___fields_html_a104bc0f3909cf98af91a926db5f851a2"><div class="ttname"><a href="class_g_f___fields.html#a104bc0f3909cf98af91a926db5f851a2">GF_Fields\get</a></div><div class="ttdeci">static get($field_type)</div><div class="ttdoc">Alias for get_instance() </div><div class="ttdef"><b>Definition:</b> <a href="class-gf-fields_8php_source.html#l00049">class-gf-fields.php:49</a></div></div>
<div class="ttc" id="l10n_8php_html_abd860e2ef067a94c4a1633f9307a3750"><div class="ttname"><a href="l10n_8php.html#abd860e2ef067a94c4a1633f9307a3750">esc_attr__</a></div><div class="ttdeci">esc_attr__($text, $domain= 'default')</div><div class="ttdoc">Retrieve the translation of $text and escapes it for safe use in an attribute. </div><div class="ttdef"><b>Definition:</b> <a href="l10n_8php_source.html#l00188">l10n.php:188</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a8330e4fa94939c998e6c018c3b173682"><div class="ttname"><a href="class_g_f_forms_model.html#a8330e4fa94939c998e6c018c3b173682">GFFormsModel\get_input</a></div><div class="ttdeci">static get_input($field, $id)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l03997">forms_model.php:3997</a></div></div>
<div class="ttc" id="vars_8php_html_a871a9479e3633e807ccb2bcec3e6c582"><div class="ttname"><a href="vars_8php.html#a871a9479e3633e807ccb2bcec3e6c582">$is_gecko</a></div><div class="ttdeci">global $is_gecko</div><div class="ttdef"><b>Definition:</b> <a href="vars_8php_source.html#l00018">vars.php:18</a></div></div>
<div class="ttc" id="wp-includes_2taxonomy_8php_html_aa491ab8e62a9a11b6a3aa62e015f75dd"><div class="ttname"><a href="wp-includes_2taxonomy_8php.html#aa491ab8e62a9a11b6a3aa62e015f75dd">get_terms</a></div><div class="ttdeci">get_terms($taxonomies, $args= '')</div><div class="ttdoc">Retrieve the terms in a given taxonomy or list of taxonomies. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2taxonomy_8php_source.html#l01126">wp-includes/taxonomy.php:1126</a></div></div>
<div class="ttc" id="wp-admin_2includes_2plugin_8php_html_ac98eb4b447e19f4df31adaaedc008b0f"><div class="ttname"><a href="wp-admin_2includes_2plugin_8php.html#ac98eb4b447e19f4df31adaaedc008b0f">get_plugins</a></div><div class="ttdeci">get_plugins($plugin_folder= '')</div><div class="ttdoc">Check the plugins directory and retrieve all plugin files with plugin data. </div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2plugin_8php_source.html#l00237">wp-admin/includes/plugin.php:237</a></div></div>
<div class="ttc" id="class_g_f_form_display_html_a77191d480254145ad7187b027af1e16b"><div class="ttname"><a href="class_g_f_form_display.html#a77191d480254145ad7187b027af1e16b">GFFormDisplay\print_form_scripts</a></div><div class="ttdeci">static print_form_scripts($form, $ajax)</div><div class="ttdef"><b>Definition:</b> <a href="form__display_8php_source.html#l01672">form_display.php:1672</a></div></div>
<div class="ttc" id="wp-includes_2media_8php_html_a57bf956f73e9b1ed18235515b34b0028"><div class="ttname"><a href="wp-includes_2media_8php.html#a57bf956f73e9b1ed18235515b34b0028">wp_get_attachment_image</a></div><div class="ttdeci">wp_get_attachment_image($attachment_id, $size= 'thumbnail', $icon=false, $attr= '')</div><div class="ttdoc">Get an HTML img element representing an image attachment. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2media_8php_source.html#l00800">wp-includes/media.php:800</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a39e30b5bbefa3b21d828591673150b89"><div class="ttname"><a href="wp-includes_2post_8php.html#a39e30b5bbefa3b21d828591673150b89">get_post</a></div><div class="ttdeci">get_post($post=null, $output=OBJECT, $filter= 'raw')</div><div class="ttdoc">Retrieves post data given a post ID or post object. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l00426">wp-includes/post.php:426</a></div></div>
<div class="ttc" id="wp-includes_2deprecated_8php_html_ae6dd2fda749296bff9887b354def70b9"><div class="ttname"><a href="wp-includes_2deprecated_8php.html#ae6dd2fda749296bff9887b354def70b9">like_escape</a></div><div class="ttdeci">like_escape($text)</div><div class="ttdoc">Formerly used to escape strings before searching the DB. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2deprecated_8php_source.html#l03399">wp-includes/deprecated.php:3399</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_aceb0262a802095054196cc905722e288"><div class="ttname"><a href="class_g_f_forms_model.html#aceb0262a802095054196cc905722e288">GFFormsModel\matches_operation</a></div><div class="ttdeci">static matches_operation($val1, $val2, $operation)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l01827">forms_model.php:1827</a></div></div>
<div class="ttc" id="admin_8php_html_acfc73f199060a91876019ff352baa5c2"><div class="ttname"><a href="admin_8php.html#acfc73f199060a91876019ff352baa5c2">true</a></div><div class="ttdeci">if(!WP_NETWORK_ADMIN &amp;&amp;!WP_USER_ADMIN) if(isset($_GET['import'])&amp;&amp;!defined('WP_LOAD_IMPORTERS')) define('WP_LOAD_IMPORTERS' true</div><div class="ttdef"><b>Definition:</b> <a href="admin_8php_source.html#l00028">admin.php:28</a></div></div>
<div class="ttc" id="class_g_f_forms_html_a85d469d4d196e138ea085db1cd3e2423"><div class="ttname"><a href="class_g_f_forms.html#a85d469d4d196e138ea085db1cd3e2423">GFForms\get</a></div><div class="ttdeci">static get($name, $array=null)</div><div class="ttdef"><b>Definition:</b> <a href="gravityforms_8php_source.html#l02175">gravityforms.php:2175</a></div></div>
<div class="ttc" id="theme-editor_8php_html_a1ae541f7fe1c5e21cb4535f88ec9e9dc"><div class="ttname"><a href="theme-editor_8php.html#a1ae541f7fe1c5e21cb4535f88ec9e9dc">$theme</a></div><div class="ttdeci">$theme</div><div class="ttdef"><b>Definition:</b> <a href="theme-editor_8php_source.html#l00054">theme-editor.php:54</a></div></div>
<div class="ttc" id="namespacelist_html"><div class="ttname"><a href="namespacelist.html">list</a></div></div>
<div class="ttc" id="wp-admin_2revision_8php_html_a0bb7e2b3d541598cc9c9e3b11bee859c"><div class="ttname"><a href="wp-admin_2revision_8php.html#a0bb7e2b3d541598cc9c9e3b11bee859c">$from</a></div><div class="ttdeci">$from</div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2revision_8php_source.html#l00027">wp-admin/revision.php:27</a></div></div>
<div class="ttc" id="vars_8php_html_a8dc23b0bc1ec4319afdcf2e852fca562"><div class="ttname"><a href="vars_8php.html#a8dc23b0bc1ec4319afdcf2e852fca562">$is_opera</a></div><div class="ttdeci">global $is_opera</div><div class="ttdef"><b>Definition:</b> <a href="vars_8php_source.html#l00018">vars.php:18</a></div></div>
<div class="ttc" id="wordpress_2wp-admin_2upload_8php_html_a3aaf40baac36e278c7d7c9139df1750c"><div class="ttname"><a href="wordpress_2wp-admin_2upload_8php.html#a3aaf40baac36e278c7d7c9139df1750c">$mode</a></div><div class="ttdeci">$mode</div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-admin_2upload_8php_source.html#l00015">wordpress/wp-admin/upload.php:15</a></div></div>
<div class="ttc" id="noop_8php_html_a0b327581800dba50ad70720e23ae2ed2"><div class="ttname"><a href="noop_8php.html#a0b327581800dba50ad70720e23ae2ed2">is_admin</a></div><div class="ttdeci">is_admin()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00061">noop.php:61</a></div></div>
<div class="ttc" id="wp-content_2themes_2twentyeleven_2sidebar_8php_html_a011800c63ece4cbbfa77136a20607023"><div class="ttname"><a href="wp-content_2themes_2twentyeleven_2sidebar_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a></div><div class="ttdeci">$options</div><div class="ttdef"><b>Definition:</b> <a href="wp-content_2themes_2twentyeleven_2sidebar_8php_source.html#l00010">wp-content/themes/twentyeleven/sidebar.php:10</a></div></div>
<div class="ttc" id="gravityforms_8php_html_af1a8961ff0bce0e696ba1fcc2fe8371e"><div class="ttname"><a href="gravityforms_8php.html#af1a8961ff0bce0e696ba1fcc2fe8371e">GF_SUPPORTED_WP_VERSION</a></div><div class="ttdeci">const GF_SUPPORTED_WP_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="gravityforms_8php_source.html#l00071">gravityforms.php:71</a></div></div>
<div class="ttc" id="admin-ajax_8php_html_a7e2b5c5f59b53e18d1dc6bf6ff251ed2"><div class="ttname"><a href="admin-ajax_8php.html#a7e2b5c5f59b53e18d1dc6bf6ff251ed2">str_replace</a></div><div class="ttdeci">if(!empty($_GET['action'])&amp;&amp;in_array($_GET['action'], $core_actions_get)) add_action( 'wp_ajax_'.$_GET['action'] str_replace( '-', '_', $_GET['action'])</div><div class="ttdef"><b>Definition:</b> <a href="admin-ajax_8php_source.html#l00073">admin-ajax.php:73</a></div></div>
<div class="ttc" id="l10n_8php_html_a8139ca70e171fee8478897f58679dba9"><div class="ttname"><a href="l10n_8php.html#a8139ca70e171fee8478897f58679dba9">esc_html__</a></div><div class="ttdeci">esc_html__($text, $domain= 'default')</div><div class="ttdoc">Retrieve the translation of $text and escapes it for safe use in HTML output. </div><div class="ttdef"><b>Definition:</b> <a href="l10n_8php_source.html#l00204">l10n.php:204</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a1d3eb00c9fe92a90149ac06ca6c28132"><div class="ttname"><a href="edit-form-advanced_8php.html#a1d3eb00c9fe92a90149ac06ca6c28132">esc_html</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv'foreach(get_object_taxonomies($post) as $tax_name) if($thumbnail_support &amp;&amp;current_user_can( 'upload_files')) add_meta_box('postimagediv' esc_html($post_type_object-&gt;labels-&gt;featured_image)</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00266">edit-form-advanced.php:266</a></div></div>
<div class="ttc" id="wp-includes_2post_8php_html_a5ac8d9eefeeb2ac8b45650a335971b81"><div class="ttname"><a href="wp-includes_2post_8php.html#a5ac8d9eefeeb2ac8b45650a335971b81">get_post_meta</a></div><div class="ttdeci">get_post_meta($post_id, $key= '', $single=false)</div><div class="ttdoc">Retrieve post meta field for a post. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2post_8php_source.html#l01711">wp-includes/post.php:1711</a></div></div>
<div class="ttc" id="plugin-editor_8php_html_aa1bfbd27060176201b271918dff57e8f"><div class="ttname"><a href="plugin-editor_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a></div><div class="ttdeci">$file</div><div class="ttdef"><b>Definition:</b> <a href="plugin-editor_8php_source.html#l00051">plugin-editor.php:51</a></div></div>
<div class="ttc" id="namespaceset_html"><div class="ttname"><a href="namespaceset.html">set</a></div></div>
<div class="ttc" id="l10n_8php_html_abb54e3355273e9e847b4f1ec283b578e"><div class="ttname"><a href="l10n_8php.html#abb54e3355273e9e847b4f1ec283b578e">load_textdomain</a></div><div class="ttdeci">load_textdomain($domain, $mofile)</div><div class="ttdoc">Load a .mo file into the text domain $domain. </div><div class="ttdef"><b>Definition:</b> <a href="l10n_8php_source.html#l00518">l10n.php:518</a></div></div>
<div class="ttc" id="wp-includes_2media_8php_html_adc3e512380a7336cfc8dd3417892a65b"><div class="ttname"><a href="wp-includes_2media_8php.html#adc3e512380a7336cfc8dd3417892a65b">wp_get_attachment_image_src</a></div><div class="ttdeci">wp_get_attachment_image_src($attachment_id, $size= 'thumbnail', $icon=false)</div><div class="ttdoc">Retrieve an image to represent an attachment. </div><div class="ttdef"><b>Definition:</b> <a href="wp-includes_2media_8php_source.html#l00751">wp-includes/media.php:751</a></div></div>
<div class="ttc" id="vars_8php_html_ab896dca47caf5d3eaffc7b6c3abf3275"><div class="ttname"><a href="vars_8php.html#ab896dca47caf5d3eaffc7b6c3abf3275">$is_safari</a></div><div class="ttdeci">global $is_safari</div><div class="ttdef"><b>Definition:</b> <a href="vars_8php_source.html#l00018">vars.php:18</a></div></div>
<div class="ttc" id="admin_8php_html_a2c554c048d48362786c97b715f765984"><div class="ttname"><a href="admin_8php.html#a2c554c048d48362786c97b715f765984">false</a></div><div class="ttdeci">if(!defined( 'WP_ADMIN')) if(!defined('WP_NETWORK_ADMIN')) define('WP_NETWORK_ADMIN' false</div><div class="ttdoc">In WordPress Administration Screens. </div><div class="ttdef"><b>Definition:</b> <a href="admin_8php_source.html#l00018">admin.php:18</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_aac0865a01aeb5a7c597880af680e5304"><div class="ttname"><a href="class_g_f_forms_model.html#aac0865a01aeb5a7c597880af680e5304">GFFormsModel\create_post</a></div><div class="ttdeci">static create_post($form, &amp;$lead)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l02598">forms_model.php:2598</a></div></div>
<div class="ttc" id="class_g_f___fields_html_a58cc2eb187fc7d1daaecd59235d52a5d"><div class="ttname"><a href="class_g_f___fields.html#a58cc2eb187fc7d1daaecd59235d52a5d">GF_Fields\create</a></div><div class="ttdeci">static create($properties)</div><div class="ttdef"><b>Definition:</b> <a href="class-gf-fields_8php_source.html#l00065">class-gf-fields.php:65</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_ad922bfc064f1e2b56d4327a253129a33"><div class="ttname"><a href="class_g_f_forms_model.html#ad922bfc064f1e2b56d4327a253129a33">GFFormsModel\get_field_value</a></div><div class="ttdeci">static get_field_value(&amp;$field, $field_values=array(), $get_from_post=true)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l01959">forms_model.php:1959</a></div></div>
<div class="ttc" id="search-field-date__range_8php_html_a1334d61bbc340f973c09c7031f3c21f2"><div class="ttname"><a href="search-field-date__range_8php.html#a1334d61bbc340f973c09c7031f3c21f2">$value</a></div><div class="ttdeci">$value</div><div class="ttdef"><b>Definition:</b> <a href="search-field-date__range_8php_source.html#l00010">search-field-date_range.php:10</a></div></div>
<div class="ttc" id="wp-config-sample_8php_html_ab5db0d3504f917f268614c50b02c53e2"><div class="ttname"><a href="wp-config-sample_8php.html#ab5db0d3504f917f268614c50b02c53e2">DB_NAME</a></div><div class="ttdeci">const DB_NAME</div><div class="ttdoc">The name of the database for WordPress. </div><div class="ttdef"><b>Definition:</b> <a href="wp-config-sample_8php_source.html#l00023">wp-config-sample.php:23</a></div></div>
<div class="ttc" id="class_w_p___error_html"><div class="ttname"><a href="class_w_p___error.html">WP_Error</a></div><div class="ttdef"><b>Definition:</b> <a href="class-wp-error_8php_source.html#l00021">class-wp-error.php:21</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a1166cd7c754f765f15a0bece0b9d9018"><div class="ttname"><a href="class_g_f_forms_model.html#a1166cd7c754f765f15a0bece0b9d9018">GFFormsModel\get_entry_meta</a></div><div class="ttdeci">static get_entry_meta($form_ids)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l04188">forms_model.php:4188</a></div></div>
<div class="ttc" id="search-field-date__range_8php_html_ab2fc40d43824ea3e1ce5d86dee0d763b"><div class="ttname"><a href="search-field-date__range_8php.html#ab2fc40d43824ea3e1ce5d86dee0d763b">$name</a></div><div class="ttdeci">$name</div><div class="ttdef"><b>Definition:</b> <a href="search-field-date__range_8php_source.html#l00012">search-field-date_range.php:12</a></div></div>
<div class="ttc" id="class_g_f_a_p_i_html_a0dda8aeec765f8fabc1d0542d1ea7879"><div class="ttname"><a href="class_g_f_a_p_i.html#a0dda8aeec765f8fabc1d0542d1ea7879">GFAPI\get_fields_by_type</a></div><div class="ttdeci">static get_fields_by_type($form, $types, $use_input_type=false)</div><div class="ttdoc">Returns an array containing the form fields of the specified type or types. </div><div class="ttdef"><b>Definition:</b> <a href="api_8php_source.html#l01303">api.php:1303</a></div></div>
<div class="ttc" id="vars_8php_html_a65d87c7cec88a5c6674ac5ea51374768"><div class="ttname"><a href="vars_8php.html#a65d87c7cec88a5c6674ac5ea51374768">$is_IE</a></div><div class="ttdeci">global $is_IE</div><div class="ttdef"><b>Definition:</b> <a href="vars_8php_source.html#l00018">vars.php:18</a></div></div>
<div class="ttc" id="custom_8php_html_ab2cfd183a13283e6ee22f33f2713eac9"><div class="ttname"><a href="custom_8php.html#ab2cfd183a13283e6ee22f33f2713eac9">$content</a></div><div class="ttdeci">if(empty($field_settings['content'])) $content</div><div class="ttdef"><b>Definition:</b> <a href="custom_8php_source.html#l00037">custom.php:37</a></div></div>
<div class="ttc" id="option_8php_html_a21f59332d7b293dca17bccd56c8c00eb"><div class="ttname"><a href="option_8php.html#a21f59332d7b293dca17bccd56c8c00eb">update_option</a></div><div class="ttdeci">update_option($option, $value, $autoload=null)</div><div class="ttdoc">Update the value of an option that was already added. </div><div class="ttdef"><b>Definition:</b> <a href="option_8php_source.html#l00253">option.php:253</a></div></div>
<div class="ttc" id="load_8php_html_a72e5386fcd7a5ce7526d208d0b03a0af"><div class="ttname"><a href="load_8php.html#a72e5386fcd7a5ce7526d208d0b03a0af">is_multisite</a></div><div class="ttdeci">is_multisite()</div><div class="ttdoc">If Multisite is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="load_8php_source.html#l00753">load.php:753</a></div></div>
<div class="ttc" id="time_8php_html_a77957aab921d62a9e2d2783a4924e634"><div class="ttname"><a href="time_8php.html#a77957aab921d62a9e2d2783a4924e634">$field_id</a></div><div class="ttdeci">$field_id</div><div class="ttdef"><b>Definition:</b> <a href="time_8php_source.html#l00017">time.php:17</a></div></div>
<div class="ttc" id="link-template_8php_html_ac0255d51aa5c70acc2870e2a8b345fe6"><div class="ttname"><a href="link-template_8php.html#ac0255d51aa5c70acc2870e2a8b345fe6">plugins_url</a></div><div class="ttdeci">plugins_url($path= '', $plugin= '')</div><div class="ttdoc">Retrieve a URL within the plugins or mu-plugins directory. </div><div class="ttdef"><b>Definition:</b> <a href="link-template_8php_source.html#l03173">link-template.php:3173</a></div></div>
<div class="ttc" id="option_8php_html_ad76e544fa26ccb7e20668c75cfdcb012"><div class="ttname"><a href="option_8php.html#ad76e544fa26ccb7e20668c75cfdcb012">get_transient</a></div><div class="ttdeci">get_transient($transient)</div><div class="ttdoc">Get the value of a transient. </div><div class="ttdef"><b>Definition:</b> <a href="option_8php_source.html#l00609">option.php:609</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a38ddbb5bed3a03da26b64c1916ad9e1f"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a38ddbb5bed3a03da26b64c1916ad9e1f">absint</a></div><div class="ttdeci">absint($maybeint)</div><div class="ttdoc">Convert a value to non-negative integer. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l03551">wordpress/wp-includes/functions.php:3551</a></div></div>
<div class="ttc" id="twentyfifteen_2content-link_8php_html_a4a6fb8865e1ae52faa29662b4087e629"><div class="ttname"><a href="twentyfifteen_2content-link_8php.html#a4a6fb8865e1ae52faa29662b4087e629">esc_url</a></div><div class="ttdeci">else esc_url(twentyfifteen_get_link_url()))</div><div class="ttdef"><b>Definition:</b> <a href="twentyfifteen_2content-link_8php_source.html#l00021">twentyfifteen/content-link.php:21</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a63c60c64f42afd0036bb78cf80f454ba"><div class="ttname"><a href="class_g_f_forms_model.html#a63c60c64f42afd0036bb78cf80f454ba">GFFormsModel\get_ip</a></div><div class="ttdeci">static get_ip()</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l01349">forms_model.php:1349</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a77d2c65218c18855112ade16f5e162df"><div class="ttname"><a href="class_g_f_forms_model.html#a77d2c65218c18855112ade16f5e162df">GFFormsModel\get_current_page_url</a></div><div class="ttdeci">static get_current_page_url($force_ssl=false)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l04023">forms_model.php:4023</a></div></div>
<div class="ttc" id="other__entries_8php_html_a61ce92a251f8ce1d28919fdfc3dd33a7"><div class="ttname"><a href="other__entries_8php.html#a61ce92a251f8ce1d28919fdfc3dd33a7">$form_id</a></div><div class="ttdeci">if(empty($created_by)) $form_id</div><div class="ttdef"><b>Definition:</b> <a href="other__entries_8php_source.html#l00020">other_entries.php:20</a></div></div>
<div class="ttc" id="forms__model_8php_html_a37de7e0d11a5e514567333aae0d00634"><div class="ttname"><a href="forms__model_8php.html#a37de7e0d11a5e514567333aae0d00634">gform_update_meta</a></div><div class="ttdeci">gform_update_meta($entry_id, $meta_key, $meta_value, $form_id=null)</div><div class="ttdoc">Add or update metadata associated with an entry. </div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l05334">forms_model.php:5334</a></div></div>
<div class="ttc" id="gravityforms_8php_html_a7bcd2a91ddf1f1524805d64271f4f6d6"><div class="ttname"><a href="gravityforms_8php.html#a7bcd2a91ddf1f1524805d64271f4f6d6">GF_MIN_WP_VERSION</a></div><div class="ttdeci">const GF_MIN_WP_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="gravityforms_8php_source.html#l00070">gravityforms.php:70</a></div></div>
<div class="ttc" id="edit-tags_8php_html_aed6d7b9acff0b9518917d3b0573bc636"><div class="ttname"><a href="edit-tags_8php.html#aed6d7b9acff0b9518917d3b0573bc636">$_SERVER</a></div><div class="ttdeci">$_SERVER['REQUEST_URI']</div><div class="ttdef"><b>Definition:</b> <a href="edit-tags_8php_source.html#l00320">edit-tags.php:320</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html"><div class="ttname"><a href="class_g_f_forms_model.html">GFFormsModel</a></div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l00012">forms_model.php:12</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a2bbf1022c96f557e04addbdd5d803fcf"><div class="ttname"><a href="class_g_f_forms_model.html#a2bbf1022c96f557e04addbdd5d803fcf">GFFormsModel\get_form_meta</a></div><div class="ttdeci">static get_form_meta($form_id)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l00327">forms_model.php:327</a></div></div>
<div class="ttc" id="edit__link_8php_html_a73004ce9cd673c1bfafd1dc351134797"><div class="ttname"><a href="edit__link_8php.html#a73004ce9cd673c1bfafd1dc351134797">$output</a></div><div class="ttdeci">$output</div><div class="ttdef"><b>Definition:</b> <a href="edit__link_8php_source.html#l00018">edit_link.php:18</a></div></div>
<div class="ttc" id="form__list_8php_html_a75c7d6fef8f2fc1b14944df043dd5690"><div class="ttname"><a href="form__list_8php.html#a75c7d6fef8f2fc1b14944df043dd5690">label</a></div><div class="ttdeci">gf_new_form_modal_container setting row label</div><div class="ttdef"><b>Definition:</b> <a href="form__list_8php_source.html#l00153">form_list.php:153</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a46b3622ccc6d393dfd97e355b7bd0bd6"><div class="ttname"><a href="edit-form-advanced_8php.html#a46b3622ccc6d393dfd97e355b7bd0bd6">null</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv' null</div><div class="ttdoc">When displaying the single entry we should always know to which View it belongs (the context is every...</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00244">edit-form-advanced.php:244</a></div></div>
<div class="ttc" id="class_g_f___field_html"><div class="ttname"><a href="class_g_f___field.html">GF_Field</a></div><div class="ttdoc">Class GF_Field. </div><div class="ttdef"><b>Definition:</b> <a href="class-gf-field_8php_source.html#l00015">class-gf-field.php:15</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_abf17cb2dba2ed17cb28aa5f37deb5293"><div class="ttname"><a href="edit-form-advanced_8php.html#abf17cb2dba2ed17cb28aa5f37deb5293">$message</a></div><div class="ttdeci">$message</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00174">edit-form-advanced.php:174</a></div></div>
<div class="ttc" id="noop_8php_html_a0cf0f358a47f49ebdba78be2ed10a41c"><div class="ttname"><a href="noop_8php.html#a0cf0f358a47f49ebdba78be2ed10a41c">esc_attr</a></div><div class="ttdeci">esc_attr()</div><div class="ttdef"><b>Definition:</b> <a href="noop_8php_source.html#l00021">noop.php:21</a></div></div>
<div class="ttc" id="select-template_8php_html_a77c8faa27a630e0cfbe0fa5507c1a538"><div class="ttname"><a href="select-template_8php.html#a77c8faa27a630e0cfbe0fa5507c1a538">$post</a></div><div class="ttdeci">global $post</div><div class="ttdef"><b>Definition:</b> <a href="select-template_8php_source.html#l00009">select-template.php:9</a></div></div>
<div class="ttc" id="wp-config-sample_8php_html_a1d1d99f8e08f387d84fe9848f3357156"><div class="ttname"><a href="wp-config-sample_8php.html#a1d1d99f8e08f387d84fe9848f3357156">DB_USER</a></div><div class="ttdeci">const DB_USER</div><div class="ttdoc">MySQL database username. </div><div class="ttdef"><b>Definition:</b> <a href="wp-config-sample_8php_source.html#l00026">wp-config-sample.php:26</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_ad7133b9d8edf539917094b657f8c701e"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#ad7133b9d8edf539917094b657f8c701e">wp_check_filetype_and_ext</a></div><div class="ttdeci">wp_check_filetype_and_ext($file, $filename, $mimes=null)</div><div class="ttdoc">Attempt to determine the real file type of a file. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l02197">wordpress/wp-includes/functions.php:2197</a></div></div>
<div class="ttc" id="admin-header_8php_html_a0adaa55d75018329f592200c2da54994"><div class="ttname"><a href="admin-header_8php.html#a0adaa55d75018329f592200c2da54994">$wp_version</a></div><div class="ttdeci">global $wp_version</div><div class="ttdef"><b>Definition:</b> <a href="admin-header_8php_source.html#l00026">admin-header.php:26</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a810671776f43dde77c42be007cf0b8c6"><div class="ttname"><a href="class_g_f_forms_model.html#a810671776f43dde77c42be007cf0b8c6">GFFormsModel\get_input_type</a></div><div class="ttdeci">static get_input_type($field)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l02217">forms_model.php:2217</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a4f3a8c6f620700754754e3c262cee663"><div class="ttname"><a href="class_g_f_forms_model.html#a4f3a8c6f620700754754e3c262cee663">GFFormsModel\is_field_hidden</a></div><div class="ttdeci">static is_field_hidden($form, $field, $field_values, $lead=null)</div><div class="ttdoc">Check whether a field is hidden via conditional logic. </div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l01697">forms_model.php:1697</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a5861b1ac8048f1af93bf65fd5d8cac7e"><div class="ttname"><a href="class_g_f_forms_model.html#a5861b1ac8048f1af93bf65fd5d8cac7e">GFFormsModel\get_field</a></div><div class="ttdeci">static get_field($form, $field_id)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l04057">forms_model.php:4057</a></div></div>
<div class="ttc" id="tmp_2wordpress-tests-lib_2includes_2bootstrap_8php_html_a0283d24a47d4e01fa8846cac8a63d308"><div class="ttname"><a href="tmp_2wordpress-tests-lib_2includes_2bootstrap_8php.html#a0283d24a47d4e01fa8846cac8a63d308">$phpmailer</a></div><div class="ttdeci">global $phpmailer</div><div class="ttdef"><b>Definition:</b> <a href="tmp_2wordpress-tests-lib_2includes_2bootstrap_8php_source.html#l00019">tmp/wordpress-tests-lib/includes/bootstrap.php:19</a></div></div>
<div class="ttc" id="namespacephp_html"><div class="ttname"><a href="namespacephp.html">php</a></div></div>
<div class="ttc" id="vars_8php_html_af86a2f432ec61469bce462a43cf1c7ee"><div class="ttname"><a href="vars_8php.html#af86a2f432ec61469bce462a43cf1c7ee">$is_chrome</a></div><div class="ttdeci">global $is_chrome</div><div class="ttdef"><b>Definition:</b> <a href="vars_8php_source.html#l00018">vars.php:18</a></div></div>
<div class="ttc" id="class_walker_html"><div class="ttname"><a href="class_walker.html">Walker</a></div><div class="ttdef"><b>Definition:</b> <a href="class-wp-walker_8php_source.html#l00014">class-wp-walker.php:14</a></div></div>
<div class="ttc" id="tools_8php_html_a475a6a63b85186663d34151bcbd21590"><div class="ttname"><a href="tools_8php.html#a475a6a63b85186663d34151bcbd21590">$tags</a></div><div class="ttdeci">$tags</div><div class="ttdef"><b>Definition:</b> <a href="tools_8php_source.html#l00100">tools.php:100</a></div></div>
<div class="ttc" id="delete__link_8php_html_adc851f7a62250e75df0490c0280aef4c"><div class="ttname"><a href="delete__link_8php.html#adc851f7a62250e75df0490c0280aef4c">$attributes</a></div><div class="ttdeci">$attributes</div><div class="ttdef"><b>Definition:</b> <a href="delete__link_8php_source.html#l00020">delete_link.php:20</a></div></div>
<div class="ttc" id="class_g_f_form_display_html_ae2964cce5c001907bdbc15a25ae1daab"><div class="ttname"><a href="class_g_f_form_display.html#ae2964cce5c001907bdbc15a25ae1daab">GFFormDisplay\get_embedded_forms</a></div><div class="ttdeci">static get_embedded_forms($post_content, &amp;$ajax)</div><div class="ttdef"><b>Definition:</b> <a href="form__display_8php_source.html#l01564">form_display.php:1564</a></div></div>
<div class="ttc" id="wp-admin_2widgets_8php_html_ab24faf4aa647cdcee494fc48524ad4ff"><div class="ttname"><a href="wp-admin_2widgets_8php.html#ab24faf4aa647cdcee494fc48524ad4ff">$errors</a></div><div class="ttdeci">$errors</div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2widgets_8php_source.html#l00339">wp-admin/widgets.php:339</a></div></div>
<div class="ttc" id="table-body_8php_html_a252ba022809910ea710a068fc1bab657"><div class="ttname"><a href="table-body_8php.html#a252ba022809910ea710a068fc1bab657">$class</a></div><div class="ttdeci">$class</div><div class="ttdef"><b>Definition:</b> <a href="table-body_8php_source.html#l00043">table-body.php:43</a></div></div>
<div class="ttc" id="admin_8php_html_acca3fdcdfc67e06cb49a87e476d364a8"><div class="ttname"><a href="admin_8php.html#acca3fdcdfc67e06cb49a87e476d364a8">$date_format</a></div><div class="ttdeci">$date_format</div><div class="ttdef"><b>Definition:</b> <a href="admin_8php_source.html#l00092">admin.php:92</a></div></div>
<div class="ttc" id="plugins_8php_html_ada8a7130088351710bb02ed622d6bf65"><div class="ttname"><a href="plugins_8php.html#ada8a7130088351710bb02ed622d6bf65">$plugin</a></div><div class="ttdeci">$plugin</div><div class="ttdef"><b>Definition:</b> <a href="plugins_8php_source.html#l00020">plugins.php:20</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_a5fa64d49f59b259090dd3b907ef3f369"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#a5fa64d49f59b259090dd3b907ef3f369">_deprecated_function</a></div><div class="ttdeci">_deprecated_function($function, $version, $replacement=null)</div><div class="ttdoc">Mark a function as deprecated and inform when it has been used. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l03573">wordpress/wp-includes/functions.php:3573</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a2db0d85a059a494987a8e8ef648e1c49"><div class="ttname"><a href="class_g_f_forms_model.html#a2db0d85a059a494987a8e8ef648e1c49">GFFormsModel\get_choice_text</a></div><div class="ttdeci">static get_choice_text($field, $value, $input_id=0)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l02537">forms_model.php:2537</a></div></div>
<div class="ttc" id="wp-admin_2includes_2misc_8php_html_ab7ae06a1286467d316308a676d8be0aa"><div class="ttname"><a href="wp-admin_2includes_2misc_8php.html#ab7ae06a1286467d316308a676d8be0aa">insert_with_markers</a></div><div class="ttdeci">insert_with_markers($filename, $marker, $insertion)</div><div class="ttdoc">Inserts an array of strings into a file (.htaccess ), placing it between BEGIN and END markers...</div><div class="ttdef"><b>Definition:</b> <a href="wp-admin_2includes_2misc_8php_source.html#l00104">wp-admin/includes/misc.php:104</a></div></div>
<div class="ttc" id="schema_8php_html_aaac3ddf81d405fac59e1dceeca05b0a7"><div class="ttname"><a href="schema_8php.html#aaac3ddf81d405fac59e1dceeca05b0a7">$wpdb</a></div><div class="ttdeci">global $wpdb</div><div class="ttdoc">Declare these as global in case schema.php is included from a function. </div><div class="ttdef"><b>Definition:</b> <a href="schema_8php_source.html#l00018">schema.php:18</a></div></div>
<div class="ttc" id="wp-config-sample_8php_html_a4dca144fafcc7bd3f71cb5778afcdd13"><div class="ttname"><a href="wp-config-sample_8php.html#a4dca144fafcc7bd3f71cb5778afcdd13">DB_PASSWORD</a></div><div class="ttdeci">const DB_PASSWORD</div><div class="ttdoc">MySQL database password. </div><div class="ttdef"><b>Definition:</b> <a href="wp-config-sample_8php_source.html#l00029">wp-config-sample.php:29</a></div></div>
<div class="ttc" id="menu_8php_html_a92d70a97331cc6fc0a79d9da50895be8"><div class="ttname"><a href="menu_8php.html#a92d70a97331cc6fc0a79d9da50895be8">$types</a></div><div class="ttdeci">$types</div><div class="ttdef"><b>Definition:</b> <a href="menu_8php_source.html#l00090">menu.php:90</a></div></div>
<div class="ttc" id="option_8php_html_a5f714ed7fb1ec27740c1e8a8e441b178"><div class="ttname"><a href="option_8php.html#a5f714ed7fb1ec27740c1e8a8e441b178">delete_transient</a></div><div class="ttdeci">delete_transient($transient)</div><div class="ttdoc">Delete a transient. </div><div class="ttdef"><b>Definition:</b> <a href="option_8php_source.html#l00560">option.php:560</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_af7ccbb4fe49b4877219cbdbddecd7f77"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#af7ccbb4fe49b4877219cbdbddecd7f77">mysql2date</a></div><div class="ttdeci">mysql2date($format, $date, $translate=true)</div><div class="ttdoc">Convert given date string into a different format. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l00026">wordpress/wp-includes/functions.php:26</a></div></div>
<div class="ttc" id="wordpress_2wp-includes_2functions_8php_html_ad4a24ba6dbefcab84554fda62013864d"><div class="ttname"><a href="wordpress_2wp-includes_2functions_8php.html#ad4a24ba6dbefcab84554fda62013864d">is_ssl</a></div><div class="ttdeci">is_ssl()</div><div class="ttdoc">Determine if SSL is used. </div><div class="ttdef"><b>Definition:</b> <a href="wordpress_2wp-includes_2functions_8php_source.html#l03943">wordpress/wp-includes/functions.php:3943</a></div></div>
<div class="ttc" id="forms__model_8php_html_af6b814528487d7fcd3f8cc5a6fdaef75"><div class="ttname"><a href="forms__model_8php.html#af6b814528487d7fcd3f8cc5a6fdaef75">gform_get_meta</a></div><div class="ttdeci">gform_get_meta($entry_id, $meta_key)</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l05268">forms_model.php:5268</a></div></div>
<div class="ttc" id="about_8php_html_a3b392f5a691b803e728f1fb42b35f6e1"><div class="ttname"><a href="about_8php.html#a3b392f5a691b803e728f1fb42b35f6e1">$locale</a></div><div class="ttdeci">$locale</div><div class="ttdef"><b>Definition:</b> <a href="about_8php_source.html#l00025">about.php:25</a></div></div>
<div class="ttc" id="gquiz__grade_8php_html_a83e4d6721f3491a4fd780dbd3ce1a3c0"><div class="ttname"><a href="gquiz__grade_8php.html#a83e4d6721f3491a4fd780dbd3ce1a3c0">$field</a></div><div class="ttdeci">$field</div><div class="ttdef"><b>Definition:</b> <a href="gquiz__grade_8php_source.html#l00011">gquiz_grade.php:11</a></div></div>
<div class="ttc" id="edit-form-advanced_8php_html_a866e7f0f003101850a78f372dd07bd2a"><div class="ttname"><a href="edit-form-advanced_8php.html#a866e7f0f003101850a78f372dd07bd2a">__</a></div><div class="ttdeci">if(current_theme_supports( 'post-formats')&amp;&amp;post_type_supports($post_type, 'post-formats')) add_meta_box( 'formatdiv'foreach(get_object_taxonomies($post) as $tax_name) if($thumbnail_support &amp;&amp;current_user_can( 'upload_files')) add_meta_box('postimagediv'if(post_type_supports($post_type, 'excerpt')) add_meta_box('postexcerpt' __('Excerpt')</div><div class="ttdef"><b>Definition:</b> <a href="edit-form-advanced_8php_source.html#l00269">edit-form-advanced.php:269</a></div></div>
<div class="ttc" id="class_g_f_forms_model_html_a4cfcc02ac08a7e9f732d21866eab20b5"><div class="ttname"><a href="class_g_f_forms_model.html#a4cfcc02ac08a7e9f732d21866eab20b5">GFFormsModel\is_html5_enabled</a></div><div class="ttdeci">static is_html5_enabled()</div><div class="ttdef"><b>Definition:</b> <a href="forms__model_8php_source.html#l04081">forms_model.php:4081</a></div></div>
<div class="ttc" id="capabilities_8php_html_a3cea61656956bc24826e04276a5847fc"><div class="ttname"><a href="capabilities_8php.html#a3cea61656956bc24826e04276a5847fc">current_user_can</a></div><div class="ttdeci">current_user_can($capability)</div><div class="ttdoc">Whether the current user has a specific capability. </div><div class="ttdef"><b>Definition:</b> <a href="capabilities_8php_source.html#l00423">capabilities.php:423</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/>
<script type="text/javascript">
    jQuery( document ).ready( function( $ ) {
        $( 'a.anchor[id^=_filters],a.anchor[id^=_actions]' ).each( function() {
            $( this )
                .text('#')
                .attr( 'href', function() {
                    return '#' + $( this ).attr( 'id' );
                }).prependTo( $( this ).parent('dt' ).next('dd') );
        });
    });
</script>
</body>
</html>
